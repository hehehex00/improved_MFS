/*! For license information please see main.02b08a7b.js.LICENSE.txt */
(()=>{var t={5513:(t,e,n)=>{"use strict";n.d(e,{A:()=>it});var r=function(){function t(t){var e=this;this._insertTag=function(t){var n;n=0===e.tags.length?e.insertionPoint?e.insertionPoint.nextSibling:e.prepend?e.container.firstChild:e.before:e.tags[e.tags.length-1].nextSibling,e.container.insertBefore(t,n),e.tags.push(t)},this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}(this));var e=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(e);try{n.insertRule(t,n.cssRules.length)}catch(r){0}}else e.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){return t.parentNode&&t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0},t}(),i=Math.abs,o=String.fromCharCode,s=Object.assign;function a(t){return t.trim()}function l(t,e,n){return t.replace(e,n)}function c(t,e){return t.indexOf(e)}function u(t,e){return 0|t.charCodeAt(e)}function d(t,e,n){return t.slice(e,n)}function h(t){return t.length}function f(t){return t.length}function p(t,e){return e.push(t),t}var g=1,m=1,y=0,v=0,b=0,_="";function w(t,e,n,r,i,o,s){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:g,column:m,length:s,return:""}}function x(t,e){return s(w("",null,null,"",null,null,0),t,{length:-t.length},e)}function S(){return b=v>0?u(_,--v):0,m--,10===b&&(m=1,g--),b}function A(){return b=v<y?u(_,v++):0,m++,10===b&&(m=1,g++),b}function E(){return u(_,v)}function T(){return v}function P(t,e){return d(_,t,e)}function C(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function I(t){return g=m=1,y=h(_=t),v=0,[]}function M(t){return _="",t}function k(t){return a(P(v-1,R(91===t?t+2:40===t?t+1:t)))}function O(t){for(;(b=E())&&b<33;)A();return C(t)>2||C(b)>3?"":" "}function L(t,e){for(;--e&&A()&&!(b<48||b>102||b>57&&b<65||b>70&&b<97););return P(t,T()+(e<6&&32==E()&&32==A()))}function R(t){for(;A();)switch(b){case t:return v;case 34:case 39:34!==t&&39!==t&&R(b);break;case 40:41===t&&R(t);break;case 92:A()}return v}function F(t,e){for(;A()&&t+b!==57&&(t+b!==84||47!==E()););return"/*"+P(e,v-1)+"*"+o(47===t?t:A())}function B(t){for(;!C(E());)A();return P(t,v)}var N="-ms-",z="-moz-",D="-webkit-",j="comm",U="rule",V="decl",W="@keyframes";function G(t,e){for(var n="",r=f(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function H(t,e,n,r){switch(t.type){case"@layer":if(t.children.length)break;case"@import":case V:return t.return=t.return||t.value;case j:return"";case W:return t.return=t.value+"{"+G(t.children,r)+"}";case U:t.value=t.props.join(",")}return h(n=G(t.children,r))?t.return=t.value+"{"+n+"}":""}function q(t){return M(Y("",null,null,null,[""],t=I(t),0,[0],t))}function Y(t,e,n,r,i,s,a,d,f){for(var g=0,m=0,y=a,v=0,b=0,_=0,w=1,x=1,P=1,C=0,I="",M=i,R=s,N=r,z=I;x;)switch(_=C,C=A()){case 40:if(108!=_&&58==u(z,y-1)){-1!=c(z+=l(k(C),"&","&\f"),"&\f")&&(P=-1);break}case 34:case 39:case 91:z+=k(C);break;case 9:case 10:case 13:case 32:z+=O(_);break;case 92:z+=L(T()-1,7);continue;case 47:switch(E()){case 42:case 47:p(Z(F(A(),T()),e,n),f);break;default:z+="/"}break;case 123*w:d[g++]=h(z)*P;case 125*w:case 59:case 0:switch(C){case 0:case 125:x=0;case 59+m:-1==P&&(z=l(z,/\f/g,"")),b>0&&h(z)-y&&p(b>32?K(z+";",r,n,y-1):K(l(z," ","")+";",r,n,y-2),f);break;case 59:z+=";";default:if(p(N=X(z,e,n,g,m,i,d,I,M=[],R=[],y),s),123===C)if(0===m)Y(z,e,N,N,M,s,y,d,R);else switch(99===v&&110===u(z,3)?100:v){case 100:case 108:case 109:case 115:Y(t,N,N,r&&p(X(t,N,N,0,0,i,d,I,i,M=[],y),R),i,R,y,d,r?M:R);break;default:Y(z,N,N,N,[""],R,0,d,R)}}g=m=b=0,w=P=1,I=z="",y=a;break;case 58:y=1+h(z),b=_;default:if(w<1)if(123==C)--w;else if(125==C&&0==w++&&125==S())continue;switch(z+=o(C),C*w){case 38:P=m>0?1:(z+="\f",-1);break;case 44:d[g++]=(h(z)-1)*P,P=1;break;case 64:45===E()&&(z+=k(A())),v=E(),m=y=h(I=z+=B(T())),C++;break;case 45:45===_&&2==h(z)&&(w=0)}}return s}function X(t,e,n,r,o,s,c,u,h,p,g){for(var m=o-1,y=0===o?s:[""],v=f(y),b=0,_=0,x=0;b<r;++b)for(var S=0,A=d(t,m+1,m=i(_=c[b])),E=t;S<v;++S)(E=a(_>0?y[S]+" "+A:l(A,/&\f/g,y[S])))&&(h[x++]=E);return w(t,e,n,0===o?U:u,h,p,g)}function Z(t,e,n){return w(t,e,n,j,o(b),d(t,2,-2),0)}function K(t,e,n,r){return w(t,e,n,V,d(t,0,r),d(t,r+1,-1),r)}var $=function(t,e,n){for(var r=0,i=0;r=i,i=E(),38===r&&12===i&&(e[n]=1),!C(i);)A();return P(t,v)},Q=function(t,e){return M(function(t,e){var n=-1,r=44;do{switch(C(r)){case 0:38===r&&12===E()&&(e[n]=1),t[n]+=$(v-1,e,n);break;case 2:t[n]+=k(r);break;case 4:if(44===r){t[++n]=58===E()?"&\f":"",e[n]=t[n].length;break}default:t[n]+=o(r)}}while(r=A());return t}(I(t),e))},J=new WeakMap,tt=function(t){if("rule"===t.type&&t.parent&&!(t.length<1)){for(var e=t.value,n=t.parent,r=t.column===n.column&&t.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==t.props.length||58===e.charCodeAt(0)||J.get(n))&&!r){J.set(t,!0);for(var i=[],o=Q(e,i),s=n.props,a=0,l=0;a<o.length;a++)for(var c=0;c<s.length;c++,l++)t.props[l]=i[a]?o[a].replace(/&\f/g,s[c]):s[c]+" "+o[a]}}},et=function(t){if("decl"===t.type){var e=t.value;108===e.charCodeAt(0)&&98===e.charCodeAt(2)&&(t.return="",t.value="")}};function nt(t,e){switch(function(t,e){return 45^u(t,0)?(((e<<2^u(t,0))<<2^u(t,1))<<2^u(t,2))<<2^u(t,3):0}(t,e)){case 5103:return D+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return D+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return D+t+z+t+N+t+t;case 6828:case 4268:return D+t+N+t+t;case 6165:return D+t+N+"flex-"+t+t;case 5187:return D+t+l(t,/(\w+).+(:[^]+)/,D+"box-$1$2"+N+"flex-$1$2")+t;case 5443:return D+t+N+"flex-item-"+l(t,/flex-|-self/,"")+t;case 4675:return D+t+N+"flex-line-pack"+l(t,/align-content|flex-|-self/,"")+t;case 5548:return D+t+N+l(t,"shrink","negative")+t;case 5292:return D+t+N+l(t,"basis","preferred-size")+t;case 6060:return D+"box-"+l(t,"-grow","")+D+t+N+l(t,"grow","positive")+t;case 4554:return D+l(t,/([^-])(transform)/g,"$1"+D+"$2")+t;case 6187:return l(l(l(t,/(zoom-|grab)/,D+"$1"),/(image-set)/,D+"$1"),t,"")+t;case 5495:case 3959:return l(t,/(image-set\([^]*)/,D+"$1$`$1");case 4968:return l(l(t,/(.+:)(flex-)?(.*)/,D+"box-pack:$3"+N+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+D+t+t;case 4095:case 3583:case 4068:case 2532:return l(t,/(.+)-inline(.+)/,D+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(h(t)-1-e>6)switch(u(t,e+1)){case 109:if(45!==u(t,e+4))break;case 102:return l(t,/(.+:)(.+)-([^]+)/,"$1"+D+"$2-$3$1"+z+(108==u(t,e+3)?"$3":"$2-$3"))+t;case 115:return~c(t,"stretch")?nt(l(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(115!==u(t,e+1))break;case 6444:switch(u(t,h(t)-3-(~c(t,"!important")&&10))){case 107:return l(t,":",":"+D)+t;case 101:return l(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+D+(45===u(t,14)?"inline-":"")+"box$3$1"+D+"$2$3$1"+N+"$2box$3")+t}break;case 5936:switch(u(t,e+11)){case 114:return D+t+N+l(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return D+t+N+l(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return D+t+N+l(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return D+t+N+t+t}return t}var rt=[function(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case V:t.return=nt(t.value,t.length);break;case W:return G([x(t,{value:l(t.value,"@","@"+D)})],r);case U:if(t.length)return function(t,e){return t.map(e).join("")}(t.props,(function(e){switch(function(t,e){return(t=e.exec(t))?t[0]:t}(e,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return G([x(t,{props:[l(e,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return G([x(t,{props:[l(e,/:(plac\w+)/,":"+D+"input-$1")]}),x(t,{props:[l(e,/:(plac\w+)/,":-moz-$1")]}),x(t,{props:[l(e,/:(plac\w+)/,N+"input-$1")]})],r)}return""}))}}],it=function(t){var e=t.key;if("css"===e){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(t){-1!==t.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(t),t.setAttribute("data-s",""))}))}var i=t.stylisPlugins||rt;var o,s,a={},l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),(function(t){for(var e=t.getAttribute("data-emotion").split(" "),n=1;n<e.length;n++)a[e[n]]=!0;l.push(t)}));var c,u,d=[H,(u=function(t){c.insert(t)},function(t){t.root||(t=t.return)&&u(t)})],h=function(t){var e=f(t);return function(n,r,i,o){for(var s="",a=0;a<e;a++)s+=t[a](n,r,i,o)||"";return s}}([tt,et].concat(i,d));s=function(t,e,n,r){c=n,G(q(t?t+"{"+e.styles+"}":e.styles),h),r&&(p.inserted[e.name]=!0)};var p={key:e,sheet:new r({key:e,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:s};return p.sheet.hydrate(l),p}},918:(t,e,n)=>{"use strict";function r(t){var e=Object.create(null);return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}n.d(e,{A:()=>r})},5756:(t,e,n)=>{"use strict";n.d(e,{C:()=>a,T:()=>c,i:()=>o,w:()=>l});var r=n(5043),i=n(5513),o=(n(2830),n(9436),!0),s=r.createContext("undefined"!==typeof HTMLElement?(0,i.A)({key:"css"}):null);var a=s.Provider,l=function(t){return(0,r.forwardRef)((function(e,n){var i=(0,r.useContext)(s);return t(e,i,n)}))};o||(l=function(t){return function(e){var n=(0,r.useContext)(s);return null===n?(n=(0,i.A)({key:"css"}),r.createElement(s.Provider,{value:n},t(e,n))):t(e,n)}});var c=r.createContext({})},3290:(t,e,n)=>{"use strict";n.d(e,{AH:()=>c,i7:()=>u,mL:()=>l});var r=n(5756),i=n(5043),o=n(1722),s=n(9436),a=n(2830),l=(n(5513),n(219),(0,r.w)((function(t,e){var n=t.styles,l=(0,a.J)([n],void 0,i.useContext(r.T));if(!r.i){for(var c,u=l.name,d=l.styles,h=l.next;void 0!==h;)u+=" "+h.name,d+=h.styles,h=h.next;var f=!0===e.compat,p=e.insert("",{name:u,styles:d},e.sheet,f);return f?null:i.createElement("style",((c={})["data-emotion"]=e.key+"-global "+u,c.dangerouslySetInnerHTML={__html:p},c.nonce=e.sheet.nonce,c))}var g=i.useRef();return(0,s.i)((function(){var t=e.key+"-global",n=new e.sheet.constructor({key:t,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),r=!1,i=document.querySelector('style[data-emotion="'+t+" "+l.name+'"]');return e.sheet.tags.length&&(n.before=e.sheet.tags[0]),null!==i&&(r=!0,i.setAttribute("data-emotion",t),n.hydrate([i])),g.current=[n,r],function(){n.flush()}}),[e]),(0,s.i)((function(){var t=g.current,n=t[0];if(t[1])t[1]=!1;else{if(void 0!==l.next&&(0,o.sk)(e,l.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}e.insert("",l,n,!1)}}),[e,l.name]),null})));function c(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,a.J)(e)}var u=function(){var t=c.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},2830:(t,e,n)=>{"use strict";n.d(e,{J:()=>p});var r={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},i=n(918),o=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,a=function(t){return 45===t.charCodeAt(1)},l=function(t){return null!=t&&"boolean"!==typeof t},c=(0,i.A)((function(t){return a(t)?t:t.replace(o,"-$&").toLowerCase()})),u=function(t,e){switch(t){case"animation":case"animationName":if("string"===typeof e)return e.replace(s,(function(t,e,n){return h={name:e,styles:n,next:h},e}))}return 1===r[t]||a(t)||"number"!==typeof e||0===e?e:e+"px"};function d(t,e,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return h={name:n.name,styles:n.styles,next:h},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)h={name:r.name,styles:r.styles,next:h},r=r.next;return n.styles+";"}return function(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=d(t,e,n[i])+";";else for(var o in n){var s=n[o];if("object"!==typeof s)null!=e&&void 0!==e[s]?r+=o+"{"+e[s]+"}":l(s)&&(r+=c(o)+":"+u(o,s)+";");else if(!Array.isArray(s)||"string"!==typeof s[0]||null!=e&&void 0!==e[s[0]]){var a=d(t,e,s);switch(o){case"animation":case"animationName":r+=c(o)+":"+a+";";break;default:r+=o+"{"+a+"}"}}else for(var h=0;h<s.length;h++)l(s[h])&&(r+=c(o)+":"+u(o,s[h])+";")}return r}(t,e,n);case"function":if(void 0!==t){var i=h,o=n(t);return h=i,d(t,e,o)}}if(null==e)return n;var s=e[n];return void 0!==s?s:n}var h,f=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var p=function(t,e,n){if(1===t.length&&"object"===typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var r=!0,i="";h=void 0;var o=t[0];null==o||void 0===o.raw?(r=!1,i+=d(n,e,o)):i+=o[0];for(var s=1;s<t.length;s++)i+=d(n,e,t[s]),r&&(i+=o[s]);f.lastIndex=0;for(var a,l="";null!==(a=f.exec(i));)l+="-"+a[1];var c=function(t){for(var e,n=0,r=0,i=t.length;i>=4;++r,i-=4)e=1540483477*(65535&(e=255&t.charCodeAt(r)|(255&t.charCodeAt(++r))<<8|(255&t.charCodeAt(++r))<<16|(255&t.charCodeAt(++r))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&t.charCodeAt(r+2))<<16;case 2:n^=(255&t.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:h}}},9436:(t,e,n)=>{"use strict";var r;n.d(e,{i:()=>a,s:()=>s});var i=n(5043),o=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,s=o||function(t){return t()},a=o||i.useLayoutEffect},1722:(t,e,n)=>{"use strict";n.d(e,{Rk:()=>r,SF:()=>i,sk:()=>o});function r(t,e,n){var r="";return n.split(" ").forEach((function(n){void 0!==t[n]?e.push(t[n]+";"):r+=n+" "})),r}var i=function(t,e,n){var r=t.key+"-"+e.name;!1===n&&void 0===t.registered[r]&&(t.registered[r]=e.styles)},o=function(t,e,n){i(t,e,n);var r=t.key+"-"+e.name;if(void 0===t.inserted[e.name]){var o=e;do{t.insert(e===o?"."+r:"",o,t.sheet,!0),o=o.next}while(void 0!==o)}}},869:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});n(5043);var r=n(3290),i=n(579);function o(t){const{styles:e,defaultTheme:n={}}=t,o="function"===typeof e?t=>{return e(void 0===(r=t)||null===r||0===Object.keys(r).length?n:t);var r}:e;return(0,i.jsx)(r.mL,{styles:o})}},3174:(t,e,n)=>{"use strict";n.r(e),n.d(e,{GlobalStyles:()=>S.A,StyledEngineProvider:()=>x,ThemeContext:()=>l.T,css:()=>v.AH,default:()=>A,internal_processStyles:()=>E,keyframes:()=>v.i7});var r=n(8168),i=n(5043),o=n(918),s=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,a=(0,o.A)((function(t){return s.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91})),l=n(5756),c=n(1722),u=n(2830),d=n(9436),h=a,f=function(t){return"theme"!==t},p=function(t){return"string"===typeof t&&t.charCodeAt(0)>96?h:f},g=function(t,e,n){var r;if(e){var i=e.shouldForwardProp;r=t.__emotion_forwardProp&&i?function(e){return t.__emotion_forwardProp(e)&&i(e)}:i}return"function"!==typeof r&&n&&(r=t.__emotion_forwardProp),r},m=function(t){var e=t.cache,n=t.serialized,r=t.isStringTag;return(0,c.SF)(e,n,r),(0,d.s)((function(){return(0,c.sk)(e,n,r)})),null},y=function t(e,n){var o,s,a=e.__emotion_real===e,d=a&&e.__emotion_base||e;void 0!==n&&(o=n.label,s=n.target);var h=g(e,n,a),f=h||p(d),y=!f("as");return function(){var v=arguments,b=a&&void 0!==e.__emotion_styles?e.__emotion_styles.slice(0):[];if(void 0!==o&&b.push("label:"+o+";"),null==v[0]||void 0===v[0].raw)b.push.apply(b,v);else{0,b.push(v[0][0]);for(var _=v.length,w=1;w<_;w++)b.push(v[w],v[0][w])}var x=(0,l.w)((function(t,e,n){var r=y&&t.as||d,o="",a=[],g=t;if(null==t.theme){for(var v in g={},t)g[v]=t[v];g.theme=i.useContext(l.T)}"string"===typeof t.className?o=(0,c.Rk)(e.registered,a,t.className):null!=t.className&&(o=t.className+" ");var _=(0,u.J)(b.concat(a),e.registered,g);o+=e.key+"-"+_.name,void 0!==s&&(o+=" "+s);var w=y&&void 0===h?p(r):f,x={};for(var S in t)y&&"as"===S||w(S)&&(x[S]=t[S]);return x.className=o,x.ref=n,i.createElement(i.Fragment,null,i.createElement(m,{cache:e,serialized:_,isStringTag:"string"===typeof r}),i.createElement(r,x))}));return x.displayName=void 0!==o?o:"Styled("+("string"===typeof d?d:d.displayName||d.name||"Component")+")",x.defaultProps=e.defaultProps,x.__emotion_real=x,x.__emotion_base=d,x.__emotion_styles=b,x.__emotion_forwardProp=h,Object.defineProperty(x,"toString",{value:function(){return"."+s}}),x.withComponent=function(e,i){return t(e,(0,r.A)({},n,i,{shouldForwardProp:g(x,i,!0)})).apply(void 0,b)},x}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(t){y[t]=y(t)}));var v=n(3290),b=n(5513),_=n(579);let w;function x(t){const{injectFirst:e,children:n}=t;return e&&w?(0,_.jsx)(l.C,{value:w,children:n}):n}"object"===typeof document&&(w=(0,b.A)({key:"css",prepend:!0}));var S=n(869);function A(t,e){return y(t,e)}const E=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}},7266:(t,e,n)=>{"use strict";var r=n(4994);e.X4=f,e.e$=p,e.eM=function(t,e){const n=h(t),r=h(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},e.a=g;var i=r(n(7245)),o=r(n(1098));function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,o.default)(t,e,n)}function a(t){t=t.slice(1);const e=new RegExp(".{1,".concat(t.length>=6?2:1,"}"),"g");let n=t.match(e);return n&&1===n[0].length&&(n=n.map((t=>t+t))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(((t,e)=>e<3?parseInt(t,16):Math.round(parseInt(t,16)/255*1e3)/1e3)).join(", "),")"):""}function l(t){if(t.type)return t;if("#"===t.charAt(0))return l(a(t));const e=t.indexOf("("),n=t.substring(0,e);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,i.default)(9,t));let r,o=t.substring(e+1,t.length-1);if("color"===n){if(o=o.split(" "),r=o.shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,i.default)(10,r))}else o=o.split(",");return o=o.map((t=>parseFloat(t))),{type:n,values:o,colorSpace:r}}const c=t=>{const e=l(t);return e.values.slice(0,3).map(((t,n)=>-1!==e.type.indexOf("hsl")&&0!==n?"".concat(t,"%"):t)).join(" ")};function u(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return-1!==e.indexOf("rgb")?r=r.map(((t,e)=>e<3?parseInt(t,10):t)):-1!==e.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==e.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(e,"(").concat(r,")")}function d(t){t=l(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,o=r*Math.min(i,1-i),s=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+n/30)%12;return i-o*Math.max(Math.min(e-3,9-e,1),-1)};let a="rgb";const c=[Math.round(255*s(0)),Math.round(255*s(8)),Math.round(255*s(4))];return"hsla"===t.type&&(a+="a",c.push(e[3])),u({type:a,values:c})}function h(t){let e="hsl"===(t=l(t)).type||"hsla"===t.type?l(d(t)).values:t.values;return e=e.map((e=>("color"!==t.type&&(e/=255),e<=.03928?e/12.92:((e+.055)/1.055)**2.4))),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function f(t,e){return t=l(t),e=s(e),"rgb"!==t.type&&"hsl"!==t.type||(t.type+="a"),"color"===t.type?t.values[3]="/".concat(e):t.values[3]=e,u(t)}function p(t,e){if(t=l(t),e=s(e),-1!==t.type.indexOf("hsl"))t.values[2]*=1-e;else if(-1!==t.type.indexOf("rgb")||-1!==t.type.indexOf("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return u(t)}function g(t,e){if(t=l(t),e=s(e),-1!==t.type.indexOf("hsl"))t.values[2]+=(100-t.values[2])*e;else if(-1!==t.type.indexOf("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(-1!==t.type.indexOf("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return u(t)}},8052:(t,e,n)=>{"use strict";var r=n(4994);e.Ay=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:e,defaultTheme:n=g,rootShouldForwardProp:r=p,slotShouldForwardProp:l=p}=t,u=t=>(0,c.default)((0,i.default)({},t,{theme:y((0,i.default)({},t,{defaultTheme:n,themeId:e}))}));return u.__mui_systemSx=!0,function(t){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.internal_processStyles)(t,(t=>t.filter((t=>!(null!=t&&t.__mui_systemSx)))));const{name:d,slot:f,skipVariantsResolver:g,skipSx:_,overridesResolver:w=v(m(f))}=c,x=(0,o.default)(c,h),S=void 0!==g?g:f&&"Root"!==f&&"root"!==f||!1,A=_||!1;let E=p;"Root"===f||"root"===f?E=r:f?E=l:function(t){return"string"===typeof t&&t.charCodeAt(0)>96}(t)&&(E=void 0);const T=(0,s.default)(t,(0,i.default)({shouldForwardProp:E,label:undefined},x)),P=t=>"function"===typeof t&&t.__emotion_real!==t||(0,a.isPlainObject)(t)?r=>b(t,(0,i.default)({},r,{theme:y({theme:r.theme,defaultTheme:n,themeId:e})})):t,C=function(r){let o=P(r);for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];const c=a?a.map(P):[];d&&w&&c.push((t=>{const r=y((0,i.default)({},t,{defaultTheme:n,themeId:e}));if(!r.components||!r.components[d]||!r.components[d].styleOverrides)return null;const o=r.components[d].styleOverrides,s={};return Object.entries(o).forEach((e=>{let[n,o]=e;s[n]=b(o,(0,i.default)({},t,{theme:r}))})),w(t,s)})),d&&!S&&c.push((t=>{var r;const o=y((0,i.default)({},t,{defaultTheme:n,themeId:e}));return b({variants:null==o||null==(r=o.components)||null==(r=r[d])?void 0:r.variants},(0,i.default)({},t,{theme:o}))})),A||c.push(u);const h=c.length-a.length;if(Array.isArray(r)&&h>0){const t=new Array(h).fill("");o=[...r,...t],o.raw=[...r.raw,...t]}const f=T(o,...c);return t.muiName&&(f.muiName=t.muiName),f};return T.withConfig&&(C.withConfig=T.withConfig),C}},e.MC=p;var i=r(n(4634)),o=r(n(4893)),s=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=f(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}(n(3174)),a=n(4534),l=(r(n(578)),r(n(2046)),r(n(4989))),c=r(n(9265));const u=["ownerState"],d=["variants"],h=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function f(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(f=function(t){return t?n:e})(t)}function p(t){return"ownerState"!==t&&"theme"!==t&&"sx"!==t&&"as"!==t}const g=(0,l.default)(),m=t=>t?t.charAt(0).toLowerCase()+t.slice(1):t;function y(t){let{defaultTheme:e,theme:n,themeId:r}=t;return i=n,0===Object.keys(i).length?e:n[r]||n;var i}function v(t){return t?(e,n)=>n[t]:null}function b(t,e){let{ownerState:n}=e,r=(0,o.default)(e,u);const s="function"===typeof t?t((0,i.default)({ownerState:n},r)):t;if(Array.isArray(s))return s.flatMap((t=>b(t,(0,i.default)({ownerState:n},r))));if(s&&"object"===typeof s&&Array.isArray(s.variants)){const{variants:t=[]}=s;let e=(0,o.default)(s,d);return t.forEach((t=>{let o=!0;"function"===typeof t.props?o=t.props((0,i.default)({ownerState:n},r,n)):Object.keys(t.props).forEach((e=>{(null==n?void 0:n[e])!==t.props[e]&&r[e]!==t.props[e]&&(o=!1)})),o&&(Array.isArray(e)||(e=[e]),e.push("function"===typeof t.style?t.style((0,i.default)({ownerState:n},r,n)):t.style))})),e}return s}},9751:(t,e,n)=>{"use strict";n.d(e,{EU:()=>s,NI:()=>o,vf:()=>a,zu:()=>r});const r={xs:0,sm:600,md:900,lg:1200,xl:1536},i={keys:["xs","sm","md","lg","xl"],up:t=>"@media (min-width:".concat(r[t],"px)")};function o(t,e,n){const o=t.theme||{};if(Array.isArray(e)){const t=o.breakpoints||i;return e.reduce(((r,i,o)=>(r[t.up(t.keys[o])]=n(e[o]),r)),{})}if("object"===typeof e){const t=o.breakpoints||i;return Object.keys(e).reduce(((i,o)=>{if(-1!==Object.keys(t.values||r).indexOf(o)){i[t.up(o)]=n(e[o],o)}else{const t=o;i[t]=e[t]}return i}),{})}return n(e)}function s(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var e;return(null==(e=t.keys)?void 0:e.reduce(((e,n)=>(e[t.up(n)]={},e)),{}))||{}}function a(t,e){return t.reduce(((t,e)=>{const n=t[e];return(!n||0===Object.keys(n).length)&&delete t[e],t}),e)}},9703:(t,e,n)=>{"use strict";function r(t,e){const n=this;if(n.vars&&"function"===typeof n.getColorSchemeSelector){return{[n.getColorSchemeSelector(t).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}}return n.palette.mode===t?e:{}}n.d(e,{A:()=>r})},4853:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var r=n(8587),i=n(8168);const o=["values","unit","step"],s=t=>{const e=Object.keys(t).map((e=>({key:e,val:t[e]})))||[];return e.sort(((t,e)=>t.val-e.val)),e.reduce(((t,e)=>(0,i.A)({},t,{[e.key]:e.val})),{})};function a(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:a=5}=t,l=(0,r.A)(t,o),c=s(e),u=Object.keys(c);function d(t){const r="number"===typeof e[t]?e[t]:t;return"@media (min-width:".concat(r).concat(n,")")}function h(t){const r="number"===typeof e[t]?e[t]:t;return"@media (max-width:".concat(r-a/100).concat(n,")")}function f(t,r){const i=u.indexOf(r);return"@media (min-width:".concat("number"===typeof e[t]?e[t]:t).concat(n,") and ")+"(max-width:".concat((-1!==i&&"number"===typeof e[u[i]]?e[u[i]]:r)-a/100).concat(n,")")}return(0,i.A)({keys:u,values:c,up:d,down:h,between:f,only:function(t){return u.indexOf(t)+1<u.length?f(t,u[u.indexOf(t)+1]):d(t)},not:function(t){const e=u.indexOf(t);return 0===e?d(u[1]):e===u.length-1?h(u[e]):f(t,u[u.indexOf(t)+1]).replace("@media","@media not all and")},unit:n},l)}},8280:(t,e,n)=>{"use strict";n.d(e,{A:()=>f});var r=n(8168),i=n(8587),o=n(3216),s=n(4853);const a={borderRadius:4};var l=n(8604);var c=n(8812),u=n(7758),d=n(9703);const h=["breakpoints","palette","spacing","shape"];const f=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:e={},palette:n={},spacing:f,shape:p={}}=t,g=(0,i.A)(t,h),m=(0,s.A)(e),y=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(t.mui)return t;const e=(0,l.LX)({spacing:t}),n=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((t=>{const n=e(t);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(f);let v=(0,o.A)({breakpoints:m,direction:"ltr",components:{},palette:(0,r.A)({mode:"light"},n),spacing:y,shape:(0,r.A)({},a,p)},g);v.applyStyles=d.A;for(var b=arguments.length,_=new Array(b>1?b-1:0),w=1;w<b;w++)_[w-1]=arguments[w];return v=_.reduce(((t,e)=>(0,o.A)(t,e)),v),v.unstable_sxConfig=(0,r.A)({},u.A,null==g?void 0:g.unstable_sxConfig),v.unstable_sx=function(t){return(0,c.A)({sx:t,theme:this})},v}},4989:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r.A,private_createBreakpoints:()=>i.A,unstable_applyStyles:()=>o.A});var r=n(8280),i=n(4853),o=n(9703)},3815:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(3216);const i=function(t,e){return e?(0,r.A)(t,e,{clone:!1}):t}},8604:(t,e,n)=>{"use strict";n.d(e,{LX:()=>p,MA:()=>f,_W:()=>g,Lc:()=>v,Ms:()=>b});var r=n(9751),i=n(7162),o=n(3815);const s={m:"margin",p:"padding"},a={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(t){const e={};return n=>(void 0===e[n]&&(e[n]=t(n)),e[n])}((t=>{if(t.length>2){if(!l[t])return[t];t=l[t]}const[e,n]=t.split(""),r=s[e],i=a[n]||"";return Array.isArray(i)?i.map((t=>r+t)):[r+i]})),u=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],d=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],h=[...u,...d];function f(t,e,n,r){var o;const s=null!=(o=(0,i.Yn)(t,e,!1))?o:n;return"number"===typeof s?t=>"string"===typeof t?t:s*t:Array.isArray(s)?t=>"string"===typeof t?t:s[t]:"function"===typeof s?s:()=>{}}function p(t){return f(t,"spacing",8)}function g(t,e){if("string"===typeof e||null==e)return e;const n=t(Math.abs(e));return e>=0?n:"number"===typeof n?-n:"-".concat(n)}function m(t,e,n,i){if(-1===e.indexOf(n))return null;const o=function(t,e){return n=>t.reduce(((t,r)=>(t[r]=g(e,n),t)),{})}(c(n),i),s=t[n];return(0,r.NI)(t,s,o)}function y(t,e){const n=p(t.theme);return Object.keys(t).map((r=>m(t,e,r,n))).reduce(o.A,{})}function v(t){return y(t,u)}function b(t){return y(t,d)}function _(t){return y(t,h)}v.propTypes={},v.filterProps=u,b.propTypes={},b.filterProps=d,_.propTypes={},_.filterProps=h},7162:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>a,BO:()=>s,Yn:()=>o});var r=n(410),i=n(9751);function o(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||"string"!==typeof e)return null;if(t&&t.vars&&n){const n="vars.".concat(e).split(".").reduce(((t,e)=>t&&t[e]?t[e]:null),t);if(null!=n)return n}return e.split(".").reduce(((t,e)=>t&&null!=t[e]?t[e]:null),t)}function s(t,e,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof t?t(n):Array.isArray(t)?t[n]||i:o(t,n)||i,e&&(r=e(r,i,t)),r}const a=function(t){const{prop:e,cssProperty:n=t.prop,themeKey:a,transform:l}=t,c=t=>{if(null==t[e])return null;const c=t[e],u=o(t.theme,a)||{};return(0,i.NI)(t,c,(t=>{let i=s(u,l,t);return t===i&&"string"===typeof t&&(i=s(u,l,"".concat(e).concat("default"===t?"":(0,r.A)(t)),t)),!1===n?i:{[n]:i}}))};return c.propTypes={},c.filterProps=[e],c}},7758:(t,e,n)=>{"use strict";n.d(e,{A:()=>R});var r=n(8604),i=n(7162),o=n(3815);const s=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.reduce(((t,e)=>(e.filterProps.forEach((n=>{t[n]=e})),t)),{}),i=t=>Object.keys(t).reduce(((e,n)=>r[n]?(0,o.A)(e,r[n](t)):e),{});return i.propTypes={},i.filterProps=e.reduce(((t,e)=>t.concat(e.filterProps)),[]),i};var a=n(9751);function l(t){return"number"!==typeof t?t:"".concat(t,"px solid")}function c(t,e){return(0,i.Ay)({prop:t,themeKey:"borders",transform:e})}const u=c("border",l),d=c("borderTop",l),h=c("borderRight",l),f=c("borderBottom",l),p=c("borderLeft",l),g=c("borderColor"),m=c("borderTopColor"),y=c("borderRightColor"),v=c("borderBottomColor"),b=c("borderLeftColor"),_=c("outline",l),w=c("outlineColor"),x=t=>{if(void 0!==t.borderRadius&&null!==t.borderRadius){const e=(0,r.MA)(t.theme,"shape.borderRadius",4,"borderRadius"),n=t=>({borderRadius:(0,r._W)(e,t)});return(0,a.NI)(t,t.borderRadius,n)}return null};x.propTypes={},x.filterProps=["borderRadius"];s(u,d,h,f,p,g,m,y,v,b,x,_,w);const S=t=>{if(void 0!==t.gap&&null!==t.gap){const e=(0,r.MA)(t.theme,"spacing",8,"gap"),n=t=>({gap:(0,r._W)(e,t)});return(0,a.NI)(t,t.gap,n)}return null};S.propTypes={},S.filterProps=["gap"];const A=t=>{if(void 0!==t.columnGap&&null!==t.columnGap){const e=(0,r.MA)(t.theme,"spacing",8,"columnGap"),n=t=>({columnGap:(0,r._W)(e,t)});return(0,a.NI)(t,t.columnGap,n)}return null};A.propTypes={},A.filterProps=["columnGap"];const E=t=>{if(void 0!==t.rowGap&&null!==t.rowGap){const e=(0,r.MA)(t.theme,"spacing",8,"rowGap"),n=t=>({rowGap:(0,r._W)(e,t)});return(0,a.NI)(t,t.rowGap,n)}return null};E.propTypes={},E.filterProps=["rowGap"];s(S,A,E,(0,i.Ay)({prop:"gridColumn"}),(0,i.Ay)({prop:"gridRow"}),(0,i.Ay)({prop:"gridAutoFlow"}),(0,i.Ay)({prop:"gridAutoColumns"}),(0,i.Ay)({prop:"gridAutoRows"}),(0,i.Ay)({prop:"gridTemplateColumns"}),(0,i.Ay)({prop:"gridTemplateRows"}),(0,i.Ay)({prop:"gridTemplateAreas"}),(0,i.Ay)({prop:"gridArea"}));function T(t,e){return"grey"===e?e:t}s((0,i.Ay)({prop:"color",themeKey:"palette",transform:T}),(0,i.Ay)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:T}),(0,i.Ay)({prop:"backgroundColor",themeKey:"palette",transform:T}));function P(t){return t<=1&&0!==t?"".concat(100*t,"%"):t}const C=(0,i.Ay)({prop:"width",transform:P}),I=t=>{if(void 0!==t.maxWidth&&null!==t.maxWidth){const e=e=>{var n,r;const i=(null==(n=t.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[e])||a.zu[e];return i?"px"!==(null==(r=t.theme)||null==(r=r.breakpoints)?void 0:r.unit)?{maxWidth:"".concat(i).concat(t.theme.breakpoints.unit)}:{maxWidth:i}:{maxWidth:P(e)}};return(0,a.NI)(t,t.maxWidth,e)}return null};I.filterProps=["maxWidth"];const M=(0,i.Ay)({prop:"minWidth",transform:P}),k=(0,i.Ay)({prop:"height",transform:P}),O=(0,i.Ay)({prop:"maxHeight",transform:P}),L=(0,i.Ay)({prop:"minHeight",transform:P}),R=((0,i.Ay)({prop:"size",cssProperty:"width",transform:P}),(0,i.Ay)({prop:"size",cssProperty:"height",transform:P}),s(C,I,M,k,O,L,(0,i.Ay)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:l},borderTop:{themeKey:"borders",transform:l},borderRight:{themeKey:"borders",transform:l},borderBottom:{themeKey:"borders",transform:l},borderLeft:{themeKey:"borders",transform:l},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:l},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:x},color:{themeKey:"palette",transform:T},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:T},backgroundColor:{themeKey:"palette",transform:T},p:{style:r.Ms},pt:{style:r.Ms},pr:{style:r.Ms},pb:{style:r.Ms},pl:{style:r.Ms},px:{style:r.Ms},py:{style:r.Ms},padding:{style:r.Ms},paddingTop:{style:r.Ms},paddingRight:{style:r.Ms},paddingBottom:{style:r.Ms},paddingLeft:{style:r.Ms},paddingX:{style:r.Ms},paddingY:{style:r.Ms},paddingInline:{style:r.Ms},paddingInlineStart:{style:r.Ms},paddingInlineEnd:{style:r.Ms},paddingBlock:{style:r.Ms},paddingBlockStart:{style:r.Ms},paddingBlockEnd:{style:r.Ms},m:{style:r.Lc},mt:{style:r.Lc},mr:{style:r.Lc},mb:{style:r.Lc},ml:{style:r.Lc},mx:{style:r.Lc},my:{style:r.Lc},margin:{style:r.Lc},marginTop:{style:r.Lc},marginRight:{style:r.Lc},marginBottom:{style:r.Lc},marginLeft:{style:r.Lc},marginX:{style:r.Lc},marginY:{style:r.Lc},marginInline:{style:r.Lc},marginInlineStart:{style:r.Lc},marginInlineEnd:{style:r.Lc},marginBlock:{style:r.Lc},marginBlockStart:{style:r.Lc},marginBlockEnd:{style:r.Lc},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:S},rowGap:{style:E},columnGap:{style:A},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:P},maxWidth:{style:I},minWidth:{transform:P},height:{transform:P},maxHeight:{transform:P},minHeight:{transform:P},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},9265:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r.A,extendSxProp:()=>u,unstable_createStyleFunctionSx:()=>r.k,unstable_defaultSxConfig:()=>a.A});var r=n(8812),i=n(8168),o=n(8587),s=n(3216),a=n(7758);const l=["sx"],c=t=>{var e,n;const r={systemProps:{},otherProps:{}},i=null!=(e=null==t||null==(n=t.theme)?void 0:n.unstable_sxConfig)?e:a.A;return Object.keys(t).forEach((e=>{i[e]?r.systemProps[e]=t[e]:r.otherProps[e]=t[e]})),r};function u(t){const{sx:e}=t,n=(0,o.A)(t,l),{systemProps:r,otherProps:a}=c(n);let u;return u=Array.isArray(e)?[r,...e]:"function"===typeof e?function(){const t=e(...arguments);return(0,s.Q)(t)?(0,i.A)({},r,t):r}:(0,i.A)({},r,e),(0,i.A)({},a,{sx:u})}},8812:(t,e,n)=>{"use strict";n.d(e,{A:()=>u,k:()=>l});var r=n(410),i=n(3815),o=n(7162),s=n(9751),a=n(7758);function l(){function t(t,e,n,i){const a={[t]:e,theme:n},l=i[t];if(!l)return{[t]:e};const{cssProperty:c=t,themeKey:u,transform:d,style:h}=l;if(null==e)return null;if("typography"===u&&"inherit"===e)return{[t]:e};const f=(0,o.Yn)(n,u)||{};if(h)return h(a);return(0,s.NI)(a,e,(e=>{let n=(0,o.BO)(f,d,e);return e===n&&"string"===typeof e&&(n=(0,o.BO)(f,d,"".concat(t).concat("default"===e?"":(0,r.A)(e)),e)),!1===c?n:{[c]:n}}))}return function e(n){var r;const{sx:o,theme:l={}}=n||{};if(!o)return null;const c=null!=(r=l.unstable_sxConfig)?r:a.A;function u(n){let r=n;if("function"===typeof n)r=n(l);else if("object"!==typeof n)return n;if(!r)return null;const o=(0,s.EU)(l.breakpoints),a=Object.keys(o);let u=o;return Object.keys(r).forEach((n=>{const o=(a=r[n],d=l,"function"===typeof a?a(d):a);var a,d;if(null!==o&&void 0!==o)if("object"===typeof o)if(c[n])u=(0,i.A)(u,t(n,o,l,c));else{const t=(0,s.NI)({theme:l},o,(t=>({[n]:t})));!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.reduce(((t,e)=>t.concat(Object.keys(e))),[]),i=new Set(r);return e.every((t=>i.size===Object.keys(t).length))}(t,o)?u=(0,i.A)(u,t):u[n]=e({sx:o,theme:l})}else u=(0,i.A)(u,t(n,o,l,c))})),(0,s.vf)(a,u)}return Array.isArray(o)?o.map(u):u(o)}}const c=l();c.filterProps=["sx"];const u=c},410:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(6632);function i(t){if("string"!==typeof t)throw new Error((0,r.A)(7));return t.charAt(0).toUpperCase()+t.slice(1)}},578:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r.A});var r=n(410)},1098:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const r=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(e,Math.min(t,n))}},3216:(t,e,n)=>{"use strict";n.d(e,{A:()=>s,Q:()=>i});var r=n(8168);function i(t){if("object"!==typeof t||null===t)return!1;const e=Object.getPrototypeOf(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function o(t){if(!i(t))return t;const e={};return Object.keys(t).forEach((n=>{e[n]=o(t[n])})),e}function s(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const a=n.clone?(0,r.A)({},t):t;return i(t)&&i(e)&&Object.keys(e).forEach((r=>{"__proto__"!==r&&(i(e[r])&&r in t&&i(t[r])?a[r]=s(t[r],e[r],n):n.clone?a[r]=i(e[r])?o(e[r]):e[r]:a[r]=e[r])})),a}},4534:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r.A,isPlainObject:()=>r.Q});var r=n(3216)},6632:(t,e,n)=>{"use strict";function r(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}n.d(e,{A:()=>r})},7245:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r.A});var r=n(6632)},2046:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>l,getFunctionName:()=>o});var r=n(2086);const i=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function o(t){const e="".concat(t).match(i);return e&&e[1]||""}function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t.displayName||t.name||o(t)||e}function a(t,e,n){const r=s(e);return t.displayName||(""!==r?"".concat(n,"(").concat(r,")"):n)}function l(t){if(null!=t){if("string"===typeof t)return t;if("function"===typeof t)return s(t,"Component");if("object"===typeof t)switch(t.$$typeof){case r.ForwardRef:return a(t,t.render,"ForwardRef");case r.Memo:return a(t,t.type,"memo");default:return}}}},973:t=>{"use strict";function e(t,e,r){r=r||2;var o,s,a,l,d,h,p,g=e&&e.length,m=g?e[0]*r:t.length,y=n(t,0,m,r,!0),v=[];if(!y||y.next===y.prev)return v;if(g&&(y=function(t,e,r,i){var o,s,a,l=[];for(o=0,s=e.length;o<s;o++)(a=n(t,e[o]*i,o<s-1?e[o+1]*i:t.length,i,!1))===a.next&&(a.steiner=!0),l.push(f(a));for(l.sort(c),o=0;o<l.length;o++)r=u(l[o],r);return r}(t,e,y,r)),t.length>80*r){o=a=t[0],s=l=t[1];for(var b=r;b<m;b+=r)(d=t[b])<o&&(o=d),(h=t[b+1])<s&&(s=h),d>a&&(a=d),h>l&&(l=h);p=0!==(p=Math.max(a-o,l-s))?32767/p:0}return i(y,v,r,o,s,p,0),v}function n(t,e,n,r,i){var o,s;if(i===T(t,e,n,r)>0)for(o=e;o<n;o+=r)s=S(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=S(o,t[o],t[o+1],s);return s&&y(s,s.next)&&(A(s),s=s.next),s}function r(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!y(r,r.next)&&0!==m(r.prev,r,r.next))r=r.next;else{if(A(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function i(t,e,n,c,u,d,f){if(t){!f&&d&&function(t,e,n,r){var i=t;do{0===i.z&&(i.z=h(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,l,c=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ);e++);for(l=c;a>0||l>0&&r;)0!==a&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(s>1)}(i)}(t,c,u,d);for(var p,g,m=t;t.prev!==t.next;)if(p=t.prev,g=t.next,d?s(t,c,u,d):o(t))e.push(p.i/n|0),e.push(t.i/n|0),e.push(g.i/n|0),A(t),t=g.next,m=g.next;else if((t=g)===m){f?1===f?i(t=a(r(t),e,n),e,n,c,u,d,2):2===f&&l(t,e,n,c,u,d):i(r(t),e,n,c,u,d,1);break}}}function o(t){var e=t.prev,n=t,r=t.next;if(m(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,s=r.x,a=e.y,l=n.y,c=r.y,u=i<o?i<s?i:s:o<s?o:s,d=a<l?a<c?a:c:l<c?l:c,h=i>o?i>s?i:s:o>s?o:s,f=a>l?a>c?a:c:l>c?l:c,g=r.next;g!==e;){if(g.x>=u&&g.x<=h&&g.y>=d&&g.y<=f&&p(i,a,o,l,s,c,g.x,g.y)&&m(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function s(t,e,n,r){var i=t.prev,o=t,s=t.next;if(m(i,o,s)>=0)return!1;for(var a=i.x,l=o.x,c=s.x,u=i.y,d=o.y,f=s.y,g=a<l?a<c?a:c:l<c?l:c,y=u<d?u<f?u:f:d<f?d:f,v=a>l?a>c?a:c:l>c?l:c,b=u>d?u>f?u:f:d>f?d:f,_=h(g,y,e,n,r),w=h(v,b,e,n,r),x=t.prevZ,S=t.nextZ;x&&x.z>=_&&S&&S.z<=w;){if(x.x>=g&&x.x<=v&&x.y>=y&&x.y<=b&&x!==i&&x!==s&&p(a,u,l,d,c,f,x.x,x.y)&&m(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,S.x>=g&&S.x<=v&&S.y>=y&&S.y<=b&&S!==i&&S!==s&&p(a,u,l,d,c,f,S.x,S.y)&&m(S.prev,S,S.next)>=0)return!1;S=S.nextZ}for(;x&&x.z>=_;){if(x.x>=g&&x.x<=v&&x.y>=y&&x.y<=b&&x!==i&&x!==s&&p(a,u,l,d,c,f,x.x,x.y)&&m(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;S&&S.z<=w;){if(S.x>=g&&S.x<=v&&S.y>=y&&S.y<=b&&S!==i&&S!==s&&p(a,u,l,d,c,f,S.x,S.y)&&m(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function a(t,e,n){var i=t;do{var o=i.prev,s=i.next.next;!y(o,s)&&v(o,i,i.next,s)&&w(o,s)&&w(s,o)&&(e.push(o.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),A(i),A(i.next),i=t=s),i=i.next}while(i!==t);return r(i)}function l(t,e,n,o,s,a){var l=t;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&g(l,c)){var u=x(l,c);return l=r(l,l.next),u=r(u,u.next),i(l,e,n,o,s,a,0),void i(u,e,n,o,s,a,0)}c=c.next}l=l.next}while(l!==t)}function c(t,e){return t.x-e.x}function u(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s&&(s=a,n=r.x<r.next.x?r:r.next,a===i))return n}r=r.next}while(r!==e);if(!n)return null;var l,c=n,u=n.x,h=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&p(o<h?i:s,o,u,h,o<h?s:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),w(r,t)&&(l<f||l===f&&(r.x>n.x||r.x===n.x&&d(n,r)))&&(n=r,f=l)),r=r.next}while(r!==c);return n}(t,e);if(!n)return e;var i=x(n,t);return r(i,i.next),r(n,n.next)}function d(t,e){return m(t.prev,t,e.prev)<0&&m(e.next,t,t.next)<0}function h(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function p(t,e,n,r,i,o,s,a){return(i-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(r-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&v(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(w(t,e)&&w(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(m(t.prev,t,e.prev)||m(t,e.prev,e))||y(t,e)&&m(t.prev,t,t.next)>0&&m(e.prev,e,e.next)>0)}function m(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function v(t,e,n,r){var i=_(m(t,e,n)),o=_(m(t,e,r)),s=_(m(n,r,t)),a=_(m(n,r,e));return i!==o&&s!==a||(!(0!==i||!b(t,n,e))||(!(0!==o||!b(t,r,e))||(!(0!==s||!b(n,t,r))||!(0!==a||!b(n,e,r)))))}function b(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function _(t){return t>0?1:t<0?-1:0}function w(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function x(t,e){var n=new E(t.i,t.x,t.y),r=new E(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function S(t,e,n,r){var i=new E(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function A(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function E(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}t.exports=e,t.exports.default=e,e.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(T(t,0,o,n));if(i)for(var a=0,l=e.length;a<l;a++){var c=e[a]*n,u=a<l-1?e[a+1]*n:t.length;s-=Math.abs(T(t,c,u,n))}var d=0;for(a=0;a<r.length;a+=3){var h=r[a]*n,f=r[a+1]*n,p=r[a+2]*n;d+=Math.abs((t[h]-t[p])*(t[f+1]-t[h+1])-(t[h]-t[f])*(t[p+1]-t[h+1]))}return 0===s&&0===d?0:Math.abs((d-s)/s)},e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},6895:(t,e,n)=>{var r;!function(i,o,s,a){"use strict";var l,c=["","webkit","Moz","MS","ms","o"],u=o.createElement("div"),d="function",h=Math.round,f=Math.abs,p=Date.now;function g(t,e,n){return setTimeout(x(t,n),e)}function m(t,e,n){return!!Array.isArray(t)&&(y(t,n[e],n),!0)}function y(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==a)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function v(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}l="function"!==typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==a&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var b=v((function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===a)&&(t[r[i]]=e[r[i]]),i++;return t}),"extend","Use `assign`."),_=v((function(t,e){return b(t,e,!0)}),"merge","Use `assign`.");function w(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&l(r,n)}function x(t,e){return function(){return t.apply(e,arguments)}}function S(t,e){return typeof t==d?t.apply(e&&e[0]||a,e):t}function A(t,e){return t===a?e:t}function E(t,e,n){y(I(e),(function(e){t.addEventListener(e,n,!1)}))}function T(t,e,n){y(I(e),(function(e){t.removeEventListener(e,n,!1)}))}function P(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function C(t,e){return t.indexOf(e)>-1}function I(t){return t.trim().split(/\s+/g)}function M(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function k(t){return Array.prototype.slice.call(t,0)}function O(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];M(i,s)<0&&r.push(t[o]),i[o]=s,o++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function L(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<c.length;){if((r=(n=c[o])?n+i:e)in t)return r;o++}return a}var R=1;function F(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}var B="ontouchstart"in i,N=L(i,"PointerEvent")!==a,z=B&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),D="touch",j="mouse",U=25,V=1,W=4,G=8,H=1,q=2,Y=4,X=8,Z=16,K=q|Y,$=X|Z,Q=K|$,J=["x","y"],tt=["clientX","clientY"];function et(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){S(t.options.enable,[t])&&n.handler(e)},this.init()}function nt(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&V&&r-i===0,s=e&(W|G)&&r-i===0;n.isFirst=!!o,n.isFinal=!!s,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=rt(e));i>1&&!n.firstMultiple?n.firstMultiple=rt(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,l=s?s.center:o.center,c=e.center=it(r);e.timeStamp=p(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=lt(l,c),e.distance=at(l,c),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==V&&o.eventType!==W||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y});e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=st(e.deltaX,e.deltaY);var u=ot(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=f(u.x)>f(u.y)?u.x:u.y,e.scale=s?(d=s.pointers,h=r,at(h[0],h[1],tt)/at(d[0],d[1],tt)):1,e.rotation=s?function(t,e){return lt(e[1],e[0],tt)+lt(t[1],t[0],tt)}(s.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,i,o,s=t.lastInterval||e,l=e.timeStamp-s.timeStamp;if(e.eventType!=G&&(l>U||s.velocity===a)){var c=e.deltaX-s.deltaX,u=e.deltaY-s.deltaY,d=ot(l,c,u);r=d.x,i=d.y,n=f(d.x)>f(d.y)?d.x:d.y,o=st(c,u),t.lastInterval=e}else n=s.velocity,r=s.velocityX,i=s.velocityY,o=s.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}(n,e);var d,h;var g=t.element;P(e.srcEvent.target,g)&&(g=e.srcEvent.target);e.target=g}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function rt(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:h(t.pointers[n].clientX),clientY:h(t.pointers[n].clientY)},n++;return{timeStamp:p(),pointers:e,center:it(e),deltaX:t.deltaX,deltaY:t.deltaY}}function it(t){var e=t.length;if(1===e)return{x:h(t[0].clientX),y:h(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:h(n/e),y:h(r/e)}}function ot(t,e,n){return{x:e/t||0,y:n/t||0}}function st(t,e){return t===e?H:f(t)>=f(e)?t<0?q:Y:e<0?X:Z}function at(t,e,n){n||(n=J);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function lt(t,e,n){n||(n=J);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}et.prototype={handler:function(){},init:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(F(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(F(this.element),this.evWin,this.domHandler)}};var ct={mousedown:V,mousemove:2,mouseup:W},ut="mousedown",dt="mousemove mouseup";function ht(){this.evEl=ut,this.evWin=dt,this.pressed=!1,et.apply(this,arguments)}w(ht,et,{handler:function(t){var e=ct[t.type];e&V&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=W),this.pressed&&(e&W&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:j,srcEvent:t}))}});var ft={pointerdown:V,pointermove:2,pointerup:W,pointercancel:G,pointerout:G},pt={2:D,3:"pen",4:j,5:"kinect"},gt="pointerdown",mt="pointermove pointerup pointercancel";function yt(){this.evEl=gt,this.evWin=mt,et.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(gt="MSPointerDown",mt="MSPointerMove MSPointerUp MSPointerCancel"),w(yt,et,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=ft[r],o=pt[t.pointerType]||t.pointerType,s=o==D,a=M(e,t.pointerId,"pointerId");i&V&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):i&(W|G)&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(a,1))}});var vt={touchstart:V,touchmove:2,touchend:W,touchcancel:G};function bt(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,et.apply(this,arguments)}function _t(t,e){var n=k(t.touches),r=k(t.changedTouches);return e&(W|G)&&(n=O(n.concat(r),"identifier",!0)),[n,r]}w(bt,et,{handler:function(t){var e=vt[t.type];if(e===V&&(this.started=!0),this.started){var n=_t.call(this,t,e);e&(W|G)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:D,srcEvent:t})}}});var wt={touchstart:V,touchmove:2,touchend:W,touchcancel:G},xt="touchstart touchmove touchend touchcancel";function St(){this.evTarget=xt,this.targetIds={},et.apply(this,arguments)}function At(t,e){var n=k(t.touches),r=this.targetIds;if(e&(2|V)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,s=k(t.changedTouches),a=[],l=this.target;if(o=n.filter((function(t){return P(t.target,l)})),e===V)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<s.length;)r[s[i].identifier]&&a.push(s[i]),e&(W|G)&&delete r[s[i].identifier],i++;return a.length?[O(o.concat(a),"identifier",!0),a]:void 0}w(St,et,{handler:function(t){var e=wt[t.type],n=At.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:D,srcEvent:t})}});var Et=2500;function Tt(){et.apply(this,arguments);var t=x(this.handler,this);this.touch=new St(this.manager,t),this.mouse=new ht(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Pt(t,e){t&V?(this.primaryTouch=e.changedPointers[0].identifier,Ct.call(this,e)):t&(W|G)&&Ct.call(this,e)}function Ct(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),Et)}}function It(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),s=Math.abs(n-i.y);if(o<=25&&s<=25)return!0}return!1}w(Tt,et,{handler:function(t,e,n){var r=n.pointerType==D,i=n.pointerType==j;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)Pt.call(this,e,n);else if(i&&It.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Mt=L(u.style,"touchAction"),kt=Mt!==a,Ot="compute",Lt="auto",Rt="manipulation",Ft="none",Bt="pan-x",Nt="pan-y",zt=function(){if(!kt)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||i.CSS.supports("touch-action",n)})),t}();function Dt(t,e){this.manager=t,this.set(e)}Dt.prototype={set:function(t){t==Ot&&(t=this.compute()),kt&&this.manager.element.style&&zt[t]&&(this.manager.element.style[Mt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return y(this.manager.recognizers,(function(e){S(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(C(t,Ft))return Ft;var e=C(t,Bt),n=C(t,Nt);if(e&&n)return Ft;if(e||n)return e?Bt:Nt;if(C(t,Rt))return Rt;return Lt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=C(r,Ft)&&!zt[Ft],o=C(r,Nt)&&!zt[Nt],s=C(r,Bt)&&!zt[Bt];if(i){var a=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(a&&l&&c)return}if(!s||!o)return i||o&&n&K||s&&n&$?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var jt=1,Ut=32;function Vt(t){this.options=l({},this.defaults,t||{}),this.id=R++,this.manager=null,this.options.enable=A(this.options.enable,!0),this.state=jt,this.simultaneous={},this.requireFail=[]}function Wt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Gt(t){return t==Z?"down":t==X?"up":t==q?"left":t==Y?"right":""}function Ht(t,e){var n=e.manager;return n?n.get(t):t}function qt(){Vt.apply(this,arguments)}function Yt(){qt.apply(this,arguments),this.pX=null,this.pY=null}function Xt(){qt.apply(this,arguments)}function Zt(){Vt.apply(this,arguments),this._timer=null,this._input=null}function Kt(){qt.apply(this,arguments)}function $t(){qt.apply(this,arguments)}function Qt(){Vt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Jt(t,e){return(e=e||{}).recognizers=A(e.recognizers,Jt.defaults.preset),new te(t,e)}Vt.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(m(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Ht(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return m(t,"dropRecognizeWith",this)||(t=Ht(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(m(t,"requireFailure",this))return this;var e=this.requireFail;return-1===M(e,t=Ht(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(m(t,"dropRequireFailure",this))return this;t=Ht(t,this);var e=M(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+Wt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+Wt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Ut},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(Ut|jt)))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!S(this.options.enable,[this,e]))return this.reset(),void(this.state=Ut);56&this.state&&(this.state=jt),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},w(qt,Vt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,i=this.attrTest(t);return r&&(n&G||!i)?16|e:r||i?n&W?8|e:2&e?4|e:2:Ut}}),w(Yt,qt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Q},getTouchAction:function(){var t=this.options.direction,e=[];return t&K&&e.push(Nt),t&$&&e.push(Bt),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,s=t.deltaY;return i&e.direction||(e.direction&K?(i=0===o?H:o<0?q:Y,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===s?H:s<0?X:Z,n=s!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return qt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Gt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),w(Xt,qt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ft]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),w(Zt,Vt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Lt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(W|G)&&!i)this.reset();else if(t.eventType&V)this.reset(),this._timer=g((function(){this.state=8,this.tryEmit()}),e.time,this);else if(t.eventType&W)return 8;return Ut},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&t.eventType&W?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),w(Kt,qt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ft]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),w($t,qt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:K|$,pointers:1},getTouchAction:function(){return Yt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(K|$)?e=t.overallVelocity:n&K?e=t.overallVelocityX:n&$&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&f(e)>this.options.velocity&&t.eventType&W},emit:function(t){var e=Gt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),w(Qt,Vt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Rt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&V&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=W)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||at(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=g((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Ut},failTimeout:function(){return this._timer=g((function(){this.state=Ut}),this.options.interval,this),Ut},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Jt.VERSION="2.0.7",Jt.defaults={domEvents:!1,touchAction:Ot,enable:!0,inputTarget:null,inputClass:null,preset:[[Kt,{enable:!1}],[Xt,{enable:!1},["rotate"]],[$t,{direction:K}],[Yt,{direction:K},["swipe"]],[Qt],[Qt,{event:"doubletap",taps:2},["tap"]],[Zt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function te(t,e){var n;this.options=l({},Jt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(N?yt:z?St:B?Tt:ht))(n,nt),this.touchAction=new Dt(this,this.options.touchAction),ee(this,!0),y(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function ee(t,e){var n,r=t.element;r.style&&(y(t.options.cssProps,(function(i,o){n=L(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}te.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&8&i.state)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&14&n.state&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Vt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(m(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(m(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=M(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var n=this.handlers;return y(I(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==a){var n=this.handlers;return y(I(t),(function(t){e?n[t]&&n[t].splice(M(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&ee(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Jt,{INPUT_START:V,INPUT_MOVE:2,INPUT_END:W,INPUT_CANCEL:G,STATE_POSSIBLE:jt,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Ut,DIRECTION_NONE:H,DIRECTION_LEFT:q,DIRECTION_RIGHT:Y,DIRECTION_UP:X,DIRECTION_DOWN:Z,DIRECTION_HORIZONTAL:K,DIRECTION_VERTICAL:$,DIRECTION_ALL:Q,Manager:te,Input:et,TouchAction:Dt,TouchInput:St,MouseInput:ht,PointerEventInput:yt,TouchMouseInput:Tt,SingleTouchInput:bt,Recognizer:Vt,AttrRecognizer:qt,Tap:Qt,Pan:Yt,Swipe:$t,Pinch:Xt,Rotate:Kt,Press:Zt,on:E,off:T,each:y,merge:_,extend:b,assign:l,inherit:w,bindFn:x,prefixed:L}),("undefined"!==typeof i?i:"undefined"!==typeof self?self:{}).Hammer=Jt,(r=function(){return Jt}.call(e,n,e,t))===a||(t.exports=r)}(window,document)},219:(t,e,n)=>{"use strict";var r=n(3763),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(t){return r.isMemo(t)?s:a[t.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;t.exports=function t(e,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&t(e,i,r)}var s=u(n);d&&(s=s.concat(d(n)));for(var a=l(e),g=l(n),m=0;m<s.length;++m){var y=s[m];if(!o[y]&&(!r||!r[y])&&(!g||!g[y])&&(!a||!a[y])){var v=h(n,y);try{c(e,y,v)}catch(b){}}}}return e}},4983:(t,e)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function w(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case u:case d:case o:case a:case s:case f:return t;default:switch(t=t&&t.$$typeof){case c:case h:case m:case g:case l:return t;default:return e}}case i:return e}}}function x(t){return w(t)===d}e.AsyncMode=u,e.ConcurrentMode=d,e.ContextConsumer=c,e.ContextProvider=l,e.Element=r,e.ForwardRef=h,e.Fragment=o,e.Lazy=m,e.Memo=g,e.Portal=i,e.Profiler=a,e.StrictMode=s,e.Suspense=f,e.isAsyncMode=function(t){return x(t)||w(t)===u},e.isConcurrentMode=x,e.isContextConsumer=function(t){return w(t)===c},e.isContextProvider=function(t){return w(t)===l},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return w(t)===h},e.isFragment=function(t){return w(t)===o},e.isLazy=function(t){return w(t)===m},e.isMemo=function(t){return w(t)===g},e.isPortal=function(t){return w(t)===i},e.isProfiler=function(t){return w(t)===a},e.isStrictMode=function(t){return w(t)===s},e.isSuspense=function(t){return w(t)===f},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===o||t===d||t===a||t===s||t===f||t===p||"object"===typeof t&&null!==t&&(t.$$typeof===m||t.$$typeof===g||t.$$typeof===l||t.$$typeof===c||t.$$typeof===h||t.$$typeof===v||t.$$typeof===b||t.$$typeof===_||t.$$typeof===y)},e.typeOf=w},3763:(t,e,n)=>{"use strict";t.exports=n(4983)},2123:t=>{"use strict";var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,i){for(var o,s,a=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),l=1;l<arguments.length;l++){for(var c in o=Object(arguments[l]))n.call(o,c)&&(a[c]=o[c]);if(e){s=e(o);for(var u=0;u<s.length;u++)r.call(o,s[u])&&(a[s[u]]=o[s[u]])}}return a}},2730:(t,e,n)=>{"use strict";var r=n(5043),i=n(8853);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(a[t]=e,t=0;t<e.length;t++)s.add(e[t])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(t,e,n,r,i,o,s){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){m[t]=new g(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];m[e]=new g(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){m[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){m[t]=new g(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){m[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){m[t]=new g(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){m[t]=new g(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){m[t]=new g(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){m[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(t){return t[1].toUpperCase()}function b(t,e,n,r){var i=m.hasOwnProperty(e)?m[e]:null;(null!==i?0!==i.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!d.call(p,t)||!d.call(f,t)&&(h.test(t)?p[t]=!0:(f[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,v);m[e]=new g(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,v);m[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,v);m[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),P=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function F(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=R&&t[R]||t["@@iterator"])?t:null}var B,N=Object.assign;function z(t){if(void 0===B)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);B=e&&e[1]||""}return"\n"+B+t}var D=!1;function j(t,e){if(!t||D)return"";D=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=s&&0<=a);break}}}finally{D=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?z(t):""}function U(t){switch(t.tag){case 5:return z(t.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return t=j(t.type,!1);case 11:return t=j(t.type.render,!1);case 1:return t=j(t.type,!0);default:return""}}function V(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case S:return"Fragment";case x:return"Portal";case E:return"Profiler";case A:return"StrictMode";case I:return"Suspense";case M:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case P:return(t.displayName||"Context")+".Consumer";case T:return(t._context.displayName||"Context")+".Provider";case C:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case k:return null!==(e=t.displayName||null)?e:V(t.type)||"Memo";case O:e=t._payload,t=t._init;try{return V(t(e))}catch(n){}}return null}function W(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(e);case 8:return e===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function G(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function H(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function q(t){t._valueTracker||(t._valueTracker=function(t){var e=H(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Y(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=H(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function X(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Z(t,e){var n=e.checked;return N({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function K(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=G(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function $(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function Q(t,e){$(t,e);var n=G(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,G(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function J(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&X(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+G(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function rt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return N({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function it(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(o(92));if(et(n)){if(1<n.length)throw Error(o(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:G(n)}}function ot(t,e){var n=G(e.value),r=G(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function st(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function at(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?at(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ct,ut,dt=(ut=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ct.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return ut(t,e)}))}:ut);function ht(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];function gt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function mt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=gt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(ft).forEach((function(t){pt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]}))}));var yt=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(t,e){if(e){if(yt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(o(62))}}function bt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _t=null;function wt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var xt=null,St=null,At=null;function Et(t){if(t=bi(t)){if("function"!==typeof xt)throw Error(o(280));var e=t.stateNode;e&&(e=wi(e),xt(t.stateNode,t.type,e))}}function Tt(t){St?At?At.push(t):At=[t]:St=t}function Pt(){if(St){var t=St,e=At;if(At=St=null,Et(t),e)for(t=0;t<e.length;t++)Et(e[t])}}function Ct(t,e){return t(e)}function It(){}var Mt=!1;function kt(t,e,n){if(Mt)return t(e,n);Mt=!0;try{return Ct(t,e,n)}finally{Mt=!1,(null!==St||null!==At)&&(It(),Pt())}}function Ot(t,e){var n=t.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(o(231,e,typeof n));return n}var Lt=!1;if(u)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){Lt=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch(ut){Lt=!1}function Ft(t,e,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Bt=!1,Nt=null,zt=!1,Dt=null,jt={onError:function(t){Bt=!0,Nt=t}};function Ut(t,e,n,r,i,o,s,a,l){Bt=!1,Nt=null,Ft.apply(jt,arguments)}function Vt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Wt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Gt(t){if(Vt(t)!==t)throw Error(o(188))}function Ht(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Vt(t)))throw Error(o(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Gt(i),t;if(s===r)return Gt(i),e;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?t:e}(t))?qt(t):null}function qt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=qt(t);if(null!==e)return e;t=t.sibling}return null}var Yt=i.unstable_scheduleCallback,Xt=i.unstable_cancelCallback,Zt=i.unstable_shouldYield,Kt=i.unstable_requestPaint,$t=i.unstable_now,Qt=i.unstable_getCurrentPriorityLevel,Jt=i.unstable_ImmediatePriority,te=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,ne=i.unstable_LowPriority,re=i.unstable_IdlePriority,ie=null,oe=null;var se=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(ae(t)/le|0)|0},ae=Math.log,le=Math.LN2;var ce=64,ue=4194304;function de(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function he(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=de(a):0!==(o&=s)&&(r=de(o))}else 0!==(s=n&~i)?r=de(s):0!==o&&(r=de(o));if(0===r)return 0;if(0!==e&&e!==r&&0===(e&i)&&((i=r&-r)>=(o=e&-e)||16===i&&0!==(4194240&o)))return e;if(0!==(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-se(e)),r|=t[n],e&=~i;return r}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function pe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function ge(){var t=ce;return 0===(4194240&(ce<<=1))&&(ce=64),t}function me(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ye(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-se(e)]=n}function ve(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-se(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var be=0;function _e(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var we,xe,Se,Ae,Ee,Te=!1,Pe=[],Ce=null,Ie=null,Me=null,ke=new Map,Oe=new Map,Le=[],Re="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fe(t,e){switch(t){case"focusin":case"focusout":Ce=null;break;case"dragenter":case"dragleave":Ie=null;break;case"mouseover":case"mouseout":Me=null;break;case"pointerover":case"pointerout":ke.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oe.delete(e.pointerId)}}function Be(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==e&&(null!==(e=bi(e))&&xe(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function Ne(t){var e=vi(t.target);if(null!==e){var n=Vt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Wt(n)))return t.blockedOn=e,void Ee(t.priority,(function(){Se(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function ze(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ze(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=bi(n))&&xe(e),t.blockedOn=n,!1;var r=new(n=t.nativeEvent).constructor(n.type,n);_t=r,n.target.dispatchEvent(r),_t=null,e.shift()}return!0}function De(t,e,n){ze(t)&&n.delete(e)}function je(){Te=!1,null!==Ce&&ze(Ce)&&(Ce=null),null!==Ie&&ze(Ie)&&(Ie=null),null!==Me&&ze(Me)&&(Me=null),ke.forEach(De),Oe.forEach(De)}function Ue(t,e){t.blockedOn===e&&(t.blockedOn=null,Te||(Te=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,je)))}function Ve(t){function e(e){return Ue(e,t)}if(0<Pe.length){Ue(Pe[0],t);for(var n=1;n<Pe.length;n++){var r=Pe[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Ce&&Ue(Ce,t),null!==Ie&&Ue(Ie,t),null!==Me&&Ue(Me,t),ke.forEach(e),Oe.forEach(e),n=0;n<Le.length;n++)(r=Le[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Le.length&&null===(n=Le[0]).blockedOn;)Ne(n),null===n.blockedOn&&Le.shift()}var We=_.ReactCurrentBatchConfig,Ge=!0;function He(t,e,n,r){var i=be,o=We.transition;We.transition=null;try{be=1,Ye(t,e,n,r)}finally{be=i,We.transition=o}}function qe(t,e,n,r){var i=be,o=We.transition;We.transition=null;try{be=4,Ye(t,e,n,r)}finally{be=i,We.transition=o}}function Ye(t,e,n,r){if(Ge){var i=Ze(t,e,n,r);if(null===i)Gr(t,e,r,Xe,n),Fe(t,r);else if(function(t,e,n,r,i){switch(e){case"focusin":return Ce=Be(Ce,t,e,n,r,i),!0;case"dragenter":return Ie=Be(Ie,t,e,n,r,i),!0;case"mouseover":return Me=Be(Me,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return ke.set(o,Be(ke.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Oe.set(o,Be(Oe.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r))r.stopPropagation();else if(Fe(t,r),4&e&&-1<Re.indexOf(t)){for(;null!==i;){var o=bi(i);if(null!==o&&we(o),null===(o=Ze(t,e,n,r))&&Gr(t,e,r,Xe,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Gr(t,e,r,null,n)}}var Xe=null;function Ze(t,e,n,r){if(Xe=null,null!==(t=vi(t=wt(r))))if(null===(e=Vt(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Wt(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xe=t,null}function Ke(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qt()){case Jt:return 1;case te:return 4;case ee:case ne:return 16;case re:return 536870912;default:return 16}default:return 16}}var $e=null,Qe=null,Je=null;function tn(){if(Je)return Je;var t,e,n=Qe,r=n.length,i="value"in $e?$e.value:$e.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var s=r-t;for(e=1;e<=s&&n[r-e]===i[o-e];e++);return Je=i.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function on(t){function e(e,n,r,i,o){for(var s in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(s)&&(e=t[s],this[s]=e?e(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return N(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=N({},cn,{view:0,detail:0}),hn=on(dn),fn=N({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(sn=t.screenX-ln.screenX,an=t.screenY-ln.screenY):an=sn=0,ln=t),sn)},movementY:function(t){return"movementY"in t?t.movementY:an}}),pn=on(fn),gn=on(N({},fn,{dataTransfer:0})),mn=on(N({},dn,{relatedTarget:0})),yn=on(N({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=N({},cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bn=on(vn),_n=on(N({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function An(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Sn[t])&&!!e[t]}function En(){return An}var Tn=N({},dn,{key:function(t){if(t.key){var e=wn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?xn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Pn=on(Tn),Cn=on(N({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=on(N({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Mn=on(N({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=N({},fn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),On=on(kn),Ln=[9,13,27,32],Rn=u&&"CompositionEvent"in window,Fn=null;u&&"documentMode"in document&&(Fn=document.documentMode);var Bn=u&&"TextEvent"in window&&!Fn,Nn=u&&(!Rn||Fn&&8<Fn&&11>=Fn),zn=String.fromCharCode(32),Dn=!1;function jn(t,e){switch(t){case"keyup":return-1!==Ln.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Vn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Wn[t.type]:"textarea"===e}function Hn(t,e,n,r){Tt(r),0<(e=qr(e,"onChange")).length&&(n=new un("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var qn=null,Yn=null;function Xn(t){zr(t,0)}function Zn(t){if(Y(_i(t)))return t}function Kn(t,e){if("change"===t)return e}var $n=!1;if(u){var Qn;if(u){var Jn="oninput"in document;if(!Jn){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),Jn="function"===typeof tr.oninput}Qn=Jn}else Qn=!1;$n=Qn&&(!document.documentMode||9<document.documentMode)}function er(){qn&&(qn.detachEvent("onpropertychange",nr),Yn=qn=null)}function nr(t){if("value"===t.propertyName&&Zn(Yn)){var e=[];Hn(e,Yn,t,wt(t)),kt(Xn,e)}}function rr(t,e,n){"focusin"===t?(er(),Yn=n,(qn=e).attachEvent("onpropertychange",nr)):"focusout"===t&&er()}function ir(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Zn(Yn)}function or(t,e){if("click"===t)return Zn(e)}function sr(t,e){if("input"===t||"change"===t)return Zn(e)}var ar="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function lr(t,e){if(ar(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(e,i)||!ar(t[i],e[i]))return!1}return!0}function cr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ur(t,e){var n,r=cr(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=cr(r)}}function dr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?dr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function hr(){for(var t=window,e=X();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=X((t=e.contentWindow).document)}return e}function fr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function pr(t){var e=hr(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,vr=null,br=!1;function _r(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==X(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=qr(yr,"onSelect")).length&&(e=new un("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=mr)))}function wr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Ar={};function Er(t){if(Sr[t])return Sr[t];if(!xr[t])return t;var e,n=xr[t];for(e in n)if(n.hasOwnProperty(e)&&e in Ar)return Sr[t]=n[e];return t}u&&(Ar=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Tr=Er("animationend"),Pr=Er("animationiteration"),Cr=Er("animationstart"),Ir=Er("transitionend"),Mr=new Map,kr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(t,e){Mr.set(t,e),l(e,[t])}for(var Lr=0;Lr<kr.length;Lr++){var Rr=kr[Lr];Or(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Or(Tr,"onAnimationEnd"),Or(Pr,"onAnimationIteration"),Or(Cr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Br=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fr));function Nr(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,s,a,l,c){if(Ut.apply(this,arguments),Bt){if(!Bt)throw Error(o(198));var u=Nt;Bt=!1,Nt=null,zt||(zt=!0,Dt=u)}}(r,e,void 0,t),t.currentTarget=null}function zr(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break t;Nr(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break t;Nr(i,a,c),o=l}}}if(zt)throw t=Dt,zt=!1,Dt=null,t}function Dr(t,e){var n=e[gi];void 0===n&&(n=e[gi]=new Set);var r=t+"__bubble";n.has(r)||(Wr(e,t,2,!1),n.add(r))}function jr(t,e,n){var r=0;e&&(r|=4),Wr(n,t,r,e)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Vr(t){if(!t[Ur]){t[Ur]=!0,s.forEach((function(e){"selectionchange"!==e&&(Br.has(e)||jr(e,!1,t),jr(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Ur]||(e[Ur]=!0,jr("selectionchange",!1,e))}}function Wr(t,e,n,r){switch(Ke(e)){case 1:var i=He;break;case 4:i=qe;break;default:i=Ye}n=i.bind(null,e,n,t),i=void 0,!Lt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Gr(t,e,n,r,i){var o=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=vi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue t}a=a.parentNode}}r=r.return}kt((function(){var r=o,i=wt(n),s=[];t:{var a=Mr.get(t);if(void 0!==a){var l=un,c=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=Pn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Tr:case Pr:case Cr:l=yn;break;case Ir:l=Mn;break;case"scroll":l=hn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&e),d=!u&&"scroll"===t,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=Ot(p,h))&&u.push(Hr(p,g,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||n===_t||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(d=Vt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(u=Cn,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:_i(l),f=null==c?a:_i(c),(a=new u(g,p+"leave",l,n,i)).target=d,a.relatedTarget=f,g=null,vi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,g=u),d=g,l&&c)t:{for(h=c,p=0,f=u=l;f;f=Yr(f))p++;for(f=0,g=h;g;g=Yr(g))f++;for(;0<p-f;)u=Yr(u),p--;for(;0<f-p;)h=Yr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break t;u=Yr(u),h=Yr(h)}u=null}else u=null;null!==l&&Xr(s,a,l,u,!1),null!==c&&null!==d&&Xr(s,d,c,u,!0)}if("select"===(l=(a=r?_i(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Kn;else if(Gn(a))if($n)m=sr;else{m=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=or);switch(m&&(m=m(t,r))?Hn(s,m,n,i):(y&&y(t,a,r),"focusout"===t&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&tt(a,"number",a.value)),y=r?_i(r):window,t){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,vr=null);break;case"focusout":vr=yr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,_r(s,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":_r(s,n,i)}var v;if(Rn)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else Vn?jn(t,n)&&(b="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(b="onCompositionStart");b&&(Nn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(v=tn()):(Qe="value"in($e=i)?$e.value:$e.textContent,Vn=!0)),0<(y=qr(r,b)).length&&(b=new _n(b,t,null,n,i),s.push({event:b,listeners:y}),v?b.data=v:null!==(v=Un(n))&&(b.data=v))),(v=Bn?function(t,e){switch(t){case"compositionend":return Un(e);case"keypress":return 32!==e.which?null:(Dn=!0,zn);case"textInput":return(t=e.data)===zn&&Dn?null:t;default:return null}}(t,n):function(t,e){if(Vn)return"compositionend"===t||!Rn&&jn(t,e)?(t=tn(),Je=Qe=$e=null,Vn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Nn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=v))}zr(s,e)}))}function Hr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ot(t,n))&&r.unshift(Hr(t,o,i)),null!=(o=Ot(t,e))&&r.push(Hr(t,o,i))),t=t.return}return r}function Yr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Xr(t,e,n,r,i){for(var o=e._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Ot(n,o))&&s.unshift(Hr(n,l,a)):i||null!=(l=Ot(n,o))&&s.push(Hr(n,l,a))),n=n.return}0!==s.length&&t.push({event:e,listeners:s})}var Zr=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function $r(t){return("string"===typeof t?t:""+t).replace(Zr,"\n").replace(Kr,"")}function Qr(t,e,n){if(e=$r(e),$r(t)!==e&&n)throw Error(o(425))}function Jr(){}var ti=null,ei=null;function ni(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(t){return oi.resolve(null).then(t).catch(ai)}:ri;function ai(t){setTimeout((function(){throw t}))}function li(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return t.removeChild(i),void Ve(e);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ve(e)}function ci(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ui(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,gi="__reactEvents$"+di,mi="__reactListeners$"+di,yi="__reactHandles$"+di;function vi(t){var e=t[hi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pi]||n[hi]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ui(t);null!==t;){if(n=t[hi])return n;t=ui(t)}return e}n=(t=n).parentNode}return null}function bi(t){return!(t=t[hi]||t[pi])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function _i(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function wi(t){return t[fi]||null}var xi=[],Si=-1;function Ai(t){return{current:t}}function Ei(t){0>Si||(t.current=xi[Si],xi[Si]=null,Si--)}function Ti(t,e){Si++,xi[Si]=t.current,t.current=e}var Pi={},Ci=Ai(Pi),Ii=Ai(!1),Mi=Pi;function ki(t,e){var n=t.type.contextTypes;if(!n)return Pi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Oi(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Li(){Ei(Ii),Ei(Ci)}function Ri(t,e,n){if(Ci.current!==Pi)throw Error(o(168));Ti(Ci,e),Ti(Ii,n)}function Fi(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(o(108,W(t)||"Unknown",i));return N({},n,r)}function Bi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pi,Mi=Ci.current,Ti(Ci,t),Ti(Ii,Ii.current),!0}function Ni(t,e,n){var r=t.stateNode;if(!r)throw Error(o(169));n?(t=Fi(t,e,Mi),r.__reactInternalMemoizedMergedChildContext=t,Ei(Ii),Ei(Ci),Ti(Ci,t)):Ei(Ii),Ti(Ii,n)}var zi=null,Di=!1,ji=!1;function Ui(t){null===zi?zi=[t]:zi.push(t)}function Vi(){if(!ji&&null!==zi){ji=!0;var t=0,e=be;try{var n=zi;for(be=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}zi=null,Di=!1}catch(i){throw null!==zi&&(zi=zi.slice(t+1)),Yt(Jt,Vi),i}finally{be=e,ji=!1}}return null}var Wi=[],Gi=0,Hi=null,qi=0,Yi=[],Xi=0,Zi=null,Ki=1,$i="";function Qi(t,e){Wi[Gi++]=qi,Wi[Gi++]=Hi,Hi=t,qi=e}function Ji(t,e,n){Yi[Xi++]=Ki,Yi[Xi++]=$i,Yi[Xi++]=Zi,Zi=t;var r=Ki;t=$i;var i=32-se(r)-1;r&=~(1<<i),n+=1;var o=32-se(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ki=1<<32-se(e)+i|n<<i|r,$i=o+t}else Ki=1<<o|n<<i|r,$i=t}function to(t){null!==t.return&&(Qi(t,1),Ji(t,1,0))}function eo(t){for(;t===Hi;)Hi=Wi[--Gi],Wi[Gi]=null,qi=Wi[--Gi],Wi[Gi]=null;for(;t===Zi;)Zi=Yi[--Xi],Yi[Xi]=null,$i=Yi[--Xi],Yi[Xi]=null,Ki=Yi[--Xi],Yi[Xi]=null}var no=null,ro=null,io=!1,oo=null;function so(t,e){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function ao(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,no=t,ro=ci(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,no=t,ro=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Zi?{id:Ki,overflow:$i}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=e,n.return=t,t.child=n,no=t,ro=null,!0);default:return!1}}function lo(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function co(t){if(io){var e=ro;if(e){var n=e;if(!ao(t,e)){if(lo(t))throw Error(o(418));e=ci(n.nextSibling);var r=no;e&&ao(t,e)?so(r,n):(t.flags=-4097&t.flags|2,io=!1,no=t)}}else{if(lo(t))throw Error(o(418));t.flags=-4097&t.flags|2,io=!1,no=t}}}function uo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;no=t}function ho(t){if(t!==no)return!1;if(!io)return uo(t),io=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!ni(t.type,t.memoizedProps)),e&&(e=ro)){if(lo(t))throw fo(),Error(o(418));for(;e;)so(t,e),e=ci(e.nextSibling)}if(uo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ro=ci(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ro=null}}else ro=no?ci(t.stateNode.nextSibling):null;return!0}function fo(){for(var t=ro;t;)t=ci(t.nextSibling)}function po(){ro=no=null,io=!1}function go(t){null===oo?oo=[t]:oo.push(t)}var mo=_.ReactCurrentBatchConfig;function yo(t,e){if(t&&t.defaultProps){for(var n in e=N({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var vo=Ai(null),bo=null,_o=null,wo=null;function xo(){wo=_o=bo=null}function So(t){var e=vo.current;Ei(vo),t._currentValue=e}function Ao(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Eo(t,e){bo=t,wo=_o=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(_a=!0),t.firstContext=null)}function To(t){var e=t._currentValue;if(wo!==t)if(t={context:t,memoizedValue:e,next:null},null===_o){if(null===bo)throw Error(o(308));_o=t,bo.dependencies={lanes:0,firstContext:t}}else _o=_o.next=t;return e}var Po=null;function Co(t){null===Po?Po=[t]:Po.push(t)}function Io(t,e,n,r){var i=e.interleaved;return null===i?(n.next=n,Co(e)):(n.next=i.next,i.next=n),e.interleaved=n,Mo(t,r)}function Mo(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var ko=!1;function Oo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lo(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ro(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fo(t,e,n){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var i=r.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Mo(t,n)}return null===(i=r.interleaved)?(e.next=e,Co(r)):(e.next=i.next,i.next=e),r.interleaved=e,Mo(t,n)}function Bo(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ve(t,n)}}function No(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zo(t,e,n,r){var i=t.updateQueue;ko=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=t.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(s=0,u=c=l=null,a=o;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(f,d,h);break t}d=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(f,d,h):p)||void 0===h)break t;d=N({},d,h);break t;case 2:ko=!0}}null!==a.callback&&0!==a.lane&&(t.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(e=i.shared.interleaved)){i=e;do{s|=i.lane,i=i.next}while(i!==e)}else null===o&&(i.shared.lanes=0);Nl|=s,t.lanes=s,t.memoizedState=d}}function Do(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var jo=(new r.Component).refs;function Uo(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:N({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var Vo={isMounted:function(t){return!!(t=t._reactInternals)&&Vt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ec(),i=nc(t),o=Ro(r,i);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=Fo(t,o,i))&&(rc(e,t,i,r),Bo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ec(),i=nc(t),o=Ro(r,i);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=Fo(t,o,i))&&(rc(e,t,i,r),Bo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ec(),r=nc(t),i=Ro(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),null!==(e=Fo(t,i,r))&&(rc(e,t,r,n),Bo(e,t,r))}};function Wo(t,e,n,r,i,o,s){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,s):!e.prototype||!e.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function Go(t,e,n){var r=!1,i=Pi,o=e.contextType;return"object"===typeof o&&null!==o?o=To(o):(i=Oi(e)?Mi:Ci.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?ki(t,i):Pi),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Vo,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Ho(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Vo.enqueueReplaceState(e,e.state,null)}function qo(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=jo,Oo(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=To(o):(o=Oi(e)?Mi:Ci.current,i.context=ki(t,o)),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(Uo(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Vo.enqueueReplaceState(i,i.state,null),zo(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308)}function Yo(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,t));var i=r,s=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===s?e.ref:(e=function(t){var e=i.refs;e===jo&&(e=i.refs={}),null===t?delete e[s]:e[s]=t},e._stringRef=s,e)}if("string"!==typeof t)throw Error(o(284));if(!n._owner)throw Error(o(290,t))}return t}function Xo(t,e){throw t=Object.prototype.toString.call(e),Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Zo(t){return(0,t._init)(t._payload)}function Ko(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Rc(t,e)).index=0,t.sibling=null,t}function s(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function a(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,r){return null===e||6!==e.tag?((e=zc(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function c(t,e,n,r){var o=n.type;return o===S?d(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===O&&Zo(o)===e.type)?((r=i(e,n.props)).ref=Yo(t,e,n),r.return=t,r):((r=Fc(n.type,n.key,n.props,null,t.mode,r)).ref=Yo(t,e,n),r.return=t,r)}function u(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Dc(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function d(t,e,n,r,o){return null===e||7!==e.tag?((e=Bc(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function h(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=zc(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case w:return(n=Fc(e.type,e.key,e.props,null,t.mode,n)).ref=Yo(t,null,e),n.return=t,n;case x:return(e=Dc(e,t.mode,n)).return=t,e;case O:return h(t,(0,e._init)(e._payload),n)}if(et(e)||F(e))return(e=Bc(e,t.mode,n,null)).return=t,e;Xo(t,e)}return null}function f(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(t,e,n,r):null;case x:return n.key===i?u(t,e,n,r):null;case O:return f(t,e,(i=n._init)(n._payload),r)}if(et(n)||F(n))return null!==i?null:d(t,e,n,r,null);Xo(t,n)}return null}function p(t,e,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i);case x:return u(e,t=t.get(null===r.key?n:r.key)||null,r,i);case O:return p(t,e,n,(0,r._init)(r._payload),i)}if(et(r)||F(r))return d(e,t=t.get(n)||null,r,i,null);Xo(e,r)}return null}function g(i,o,a,l){for(var c=null,u=null,d=o,g=o=0,m=null;null!==d&&g<a.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var y=f(i,d,a[g],l);if(null===y){null===d&&(d=m);break}t&&d&&null===y.alternate&&e(i,d),o=s(y,o,g),null===u?c=y:u.sibling=y,u=y,d=m}if(g===a.length)return n(i,d),io&&Qi(i,g),c;if(null===d){for(;g<a.length;g++)null!==(d=h(i,a[g],l))&&(o=s(d,o,g),null===u?c=d:u.sibling=d,u=d);return io&&Qi(i,g),c}for(d=r(i,d);g<a.length;g++)null!==(m=p(d,i,g,a[g],l))&&(t&&null!==m.alternate&&d.delete(null===m.key?g:m.key),o=s(m,o,g),null===u?c=m:u.sibling=m,u=m);return t&&d.forEach((function(t){return e(i,t)})),io&&Qi(i,g),c}function m(i,a,l,c){var u=F(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,g=a,m=a=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=f(i,g,v.value,c);if(null===b){null===g&&(g=y);break}t&&g&&null===b.alternate&&e(i,g),a=s(b,a,m),null===d?u=b:d.sibling=b,d=b,g=y}if(v.done)return n(i,g),io&&Qi(i,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=h(i,v.value,c))&&(a=s(v,a,m),null===d?u=v:d.sibling=v,d=v);return io&&Qi(i,m),u}for(g=r(i,g);!v.done;m++,v=l.next())null!==(v=p(g,i,m,v.value,c))&&(t&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=s(v,a,m),null===d?u=v:d.sibling=v,d=v);return t&&g.forEach((function(t){return e(i,t)})),io&&Qi(i,m),u}return function t(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:t:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===S){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break t}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Zo(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=Yo(r,u,s),o.return=r,r=o;break t}n(r,u);break}e(r,u),u=u.sibling}s.type===S?((o=Bc(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Fc(s.type,s.key,s.props,null,r.mode,l)).ref=Yo(r,o,s),l.return=r,r=l)}return a(r);case x:t:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break t}n(r,o);break}e(r,o),o=o.sibling}(o=Dc(s,r.mode,l)).return=r,r=o}return a(r);case O:return t(r,o,(u=s._init)(s._payload),l)}if(et(s))return g(r,o,s,l);if(F(s))return m(r,o,s,l);Xo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=zc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var $o=Ko(!0),Qo=Ko(!1),Jo={},ts=Ai(Jo),es=Ai(Jo),ns=Ai(Jo);function rs(t){if(t===Jo)throw Error(o(174));return t}function is(t,e){switch(Ti(ns,e),Ti(es,t),Ti(ts,Jo),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Ei(ts),Ti(ts,e)}function os(){Ei(ts),Ei(es),Ei(ns)}function ss(t){rs(ns.current);var e=rs(ts.current),n=lt(e,t.type);e!==n&&(Ti(es,t),Ti(ts,n))}function as(t){es.current===t&&(Ei(ts),Ei(es))}var ls=Ai(0);function cs(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var us=[];function ds(){for(var t=0;t<us.length;t++)us[t]._workInProgressVersionPrimary=null;us.length=0}var hs=_.ReactCurrentDispatcher,fs=_.ReactCurrentBatchConfig,ps=0,gs=null,ms=null,ys=null,vs=!1,bs=!1,_s=0,ws=0;function xs(){throw Error(o(321))}function Ss(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ar(t[n],e[n]))return!1;return!0}function As(t,e,n,r,i,s){if(ps=s,gs=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hs.current=null===t||null===t.memoizedState?aa:la,t=n(r,i),bs){s=0;do{if(bs=!1,_s=0,25<=s)throw Error(o(301));s+=1,ys=ms=null,e.updateQueue=null,hs.current=ca,t=n(r,i)}while(bs)}if(hs.current=sa,e=null!==ms&&null!==ms.next,ps=0,ys=ms=gs=null,vs=!1,e)throw Error(o(300));return t}function Es(){var t=0!==_s;return _s=0,t}function Ts(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ys?gs.memoizedState=ys=t:ys=ys.next=t,ys}function Ps(){if(null===ms){var t=gs.alternate;t=null!==t?t.memoizedState:null}else t=ms.next;var e=null===ys?gs.memoizedState:ys.next;if(null!==e)ys=e,ms=t;else{if(null===t)throw Error(o(310));t={memoizedState:(ms=t).memoizedState,baseState:ms.baseState,baseQueue:ms.baseQueue,queue:ms.queue,next:null},null===ys?gs.memoizedState=ys=t:ys=ys.next=t}return ys}function Cs(t,e){return"function"===typeof e?e(t):e}function Is(t){var e=Ps(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=ms,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((ps&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,gs.lanes|=d,Nl|=d}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,e.memoizedState)||(_a=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(null!==(t=n.interleaved)){i=t;do{s=i.lane,gs.lanes|=s,Nl|=s,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ms(t){var e=Ps(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=t(s,a.action),a=a.next}while(a!==i);ar(s,e.memoizedState)||(_a=!0),e.memoizedState=s,null===e.baseQueue&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function ks(){}function Os(t,e){var n=gs,r=Ps(),i=e(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,_a=!0),r=r.queue,Gs(Fs.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||null!==ys&&1&ys.memoizedState.tag){if(n.flags|=2048,Ds(9,Rs.bind(null,n,r,i,e),void 0,null),null===Ml)throw Error(o(349));0!==(30&ps)||Ls(n,e,i)}return i}function Ls(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=gs.updateQueue)?(e={lastEffect:null,stores:null},gs.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Rs(t,e,n,r){e.value=n,e.getSnapshot=r,Bs(e)&&Ns(t)}function Fs(t,e,n){return n((function(){Bs(e)&&Ns(t)}))}function Bs(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ar(t,n)}catch(r){return!0}}function Ns(t){var e=Mo(t,1);null!==e&&rc(e,t,1,-1)}function zs(t){var e=Ts();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:t},e.queue=t,t=t.dispatch=na.bind(null,gs,t),[e.memoizedState,t]}function Ds(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=gs.updateQueue)?(e={lastEffect:null,stores:null},gs.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function js(){return Ps().memoizedState}function Us(t,e,n,r){var i=Ts();gs.flags|=t,i.memoizedState=Ds(1|e,n,void 0,void 0===r?null:r)}function Vs(t,e,n,r){var i=Ps();r=void 0===r?null:r;var o=void 0;if(null!==ms){var s=ms.memoizedState;if(o=s.destroy,null!==r&&Ss(r,s.deps))return void(i.memoizedState=Ds(e,n,o,r))}gs.flags|=t,i.memoizedState=Ds(1|e,n,o,r)}function Ws(t,e){return Us(8390656,8,t,e)}function Gs(t,e){return Vs(2048,8,t,e)}function Hs(t,e){return Vs(4,2,t,e)}function qs(t,e){return Vs(4,4,t,e)}function Ys(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Xs(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Vs(4,4,Ys.bind(null,e,t),n)}function Zs(){}function Ks(t,e){var n=Ps();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Ss(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function $s(t,e){var n=Ps();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Ss(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Qs(t,e,n){return 0===(21&ps)?(t.baseState&&(t.baseState=!1,_a=!0),t.memoizedState=n):(ar(n,e)||(n=ge(),gs.lanes|=n,Nl|=n,t.baseState=!0),e)}function Js(t,e){var n=be;be=0!==n&&4>n?n:4,t(!0);var r=fs.transition;fs.transition={};try{t(!1),e()}finally{be=n,fs.transition=r}}function ta(){return Ps().memoizedState}function ea(t,e,n){var r=nc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(t))ia(e,n);else if(null!==(n=Io(t,e,n,r))){rc(n,t,r,ec()),oa(n,e,r)}}function na(t,e,n){var r=nc(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(t))ia(e,i);else{var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=e.interleaved;return null===l?(i.next=i,Co(e)):(i.next=l.next,l.next=i),void(e.interleaved=i)}}catch(c){}null!==(n=Io(t,e,i,r))&&(rc(n,t,r,i=ec()),oa(n,e,r))}}function ra(t){var e=t.alternate;return t===gs||null!==e&&e===gs}function ia(t,e){bs=vs=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function oa(t,e,n){if(0!==(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ve(t,n)}}var sa={readContext:To,useCallback:xs,useContext:xs,useEffect:xs,useImperativeHandle:xs,useInsertionEffect:xs,useLayoutEffect:xs,useMemo:xs,useReducer:xs,useRef:xs,useState:xs,useDebugValue:xs,useDeferredValue:xs,useTransition:xs,useMutableSource:xs,useSyncExternalStore:xs,useId:xs,unstable_isNewReconciler:!1},aa={readContext:To,useCallback:function(t,e){return Ts().memoizedState=[t,void 0===e?null:e],t},useContext:To,useEffect:Ws,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Us(4194308,4,Ys.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Us(4194308,4,t,e)},useInsertionEffect:function(t,e){return Us(4,2,t,e)},useMemo:function(t,e){var n=Ts();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ts();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ea.bind(null,gs,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Ts().memoizedState=t},useState:zs,useDebugValue:Zs,useDeferredValue:function(t){return Ts().memoizedState=t},useTransition:function(){var t=zs(!1),e=t[0];return t=Js.bind(null,t[1]),Ts().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=gs,i=Ts();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=e(),null===Ml)throw Error(o(349));0!==(30&ps)||Ls(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Ws(Fs.bind(null,r,s,t),[t]),r.flags|=2048,Ds(9,Rs.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ts(),e=Ml.identifierPrefix;if(io){var n=$i;e=":"+e+"R"+(n=(Ki&~(1<<32-se(Ki)-1)).toString(32)+n),0<(n=_s++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=ws++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},la={readContext:To,useCallback:Ks,useContext:To,useEffect:Gs,useImperativeHandle:Xs,useInsertionEffect:Hs,useLayoutEffect:qs,useMemo:$s,useReducer:Is,useRef:js,useState:function(){return Is(Cs)},useDebugValue:Zs,useDeferredValue:function(t){return Qs(Ps(),ms.memoizedState,t)},useTransition:function(){return[Is(Cs)[0],Ps().memoizedState]},useMutableSource:ks,useSyncExternalStore:Os,useId:ta,unstable_isNewReconciler:!1},ca={readContext:To,useCallback:Ks,useContext:To,useEffect:Gs,useImperativeHandle:Xs,useInsertionEffect:Hs,useLayoutEffect:qs,useMemo:$s,useReducer:Ms,useRef:js,useState:function(){return Ms(Cs)},useDebugValue:Zs,useDeferredValue:function(t){var e=Ps();return null===ms?e.memoizedState=t:Qs(e,ms.memoizedState,t)},useTransition:function(){return[Ms(Cs)[0],Ps().memoizedState]},useMutableSource:ks,useSyncExternalStore:Os,useId:ta,unstable_isNewReconciler:!1};function ua(t,e){try{var n="",r=e;do{n+=U(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i,digest:null}}function da(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function ha(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(t,e,n){(n=Ro(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Hl||(Hl=!0,ql=r),ha(0,e)},n}function ga(t,e,n){(n=Ro(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,e)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ha(0,e),"function"!==typeof r&&(null===Yl?Yl=new Set([this]):Yl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function ma(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new fa;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Tc.bind(null,t,e,n),e.then(t,t))}function ya(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function va(t,e,n,r,i){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Ro(-1,1)).tag=2,Fo(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var ba=_.ReactCurrentOwner,_a=!1;function wa(t,e,n,r){e.child=null===t?Qo(e,null,n,r):$o(e,t.child,n,r)}function xa(t,e,n,r,i){n=n.render;var o=e.ref;return Eo(e,i),r=As(t,e,n,r,o,i),n=Es(),null===t||_a?(io&&n&&to(e),e.flags|=1,wa(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ha(t,e,i))}function Sa(t,e,n,r,i){if(null===t){var o=n.type;return"function"!==typeof o||Lc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Fc(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Aa(t,e,o,r,i))}if(o=t.child,0===(t.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&t.ref===e.ref)return Ha(t,e,i)}return e.flags|=1,(t=Rc(o,r)).ref=e.ref,t.return=e,e.child=t}function Aa(t,e,n,r,i){if(null!==t){var o=t.memoizedProps;if(lr(o,r)&&t.ref===e.ref){if(_a=!1,e.pendingProps=r=o,0===(t.lanes&i))return e.lanes=t.lanes,Ha(t,e,i);0!==(131072&t.flags)&&(_a=!0)}}return Pa(t,e,n,r,i)}function Ea(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Rl,Ll),Ll|=n;else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ti(Rl,Ll),Ll|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ti(Rl,Ll),Ll|=r}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,Ti(Rl,Ll),Ll|=r;return wa(t,e,i,n),e.child}function Ta(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Pa(t,e,n,r,i){var o=Oi(n)?Mi:Ci.current;return o=ki(e,o),Eo(e,i),n=As(t,e,n,r,o,i),r=Es(),null===t||_a?(io&&r&&to(e),e.flags|=1,wa(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ha(t,e,i))}function Ca(t,e,n,r,i){if(Oi(n)){var o=!0;Bi(e)}else o=!1;if(Eo(e,i),null===e.stateNode)Ga(t,e),Go(e,n,r),qo(e,n,r,i),r=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=To(c):c=ki(e,c=Oi(n)?Mi:Ci.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&Ho(e,s,r,c),ko=!1;var h=e.memoizedState;s.state=h,zo(e,r,s,i),l=e.memoizedState,a!==r||h!==l||Ii.current||ko?("function"===typeof u&&(Uo(e,n,u,r),l=e.memoizedState),(a=ko||Wo(e,n,a,r,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(e.flags|=4194308)):("function"===typeof s.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Lo(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:yo(e.type,a),s.props=c,d=e.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=To(l):l=ki(e,l=Oi(n)?Mi:Ci.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&Ho(e,s,r,l),ko=!1,h=e.memoizedState,s.state=h,zo(e,r,s,i);var p=e.memoizedState;a!==d||h!==p||Ii.current||ko?("function"===typeof f&&(Uo(e,n,f,r),p=e.memoizedState),(c=ko||Wo(e,n,c,r,h,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(e.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Ia(t,e,n,r,o,i)}function Ia(t,e,n,r,i,o){Ta(t,e);var s=0!==(128&e.flags);if(!r&&!s)return i&&Ni(e,n,!1),Ha(t,e,o);r=e.stateNode,ba.current=e;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&s?(e.child=$o(e,t.child,null,o),e.child=$o(e,null,a,o)):wa(t,e,a,o),e.memoizedState=r.state,i&&Ni(e,n,!0),e.child}function Ma(t){var e=t.stateNode;e.pendingContext?Ri(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Ri(0,e.context,!1),is(t,e.containerInfo)}function ka(t,e,n,r,i){return po(),go(i),e.flags|=256,wa(t,e,n,r),e.child}var Oa,La,Ra,Fa,Ba={dehydrated:null,treeContext:null,retryLane:0};function Na(t){return{baseLanes:t,cachePool:null,transitions:null}}function za(t,e,n){var r,i=e.pendingProps,s=ls.current,a=!1,l=0!==(128&e.flags);if((r=l)||(r=(null===t||null!==t.memoizedState)&&0!==(2&s)),r?(a=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(s|=1),Ti(ls,1&s),null===t)return co(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=i.children,t=i.fallback,a?(i=e.mode,a=e.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Nc(l,i,0,null),t=Bc(t,i,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Na(n),e.memoizedState=Ba,t):Da(e,l));if(null!==(s=t.memoizedState)&&null!==(r=s.dehydrated))return function(t,e,n,r,i,s,a){if(n)return 256&e.flags?(e.flags&=-257,ja(t,e,a,r=da(Error(o(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Nc({mode:"visible",children:r.children},i,0,null),(s=Bc(s,i,a,null)).flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,0!==(1&e.mode)&&$o(e,t.child,null,a),e.child.memoizedState=Na(a),e.memoizedState=Ba,s);if(0===(1&e.mode))return ja(t,e,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,ja(t,e,a,r=da(s=Error(o(419)),r,void 0))}if(l=0!==(a&t.childLanes),_a||l){if(null!==(r=Ml)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Mo(t,i),rc(r,t,i,-1))}return mc(),ja(t,e,a,r=da(Error(o(421))))}return"$?"===i.data?(e.flags|=128,e.child=t.child,e=Cc.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ro=ci(i.nextSibling),no=e,io=!0,oo=null,null!==t&&(Yi[Xi++]=Ki,Yi[Xi++]=$i,Yi[Xi++]=Zi,Ki=t.id,$i=t.overflow,Zi=e),e=Da(e,r.children),e.flags|=4096,e)}(t,e,l,i,r,s,n);if(a){a=i.fallback,l=e.mode,r=(s=t.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&e.child!==s?((i=e.child).childLanes=0,i.pendingProps=c,e.deletions=null):(i=Rc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Rc(r,a):(a=Bc(a,l,n,null)).flags|=2,a.return=e,i.return=e,i.sibling=a,e.child=i,i=a,a=e.child,l=null===(l=t.child.memoizedState)?Na(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~n,e.memoizedState=Ba,i}return t=(a=t.child).sibling,i=Rc(a,{mode:"visible",children:i.children}),0===(1&e.mode)&&(i.lanes=n),i.return=e,i.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Da(t,e){return(e=Nc({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function ja(t,e,n,r){return null!==r&&go(r),$o(e,t.child,null,n),(t=Da(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Ua(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),Ao(t.return,e,n)}function Va(t,e,n,r,i){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Wa(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(wa(t,e,r.children,n),0!==(2&(r=ls.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Ua(t,n,e);else if(19===t.tag)Ua(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ti(ls,r),0===(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===cs(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Va(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===cs(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Va(e,!0,n,null,o);break;case"together":Va(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ga(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ha(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Nl|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(n=Rc(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Rc(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function qa(t,e){if(!io)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ya(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Xa(t,e,n){var r=e.pendingProps;switch(eo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ya(e),null;case 1:case 17:return Oi(e.type)&&Li(),Ya(e),null;case 3:return r=e.stateNode,os(),Ei(Ii),Ei(Ci),ds(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(ho(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==oo&&(ac(oo),oo=null))),La(t,e),Ya(e),null;case 5:as(e);var i=rs(ns.current);if(n=e.type,null!==t&&null!=e.stateNode)Ra(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(o(166));return Ya(e),null}if(t=rs(ts.current),ho(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[hi]=e,r[fi]=s,t=0!==(1&e.mode),n){case"dialog":Dr("cancel",r),Dr("close",r);break;case"iframe":case"object":case"embed":Dr("load",r);break;case"video":case"audio":for(i=0;i<Fr.length;i++)Dr(Fr[i],r);break;case"source":Dr("error",r);break;case"img":case"image":case"link":Dr("error",r),Dr("load",r);break;case"details":Dr("toggle",r);break;case"input":K(r,s),Dr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Dr("invalid",r);break;case"textarea":it(r,s),Dr("invalid",r)}for(var l in vt(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Qr(r.textContent,c,t),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Qr(r.textContent,c,t),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Dr("scroll",r)}switch(n){case"input":q(r),J(r,s,!0);break;case"textarea":q(r),st(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Jr)}r=i,e.updateQueue=r,null!==r&&(e.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=at(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),"select"===n&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[hi]=e,t[fi]=r,Oa(t,e,!1,!1),e.stateNode=t;t:{switch(l=bt(n,r),n){case"dialog":Dr("cancel",t),Dr("close",t),i=r;break;case"iframe":case"object":case"embed":Dr("load",t),i=r;break;case"video":case"audio":for(i=0;i<Fr.length;i++)Dr(Fr[i],t);i=r;break;case"source":Dr("error",t),i=r;break;case"img":case"image":case"link":Dr("error",t),Dr("load",t),i=r;break;case"details":Dr("toggle",t),i=r;break;case"input":K(t,r),i=Z(t,r),Dr("invalid",t);break;case"option":default:i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=N({},r,{value:void 0}),Dr("invalid",t);break;case"textarea":it(t,r),i=rt(t,r),Dr("invalid",t)}for(s in vt(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?mt(t,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&dt(t,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&ht(t,u):"number"===typeof u&&ht(t,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Dr("scroll",t):null!=u&&b(t,s,u,l))}switch(n){case"input":q(t),J(t,r,!1);break;case"textarea":q(t),st(t);break;case"option":null!=r.value&&t.setAttribute("value",""+G(r.value));break;case"select":t.multiple=!!r.multiple,null!=(s=r.value)?nt(t,!!r.multiple,s,!1):null!=r.defaultValue&&nt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(t.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Ya(e),null;case 6:if(t&&null!=e.stateNode)Fa(t,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(o(166));if(n=rs(ns.current),rs(ts.current),ho(e)){if(r=e.stateNode,n=e.memoizedProps,r[hi]=e,(s=r.nodeValue!==n)&&null!==(t=no))switch(t.tag){case 3:Qr(r.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&t.mode))}s&&(e.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=e,e.stateNode=r}return Ya(e),null;case 13:if(Ei(ls),r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&e.mode)&&0===(128&e.flags))fo(),po(),e.flags|=98560,s=!1;else if(s=ho(e),null!==r&&null!==r.dehydrated){if(null===t){if(!s)throw Error(o(318));if(!(s=null!==(s=e.memoizedState)?s.dehydrated:null))throw Error(o(317));s[hi]=e}else po(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Ya(e),s=!1}else null!==oo&&(ac(oo),oo=null),s=!0;if(!s)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((r=null!==r)!==(null!==t&&null!==t.memoizedState)&&r&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&ls.current)?0===Fl&&(Fl=3):mc())),null!==e.updateQueue&&(e.flags|=4),Ya(e),null);case 4:return os(),La(t,e),null===t&&Vr(e.stateNode.containerInfo),Ya(e),null;case 10:return So(e.type._context),Ya(e),null;case 19:if(Ei(ls),null===(s=e.memoizedState))return Ya(e),null;if(r=0!==(128&e.flags),null===(l=s.rendering))if(r)qa(s,!1);else{if(0!==Fl||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=cs(t))){for(e.flags|=128,qa(s,!1),null!==(r=l.updateQueue)&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;null!==n;)t=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ti(ls,1&ls.current|2),e.child}t=t.sibling}null!==s.tail&&$t()>Wl&&(e.flags|=128,r=!0,qa(s,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=cs(l))){if(e.flags|=128,r=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),qa(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Ya(e),null}else 2*$t()-s.renderingStartTime>Wl&&1073741824!==n&&(e.flags|=128,r=!0,qa(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=s.last)?n.sibling=l:e.child=l,s.last=l)}return null!==s.tail?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=$t(),e.sibling=null,n=ls.current,Ti(ls,r?1&n|2:1&n),e):(Ya(e),null);case 22:case 23:return hc(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!==(1&e.mode)?0!==(1073741824&Ll)&&(Ya(e),6&e.subtreeFlags&&(e.flags|=8192)):Ya(e),null;case 24:case 25:return null}throw Error(o(156,e.tag))}function Za(t,e){switch(eo(e),e.tag){case 1:return Oi(e.type)&&Li(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return os(),Ei(Ii),Ei(Ci),ds(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return as(e),null;case 13:if(Ei(ls),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(o(340));po()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Ei(ls),null;case 4:return os(),null;case 10:return So(e.type._context),null;case 22:case 23:return hc(),null;default:return null}}Oa=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},La=function(){},Ra=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,rs(ts.current);var o,s=null;switch(n){case"input":i=Z(t,i),r=Z(t,r),s=[];break;case"select":i=N({},i,{value:void 0}),r=N({},r,{value:void 0}),s=[];break;case"textarea":i=rt(t,i),r=rt(t,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(t.onclick=Jr)}for(u in vt(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Dr("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}},Fa=function(t,e,n,r){n!==r&&(e.flags|=4)};var Ka=!1,$a=!1,Qa="function"===typeof WeakSet?WeakSet:Set,Ja=null;function tl(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(t,e,r)}else n.current=null}function el(t,e,n){try{n()}catch(r){Ec(t,e,r)}}var nl=!1;function rl(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(e,n,o)}i=i.next}while(i!==r)}}function il(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ol(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function sl(t){var e=t.alternate;null!==e&&(t.alternate=null,sl(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[hi],delete e[fi],delete e[gi],delete e[mi],delete e[yi])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function al(t){return 5===t.tag||3===t.tag||4===t.tag}function ll(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||al(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function cl(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Jr));else if(4!==r&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}function ul(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(ul(t,e,n),t=t.sibling;null!==t;)ul(t,e,n),t=t.sibling}var dl=null,hl=!1;function fl(t,e,n){for(n=n.child;null!==n;)pl(t,e,n),n=n.sibling}function pl(t,e,n){if(oe&&"function"===typeof oe.onCommitFiberUnmount)try{oe.onCommitFiberUnmount(ie,n)}catch(a){}switch(n.tag){case 5:$a||tl(n,e);case 6:var r=dl,i=hl;dl=null,fl(t,e,n),hl=i,null!==(dl=r)&&(hl?(t=dl,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(t=dl,n=n.stateNode,8===t.nodeType?li(t.parentNode,n):1===t.nodeType&&li(t,n),Ve(t)):li(dl,n.stateNode));break;case 4:r=dl,i=hl,dl=n.stateNode.containerInfo,hl=!0,fl(t,e,n),dl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!$a&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&el(n,e,s),i=i.next}while(i!==r)}fl(t,e,n);break;case 1:if(!$a&&(tl(n,e),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ec(n,e,a)}fl(t,e,n);break;case 21:fl(t,e,n);break;case 22:1&n.mode?($a=(r=$a)||null!==n.memoizedState,fl(t,e,n),$a=r):fl(t,e,n);break;default:fl(t,e,n)}}function gl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Qa),e.forEach((function(e){var r=Ic.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function ml(t,e){var n=e.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,l=a;t:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break t;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break t}l=l.return}if(null===dl)throw Error(o(160));pl(s,a,i),dl=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ec(i,e,u)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)yl(e,t),e=e.sibling}function yl(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ml(e,t),vl(t),4&r){try{rl(3,t,t.return),il(3,t)}catch(m){Ec(t,t.return,m)}try{rl(5,t,t.return)}catch(m){Ec(t,t.return,m)}}break;case 1:ml(e,t),vl(t),512&r&&null!==n&&tl(n,n.return);break;case 5:if(ml(e,t),vl(t),512&r&&null!==n&&tl(n,n.return),32&t.flags){var i=t.stateNode;try{ht(i,"")}catch(m){Ec(t,t.return,m)}}if(4&r&&null!=(i=t.stateNode)){var s=t.memoizedProps,a=null!==n?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&$(i,s),bt(l,a);var u=bt(l,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?mt(i,h):"dangerouslySetInnerHTML"===d?dt(i,h):"children"===d?ht(i,h):b(i,d,h,u)}switch(l){case"input":Q(i,s);break;case"textarea":ot(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?nt(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?nt(i,!!s.multiple,s.defaultValue,!0):nt(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(m){Ec(t,t.return,m)}}break;case 6:if(ml(e,t),vl(t),4&r){if(null===t.stateNode)throw Error(o(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){Ec(t,t.return,m)}}break;case 3:if(ml(e,t),vl(t),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ve(e.containerInfo)}catch(m){Ec(t,t.return,m)}break;case 4:default:ml(e,t),vl(t);break;case 13:ml(e,t),vl(t),8192&(i=t.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=$t())),4&r&&gl(t);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&t.mode?($a=(u=$a)||d,ml(e,t),$a=u):ml(e,t),vl(t),8192&r){if(u=null!==t.memoizedState,(t.stateNode.isHidden=u)&&!d&&0!==(1&t.mode))for(Ja=t,d=t.child;null!==d;){for(h=Ja=d;null!==Ja;){switch(p=(f=Ja).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:tl(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:tl(f,f.return);break;case 22:if(null!==f.memoizedState){xl(h);continue}}null!==p?(p.return=f,Ja=p):xl(h)}d=d.sibling}t:for(d=null,h=t;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=gt("display",a))}catch(m){Ec(t,t.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Ec(t,t.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===t)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===t)break t;for(;null===h.sibling;){if(null===h.return||h.return===t)break t;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(e,t),vl(t),4&r&&gl(t);case 21:}}function vl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(al(n)){var r=n;break t}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(ht(i,""),r.flags&=-33),ul(t,ll(t),i);break;case 3:case 4:var s=r.stateNode.containerInfo;cl(t,ll(t),s);break;default:throw Error(o(161))}}catch(a){Ec(t,t.return,a)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function bl(t,e,n){Ja=t,_l(t,e,n)}function _l(t,e,n){for(var r=0!==(1&t.mode);null!==Ja;){var i=Ja,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Ka;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||$a;a=Ka;var c=$a;if(Ka=s,($a=l)&&!c)for(Ja=i;null!==Ja;)l=(s=Ja).child,22===s.tag&&null!==s.memoizedState?Sl(i):null!==l?(l.return=s,Ja=l):Sl(i);for(;null!==o;)Ja=o,_l(o,e,n),o=o.sibling;Ja=i,Ka=a,$a=c}wl(t)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Ja=o):wl(t)}}function wl(t){for(;null!==Ja;){var e=Ja;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:$a||il(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!$a)if(null===n)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:yo(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;null!==s&&Do(e,s,r);break;case 3:var a=e.updateQueue;if(null!==a){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Do(e,a,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var u=e.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Ve(h)}}}break;default:throw Error(o(163))}$a||512&e.flags&&ol(e)}catch(f){Ec(e,e.return,f)}}if(e===t){Ja=null;break}if(null!==(n=e.sibling)){n.return=e.return,Ja=n;break}Ja=e.return}}function xl(t){for(;null!==Ja;){var e=Ja;if(e===t){Ja=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Ja=n;break}Ja=e.return}}function Sl(t){for(;null!==Ja;){var e=Ja;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{il(4,e)}catch(l){Ec(e,n,l)}break;case 1:var r=e.stateNode;if("function"===typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(l){Ec(e,i,l)}}var o=e.return;try{ol(e)}catch(l){Ec(e,o,l)}break;case 5:var s=e.return;try{ol(e)}catch(l){Ec(e,s,l)}}}catch(l){Ec(e,e.return,l)}if(e===t){Ja=null;break}var a=e.sibling;if(null!==a){a.return=e.return,Ja=a;break}Ja=e.return}}var Al,El=Math.ceil,Tl=_.ReactCurrentDispatcher,Pl=_.ReactCurrentOwner,Cl=_.ReactCurrentBatchConfig,Il=0,Ml=null,kl=null,Ol=0,Ll=0,Rl=Ai(0),Fl=0,Bl=null,Nl=0,zl=0,Dl=0,jl=null,Ul=null,Vl=0,Wl=1/0,Gl=null,Hl=!1,ql=null,Yl=null,Xl=!1,Zl=null,Kl=0,$l=0,Ql=null,Jl=-1,tc=0;function ec(){return 0!==(6&Il)?$t():-1!==Jl?Jl:Jl=$t()}function nc(t){return 0===(1&t.mode)?1:0!==(2&Il)&&0!==Ol?Ol&-Ol:null!==mo.transition?(0===tc&&(tc=ge()),tc):0!==(t=be)?t:t=void 0===(t=window.event)?16:Ke(t.type)}function rc(t,e,n,r){if(50<$l)throw $l=0,Ql=null,Error(o(185));ye(t,n,r),0!==(2&Il)&&t===Ml||(t===Ml&&(0===(2&Il)&&(zl|=n),4===Fl&&lc(t,Ol)),ic(t,r),1===n&&0===Il&&0===(1&e.mode)&&(Wl=$t()+500,Di&&Vi()))}function ic(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-se(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=fe(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}(t,e);var r=he(t,t===Ml?Ol:0);if(0===r)null!==n&&Xt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&Xt(n),1===e)0===t.tag?function(t){Di=!0,Ui(t)}(cc.bind(null,t)):Ui(cc.bind(null,t)),si((function(){0===(6&Il)&&Vi()})),n=null;else{switch(_e(r)){case 1:n=Jt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=re}n=Mc(n,oc.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function oc(t,e){if(Jl=-1,tc=0,0!==(6&Il))throw Error(o(327));var n=t.callbackNode;if(Sc()&&t.callbackNode!==n)return null;var r=he(t,t===Ml?Ol:0);if(0===r)return null;if(0!==(30&r)||0!==(r&t.expiredLanes)||e)e=yc(t,r);else{e=r;var i=Il;Il|=2;var s=gc();for(Ml===t&&Ol===e||(Gl=null,Wl=$t()+500,fc(t,e));;)try{bc();break}catch(l){pc(t,l)}xo(),Tl.current=s,Il=i,null!==kl?e=0:(Ml=null,Ol=0,e=Fl)}if(0!==e){if(2===e&&(0!==(i=pe(t))&&(r=i,e=sc(t,i))),1===e)throw n=Bl,fc(t,0),lc(t,r),ic(t,$t()),n;if(6===e)lc(t,r);else{if(i=t.current.alternate,0===(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=yc(t,r))&&(0!==(s=pe(t))&&(r=s,e=sc(t,s))),1===e))throw n=Bl,fc(t,0),lc(t,r),ic(t,$t()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(o(345));case 2:case 5:xc(t,Ul,Gl);break;case 3:if(lc(t,r),(130023424&r)===r&&10<(e=Vl+500-$t())){if(0!==he(t,0))break;if(((i=t.suspendedLanes)&r)!==r){ec(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ri(xc.bind(null,t,Ul,Gl),e);break}xc(t,Ul,Gl);break;case 4:if(lc(t,r),(4194240&r)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-se(r);s=1<<a,(a=e[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=$t()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){t.timeoutHandle=ri(xc.bind(null,t,Ul,Gl),r);break}xc(t,Ul,Gl);break;default:throw Error(o(329))}}}return ic(t,$t()),t.callbackNode===n?oc.bind(null,t):null}function sc(t,e){var n=jl;return t.current.memoizedState.isDehydrated&&(fc(t,e).flags|=256),2!==(t=yc(t,e))&&(e=Ul,Ul=n,null!==e&&ac(e)),t}function ac(t){null===Ul?Ul=t:Ul.push.apply(Ul,t)}function lc(t,e){for(e&=~Dl,e&=~zl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-se(e),r=1<<n;t[n]=-1,e&=~r}}function cc(t){if(0!==(6&Il))throw Error(o(327));Sc();var e=he(t,0);if(0===(1&e))return ic(t,$t()),null;var n=yc(t,e);if(0!==t.tag&&2===n){var r=pe(t);0!==r&&(e=r,n=sc(t,r))}if(1===n)throw n=Bl,fc(t,0),lc(t,e),ic(t,$t()),n;if(6===n)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xc(t,Ul,Gl),ic(t,$t()),null}function uc(t,e){var n=Il;Il|=1;try{return t(e)}finally{0===(Il=n)&&(Wl=$t()+500,Di&&Vi())}}function dc(t){null!==Zl&&0===Zl.tag&&0===(6&Il)&&Sc();var e=Il;Il|=1;var n=Cl.transition,r=be;try{if(Cl.transition=null,be=1,t)return t()}finally{be=r,Cl.transition=n,0===(6&(Il=e))&&Vi()}}function hc(){Ll=Rl.current,Ei(Rl)}function fc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,ii(n)),null!==kl)for(n=kl.return;null!==n;){var r=n;switch(eo(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Li();break;case 3:os(),Ei(Ii),Ei(Ci),ds();break;case 5:as(r);break;case 4:os();break;case 13:case 19:Ei(ls);break;case 10:So(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ml=t,kl=t=Rc(t.current,null),Ol=Ll=e,Fl=0,Bl=null,Dl=zl=Nl=0,Ul=jl=null,null!==Po){for(e=0;e<Po.length;e++)if(null!==(r=(n=Po[e]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Po=null}return t}function pc(t,e){for(;;){var n=kl;try{if(xo(),hs.current=sa,vs){for(var r=gs.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vs=!1}if(ps=0,ys=ms=gs=null,bs=!1,_s=0,Pl.current=null,null===n||null===n.return){Fl=1,Bl=e,kl=null;break}t:{var s=t,a=n.return,l=n,c=e;if(e=Ol,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,l,0,e),1&p.mode&&ma(s,u,e),c=u;var g=(e=p).updateQueue;if(null===g){var m=new Set;m.add(c),e.updateQueue=m}else g.add(c);break t}if(0===(1&e)){ma(s,u,e),mc();break t}c=Error(o(426))}else if(io&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,e),go(ua(c,l));break t}}s=c=ua(c,l),4!==Fl&&(Fl=2),null===jl?jl=[s]:jl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e,No(s,pa(0,c,e));break t;case 1:l=c;var v=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Yl||!Yl.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e,No(s,ga(s,l,e));break t}}s=s.return}while(null!==s)}wc(n)}catch(_){e=_,kl===n&&null!==n&&(kl=n=n.return);continue}break}}function gc(){var t=Tl.current;return Tl.current=sa,null===t?sa:t}function mc(){0!==Fl&&3!==Fl&&2!==Fl||(Fl=4),null===Ml||0===(268435455&Nl)&&0===(268435455&zl)||lc(Ml,Ol)}function yc(t,e){var n=Il;Il|=2;var r=gc();for(Ml===t&&Ol===e||(Gl=null,fc(t,e));;)try{vc();break}catch(i){pc(t,i)}if(xo(),Il=n,Tl.current=r,null!==kl)throw Error(o(261));return Ml=null,Ol=0,Fl}function vc(){for(;null!==kl;)_c(kl)}function bc(){for(;null!==kl&&!Zt();)_c(kl)}function _c(t){var e=Al(t.alternate,t,Ll);t.memoizedProps=t.pendingProps,null===e?wc(t):kl=e,Pl.current=null}function wc(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Xa(n,e,Ll)))return void(kl=n)}else{if(null!==(n=Za(n,e)))return n.flags&=32767,void(kl=n);if(null===t)return Fl=6,void(kl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(kl=e);kl=e=t}while(null!==e);0===Fl&&(Fl=5)}function xc(t,e,n){var r=be,i=Cl.transition;try{Cl.transition=null,be=1,function(t,e,n,r){do{Sc()}while(null!==Zl);if(0!==(6&Il))throw Error(o(327));n=t.finishedWork;var i=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-se(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}(t,s),t===Ml&&(kl=Ml=null,Ol=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Mc(ee,(function(){return Sc(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Cl.transition,Cl.transition=null;var a=be;be=1;var l=Il;Il|=4,Pl.current=null,function(t,e){if(ti=Ge,fr(t=hr())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(w){n=null;break t}var a=0,l=-1,c=-1,u=0,d=0,h=t,f=null;e:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===t)break e;if(f===n&&++u===i&&(l=a),f===s&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ei={focusedElem:t,selectionRange:n},Ge=!1,Ja=e;null!==Ja;)if(t=(e=Ja).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Ja=t;else for(;null!==Ja;){e=Ja;try{var g=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:yo(e.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=e.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(o(163))}}catch(w){Ec(e,e.return,w)}if(null!==(t=e.sibling)){t.return=e.return,Ja=t;break}Ja=e.return}g=nl,nl=!1}(t,n),yl(n,t),pr(ei),Ge=!!ti,ei=ti=null,t.current=n,bl(n,t,i),Kt(),Il=l,be=a,Cl.transition=s}else t.current=n;if(Xl&&(Xl=!1,Zl=t,Kl=i),s=t.pendingLanes,0===s&&(Yl=null),function(t){if(oe&&"function"===typeof oe.onCommitFiberRoot)try{oe.onCommitFiberRoot(ie,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),ic(t,$t()),null!==e)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,t=ql,ql=null,t;0!==(1&Kl)&&0!==t.tag&&Sc(),s=t.pendingLanes,0!==(1&s)?t===Ql?$l++:($l=0,Ql=t):$l=0,Vi()}(t,e,n,r)}finally{Cl.transition=i,be=r}return null}function Sc(){if(null!==Zl){var t=_e(Kl),e=Cl.transition,n=be;try{if(Cl.transition=null,be=16>t?16:t,null===Zl)var r=!1;else{if(t=Zl,Zl=null,Kl=0,0!==(6&Il))throw Error(o(331));var i=Il;for(Il|=4,Ja=t.current;null!==Ja;){var s=Ja,a=s.child;if(0!==(16&Ja.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Ja=u;null!==Ja;){var d=Ja;switch(d.tag){case 0:case 11:case 15:rl(8,d,s)}var h=d.child;if(null!==h)h.return=d,Ja=h;else for(;null!==Ja;){var f=(d=Ja).sibling,p=d.return;if(sl(d),d===u){Ja=null;break}if(null!==f){f.return=p,Ja=f;break}Ja=p}}}var g=s.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Ja=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Ja=a;else t:for(;null!==Ja;){if(0!==(2048&(s=Ja).flags))switch(s.tag){case 0:case 11:case 15:rl(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,Ja=v;break t}Ja=s.return}}var b=t.current;for(Ja=b;null!==Ja;){var _=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==_)_.return=a,Ja=_;else t:for(a=b;null!==Ja;){if(0!==(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(x){Ec(l,l.return,x)}if(l===a){Ja=null;break t}var w=l.sibling;if(null!==w){w.return=l.return,Ja=w;break t}Ja=l.return}}if(Il=i,Vi(),oe&&"function"===typeof oe.onPostCommitFiberRoot)try{oe.onPostCommitFiberRoot(ie,t)}catch(x){}r=!0}return r}finally{be=n,Cl.transition=e}}return!1}function Ac(t,e,n){t=Fo(t,e=pa(0,e=ua(n,e),1),1),e=ec(),null!==t&&(ye(t,1,e),ic(t,e))}function Ec(t,e,n){if(3===t.tag)Ac(t,t,n);else for(;null!==e;){if(3===e.tag){Ac(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Yl||!Yl.has(r))){e=Fo(e,t=ga(e,t=ua(n,t),1),1),t=ec(),null!==e&&(ye(e,1,t),ic(e,t));break}}e=e.return}}function Tc(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=ec(),t.pingedLanes|=t.suspendedLanes&n,Ml===t&&(Ol&n)===n&&(4===Fl||3===Fl&&(130023424&Ol)===Ol&&500>$t()-Vl?fc(t,0):Dl|=n),ic(t,e)}function Pc(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ue,0===(130023424&(ue<<=1))&&(ue=4194304)));var n=ec();null!==(t=Mo(t,e))&&(ye(t,e,n),ic(t,n))}function Cc(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Pc(t,n)}function Ic(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(e),Pc(t,n)}function Mc(t,e){return Yt(t,e)}function kc(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(t,e,n,r){return new kc(t,e,n,r)}function Lc(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Rc(t,e){var n=t.alternate;return null===n?((n=Oc(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fc(t,e,n,r,i,s){var a=2;if(r=t,"function"===typeof t)Lc(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case S:return Bc(n.children,i,s,e);case A:a=8,i|=8;break;case E:return(t=Oc(12,n,e,2|i)).elementType=E,t.lanes=s,t;case I:return(t=Oc(13,n,e,i)).elementType=I,t.lanes=s,t;case M:return(t=Oc(19,n,e,i)).elementType=M,t.lanes=s,t;case L:return Nc(n,i,s,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case T:a=10;break t;case P:a=9;break t;case C:a=11;break t;case k:a=14;break t;case O:a=16,r=null;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Oc(a,n,e,i)).elementType=t,e.type=r,e.lanes=s,e}function Bc(t,e,n,r){return(t=Oc(7,t,r,e)).lanes=n,t}function Nc(t,e,n,r){return(t=Oc(22,t,r,e)).elementType=L,t.lanes=n,t.stateNode={isHidden:!1},t}function zc(t,e,n){return(t=Oc(6,t,null,e)).lanes=n,t}function Dc(t,e,n){return(e=Oc(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jc(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=me(0),this.expirationTimes=me(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=me(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(t,e,n,r,i,o,s,a,l){return t=new jc(t,e,n,a,l),1===e?(e=1,!0===o&&(e|=8)):e=0,o=Oc(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oo(o),t}function Vc(t){if(!t)return Pi;t:{if(Vt(t=t._reactInternals)!==t||1!==t.tag)throw Error(o(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Oi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(o(171))}if(1===t.tag){var n=t.type;if(Oi(n))return Fi(t,n,e)}return e}function Wc(t,e,n,r,i,o,s,a,l){return(t=Uc(n,r,!0,t,0,o,0,a,l)).context=Vc(null),n=t.current,(o=Ro(r=ec(),i=nc(n))).callback=void 0!==e&&null!==e?e:null,Fo(n,o,i),t.current.lanes=i,ye(t,i,r),ic(t,r),t}function Gc(t,e,n,r){var i=e.current,o=ec(),s=nc(i);return n=Vc(n),null===e.context?e.context=n:e.pendingContext=n,(e=Ro(o,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),null!==(t=Fo(i,e,s))&&(rc(t,i,s,o),Bo(t,i,s)),s}function Hc(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function qc(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Yc(t,e){qc(t,e),(t=t.alternate)&&qc(t,e)}Al=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ii.current)_a=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return _a=!1,function(t,e,n){switch(e.tag){case 3:Ma(e),po();break;case 5:ss(e);break;case 1:Oi(e.type)&&Bi(e);break;case 4:is(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ti(vo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(Ti(ls,1&ls.current),e.flags|=128,null):0!==(n&e.child.childLanes)?za(t,e,n):(Ti(ls,1&ls.current),null!==(t=Ha(t,e,n))?t.sibling:null);Ti(ls,1&ls.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(128&t.flags)){if(r)return Wa(t,e,n);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(ls,ls.current),r)break;return null;case 22:case 23:return e.lanes=0,Ea(t,e,n)}return Ha(t,e,n)}(t,e,n);_a=0!==(131072&t.flags)}else _a=!1,io&&0!==(1048576&e.flags)&&Ji(e,qi,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ga(t,e),t=e.pendingProps;var i=ki(e,Ci.current);Eo(e,n),i=As(null,e,r,t,i,n);var s=Es();return e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Oi(r)?(s=!0,Bi(e)):s=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Oo(e),i.updater=Vo,e.stateNode=i,i._reactInternals=e,qo(e,r,t,n),e=Ia(null,e,r,!0,s,n)):(e.tag=0,io&&s&&to(e),wa(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(Ga(t,e),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"===typeof t)return Lc(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===C)return 11;if(t===k)return 14}return 2}(r),t=yo(r,t),i){case 0:e=Pa(null,e,r,t,n);break t;case 1:e=Ca(null,e,r,t,n);break t;case 11:e=xa(null,e,r,t,n);break t;case 14:e=Sa(null,e,r,yo(r.type,t),n);break t}throw Error(o(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,Pa(t,e,r,i=e.elementType===r?i:yo(r,i),n);case 1:return r=e.type,i=e.pendingProps,Ca(t,e,r,i=e.elementType===r?i:yo(r,i),n);case 3:t:{if(Ma(e),null===t)throw Error(o(387));r=e.pendingProps,i=(s=e.memoizedState).element,Lo(t,e),zo(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,256&e.flags){e=ka(t,e,r,n,i=ua(Error(o(423)),e));break t}if(r!==i){e=ka(t,e,r,n,i=ua(Error(o(424)),e));break t}for(ro=ci(e.stateNode.containerInfo.firstChild),no=e,io=!0,oo=null,n=Qo(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){e=Ha(t,e,n);break t}wa(t,e,r,n)}e=e.child}return e;case 5:return ss(e),null===t&&co(e),r=e.type,i=e.pendingProps,s=null!==t?t.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(e.flags|=32),Ta(t,e),wa(t,e,a,n),e.child;case 6:return null===t&&co(e),null;case 13:return za(t,e,n);case 4:return is(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=$o(e,null,r,n):wa(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,xa(t,e,r,i=e.elementType===r?i:yo(r,i),n);case 7:return wa(t,e,e.pendingProps,n),e.child;case 8:case 12:return wa(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Ti(vo,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Ii.current){e=Ha(t,e,n);break t}}else for(null!==(s=e.child)&&(s.return=e);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Ro(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Ao(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===e.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ao(a,n,e),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===e){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}wa(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Eo(e,n),r=r(i=To(i)),e.flags|=1,wa(t,e,r,n),e.child;case 14:return i=yo(r=e.type,e.pendingProps),Sa(t,e,r,i=yo(r.type,i),n);case 15:return Aa(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yo(r,i),Ga(t,e),e.tag=1,Oi(r)?(t=!0,Bi(e)):t=!1,Eo(e,n),Go(e,r,i),qo(e,r,i,n),Ia(null,e,r,!0,t,n);case 19:return Wa(t,e,n);case 22:return Ea(t,e,n)}throw Error(o(156,e.tag))};var Xc="function"===typeof reportError?reportError:function(t){console.error(t)};function Zc(t){this._internalRoot=t}function Kc(t){this._internalRoot=t}function $c(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Qc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Jc(){}function tu(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var t=Hc(s);a.call(t)}}Gc(e,s,t,i)}else s=function(t,e,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var t=Hc(s);o.call(t)}}var s=Wc(e,r,t,0,null,!1,0,"",Jc);return t._reactRootContainer=s,t[pi]=s.current,Vr(8===t.nodeType?t.parentNode:t),dc(),s}for(;i=t.lastChild;)t.removeChild(i);if("function"===typeof r){var a=r;r=function(){var t=Hc(l);a.call(t)}}var l=Uc(t,0,!1,null,0,!1,0,"",Jc);return t._reactRootContainer=l,t[pi]=l.current,Vr(8===t.nodeType?t.parentNode:t),dc((function(){Gc(e,l,n,r)})),l}(n,e,t,i,r);return Hc(s)}Kc.prototype.render=Zc.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(o(409));Gc(t,e,null,null)},Kc.prototype.unmount=Zc.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;dc((function(){Gc(null,t,null,null)})),e[pi]=null}},Kc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ae();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Le.length&&0!==e&&e<Le[n].priority;n++);Le.splice(n,0,t),0===n&&Ne(t)}},we=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=de(e.pendingLanes);0!==n&&(ve(e,1|n),ic(e,$t()),0===(6&Il)&&(Wl=$t()+500,Vi()))}break;case 13:dc((function(){var e=Mo(t,1);if(null!==e){var n=ec();rc(e,t,1,n)}})),Yc(t,1)}},xe=function(t){if(13===t.tag){var e=Mo(t,134217728);if(null!==e)rc(e,t,134217728,ec());Yc(t,134217728)}},Se=function(t){if(13===t.tag){var e=nc(t),n=Mo(t,e);if(null!==n)rc(n,t,e,ec());Yc(t,e)}},Ae=function(){return be},Ee=function(t,e){var n=be;try{return be=t,e()}finally{be=n}},xt=function(t,e,n){switch(e){case"input":if(Q(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=wi(r);if(!i)throw Error(o(90));Y(r),Q(r,i)}}}break;case"textarea":ot(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Ct=uc,It=dc;var eu={usingClientEntryPoint:!1,Events:[bi,_i,wi,Tt,Pt,uc]},nu={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Ht(t))?null:t.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{ie=iu.inject(ru),oe=iu}catch(ut){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(e))throw Error(o(200));return function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!$c(t))throw Error(o(299));var n=!1,r="",i=Xc;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=Uc(t,1,!1,null,0,n,0,r,i),t[pi]=e.current,Vr(8===t.nodeType?t.parentNode:t),new Zc(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(o(188));throw t=Object.keys(t).join(","),Error(o(268,t))}return t=null===(t=Ht(e))?null:t.stateNode},e.flushSync=function(t){return dc(t)},e.hydrate=function(t,e,n){if(!Qc(e))throw Error(o(200));return tu(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!$c(t))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Xc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),e=Wc(e,null,t,1,null!=n?n:null,i,0,s,a),t[pi]=e.current,Vr(t),r)for(t=0;t<r.length;t++)i=(i=(n=r[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Kc(e)},e.render=function(t,e,n){if(!Qc(e))throw Error(o(200));return tu(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Qc(t))throw Error(o(40));return!!t._reactRootContainer&&(dc((function(){tu(null,null,t,!1,(function(){t._reactRootContainer=null,t[pi]=null}))})),!0)},e.unstable_batchedUpdates=uc,e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Qc(n))throw Error(o(200));if(null==t||void 0===t._reactInternals)throw Error(o(38));return tu(t,e,n,!1,r)},e.version="18.2.0-next-9e3b772b8-20220608"},7950:(t,e,n)=>{"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(2730)},5082:(t,e)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function y(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case o:case a:case s:case h:case f:return t;default:switch(t=t&&t.$$typeof){case u:case c:case d:case g:case p:case l:return t;default:return e}}case i:return e}}}n=Symbol.for("react.module.reference"),e.ForwardRef=d,e.Memo=p},2086:(t,e,n)=>{"use strict";t.exports=n(5082)},1153:(t,e,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(u=e.ref),e)s.call(e,r)&&!l.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===o[r]&&(o[r]=e[r]);return{$$typeof:i,type:t,key:c,ref:u,props:o,_owner:a.current}}e.Fragment=o,e.jsx=c,e.jsxs=c},4202:(t,e)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}function v(){}function b(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=y.prototype;var _=b.prototype=new v;_.constructor=b,g(_,y.prototype),_.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,S={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function E(t,e,r){var i,o={},s=null,a=null;if(null!=e)for(i in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)x.call(e,i)&&!A.hasOwnProperty(i)&&(o[i]=e[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:t,key:s,ref:a,props:o,_owner:S.current}}function T(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var P=/\/+/g;function C(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function I(t,e,i,o,s){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=t),t=""===o?"."+C(l,0):o,w(s)?(i="",null!=t&&(i=t.replace(P,"$&/")+"/"),I(s,e,i,"",(function(t){return t}))):null!=s&&(T(s)&&(s=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(P,"$&/")+"/")+t)),e.push(s)),1;if(l=0,o=""===o?".":o+":",w(t))for(var c=0;c<t.length;c++){var u=o+C(a=t[c],c);l+=I(a,e,i,u,s)}else if(u=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"===typeof u)for(t=u.call(t),c=0;!(a=t.next()).done;)l+=I(a=a.value,e,i,u=o+C(a,c++),s);else if("object"===a)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function M(t,e,n){if(null==t)return t;var r=[],i=0;return I(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function k(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var O={current:null},L={transition:null},R={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:L,ReactCurrentOwner:S};e.Children={map:M,forEach:function(t,e,n){M(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return M(t,(function(){e++})),e},toArray:function(t){return M(t,(function(t){return t}))||[]},only:function(t){if(!T(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=y,e.Fragment=i,e.Profiler=s,e.PureComponent=b,e.StrictMode=o,e.Suspense=u,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,e.cloneElement=function(t,e,r){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=g({},t.props),o=t.key,s=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,a=S.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)x.call(e,c)&&!A.hasOwnProperty(c)&&(i[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:t.type,key:o,ref:s,props:i,_owner:a}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=E,e.createFactory=function(t){var e=E.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:c,render:t}},e.isValidElement=T,e.lazy=function(t){return{$$typeof:h,_payload:{_status:-1,_result:t},_init:k}},e.memo=function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=L.transition;L.transition={};try{t()}finally{L.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return O.current.useCallback(t,e)},e.useContext=function(t){return O.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return O.current.useDeferredValue(t)},e.useEffect=function(t,e){return O.current.useEffect(t,e)},e.useId=function(){return O.current.useId()},e.useImperativeHandle=function(t,e,n){return O.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return O.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return O.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return O.current.useMemo(t,e)},e.useReducer=function(t,e,n){return O.current.useReducer(t,e,n)},e.useRef=function(t){return O.current.useRef(t)},e.useState=function(t){return O.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return O.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return O.current.useTransition()},e.version="18.2.0"},5043:(t,e,n)=>{"use strict";t.exports=n(4202)},579:(t,e,n)=>{"use strict";t.exports=n(1153)},7234:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<o(i,e)))break t;t[r]=e,t[n]=i,n=r}}function r(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=t[a],c=a+1,u=t[c];if(0>o(l,n))c<i&&0>o(u,l)?(t[r]=u,t[c]=n,r=c):(t[r]=l,t[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break t;t[r]=u,t[c]=n,r=c}}}return e}function o(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(t){for(var e=r(u);null!==e;){if(null===e.callback)i(u);else{if(!(e.startTime<=t))break;i(u),e.sortIndex=e.expirationTime,n(c,e)}e=r(u)}}function w(t){if(m=!1,_(t),!g)if(null!==r(c))g=!0,L(x);else{var e=r(u);null!==e&&R(w,e.startTime-t)}}function x(t,n){g=!1,m&&(m=!1,v(T),T=-1),p=!0;var o=f;try{for(_(n),h=r(c);null!==h&&(!(h.expirationTime>n)||t&&!I());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var a=s(h.expirationTime<=n);n=e.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),_(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&R(w,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,A=!1,E=null,T=-1,P=5,C=-1;function I(){return!(e.unstable_now()-C<P)}function M(){if(null!==E){var t=e.unstable_now();C=t;var n=!0;try{n=E(!0,t)}finally{n?S():(A=!1,E=null)}}else A=!1}if("function"===typeof b)S=function(){b(M)};else if("undefined"!==typeof MessageChannel){var k=new MessageChannel,O=k.port2;k.port1.onmessage=M,S=function(){O.postMessage(null)}}else S=function(){y(M,0)};function L(t){E=t,A||(A=!0,S())}function R(t,n){T=y((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,L(x))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,i,o){var s=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,t){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return t={id:d++,callback:i,priorityLevel:t,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(t.sortIndex=o,n(u,t),null===r(c)&&t===r(u)&&(m?(v(T),T=-1):m=!0,R(w,o-s))):(t.sortIndex=a,n(c,t),g||p||(g=!0,L(x))),t},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},8853:(t,e,n)=>{"use strict";t.exports=n(7234)},7739:(t,e,n)=>{"use strict";var r=n(2123),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,u=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.forward_ref"):60112,f=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116,m="function"===typeof Symbol&&Symbol.iterator;function y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function _(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||v}function w(){}function x(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||v}_.prototype.isReactComponent={},_.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(y(85));this.updater.enqueueSetState(this,t,e,"setState")},_.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},w.prototype=_.prototype;var S=x.prototype=new w;S.constructor=x,r(S,_.prototype),S.isPureReactComponent=!0;var A={current:null},E=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function P(t,e,n){var r,i={},s=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)E.call(e,r)&&!T.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:o,type:t,key:s,ref:a,props:i,_owner:A.current}}function C(t){return"object"===typeof t&&null!==t&&t.$$typeof===o}var I=/\/+/g,M=[];function k(t,e,n,r){if(M.length){var i=M.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function O(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>M.length&&M.push(t)}function L(t,e,n,r){var i=typeof t;"undefined"!==i&&"boolean"!==i||(t=null);var a=!1;if(null===t)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case o:case s:a=!0}}if(a)return n(r,t,""===e?"."+F(t,0):e),1;if(a=0,e=""===e?".":e+":",Array.isArray(t))for(var l=0;l<t.length;l++){var c=e+F(i=t[l],l);a+=L(i,c,n,r)}else if(null===t||"object"!==typeof t?c=null:c="function"===typeof(c=m&&t[m]||t["@@iterator"])?c:null,"function"===typeof c)for(t=c.call(t),l=0;!(i=t.next()).done;)a+=L(i=i.value,c=e+F(i,l++),n,r);else if("object"===i)throw n=""+t,Error(y(31,"[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return a}function R(t,e,n){return null==t?0:L(t,"",e,n)}function F(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function B(t,e){t.func.call(t.context,e,t.count++)}function N(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?z(t,r,n,(function(t){return t})):null!=t&&(C(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(I,"$&/")+"/")+n)),r.push(t))}function z(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(I,"$&/")+"/"),R(t,N,e=k(e,o,r,i)),O(e)}var D={current:null};function j(){var t=D.current;if(null===t)throw Error(y(321));return t}var U={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:A,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:function(t,e,n){if(null==t)return t;var r=[];return z(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;R(t,B,e=k(null,null,e,n)),O(e)},count:function(t){return R(t,(function(){return null}),null)},toArray:function(t){var e=[];return z(t,e,null,(function(t){return t})),e},only:function(t){if(!C(t))throw Error(y(143));return t}},e.Component=_,e.Fragment=a,e.Profiler=c,e.PureComponent=x,e.StrictMode=l,e.Suspense=f,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error(y(267,t));var i=r({},t.props),s=t.key,a=t.ref,l=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,l=A.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)E.call(e,u)&&!T.hasOwnProperty(u)&&(i[u]=void 0===e[u]&&void 0!==c?c[u]:e[u])}var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];i.children=c}return{$$typeof:o,type:t.type,key:s,ref:a,props:i,_owner:l}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:d,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:t},t.Consumer=t},e.createElement=P,e.createFactory=function(t){var e=P.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:h,render:t}},e.isValidElement=C,e.lazy=function(t){return{$$typeof:g,_ctor:t,_status:-1,_result:null}},e.memo=function(t,e){return{$$typeof:p,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return j().useCallback(t,e)},e.useContext=function(t,e){return j().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return j().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return j().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return j().useLayoutEffect(t,e)},e.useMemo=function(t,e){return j().useMemo(t,e)},e.useReducer=function(t,e,n){return j().useReducer(t,e,n)},e.useRef=function(t){return j().useRef(t)},e.useState=function(t){return j().useState(t)},e.version="16.14.0"},6904:(t,e,n)=>{"use strict";t.exports=n(7739)},4634:t=>{function e(){return t.exports=e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(this,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},4994:t=>{t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.__esModule=!0,t.exports.default=t.exports},4893:t=>{t.exports=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i},t.exports.__esModule=!0,t.exports.default=t.exports},8168:(t,e,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r.apply(this,arguments)}n.d(e,{A:()=>r})},8587:(t,e,n)=>{"use strict";function r(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}n.d(e,{A:()=>r})}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},(()=>{var t,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};t=t||[null,e({}),e([]),e(e)];for(var a=2&i&&r;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((t=>s[t]=()=>r[t]));return s.default=()=>r,n.d(o,s),o}})(),n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t=n(5043),e=n.t(t,2),r=n(7950);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:String(e)}function s(t,e,n){return(e=o(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let a=1,l=1;class c{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(t){const{delay:e=0,duration:n=Number.POSITIVE_INFINITY,rate:r=1,repeat:i=1}=t,o=a++,s={time:0,delay:e,duration:n,rate:r,repeat:i};return this._setChannelTime(s,this.time),this.channels.set(o,s),o}removeChannel(t){this.channels.delete(t);for(const[e,n]of this.animations)n.channel===t&&this.detachAnimation(e)}isFinished(t){const e=this.channels.get(t);return void 0!==e&&this.time>=e.delay+e.duration*e.repeat}getTime(t){if(void 0===t)return this.time;const e=this.channels.get(t);return void 0===e?-1:e.time}setTime(t){this.time=Math.max(0,t);const e=this.channels.values();for(const r of e)this._setChannelTime(r,this.time);const n=this.animations.values();for(const r of n){const{animation:t,channel:e}=r;t.setTime(this.getTime(e))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,e){const n=l++;return this.animations.set(n,{animation:t,channel:e}),t.setTime(this.getTime(e)),n}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,e){const n=e-t.delay;n>=t.duration*t.repeat?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}const u="Awaiting state",d="Matched. State transferred from previous layer",h="Initialized",f="Discarded. Awaiting garbage collection",p="No longer matched. Awaiting garbage collection",g="Finalized! Awaiting garbage collection",m=Symbol.for("component"),y=Symbol.for("propTypes"),v=Symbol.for("deprecatedProps"),b=Symbol.for("asyncPropDefaults"),_=Symbol.for("asyncPropOriginal"),w=Symbol.for("asyncPropResolved");function x(t){if("undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type)return!0;if("undefined"!==typeof process&&"object"===typeof process.versions&&Boolean(process.versions.electron))return!0;const e="object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function S(){return!("object"===typeof process&&"[object process]"===String(process)&&!process.browser)||x()}const A="undefined"!==typeof __VERSION__?__VERSION__:"untranspiled source";S();class E{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";s(this,"storage",void 0),s(this,"id",void 0),s(this,"config",void 0),this.storage=function(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(e){return null}}(n),this.id=t,this.config=e,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){if(Object.assign(this.config,t),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}}_loadConfiguration(){let t={};if(this.storage){const e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}function T(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const o=t.width*n,s=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let P;function C(t){return"string"===typeof t?P[t.toUpperCase()]||P.WHITE:t}function I(t,e){if(!t)throw new Error(e||"Assertion failed")}!function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(P||(P={}));const M={self:"undefined"!==typeof self&&self,window:"undefined"!==typeof window&&window,global:"undefined"!==typeof n.g&&n.g,document:"undefined"!==typeof document&&document,process:"object"===typeof process&&process},k=M.window||M.self||M.global,O=M.process||{};function L(){let t;var e,n;if(S&&"performance"in k)t=null===k||void 0===k||null===(e=k.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in O){var r;const e=null===O||void 0===O||null===(r=O.hrtime)||void 0===r?void 0:r.call(O);t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}const R={debug:S&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},F={enabled:!0,level:0};function B(){}const N={},z={once:!0};class D{constructor(){let{id:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};s(this,"id",void 0),s(this,"VERSION",A),s(this,"_startTs",L()),s(this,"_deltaTs",L()),s(this,"_storage",void 0),s(this,"userData",{}),s(this,"LOG_THROTTLE_TIMEOUT",0),this.id=t,this.userData={},this._storage=new E("__probe-".concat(this.id,"__"),F),this.timeStamp("".concat(this.id," started")),function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const i of r)"function"===typeof t[i]&&(e.find((t=>i===t))||(t[i]=t[i].bind(t)))}(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((L()-this._startTs).toPrecision(10))}getDelta(){return Number((L()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.setConfiguration({enabled:t}),this}setLevel(t){return this._storage.setConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,e){this._storage.setConfiguration({[t]:e})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,e){I(t,e)}warn(t){return this._getLogFunction(0,t,R.warn,arguments,z)}error(t){return this._getLogFunction(0,t,R.error,arguments)}deprecated(t,e){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(e,"` instead"))}removed(t,e){return this.error("`".concat(t,"` has been removed. Use `").concat(e,"` instead"))}probe(t,e){return this._getLogFunction(t,e,R.log,arguments,{time:!0,once:!0})}log(t,e){return this._getLogFunction(t,e,R.debug,arguments)}info(t,e){return this._getLogFunction(t,e,console.info,arguments)}once(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction(t,e,R.debug||R.info,arguments,z)}table(t,e,n){return e?this._getLogFunction(t,e,console.table||B,n&&[n],{tag:V(e)}):B}image(t){let{logLevel:e,priority:n,image:r,message:i="",scale:o=1}=t;return this._shouldLog(e||n)?S?function(t){let{image:e,message:n="",scale:r=1}=t;if("string"===typeof e){const t=new Image;return t.onload=()=>{const e=T(t,n,r);console.log(...e)},t.src=e,B}const i=e.nodeName||"";if("img"===i.toLowerCase())return console.log(...T(e,n,r)),B;if("canvas"===i.toLowerCase()){const t=new Image;return t.onload=()=>console.log(...T(t,n,r)),t.src=e.toDataURL(),B}return B}({image:r,message:i,scale:o}):function(t){let{image:e,message:n="",scale:r=1}=t;return console.warn("removed"),B}({image:r,message:i,scale:o}):B}time(t,e){return this._getLogFunction(t,e,console.time?console.time:console.info)}timeEnd(t,e){return this._getLogFunction(t,e,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,e){return this._getLogFunction(t,e,console.timeStamp||B)}group(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=U({logLevel:t,message:e,opts:n}),{collapsed:i}=n;return r.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(t,e,Object.assign({},n,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||B)}withGroup(t,e,n){this.group(t,e)();try{n()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=j(t)}_getLogFunction(t,e,n,r,i){if(this._shouldLog(t)){i=U({logLevel:t,message:e,args:r,opts:i}),I(n=n||i.method),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=L();const o=i.tag||i.message;if(i.once){if(N[o])return B;N[o]=L()}return e=function(t,e,n){if("string"===typeof e){const s=n.time?function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(n.total)):"";e=n.time?"".concat(t,": ").concat(s,"  ").concat(e):"".concat(t,": ").concat(e),r=e,i=n.color,o=n.background,S||"string"!==typeof r||(i&&(i=C(i),r="\x1b[".concat(i,"m").concat(r,"\x1b[39m")),o&&(i=C(o),r="\x1b[".concat(o+10,"m").concat(r,"\x1b[49m"))),e=r}var r,i,o;return e}(this.id,i.message,i),n.bind(console,e,...i.args)}return B}}function j(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return I(Number.isFinite(e)&&e>=0),e}function U(t){const{logLevel:e,message:n}=t;t.logLevel=j(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"===typeof t.message&&(t.message=t.message());const i=typeof t.message;return I("string"===i||"object"===i),Object.assign(t,{args:r},t.opts)}function V(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}s(D,"VERSION",A);const W=new D({id:"deck"});let G={};function H(t){G=t}function q(t,e,n,r){W.level>0&&G[t]&&G[t].call(null,e,n,r)}function Y(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!0;return Array.isArray(t)?X(t,e,[]):e(t)?[t]:[]}function X(t,e,n){let r=-1;for(;++r<t.length;){const i=t[r];Array.isArray(i)?X(i,e,n):e(i)&&n.push(i)}return n}function Z(t){let{target:e,source:n,start:r=0,count:i=1}=t;const o=n.length,s=i*o;let a=0;for(let l=r;a<o;a++)e[l++]=n[a];for(;a<s;)a<s-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+s-a),a=s);return e}function K(){let t;if("undefined"!==typeof window&&window.performance)t=window.performance.now();else if("undefined"!==typeof process&&process.hrtime){const e=process.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}class ${constructor(t,e){s(this,"name",void 0),s(this,"type",void 0),s(this,"sampleSize",1),s(this,"time",void 0),s(this,"count",void 0),s(this,"samples",void 0),s(this,"lastTiming",void 0),s(this,"lastSampleTime",void 0),s(this,"lastSampleCount",void 0),s(this,"_count",0),s(this,"_time",0),s(this,"_samples",0),s(this,"_startTime",0),s(this,"_timerPending",!1),this.name=t,this.type=e,this.reset()}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=K(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(K()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class Q{constructor(t){s(this,"id",void 0),s(this,"stats",{}),this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}get size(){return Object.keys(this.stats).length}reset(){for(const t in this.stats)this.stats[t].reset();return this}forEach(t){for(const e in this.stats)t(this.stats[e])}getTable(){const t={};return this.forEach((e=>{t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}})),t}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>this._getOrCreate(t)))}_getOrCreate(t){if(!t||!t.name)return null;const{name:e,type:n}=t;return this.stats[e]||(this.stats[e]=t instanceof $?t:new $(e,n)),this.stats[e]}}const J=t=>"boolean"===typeof t,tt=t=>"function"===typeof t,et=t=>null!==t&&"object"===typeof t,nt=t=>et(t)&&t.constructor==={}.constructor,rt=t=>t&&"function"===typeof t[Symbol.iterator],it=t=>t&&"function"===typeof t[Symbol.asyncIterator],ot=t=>"undefined"!==typeof Response&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,st=t=>"undefined"!==typeof Blob&&t instanceof Blob,at=t=>t&&"object"===typeof t&&t.isBuffer,lt=t=>(t=>"undefined"!==typeof ReadableStream&&t instanceof ReadableStream||et(t)&&tt(t.tee)&&tt(t.cancel)&&tt(t.getReader))(t)||(t=>et(t)&&tt(t.read)&&tt(t.pipe)&&J(t.readable))(t);function ct(t,e){if(!t)throw new Error(e||"loader assertion failed.")}function ut(t){var e;if(!t)return!1;Array.isArray(t)&&(t=t[0]);return Array.isArray(null===(e=t)||void 0===e?void 0:e.extensions)}function dt(t){var e,n;let r;return ct(t,"null loader"),ct(ut(t),"invalid loader"),Array.isArray(t)&&(r=t[1],t=t[0],t={...t,options:{...t.options,...r}}),(null!==(e=t)&&void 0!==e&&e.parseTextSync||null!==(n=t)&&void 0!==n&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}let ht="";const ft={};const pt=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,gt=/^([-\w.]+\/[-\w.+]+)/;function mt(t){const e=pt.exec(t);return e?e[1]:""}const yt=/\?.*/;function vt(t){return t.replace(yt,"")}function bt(t){if(ot(t)){return t.url}if(st(t)){return t.name||""}return"string"===typeof t?t:""}function _t(t){if(ot(t)){const e=t,n=e.headers.get("content-type")||"",r=vt(e.url);return function(t){const e=gt.exec(t);return e?e[1]:t}(n)||mt(r)}if(st(t)){return t.type||""}return"string"===typeof t?mt(t):""}async function wt(t){if(ot(t))return t;const e={},n=function(t){if(ot(t))return t.headers["content-length"]||-1;if(st(t))return t.size;return"string"===typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}(t);n>=0&&(e["content-length"]=String(n));const r=bt(t),i=_t(t);i&&(e["content-type"]=i);const o=await async function(t){const e=5;if("string"===typeof t)return"data:,".concat(t.slice(0,e));if(t instanceof Blob){const e=t.slice(0,5);return await new Promise((t=>{const n=new FileReader;n.onload=e=>{var n;return t(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.result)},n.readAsDataURL(e)}))}if(t instanceof ArrayBuffer){const n=function(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}(t.slice(0,e));return"data:base64,".concat(n)}return null}(t);o&&(e["x-first-bytes"]=o),"string"===typeof t&&(t=(new TextEncoder).encode(t));const s=new Response(t,{headers:e});return Object.defineProperty(s,"url",{value:r}),s}async function xt(t,e){if("string"===typeof t){t=function(t){for(const e in ft)if(t.startsWith(e)){const n=ft[e];t=t.replace(e,n)}return t.startsWith("http://")||t.startsWith("https://")||(t="".concat(ht).concat(t)),t}(t);let n=e;return null!==e&&void 0!==e&&e.fetch&&"function"!==typeof(null===e||void 0===e?void 0:e.fetch)&&(n=e.fetch),await fetch(t,n)}return await wt(t)}const St=new D({id:"loaders.gl"});class At{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}"undefined"!==typeof self&&self,"undefined"!==typeof window&&window,"undefined"!==typeof n.g&&n.g,"undefined"!==typeof document&&document;const Et=Boolean("object"!==typeof process||"[object process]"!==String(process)||process.browser),Tt="undefined"!==typeof process&&process.version&&/v([0-9]*)/.exec(process.version),Pt=(Tt&&parseFloat(Tt[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){s(this,"console",void 0),this.console=console}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.log.bind(this.console,...e)}info(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.info.bind(this.console,...e)}warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.warn.bind(this.console,...e)}error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:Et,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),Ct={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function It(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const Mt=()=>{const t=It();return t.globalOptions=t.globalOptions||{...Pt},t.globalOptions};function kt(t,e,n,r){return n=n||[],function(t,e){Ot(t,null,Pt,Ct,e);for(const n of e){const r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},o=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};Ot(r,n.id,i,o,e)}}(t,n=Array.isArray(n)?n:[n]),Rt(e,t,r)}function Ot(t,e,n,r,i){const o=e||"Top level",s=e?"".concat(e,"."):"";for(const a in t){const l=!e&&et(t[a]);if(!(a in n)&&!("baseUri"===a&&!e)&&!("workerUrl"===a&&e))if(a in r)St.warn("".concat(o," loader option '").concat(s).concat(a,"' no longer supported, use '").concat(r[a],"'"))();else if(!l){const t=Lt(a,i);St.warn("".concat(o," loader option '").concat(s).concat(a,"' not recognized. ").concat(t))()}}}function Lt(t,e){const n=t.toLowerCase();let r="";for(const i of e)for(const e in i.options){if(t===e)return"Did you mean '".concat(i.id,".").concat(e,"'?");const o=e.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(r=r||"Did you mean '".concat(i.id,".").concat(e,"'?"))}return r}function Rt(t,e,n){const r={...t.options||{}};return function(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(r,n),null===r.log&&(r.log=new At),Ft(r,Mt()),Ft(r,e),r}function Ft(t,e){for(const n in e)if(n in e){const r=e[n];nt(r)&&nt(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function Bt(t,e){const n=Mt(),r=t||n;return"function"===typeof r.fetch?r.fetch:et(r.fetch)?t=>xt(t,r):null!==e&&void 0!==e&&e.fetch?null===e||void 0===e?void 0:e.fetch:xt}function Nt(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const zt="3.4.15";"undefined"!==typeof self&&self,"undefined"!==typeof window&&window,"undefined"!==typeof n.g&&n.g,"undefined"!==typeof document&&document;const Dt="object"!==typeof process||"[object process]"!==String(process)||process.browser,jt="undefined"!==typeof window&&"undefined"!==typeof window.orientation,Ut="undefined"!==typeof process&&process.version&&/v([0-9]*)/.exec(process.version);Ut&&parseFloat(Ut[1]);class Vt{terminate(){}}const Wt=new Map;function Gt(t){Nt(t.source&&!t.url||!t.source&&t.url);let e=Wt.get(t.source||t.url);return e||(t.url&&(e=function(t){if(!t.startsWith("http"))return t;return Ht((e=t,"try {\n  importScripts('".concat(e,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")));var e}(t.url),Wt.set(t.url,e)),t.source&&(e=Ht(t.source),Wt.set(t.source,e))),Nt(e),e}function Ht(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function qt(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;const r=n||new Set;if(t){if(Yt(t))r.add(t);else if(Yt(t.buffer))r.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"===typeof t)for(const i in t)qt(t[i],e,r)}else;return void 0===n?Array.from(r):[]}function Yt(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!==typeof MessagePort&&t instanceof MessagePort||("undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}const Xt=()=>{};class Zt{static isSupported(){return"undefined"!==typeof Worker&&Dt||"undefined"!==typeof Vt&&!Dt}constructor(t){s(this,"name",void 0),s(this,"source",void 0),s(this,"url",void 0),s(this,"terminated",!1),s(this,"worker",void 0),s(this,"onMessage",void 0),s(this,"onError",void 0),s(this,"_loadableURL","");const{name:e,source:n,url:r}=t;Nt(n||r),this.name=e,this.source=n,this.url=r,this.onMessage=Xt,this.onError=t=>console.log(t),this.worker=Dt?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=Xt,this.onError=Xt,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(t,e){e=e||qt(t),this.worker.postMessage(t,e)}_getErrorFromErrorEvent(t){let e="Failed to load ";return e+="worker ".concat(this.name," from ").concat(this.url,". "),t.message&&(e+="".concat(t.message," in ")),t.lineno&&(e+=":".concat(t.lineno,":").concat(t.colno)),new Error(e)}_createBrowserWorker(){this._loadableURL=Gt({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},t.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},t.onmessageerror=t=>console.error(t),t}_createNodeWorker(){let t;if(this.url){const e=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);t=new Vt(e,{eval:!1})}else{if(!this.source)throw new Error("no worker");t=new Vt(this.source,{eval:!0})}return t.on("message",(t=>{this.onMessage(t)})),t.on("error",(t=>{this.onError(t)})),t.on("exit",(t=>{})),t}}class Kt{constructor(t,e){s(this,"name",void 0),s(this,"workerThread",void 0),s(this,"isRunning",!0),s(this,"result",void 0),s(this,"_resolve",(()=>{})),s(this,"_reject",(()=>{})),this.name=t,this.workerThread=e,this.result=new Promise(((t,e)=>{this._resolve=t,this._reject=e}))}postMessage(t,e){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:e})}done(t){Nt(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){Nt(this.isRunning),this.isRunning=!1,this._reject(t)}}class $t{static isSupported(){return Zt.isSupported()}constructor(t){s(this,"name","unnamed"),s(this,"source",void 0),s(this,"url",void 0),s(this,"maxConcurrency",1),s(this,"maxMobileConcurrency",1),s(this,"onDebug",(()=>{})),s(this,"reuseWorkers",!0),s(this,"props",{}),s(this,"jobQueue",[]),s(this,"idleQueue",[]),s(this,"count",0),s(this,"isDestroyed",!1),this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach((t=>t.destroy())),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)}async startJob(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t,e,n)=>t.done(n),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(t,e)=>t.error(e);const r=new Promise((r=>(this.jobQueue.push({name:t,onMessage:e,onError:n,onStart:r}),this)));return this._startQueuedJob(),await r}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const e=this.jobQueue.shift();if(e){this.onDebug({message:"Starting job",name:e.name,workerThread:t,backlog:this.jobQueue.length});const n=new Kt(e.name,t);t.onMessage=t=>e.onMessage(n,t.type,t.payload),t.onError=t=>e.onError(n,t),e.onStart(n);try{await n.result}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new Zt({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return jt?this.maxMobileConcurrency:this.maxConcurrency}}const Qt={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Jt{static isSupported(){return Zt.isSupported()}static getWorkerFarm(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Jt._workerFarm=Jt._workerFarm||new Jt({}),Jt._workerFarm.setProps(t),Jt._workerFarm}constructor(t){s(this,"props",void 0),s(this,"workerPools",new Map),this.props={...Qt},this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const e of this.workerPools.values())e.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:e,source:n,url:r}=t;let i=this.workerPools.get(e);return i||(i=new $t({name:e,source:n,url:r}),i.setProps(this._getWorkerPoolProps()),this.workerPools.set(e,i)),i}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}s(Jt,"_workerFarm",void 0);const te="latest";async function ee(t,e,n,r,i){const o=t.id,s=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e[t.id]||{},r="".concat(t.id,"-worker.js");let i=n.workerUrl;if(i||"compression"!==t.id||(i=e.workerUrl),"test"===e._workerType&&(i="modules/".concat(t.module,"/dist/").concat(r)),!i){let e=t.version;"latest"===e&&(e=te);const n=e?"@".concat(e):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(n,"/dist/").concat(r)}return Nt(i),i}(t,n),a=Jt.getWorkerFarm(n).getWorkerPool({name:o,url:s});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const l=await a.startJob("process-on-worker",ne.bind(null,i));l.postMessage("process",{input:e,options:n,context:r});const c=await l.result;return await c.result}async function ne(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:o,input:s,options:a}=r;try{const n=await t(s,a);e.postMessage("done",{id:o,result:n})}catch(i){const t=i instanceof Error?i.message:"unknown error";e.postMessage("error",{id:o,error:t})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}async function re(t){const e=[];for await(const n of t)e.push(n);return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.map((t=>t instanceof ArrayBuffer?new Uint8Array(t):t)),i=r.reduce(((t,e)=>t+e.byteLength),0),o=new Uint8Array(i);let s=0;for(const a of r)o.set(a,s),s+=a.byteLength;return o.buffer}(...e)}const ie=262144;const oe=262144;const se=1048576;function ae(t){if((e=t)&&"object"===typeof e&&e.isBuffer)return t;var e;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"===typeof t){const e=t;return(new TextEncoder).encode(e).buffer}if(t&&"object"===typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function le(t,e){return Et?async function*(t,e){const n=t.getReader();let r;try{for(;;){const t=r||n.read();null!==e&&void 0!==e&&e._streamReadAhead&&(r=n.read());const{done:i,value:o}=await t;if(i)return;yield ae(o)}}catch(i){n.releaseLock()}}(t,e):async function*(t,e){for await(const n of t)yield ae(n)}(t)}function ce(t,e){if("string"===typeof t)return function*(t,e){const n=(null===e||void 0===e?void 0:e.chunkSize)||ie;let r=0;const i=new TextEncoder;for(;r<t.length;){const e=Math.min(t.length-r,n),o=t.slice(r,r+e);r+=e,yield i.encode(o)}}(t,e);if(t instanceof ArrayBuffer)return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const{chunkSize:n=oe}=e;let r=0;for(;r<t.byteLength;){const e=Math.min(t.byteLength-r,n),i=new ArrayBuffer(e),o=new Uint8Array(t,r,e);new Uint8Array(i).set(o),r+=e,yield i}}()}(t,e);if(st(t))return async function*(t,e){const n=(null===e||void 0===e?void 0:e.chunkSize)||se;let r=0;for(;r<t.size;){const e=r+n,i=await t.slice(r,e).arrayBuffer();r=e,yield i}}(t,e);if(lt(t))return le(t,e);if(ot(t)){return le(t.body,e)}throw new Error("makeIterator")}const ue="Cannot convert supplied data type";async function de(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if("string"===typeof t||r)return function(t,e,n){if(e.text&&"string"===typeof t)return t;if(at(t)&&(t=t.buffer),t instanceof ArrayBuffer){const n=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let n=t.buffer;const r=t.byteLength||t.length;return 0===t.byteOffset&&r===n.byteLength||(n=n.slice(t.byteOffset,t.byteOffset+r)),n}throw new Error(ue)}(t,e);if(st(t)&&(t=await wt(t)),ot(t)){const n=t;return await async function(t){if(!t.ok){const e=await async function(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let r=t.statusText;n.includes("application/json")&&(r+=" ".concat(await t.text())),e+=r,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch(n){}return e}(t);throw new Error(e)}}(n),e.binary?await n.arrayBuffer():await n.text()}if(lt(t)&&(t=ce(t,n)),rt(t)||it(t))return re(t);throw new Error(ue)}function he(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function fe(t,e,n){if(n)return n;const r={fetch:Bt(e,t),...t};if(r.url){const t=vt(r.url);r.baseUrl=t,r.queryString=function(t){const e=t.match(yt);return e&&e[0]}(r.url),r.filename=he(t),r.baseUrl=function(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}(t)}return Array.isArray(r.loaders)||(r.loaders=null),r}const pe=new D({id:"loaders.gl"}),ge=()=>{const t=It();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};const me=/\.([^.]+)$/;function ye(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!ve(t))return null;if(e&&!Array.isArray(e))return dt(e);let i=[];e&&(i=i.concat(e)),null!==n&&void 0!==n&&n.ignoreRegisteredLoaders||i.push(...ge()),function(t){for(const e of t)dt(e)}(i);const o=function(t,e,n,r){const i=bt(t),o=_t(t),s=vt(i)||(null===r||void 0===r?void 0:r.url);let a=null,l="";null!==n&&void 0!==n&&n.mimeType&&(a=_e(e,null===n||void 0===n?void 0:n.mimeType),l="match forced by supplied MIME type ".concat(null===n||void 0===n?void 0:n.mimeType));var c;a=a||function(t,e){const n=e&&me.exec(e),r=n&&n[1];return r?function(t,e){e=e.toLowerCase();for(const n of t)for(const t of n.extensions)if(t.toLowerCase()===e)return n;return null}(t,r):null}(e,s),l=l||(a?"matched url ".concat(s):""),a=a||_e(e,o),l=l||(a?"matched MIME type ".concat(o):""),a=a||function(t,e){if(!e)return null;for(const n of t)if("string"===typeof e){if(we(e,n))return n}else if(ArrayBuffer.isView(e)){if(xe(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer){if(xe(e,0,n))return n}return null}(e,t),l=l||(a?"matched initial data ".concat(Se(t)):""),a=a||_e(e,null===n||void 0===n?void 0:n.fallbackMimeType),l=l||(a?"matched fallback MIME type ".concat(o):""),l&&pe.log(1,"selectLoader selected ".concat(null===(c=a)||void 0===c?void 0:c.name,": ").concat(l,"."));return a}(t,i,n,r);if(!o&&(null===n||void 0===n||!n.nothrow))throw new Error(be(t));return o}function ve(t){return!(t instanceof Response&&204===t.status)}function be(t){const e=bt(t),n=_t(t);let r="No valid loader found (";r+=e?"".concat(he(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const i=t?Se(t):"";return r+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",r+=")",r}function _e(t,e){for(const n of t){if(n.mimeTypes&&n.mimeTypes.includes(e))return n;if(e==="application/x.".concat(n.id))return n}return null}function we(t,e){if(e.testText)return e.testText(t);return(Array.isArray(e.tests)?e.tests:[e.tests]).some((e=>t.startsWith(e)))}function xe(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some((r=>function(t,e,n,r){if(r instanceof ArrayBuffer)return function(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":return r===Ae(t,e,r.length);default:return!1}}(t,e,n,r)))}function Se(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"===typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return Ae(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer){return Ae(t,0,e)}return""}function Ae(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let i="";for(let o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(e+o));return i}async function Ee(t,e,n,r){Nt(!r||"object"===typeof r),!e||Array.isArray(e)||ut(e)||(r=void 0,n=e,e=void 0),n=n||{};const i=bt(t=await t),o=function(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const t=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...t]:t}return n&&n.length?n:null}(e,r),s=await async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!ve(t))return null;let i=ye(t,e,{...n,nothrow:!0},r);if(i)return i;if(st(t)&&(i=ye(t=await t.slice(0,10).arrayBuffer(),e,n,r)),!i&&(null===n||void 0===n||!n.nothrow))throw new Error(be(t));return i}(t,o,n);return s?(r=fe({url:i,parse:Ee,loaders:o},n=kt(n,s,o,i),r||null),await async function(t,e,n,r){if(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zt;Nt(t,"no worker provided");const n=t.version}(t),ot(e)){const t=e,{ok:n,redirected:i,status:o,statusText:s,type:a,url:l}=t,c=Object.fromEntries(t.headers.entries());r.response={headers:c,ok:n,redirected:i,status:o,statusText:s,type:a,url:l}}if(e=await de(e,t,n),t.parseTextSync&&"string"===typeof e)return n.dataType="text",t.parseTextSync(e,n,r,t);if(function(t,e){return!!Jt.isSupported()&&!!(Dt||null!==e&&void 0!==e&&e._nodeWorkers)&&t.worker&&(null===e||void 0===e?void 0:e.worker)}(t,n))return await ee(t,e,n,r,Ee);if(t.parseText&&"string"===typeof e)return await t.parseText(e,n,r,t);if(t.parse)return await t.parse(e,n,r,t);throw Nt(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}(s,t,n,r)):null}async function Te(t,e,n,r){Array.isArray(e)||ut(e)||(void 0,n=e,e=void 0);const i=Bt(n);let o=t;return"string"===typeof t&&(o=await i(t)),st(t)&&(o=await i(t)),await Ee(o,e,n)}class Pe{constructor(t,e,n){s(this,"id",void 0),s(this,"context",void 0),s(this,"isLoaded",void 0),s(this,"persistent",void 0),s(this,"_loadCount",0),s(this,"_subscribers",new Set),s(this,"_data",void 0),s(this,"_loader",void 0),s(this,"_error",void 0),s(this,"_content",void 0),this.id=t,this.context=n,this.setData(e)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then((()=>this.getData()))}setData(t,e){if(t===this._data&&!e)return;this._data=t;const n=++this._loadCount;let r=t;"string"===typeof t&&(r=Te(t)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then((t=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=t)})).catch((t=>{this._loadCount===n&&(this.isLoaded=!0,this._error=t||!0)}))):(this.isLoaded=!0,this._error=void 0,this._content=t);for(const i of this._subscribers)i.onChange(this.getData())}}class Ce{constructor(t){let{gl:e,protocol:n}=t;s(this,"protocol",void 0),s(this,"_context",void 0),s(this,"_resources",void 0),s(this,"_consumers",void 0),s(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return!!t.startsWith(this.protocol)||t in this._resources}add(t){let{resourceId:e,data:n,forceUpdate:r=!1,persistent:i=!0}=t,o=this._resources[e];o?o.setData(n,r):(o=new Pe(e,n,this._context),this._resources[e]=o),o.persistent=i}remove(t){const e=this._resources[t];e&&(e.delete(),delete this._resources[t])}unsubscribe(t){let{consumerId:e}=t;const n=this._consumers[e];if(n){for(const t in n){const e=n[t],r=this._resources[e.resourceId];r&&r.unsubscribe(e)}delete this._consumers[e],this.prune()}}subscribe(t){let{resourceId:e,onChange:n,consumerId:r,requestId:i="default"}=t;const{_resources:o,protocol:s}=this;e.startsWith(s)&&(e=e.replace(s,""),o[e]||this.add({resourceId:e,data:null,persistent:!1}));const a=o[e];if(this._track(r,i,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout((()=>this._prune()),0))}finalize(){for(const t in this._resources)this._resources[t].delete()}_track(t,e,n,r){const i=this._consumers,o=i[t]=i[t]||{},s=o[e]||{},a=s.resourceId&&this._resources[s.resourceId];a&&(a.unsubscribe(s),this.prune()),n&&(o[e]=s,s.onChange=r,s.resourceId=n.id,n.subscribe(s))}_prune(){this._pruneRequest=null;for(const t of Object.keys(this._resources)){const e=this._resources[t];e.persistent||e.inUse()||(e.delete(),delete this._resources[t])}}}const Ie=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,"_pool",[]),s(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,e,n){let{size:r=1,type:i,padding:o=0,copy:s=!1,initialize:a=!1,maxCount:l}=n;const c=i||t&&t.constructor||Float32Array,u=e*r+o;if(ArrayBuffer.isView(t)){if(u<=t.length)return t;if(u*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new c(t.buffer,0,u)}let d=1/0;l&&(d=l*r+o);const h=this._allocate(c,u,a,d);return t&&s?h.set(t):a||h.fill(0,0,4),this._release(t),h}release(t){this._release(t)}_allocate(t,e,n,r){let i=Math.max(Math.ceil(e*this.opts.overAlloc),1);i>r&&(i=r);const o=this._pool,s=t.BYTES_PER_ELEMENT*i,a=o.findIndex((t=>t.byteLength>=s));if(a>=0){const e=new t(o.splice(a,1)[0],0,i);return n&&e.fill(0),e}return new t(i)}_release(t){if(!ArrayBuffer.isView(t))return;const e=this._pool,{buffer:n}=t,{byteLength:r}=n,i=e.findIndex((t=>t.byteLength>=r));i<0?e.push(n):(i>0||e.length<this.opts.poolSize)&&e.splice(i,0,n),e.length>this.opts.poolSize&&e.shift()}},Me=(Math.PI,Math.PI,{EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0});function ke(t){let{precision:e=Me.precision}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=function(t){return Math.round(t/Me.EPSILON)*Me.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function Oe(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Le(t,e,n){return Be(t,(t=>Math.max(e,Math.min(n,t))))}function Re(t,e,n){return Oe(t)?t.map(((t,r)=>Re(t,e[r],n))):n*e+(1-n)*t}function Fe(t,e,n){const r=Me.EPSILON;n&&(Me.EPSILON=n);try{if(t===e)return!0;if(Oe(t)&&Oe(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Fe(t[n],e[n]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"===typeof t&&"number"===typeof e&&Math.abs(t-e)<=Me.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{Me.EPSILON=r}}function Be(t,e,n){if(Oe(t)){const r=t;n=n||function(t){return t.clone?t.clone():new Array(t.length)}(r);for(let i=0;i<n.length&&i<r.length;++i)n[i]=e(t[i],i,n);return n}return e(t)}class Ne extends(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check()}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:Oe(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Me)}formatString(t){let e="";for(let n=0;n<this.ELEMENTS;++n)e+=(n>0?", ":"")+ke(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!Fe(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,n){if(void 0===n)return this.lerp(this,t,e);for(let r=0;r<this.ELEMENTS;++r){const i=t[r];this[r]=i+n*(e[r]-i)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),e[n]);return this.check()}add(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const r of e)for(let t=0;t<this.ELEMENTS;++t)this[t]+=r[t];return this.check()}subtract(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const r of e)for(let t=0;t<this.ELEMENTS;++t)this[t]-=r[t];return this.check()}scale(t){if("number"===typeof t)for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;else for(let e=0;e<this.ELEMENTS&&e<t.length;++e)this[e]*=t[e];return this.check()}multiplyByScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}check(){if(Me.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),e);return this.check()}get elements(){return this}}function ze(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function De(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(Me.debug&&!function(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}function je(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}class Ue extends Ne{get x(){return this[0]}set x(t){this[0]=ze(t)}get y(){return this[1]}set y(t){this[1]=ze(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let e=0;for(let n=0;n<this.ELEMENTS;++n){const r=this[n]-t[n];e+=r*r}return ze(e)}dot(t){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*t[n];return ze(e)}normalize(){const t=this.magnitude();if(0!==t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const r of e)for(let t=0;t<this.ELEMENTS;++t)this[t]*=r[t];return this.check()}divide(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(const r of e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=r[t];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return je(t>=0&&t<this.ELEMENTS,"index is out of range"),ze(this[t])}setComponent(t,e){return je(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}var Ve=1e-6,We="undefined"!==typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function Ge(){var t=new We(3);return We!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function He(t,e,n){var r=new We(3);return r[0]=t,r[1]=e,r[2]=n,r}function qe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ye(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[0],a=n[1],l=n[2];return t[0]=i*l-o*a,t[1]=o*s-r*l,t[2]=r*a-i*s,t}function Xe(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[3]*r+n[7]*i+n[11]*o+n[15];return s=s||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/s,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/s,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/s,t}function Ze(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function Ke(t,e,n){var r=n[0],i=n[1],o=n[2],s=n[3],a=e[0],l=e[1],c=e[2],u=i*c-o*l,d=o*a-r*c,h=r*l-i*a,f=i*h-o*d,p=o*u-r*h,g=r*d-i*u,m=2*s;return u*=m,d*=m,h*=m,f*=2,p*=2,g*=2,t[0]=a+u+f,t[1]=l+d+p,t[2]=c+h+g,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var $e=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},Qe=function(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)},Je=function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r};!function(){var t=Ge()}();function tn(t,e,n){const r=e[0],i=e[1],o=e[2],s=n[3]*r+n[7]*i+n[11]*o||1;return t[0]=(n[0]*r+n[4]*i+n[8]*o)/s,t[1]=(n[1]*r+n[5]*i+n[9]*o)/s,t[2]=(n[2]*r+n[6]*i+n[10]*o)/s,t}function en(t,e,n){const r=e[0],i=e[1],o=e[2];return t[0]=n[0]*r+n[3]*i+n[6]*o,t[1]=n[1]*r+n[4]*i+n[7]*o,t[2]=n[2]*r+n[5]*i+n[8]*o,t[3]=e[3],t}const nn=[0,0,0];let rn;class on extends Ue{static get ZERO(){return rn||(rn=new on(0,0,0),Object.freeze(rn)),rn}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(-0,-0,-0),1===arguments.length&&Oe(t)?this.copy(t):(Me.debug&&(ze(t),ze(e),ze(n)),this[0]=t,this[1]=e,this[2]=n)}set(t,e,n){return this[0]=t,this[1]=e,this[2]=n,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return Me.debug&&(ze(t.x),ze(t.y),ze(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=ze(t)}angle(t){return function(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],s=e[1],a=e[2],l=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(o*o+s*s+a*a),c=l&&qe(t,e)/l;return Math.acos(Math.min(Math.max(c,-1),1))}(this,t)}cross(t){return Ye(this,this,t),this.check()}rotateX(t){let{radians:e,origin:n=nn}=t;return function(t,e,n,r){var i=[],o=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}rotateY(t){let{radians:e,origin:n=nn}=t;return function(t,e,n,r){var i=[],o=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}rotateZ(t){let{radians:e,origin:n=nn}=t;return function(t,e,n,r){var i=[],o=[];i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,n,e),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return Xe(this,this,t),this.check()}transformAsVector(t){return tn(this,this,t),this.check()}transformByMatrix3(t){return Ze(this,this,t),this.check()}transformByMatrix2(t){return function(t,e,n){const r=e[0],i=e[1];t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2]}(this,this,t),this.check()}transformByQuaternion(t){return Ke(this,this,t),this.check()}}const sn=new on;function an(t,e,n,r){sn.set(t,e,n);const i=sn.len();return{distance:r/i,normal:new on(-t/i,-e/i,-n/i)}}let ln;function cn(t,e){const{size:n=1,startIndex:r=0}=e,i=void 0!==e.endIndex?e.endIndex:t.length,o=(i-r)/n;ln=Ie.allocate(ln,o,{type:Float32Array,size:2*n});let s=r,a=0;for(;s<i;){for(let e=0;e<n;e++){const r=t[s++];ln[a+e]=r,ln[a+e+n]=(l=r)-Math.fround(l)}a+=2*n}var l;return ln.subarray(0,o*n*2)}function un(t){let e=null,n=!1;for(const r of t)r&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],r[0][0]),e[0][1]=Math.min(e[0][1],r[0][1]),e[1][0]=Math.max(e[1][0],r[1][0]),e[1][1]=Math.max(e[1][1],r[1][1])):e=r);return e}class dn extends Ne{toString(){let t="[";if(Me.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let n=0;n<this.RANK;++n)t+=" ".concat(this[n*this.RANK+e])}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=" ".concat(this[e])}return t+="]",t}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,n){return this[e*this.RANK+t]=ze(n),this}getColumn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0);const n=t*this.RANK;for(let r=0;r<this.RANK;++r)e[r]=this[n+r];return e}setColumn(t,e){const n=t*this.RANK;for(let r=0;r<this.RANK;++r)this[n+r]=e[r];return this}}function hn(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],g=e[13],m=e[14],y=e[15],v=n*a-r*s,b=n*l-i*s,_=n*c-o*s,w=r*l-i*a,x=r*c-o*a,S=i*c-o*l,A=u*g-d*p,E=u*m-h*p,T=u*y-f*p,P=d*m-h*g,C=d*y-f*g,I=h*y-f*m,M=v*I-b*C+_*P+w*T-x*E+S*A;return M?(M=1/M,t[0]=(a*I-l*C+c*P)*M,t[1]=(i*C-r*I-o*P)*M,t[2]=(g*S-m*x+y*w)*M,t[3]=(h*x-d*S-f*w)*M,t[4]=(l*T-s*I-c*E)*M,t[5]=(n*I-i*T+o*E)*M,t[6]=(m*_-p*S-y*b)*M,t[7]=(u*S-h*_+f*b)*M,t[8]=(s*C-a*T+c*A)*M,t[9]=(r*T-n*C-o*A)*M,t[10]=(p*x-g*_+y*v)*M,t[11]=(d*_-u*x-f*v)*M,t[12]=(a*E-s*P-l*A)*M,t[13]=(n*P-r*E+i*A)*M,t[14]=(g*b-p*w-m*v)*M,t[15]=(u*w-d*b+h*v)*M,t):null}function fn(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=e[9],f=e[10],p=e[11],g=e[12],m=e[13],y=e[14],v=e[15],b=n[0],_=n[1],w=n[2],x=n[3];return t[0]=b*r+_*a+w*d+x*g,t[1]=b*i+_*l+w*h+x*m,t[2]=b*o+_*c+w*f+x*y,t[3]=b*s+_*u+w*p+x*v,b=n[4],_=n[5],w=n[6],x=n[7],t[4]=b*r+_*a+w*d+x*g,t[5]=b*i+_*l+w*h+x*m,t[6]=b*o+_*c+w*f+x*y,t[7]=b*s+_*u+w*p+x*v,b=n[8],_=n[9],w=n[10],x=n[11],t[8]=b*r+_*a+w*d+x*g,t[9]=b*i+_*l+w*h+x*m,t[10]=b*o+_*c+w*f+x*y,t[11]=b*s+_*u+w*p+x*v,b=n[12],_=n[13],w=n[14],x=n[15],t[12]=b*r+_*a+w*d+x*g,t[13]=b*i+_*l+w*h+x*m,t[14]=b*o+_*c+w*f+x*y,t[15]=b*s+_*u+w*p+x*v,t}function pn(t,e,n){var r,i,o,s,a,l,c,u,d,h,f,p,g=n[0],m=n[1],y=n[2];return e===t?(t[12]=e[0]*g+e[4]*m+e[8]*y+e[12],t[13]=e[1]*g+e[5]*m+e[9]*y+e[13],t[14]=e[2]*g+e[6]*m+e[10]*y+e[14],t[15]=e[3]*g+e[7]*m+e[11]*y+e[15]):(r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=e[9],f=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=s,t[4]=a,t[5]=l,t[6]=c,t[7]=u,t[8]=d,t[9]=h,t[10]=f,t[11]=p,t[12]=r*g+a*m+d*y+e[12],t[13]=i*g+l*m+h*y+e[13],t[14]=o*g+c*m+f*y+e[14],t[15]=s*g+u*m+p*y+e[15]),t}function gn(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function mn(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=s*i+u*r,t[6]=a*i+d*r,t[7]=l*i+h*r,t[8]=c*i-o*r,t[9]=u*i-s*r,t[10]=d*i-a*r,t[11]=h*i-l*r,t}function yn(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],l=e[3],c=e[4],u=e[5],d=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=s*i+u*r,t[2]=a*i+d*r,t[3]=l*i+h*r,t[4]=c*i-o*r,t[5]=u*i-s*r,t[6]=d*i-a*r,t[7]=h*i-l*r,t}function vn(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],s=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,s,a),t[2]=Math.hypot(l,c,u),t}var bn=function(t,e,n,r,i){var o,s=1/Math.tan(e/2);return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t};var _n=function(t,e,n,r,i,o,s){var a=1/(e-n),l=1/(r-i),c=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*l,t[14]=(s+o)*c,t[15]=1,t};function wn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function xn(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Sn(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}!function(){var t=function(){var t=new We(2);return We!=Float32Array&&(t[0]=0,t[1]=0),t}()}();function An(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function En(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function Tn(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function Pn(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,t}var Cn;!function(){var t=function(){var t=new We(4);return We!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}()}();!function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"}(Cn||(Cn={}));const In=45*Math.PI/180,Mn=1,kn=.1,On=500,Ln=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Rn extends dn{static get IDENTITY(){return function(){Bn||(Bn=new Rn,Object.freeze(Bn));return Bn}()}static get ZERO(){return function(){Fn||(Fn=new Rn([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Fn));return Fn}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return Cn}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,e,n,r,i,o,s,a,l,c,u,d,h,f,p,g){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=s,this[7]=a,this[8]=l,this[9]=c,this[10]=u,this[11]=d,this[12]=h,this[13]=f,this[14]=p,this[15]=g,this.check()}setRowMajor(t,e,n,r,i,o,s,a,l,c,u,d,h,f,p,g){return this[0]=t,this[1]=i,this[2]=l,this[3]=h,this[4]=e,this[5]=o,this[6]=c,this[7]=f,this[8]=n,this[9]=s,this[10]=u,this[11]=p,this[12]=r,this[13]=a,this[14]=d,this[15]=g,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(Ln)}fromObject(t){return this.check()}fromQuaternion(t){return function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n+n,a=r+r,l=i+i,c=n*s,u=r*s,d=r*a,h=i*s,f=i*a,p=i*l,g=o*s,m=o*a,y=o*l;t[0]=1-d-p,t[1]=u+y,t[2]=h-m,t[3]=0,t[4]=u-y,t[5]=1-c-p,t[6]=f+g,t[7]=0,t[8]=h+m,t[9]=f-g,t[10]=1-c-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,t),this.check()}frustum(t){const{left:e,right:n,bottom:r,top:i,near:o=kn,far:s=On}=t;return s===1/0?function(t,e,n,r,i,o){const s=2*o/(n-e),a=2*o/(i-r),l=(n+e)/(n-e),c=(i+r)/(i-r),u=-1,d=-1,h=-2*o;t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=l,t[9]=c,t[10]=u,t[11]=d,t[12]=0,t[13]=0,t[14]=h,t[15]=0}(this,e,n,r,i,o):function(t,e,n,r,i,o,s){var a=1/(n-e),l=1/(i-r),c=1/(o-s);t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*l,t[10]=(s+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*c,t[15]=0}(this,e,n,r,i,o,s),this.check()}lookAt(t){const{eye:e,center:n=[0,0,0],up:r=[0,1,0]}=t;return function(t,e,n,r){var i,o,s,a,l,c,u,d,h,f,p=e[0],g=e[1],m=e[2],y=r[0],v=r[1],b=r[2],_=n[0],w=n[1],x=n[2];Math.abs(p-_)<Ve&&Math.abs(g-w)<Ve&&Math.abs(m-x)<Ve?function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(u=p-_,d=g-w,h=m-x,i=v*(h*=f=1/Math.hypot(u,d,h))-b*(d*=f),o=b*(u*=f)-y*h,s=y*d-v*u,(f=Math.hypot(i,o,s))?(i*=f=1/f,o*=f,s*=f):(i=0,o=0,s=0),a=d*s-h*o,l=h*i-u*s,c=u*o-d*i,(f=Math.hypot(a,l,c))?(a*=f=1/f,l*=f,c*=f):(a=0,l=0,c=0),t[0]=i,t[1]=a,t[2]=u,t[3]=0,t[4]=o,t[5]=l,t[6]=d,t[7]=0,t[8]=s,t[9]=c,t[10]=h,t[11]=0,t[12]=-(i*p+o*g+s*m),t[13]=-(a*p+l*g+c*m),t[14]=-(u*p+d*g+h*m),t[15]=1)}(this,e,n,r),this.check()}ortho(t){const{left:e,right:n,bottom:r,top:i,near:o=kn,far:s=On}=t;return _n(this,e,n,r,i,o,s),this.check()}orthographic(t){const{fovy:e=In,aspect:n=Mn,focalDistance:r=1,near:i=kn,far:o=On}=t;Nn(e);const s=e/2,a=r*Math.tan(s),l=a*n;return this.ortho({left:-l,right:l,bottom:-a,top:a,near:i,far:o})}perspective(t){const{fovy:e=45*Math.PI/180,aspect:n=1,near:r=.1,far:i=500}=t;return Nn(e),bn(this,e,n,r,i),this.check()}determinant(){return function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],l=t[7],c=t[8],u=t[9],d=t[10],h=t[11],f=t[12],p=t[13],g=t[14],m=t[15];return(e*s-n*o)*(d*m-h*g)-(e*a-r*o)*(u*m-h*p)+(e*l-i*o)*(u*g-d*p)+(n*a-r*s)*(c*m-h*f)-(n*l-i*s)*(c*g-d*f)+(r*l-i*a)*(c*p-u*f)}(this)}getScale(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const n=this.getScale(e),r=1/n[0],i=1/n[1],o=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*o,t[3]=0,t[4]=this[4]*r,t[5]=this[5]*i,t[6]=this[6]*o,t[7]=0,t[8]=this[8]*r,t[9]=this[9]*i,t[10]=this[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const n=this.getScale(e),r=1/n[0],i=1/n[1],o=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*o,t[3]=this[4]*r,t[4]=this[5]*i,t[5]=this[6]*o,t[6]=this[8]*r,t[7]=this[9]*i,t[8]=this[10]*o,t}transpose(){return function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}invert(){return hn(this,this),this.check()}multiplyLeft(t){return fn(this,t,this),this.check()}multiplyRight(t){return fn(this,this,t),this.check()}rotateX(t){return mn(this,this,t),this.check()}rotateY(t){return function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],l=e[3],c=e[8],u=e[9],d=e[10],h=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=s*i-u*r,t[2]=a*i-d*r,t[3]=l*i-h*r,t[8]=o*r+c*i,t[9]=s*r+u*i,t[10]=a*r+d*i,t[11]=l*r+h*i}(this,this,t),this.check()}rotateZ(t){return yn(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,e){return function(t,e,n,r){var i,o,s,a,l,c,u,d,h,f,p,g,m,y,v,b,_,w,x,S,A,E,T,P,C=r[0],I=r[1],M=r[2],k=Math.hypot(C,I,M);k<Ve||(C*=k=1/k,I*=k,M*=k,i=Math.sin(n),s=1-(o=Math.cos(n)),a=e[0],l=e[1],c=e[2],u=e[3],d=e[4],h=e[5],f=e[6],p=e[7],g=e[8],m=e[9],y=e[10],v=e[11],b=C*C*s+o,_=I*C*s+M*i,w=M*C*s-I*i,x=C*I*s-M*i,S=I*I*s+o,A=M*I*s+C*i,E=C*M*s+I*i,T=I*M*s-C*i,P=M*M*s+o,t[0]=a*b+d*_+g*w,t[1]=l*b+h*_+m*w,t[2]=c*b+f*_+y*w,t[3]=u*b+p*_+v*w,t[4]=a*x+d*S+g*A,t[5]=l*x+h*S+m*A,t[6]=c*x+f*S+y*A,t[7]=u*x+p*S+v*A,t[8]=a*E+d*T+g*P,t[9]=l*E+h*T+m*P,t[10]=c*E+f*T+y*P,t[11]=u*E+p*T+v*P,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,t,e),this.check()}scale(t){return gn(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return pn(this,this,t),this.check()}transform(t,e){return 4===t.length?(De(e=Pn(e||[-0,-0,-0,-0],t,this),4),e):this.transformAsPoint(t,e)}transformAsPoint(t,e){const{length:n}=t;let r;switch(n){case 2:r=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}(e||[-0,-0],t,this);break;case 3:r=Xe(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return De(r,t.length),r}transformAsVector(t,e){let n;switch(t.length){case 2:n=function(t,e,n){const r=e[0],i=e[1],o=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/o,t[1]=(n[1]*r+n[5]*i)/o,t}(e||[-0,-0],t,this);break;case 3:n=tn(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return De(n,t.length),n}transformPoint(t,e){return this.transformAsPoint(t,e)}transformVector(t,e){return this.transformAsPoint(t,e)}transformDirection(t,e){return this.transformAsVector(t,e)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,e,n){return this.identity().translate([t,e,n])}}let Fn,Bn;function Nn(t){if(t>2*Math.PI)throw Error("expected radians")}function zn(t,e){const n=Pn([],e,t);return An(n,n,1/n[3]),n}function Dn(t,e){const n=t%e;return n<0?e+n:n}function jn(t,e,n){return t<e?e:t>n?n:t}const Un=Math.log2||function(t){return Math.log(t)*Math.LOG2E};function Vn(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Wn=Math.PI,Gn=Wn/4,Hn=Wn/180,qn=180/Wn,Yn=512,Xn=4003e4,Zn=85.051129,Kn=1.5;function $n(t){const[e,n]=t;Vn(Number.isFinite(e)),Vn(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=n*Hn;return[Yn*(e*Hn+Wn)/(2*Wn),Yn*(Wn+Math.log(Math.tan(Gn+.5*r)))/(2*Wn)]}function Qn(t){const[e,n]=t,r=e/Yn*(2*Wn)-Wn,i=2*(Math.atan(Math.exp(n/Yn*(2*Wn)-Wn))-Gn);return[r*qn,i*qn]}function Jn(t){const{latitude:e}=t;Vn(Number.isFinite(e));const n=Math.cos(e*Hn);return function(t){return Un(t)}(Xn*n)-9}function tr(t){const e=Math.cos(t*Hn);return Yn/Xn/e}function er(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;Vn(Number.isFinite(e)&&Number.isFinite(n));const i=Yn,o=Math.cos(e*Hn),s=i/360,a=s/o,l=i/Xn/o,c={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[s,a,l],degreesPerUnit:[1/s,1/a,1/l]};if(r){const t=Hn*Math.tan(e*Hn)/o,n=s*t/2,r=i/Xn*t,u=r/a*l;c.unitsPerDegree2=[0,n,r],c.unitsPerMeter2=[u,0,u]}return c}function nr(t,e){const[n,r,i]=t,[o,s,a]=e,{unitsPerMeter:l,unitsPerMeter2:c}=er({longitude:n,latitude:r,highPrecision:!0}),u=$n(t);u[0]+=o*(l[0]+c[0]*s),u[1]+=s*(l[1]+c[1]*s);const d=Qn(u),h=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[d[0],d[1],h]:d}function rr(t){const{width:e,height:n,altitude:r,pitch:i=0,offset:o,center:s,scale:a,nearZMultiplier:l=1,farZMultiplier:c=1}=t;let{fovy:u=ir(Kn)}=t;void 0!==r&&(u=ir(r));const d=u*Hn,h=i*Hn,f=or(u);let p=f;s&&(p+=s[2]*a/Math.cos(h)/n);const g=d*(.5+(o?o[1]:0)/n),m=Math.sin(g)*p/Math.sin(jn(Math.PI/2-h-g,.01,Math.PI-.01)),y=Math.sin(h)*m+p,v=10*p;return{fov:d,aspect:e/n,focalDistance:f,near:l,far:Math.min(y*c,v)}}function ir(t){return 2*Math.atan(.5/t)*qn}function or(t){return.5/Math.tan(.5*t*Hn)}function sr(t,e){const[n,r,i=0]=t;return Vn(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),zn(e,[n,r,i,1])}function ar(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const[r,i,o]=t;if(Vn(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o)){return zn(e,[r,i,o,1])}const s=zn(e,[r,i,0,1]),a=zn(e,[r,i,1,1]),l=s[2],c=a[2];return Sn([],s,a,l===c?0:((n||0)-l)/(c-l))}function lr(t){const{width:e,height:n,bounds:r,minExtent:i=0,maxZoom:o=24,offset:s=[0,0]}=t,[[a,l],[c,u]]=r,d=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("number"===typeof t)return{top:t,bottom:t,left:t,right:t};return Vn(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t}(t.padding),h=$n([a,jn(u,-85.051129,Zn)]),f=$n([c,jn(l,-85.051129,Zn)]),p=[Math.max(Math.abs(f[0]-h[0]),i),Math.max(Math.abs(f[1]-h[1]),i)],g=[e-d.left-d.right-2*Math.abs(s[0]),n-d.top-d.bottom-2*Math.abs(s[1])];Vn(g[0]>0&&g[1]>0);const m=g[0]/p[0],y=g[1]/p[1],v=(d.right-d.left)/2/m,b=(d.top-d.bottom)/2/y,_=Qn([(f[0]+h[0])/2+v,(f[1]+h[1])/2+b]),w=Math.min(o,Un(Math.abs(Math.min(m,y))));return Vn(Number.isFinite(w)),{longitude:_[0],latitude:_[1],zoom:w}}const cr=Math.PI/180;function ur(t,e,n){const{pixelUnprojectionMatrix:r}=t,i=zn(r,[e,0,1,1]),o=zn(r,[e,t.height,1,1]),s=Qn(Sn([],i,o,(n*t.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2])));return s.push(n),s}const dr={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(dr,"IDENTITY",{get:()=>(W.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const hr={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},fr={common:0,meters:1,pixels:2},pr={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},gr=Math.PI/180,mr=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],yr=[0,0,0],vr={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class br{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,"id",void 0),s(this,"x",void 0),s(this,"y",void 0),s(this,"width",void 0),s(this,"height",void 0),s(this,"padding",void 0),s(this,"isGeospatial",void 0),s(this,"zoom",void 0),s(this,"focalDistance",void 0),s(this,"position",void 0),s(this,"modelMatrix",void 0),s(this,"distanceScales",void 0),s(this,"scale",void 0),s(this,"center",void 0),s(this,"cameraPosition",void 0),s(this,"projectionMatrix",void 0),s(this,"viewMatrix",void 0),s(this,"viewMatrixUncentered",void 0),s(this,"viewMatrixInverse",void 0),s(this,"viewProjectionMatrix",void 0),s(this,"pixelProjectionMatrix",void 0),s(this,"pixelUnprojectionMatrix",void 0),s(this,"resolution",void 0),s(this,"_frustumPlanes",{}),this.id=t.id||this.constructor.displayName||"viewport",this.x=t.x||0,this.y=t.y||0,this.width=t.width||1,this.height=t.height||1,this.zoom=t.zoom||0,this.padding=t.padding,this.distanceScales=t.distanceScales||vr,this.focalDistance=t.focalDistance||1,this.position=t.position||yr,this.modelMatrix=t.modelMatrix||null;const{longitude:e,latitude:n}=t;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(e),this._initProps(t),this._initMatrices(t),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?hr.WEB_MERCATOR:hr.WEB_MERCATOR_AUTO_OFFSET:hr.IDENTITY}equals(t){return t instanceof br&&(this===t||t.width===this.width&&t.height===this.height&&t.scale===this.scale&&Fe(t.projectionMatrix,this.projectionMatrix)&&Fe(t.viewMatrix,this.viewMatrix))}project(t){let{topLeft:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=sr(this.projectPosition(t),this.pixelProjectionMatrix),[r,i]=n,o=e?i:this.height-i;return 2===t.length?[r,o]:[r,o,n[2]]}unproject(t){let{topLeft:e=!0,targetZ:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[r,i,o]=t,s=e?i:this.height-i,a=n&&n*this.distanceScales.unitsPerMeter[2],l=ar([r,s,o],this.pixelUnprojectionMatrix,a),[c,u,d]=this.unprojectPosition(l);return Number.isFinite(o)?[c,u,d]:Number.isFinite(n)?[c,u,n]:[c,u]}projectPosition(t){const[e,n]=this.projectFlat(t);return[e,n,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(t){const[e,n]=this.unprojectFlat(t);return[e,n,(t[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(t){if(this.isGeospatial){const e=$n(t);return e[1]=Le(e[1],-318,830),e}return t}unprojectFlat(t){return this.isGeospatial?Qn(t):t}getBounds(){const t={targetZ:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0},e=this.unproject([0,0],t),n=this.unproject([this.width,0],t),r=this.unproject([0,this.height],t),i=this.unproject([this.width,this.height],t);return[Math.min(e[0],n[0],r[0],i[0]),Math.min(e[1],n[1],r[1],i[1]),Math.max(e[0],n[0],r[0],i[0]),Math.max(e[1],n[1],r[1],i[1])]}getDistanceScales(t){return t?er({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel(t){let{x:e,y:n,width:r=1,height:i=1}=t;return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+i}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,{left:an((t=this.viewProjectionMatrix)[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:an(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:an(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:an(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:an(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:an(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}),this._frustumPlanes;var t}panByPosition(t,e){return null}_initProps(t){const e=t.longitude,n=t.latitude;this.isGeospatial&&(Number.isFinite(t.zoom)||(this.zoom=Jn({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=t.distanceScales||er({latitude:n,longitude:e}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:i,modelMatrix:o}=t;let s=yr;if(i&&(s=o?new Rn(o).transformAsVector(i,[]):i),this.isGeospatial){const t=this.projectPosition([e,n,0]);this.center=new on(s).scale(this.distanceScales.unitsPerMeter).add(t)}else this.center=this.projectPosition(s)}_initMatrices(t){const{viewMatrix:e=mr,projectionMatrix:n=null,orthographic:r=!1,fovyRadians:i,fovy:o=75,near:s=.1,far:a=1e3,padding:l=null,focalDistance:c=1}=t;this.viewMatrixUncentered=e,this.viewMatrix=(new Rn).multiplyRight(e).translate(new on(this.center).negate()),this.projectionMatrix=n||function(t){let{width:e,height:n,orthographic:r,fovyRadians:i,focalDistance:o,padding:s,near:a,far:l}=t;const c=e/n,u=r?(new Rn).orthographic({fovy:i,aspect:c,focalDistance:o,near:a,far:l}):(new Rn).perspective({fovy:i,aspect:c,near:a,far:l});if(s){const{left:t=0,right:r=0,top:i=0,bottom:o=0}=s,a=Le((t+e-r)/2,0,e)-e/2,l=Le((i+n-o)/2,0,n)-n/2;u[8]-=2*a/e,u[9]+=2*l/n}return u}({width:this.width,height:this.height,orthographic:r,fovyRadians:i||o*gr,focalDistance:c,padding:l,near:s,far:a});const u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var d;fn(u,u,this.projectionMatrix),fn(u,u,this.viewMatrix),this.viewProjectionMatrix=u,this.viewMatrixInverse=hn([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=[(d=this.viewMatrixInverse)[12],d[13],d[14]];const h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];gn(h,h,[this.width/2,-this.height/2,1]),pn(h,h,[1,-1,0]),fn(f,h,this.viewProjectionMatrix),this.pixelProjectionMatrix=f,this.pixelUnprojectionMatrix=hn([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||W.warn("Pixel project matrix not invertible")()}}s(br,"displayName","Viewport");const _r="vs",wr="fs";function xr(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const Sr={number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},array:{validate:(t,e)=>Array.isArray(t)||ArrayBuffer.isView(t)}};function Ar(t){let e=Er(t);return"object"===e?t?"type"in t?Object.assign({},t,Sr[t.type]):"value"in t?(e=Er(t.value),Object.assign({type:e},t,Sr[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},Sr[e])}function Er(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}class Tr{constructor(t){let{name:e,vs:n,fs:r,dependencies:i=[],uniforms:o,getUniforms:s,deprecations:a=[],defines:l={},inject:c={},vertexShader:u,fragmentShader:d}=t;xr("string"===typeof e),this.name=e,this.vs=n||u,this.fs=r||d,this.getModuleUniforms=s,this.dependencies=i,this.deprecations=this._parseDeprecationDefinitions(a),this.defines=l,this.injections=function(t){const e={vs:{},fs:{}};for(const n in t){let r=t[n];"string"===typeof r&&(r={order:0,injection:r}),e[n.slice(0,2)][n]=r}return e}(c),o&&(this.uniforms=function(t){const e={};for(const n in t){const r=Ar(t[n]);e[n]=r}return e}(o))}getModuleSource(t){let e;switch(t){case"vs":e=this.vs||"";break;case"fs":e=this.fs||"";break;default:xr(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(e,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(t,e){return this.getModuleUniforms?this.getModuleUniforms(t,e):this.uniforms?this._defaultGetUniforms(t):{}}getDefines(){return this.defines}checkDeprecations(t,e){this.deprecations.forEach((n=>{n.regex.test(t)&&(n.deprecated?e.deprecated(n.old,n.new)():e.removed(n.old,n.new)())}))}_parseDeprecationDefinitions(t){return t.forEach((t=>{if("function"===t.type)t.regex=new RegExp("\\b".concat(t.old,"\\("));else t.regex=new RegExp("".concat(t.type," ").concat(t.old,";"))})),t}_defaultGetUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e={},n=this.uniforms;for(const r in n){const i=n[r];r in t&&!i.private?(i.validate&&xr(i.validate(t[r],i),"".concat(this.name,": invalid ").concat(r)),e[r]=t[r]):e[r]=i.value}return e}}function Pr(t){return Cr(Mr(t))}function Cr(t){const e={},n={};return Ir({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort(((t,e)=>n[e]-n[t])).map((t=>e[t]))}function Ir(t){let{modules:e,level:n,moduleMap:r,moduleDepth:i}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const o of e)r[o.name]=o,(void 0===i[o.name]||i[o.name]<n)&&(i[o.name]=n);for(const o of e)o.dependencies&&Ir({modules:o.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}function Mr(t,e){return t.map((t=>(t instanceof Tr||(xr("string"!==typeof t,"Shader module use by name is deprecated. Import shader module '".concat(t,"' and use it directly.")),xr(t.name,"shader module has no name"),(t=new Tr(t)).dependencies=Mr(t.dependencies)),t)))}const kr=7936,Or=7937,Lr=7938,Rr=35724,Fr={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Br={};Object.keys(Fr).forEach((t=>{Br[t]=t}));const Nr={};function zr(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Fr[e];if(xr(r,e),!function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e="undefined"!==typeof window&&window.navigator||{},n=t.userAgent||e.userAgent||"",r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i}(n))return!0;if(e in Nr)return Nr[e];const i=r[0],o=n.behavior||"enable",s="#extension GL_".concat(i," : ").concat(o,"\nvoid main(void) {}"),a=t.createShader(35633);t.shaderSource(a,s),t.compileShader(a);const l=t.getShaderParameter(a,35713);return t.deleteShader(a),Nr[e]=l,l}function Dr(t,e){const n=Fr[e];xr(n,e);const r=function(t){return"undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}(t)&&n[1]||n[0],i="string"===typeof r?Boolean(t.getExtension(r)):r;return xr(!1===i||!0===i),i}function jr(t,e){return(e=Array.isArray(e)?e:[e]).every((e=>Dr(t,e)))}function Ur(t){const e=function(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||kr),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||Or);return{gpuVendor:function(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}(n,r),vendor:n,renderer:r,version:t.getParameter(Lr),shadingLanguageVersion:t.getParameter(Rr)}}(t);switch(e.gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}const Vr={[_r]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",[wr]:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},Wr="__LUMA_INJECT_DECLARATIONS__",Gr=/void\s+main\s*\([^)]*\)\s*\{\n?/,Hr=/}\n?[^{}]*$/,qr=[];function Yr(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=e===_r;for(const o in n){const e=n[o];e.sort(((t,e)=>t.order-e.order)),qr.length=e.length;for(let t=0,n=e.length;t<n;++t)qr[t]=e[t].injection;const r="".concat(qr.join("\n"),"\n");switch(o){case"vs:#decl":i&&(t=t.replace(Wr,r));break;case"vs:#main-start":i&&(t=t.replace(Gr,(t=>t+r)));break;case"vs:#main-end":i&&(t=t.replace(Hr,(t=>r+t)));break;case"fs:#decl":i||(t=t.replace(Wr,r));break;case"fs:#main-start":i||(t=t.replace(Gr,(t=>t+r)));break;case"fs:#main-end":i||(t=t.replace(Hr,(t=>r+t)));break;default:t=t.replace(o,(t=>t+r))}}return t=t.replace(Wr,""),r&&(t=t.replace(/\}\s*$/,(t=>t+Vr[e]))),t}function Xr(t){const e={};return xr(Array.isArray(t)&&t.length>1),t.forEach((t=>{for(const n in t)e[n]=e[n]?"".concat(e[n],"\n").concat(t[n]):t[n]})),e}function Zr(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const Kr=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],$r=[...Kr,[Zr("attribute"),"in $1"],[Zr("varying"),"out $1"]],Qr=[...Kr,[Zr("varying"),"in $1"]],Jr=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],ti=[...Jr,[Zr("in"),"attribute $1"],[Zr("out"),"varying $1"]],ei=[...Jr,[Zr("in"),"varying $1"]],ni="gl_FragColor",ri=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,ii=/void\s+main\s*\([^)]*\)\s*\{\n?/;function oi(t,e,n){switch(e){case 300:return n?si(t,$r):function(t){t=si(t,Qr);const e=t.match(ri);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(ni,"\\b"),"g"),n)}else{const e="fragmentColor";t=t.replace(ii,(t=>"out vec4 ".concat(e,";\n").concat(t))).replace(new RegExp("\\b".concat(ni,"\\b"),"g"),e)}return t}(t);case 100:return n?si(t,ti):function(t){t=si(t,ei);const e=t.match(ri);if(e){const n=e[1];t=t.replace(ri,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),ni)}return t}(t);default:throw new Error("unknown GLSL version ".concat(e))}}function si(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}const ai="\n\n".concat(Wr,"\n\n"),li={[_r]:"vertex",[wr]:"fragment"},ci="precision highp float;\n\n";function ui(t,e){let{id:n,source:r,type:i,modules:o,defines:s={},hookFunctions:a=[],inject:l={},transpileToGLSL100:c=!1,prologue:u=!0,log:d}=e;xr("string"===typeof r,"shader source must be a string");const h=i===_r,f=r.split("\n");let p=100,g="",m=r;0===f[0].indexOf("#version ")?(p=300,g=f[0],m=f.slice(1).join("\n")):g="#version ".concat(p);const y={};o.forEach((t=>{Object.assign(y,t.getDefines())})),Object.assign(y,s);let v=u?"".concat(g,"\n").concat(function(t){let{id:e,source:n,type:r}=t;const i=e&&"string"===typeof e&&-1===n.indexOf("SHADER_NAME");return i?"\n#define SHADER_NAME ".concat(e,"_").concat(li[r],"\n\n"):""}({id:n,source:r,type:i}),"\n").concat(function(t){let{type:e}=t;return"\n#define SHADER_TYPE_".concat(li[e].toUpperCase(),"\n")}({type:i}),"\n").concat(Ur(t),"\n").concat(function(t,e,n){let r="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return jr(t,Br.GLSL_FRAG_DEPTH)&&(r+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),jr(t,Br.GLSL_DERIVATIVES)&&zr(t,Br.GLSL_DERIVATIVES)&&(r+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),jr(t,Br.GLSL_FRAG_DATA)&&zr(t,Br.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),jr(t,Br.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),r}(t),"\n").concat(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(const r in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;const i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],"\n"))}0===e&&(n+="\n");return n}(y),"\n").concat(h?"":ci,"\n"):"".concat(g,"\n");const b=function(t){const e={vs:{},fs:{}};return t.forEach((t=>{let n;"string"!==typeof t?(n=t,t=n.hook):n={},t=t.trim();const[r,i]=t.split(":"),o=t.replace(/\(.+/,"");e[r][o]=Object.assign(n,{signature:i})})),e}(a),_={},w={},x={};for(const S in l){const t="string"===typeof l[S]?{injection:l[S],order:0}:l[S],e=S.match(/^(v|f)s:(#)?([\w-]+)$/);if(e){const n=e[2],r=e[3];n?"decl"===r?w[S]=[t]:x[S]=[t]:_[S]=[t]}else x[S]=[t]}for(const S of o){d&&S.checkDeprecations(m,d);v+=S.getModuleSource(i,p);const t=S.injections[i];for(const e in t){const n=e.match(/^(v|f)s:#([\w-]+)$/);if(n){const r="decl"===n[2]?w:x;r[e]=r[e]||[],r[e].push(t[e])}else _[e]=_[e]||[],_[e].push(t[e])}}return v+=ai,v=Yr(v,i,w),v+=function(t,e){let n="";for(const r in t){const i=t[r];if(n+="void ".concat(i.signature," {\n"),i.header&&(n+="  ".concat(i.header)),e[r]){const t=e[r];t.sort(((t,e)=>t.order-e.order));for(const e of t)n+="  ".concat(e.injection,"\n")}i.footer&&(n+="  ".concat(i.footer)),n+="}\n"}return n}(b[i],_),v+=m,v=Yr(v,i,x),v=oi(v,c?100:p,h),v}function di(t){return function(e){const n={};for(const r of t){const t=r.getUniforms(e,n);Object.assign(n,t)}return n}}const hi=new D({id:"luma.gl"});function fi(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const pi="Invalid WebGLRenderingContext",gi="Requires WebGL2";function mi(t){return"undefined"!==typeof WebGLRenderingContext&&t instanceof WebGLRenderingContext||("undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&Number.isFinite(t._version)))}function yi(t){return"undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||Boolean(t&&2===t._version)}function vi(t){return fi(mi(t),pi),t}function bi(t){return fi(yi(t),gi),t}const _i={};function wi(t,e){var n;_i[t]=!0,void 0!==e&&(n=e,globalThis.console&&globalThis.console.error&&globalThis.console.error(n))}const xi=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const e=new t.VertexAttrib(n);this.attribs[r]=e}this.maxAttrib=0};(xi.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Si=function(t){const e=this;this.gl=t,function(t){const e=t.getError;t.getError=function(){let n;do{n=e.apply(t),0!==n&&(_i[n]=!0)}while(0!==n);for(n in _i)if(_i[n])return delete _i[n],parseInt(n,10);return 0}}(t);const n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(t){return t===e.VERTEX_ARRAY_BINDING_OES?e.currentVertexArrayObject===e.defaultVertexArrayObject?null:e.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(t){const r=e.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,t);return r.attribs[t].enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(t){const r=e.currentVertexArrayObject;r.maxAttrib=Math.max(r.maxAttrib,t);return r.attribs[t].enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(t,r){switch(t){case 34962:e.currentArrayBuffer=r;break;case 34963:e.currentVertexArrayObject.elementArrayBuffer=r}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(t,r){const i=e.currentVertexArrayObject.attribs[t];switch(r){case 34975:return i.buffer;case 34338:return i.enabled;case 34339:return i.size;case 34340:return i.stride;case 34341:return i.type;case 34922:return i.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(t,r,i,o,s,a){const l=e.currentVertexArrayObject;l.maxAttrib=Math.max(l.maxAttrib,t);const c=l.attribs[t];return c.buffer=e.currentArrayBuffer,c.size=r,c.type=i,c.normalized=o,c.stride=s,c.offset=a,c.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",(()=>{var t;t="OESVertexArrayObject emulation library context restored",globalThis.console&&globalThis.console.log&&globalThis.console.log(t),e.reset_()}),!0),this.reset_()};Si.prototype.VERTEX_ARRAY_BINDING_OES=34229,Si.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let e=0;e<this.vertexArrayObjects.length;++e)this.vertexArrayObjects.isAlive=!1;const t=this.gl;this.maxVertexAttribs=t.getParameter(34921),this.defaultVertexArrayObject=new xi(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},Si.prototype.createVertexArrayOES=function(){const t=new xi(this);return this.vertexArrayObjects.push(t),t},Si.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)},Si.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof xi&&t.hasBeenBound&&t.ext===this)},Si.prototype.bindVertexArrayOES=function(t){const e=this.gl;if(t&&!t.isAlive)return void wi(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const n=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const i=this.currentVertexArrayObject;if(r===i)return;r&&i.elementArrayBuffer===r.elementArrayBuffer||n.bindBuffer.call(e,34963,i.elementArrayBuffer);let o=this.currentArrayBuffer;const s=Math.max(r?r.maxAttrib:0,i.maxAttrib);for(let a=0;a<=s;a++){const t=i.attribs[a],s=r?r.attribs[a]:null;if(r&&t.enabled===s.enabled||(t.enabled?n.enableVertexAttribArray.call(e,a):n.disableVertexAttribArray.call(e,a)),t.enabled){let i=!1;r&&t.buffer===s.buffer||(o!==t.buffer&&(n.bindBuffer.call(e,34962,t.buffer),o=t.buffer),i=!0),(i||t.cached!==s.cached)&&n.vertexAttribPointer.call(e,a,t.size,t.type,t.normalized,t.stride,t.offset)}}this.currentArrayBuffer!==o&&n.bindBuffer.call(e,34962,this.currentArrayBuffer)};const Ai="OES_element_index",Ei="WEBGL_draw_buffers",Ti="WEBGL_debug_renderer_info",Pi=t=>yi(t)?void 0:0,Ci={3074:t=>yi(t)?void 0:36064,35723:t=>yi(t)?void 0:4352,35977:Pi,32937:Pi,36795:(t,e)=>{const n=yi(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},37445:(t,e)=>{const n=t.getExtension(Ti);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},37446:(t,e)=>{const n=t.getExtension(Ti);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},34047:(t,e)=>{const n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:Pi,35071:Pi,37447:Pi,36063:(t,e)=>{if(!yi(t)){const n=t.getExtension(Ei);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:Pi,35374:Pi,35377:Pi,34852:t=>{if(!yi(t)){const e=t.getExtension(Ei);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(Ai)?2147483647:65535,33001:t=>t.getExtension(Ai)?16777216:65535,33e3:t=>16777216,37157:Pi,35373:Pi,35657:Pi,36183:Pi,37137:Pi,34045:Pi,35978:Pi,35979:Pi,35968:Pi,35376:Pi,35375:Pi,35659:Pi,37154:Pi,35371:Pi,35658:Pi,35076:Pi,35077:Pi,35380:Pi};const Ii="ANGLE_instanced_arrays";const Mi={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{fi(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[Ii]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){fi(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{fi(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{fi(!1)},deleteQuery:()=>{fi(!1)},beginQuery:()=>{fi(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},ki={readBuffer:(t,e,n)=>{yi(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{const{webgl2:i,ext:o}=function(t,e){return{webgl2:yi(t),ext:t.getExtension(e)}}(t,Ii);let s;switch(r){case 35069:s=!!i&&void 0;break;case 35070:s=i||o?void 0:0}return void 0!==s?s:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!yi(t))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,i)=>yi(t)||32937!==i?t.getInternalformatParameter(n,r,i):new Int32Array([0]),getTexParameter(t,e,n,r){if(34046===r){const{extensions:e}=t.luma,n=e.EXT_texture_filter_anisotropic;r=n&&n.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,r)},getParameter:function(t,e,n){const r=Ci[n],i="function"===typeof r?r(t,e,n):r;return void 0!==i?i:e(n)},hint:(t,e,n,r)=>e(n,r)};function Oi(t,e){let{extension:n,target:r,target2:i}=e;const o=Mi[n];fi(o);const{meta:s={}}=o,{suffix:a=""}=s,l=t.getExtension(n);for(const c of Object.keys(o)){const e="".concat(c).concat(a);let n=null;"meta"===c||"function"===typeof t[c]||(l&&"function"===typeof l[e]?n=function(){return l[e](...arguments)}:"function"===typeof o[c]&&(n=o[c].bind(r))),n&&(r[c]=n,i[c]=n)}}globalThis.polyfillContext=function(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(!function(t){if("function"===typeof t.createVertexArray)return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const t=e.call(this)||[];return t.indexOf("OES_vertex_array_object")<0&&t.push("OES_vertex_array_object"),t};const n=t.getExtension;t.getExtension=function(e){return n.call(this,e)||("OES_vertex_array_object"!==e?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Si(this)),this.__OESVertexArrayObject))}}(t),function(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}(t),function(t,e){for(const n of Object.getOwnPropertyNames(e))"overrides"!==n&&Oi(t,{extension:n,target:t.luma,target2:t})}(t,Mi),function(t,e){let{target:n,target2:r}=e;Object.keys(ki).forEach((e=>{if("function"===typeof ki[e]){const i=t[e]?t[e].bind(t):()=>{},o=ki[e].bind(null,t,i);n[e]=o,r[e]=o}}))}(t,{target:e,target2:t}),e.polyfilled=!0),t};const Li={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Ri=(t,e,n)=>e?t.enable(n):t.disable(n),Fi=(t,e,n)=>t.hint(n,e),Bi=(t,e,n)=>t.pixelStorei(n,e);function Ni(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const zi={3042:Ri,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:Ri,2885:(t,e)=>t.cullFace(e),2929:Ri,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:Ri,35723:Fi,36006:(t,e)=>{const n=yi(t)?36009:36160;return t.bindFramebuffer(n,e)},2886:(t,e)=>t.frontFace(e),33170:Fi,2849:(t,e)=>t.lineWidth(e),32823:Ri,32824:"polygonOffset",10752:"polygonOffset",35977:Ri,32938:"sampleCoverage",32939:"sampleCoverage",3089:Ri,3088:(t,e)=>t.scissor(...e),2960:Ri,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:Bi,3317:Bi,37440:Bi,37441:Bi,37443:Bi,3330:Bi,3332:Bi,3331:Bi,36010:(t,e)=>t.bindFramebuffer(36008,e),3314:Bi,32878:Bi,3316:Bi,3315:Bi,32877:Bi,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=Ni(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=Ni(e)&&2===e.length?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=Ni(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=Ni(e)&&3===e.length?[...e,...e]:e;const[n,r,i,o,s,a]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,o,s,a)},stencilOp:(t,e)=>{e=Ni(e)&&3===e.length?[...e,...e]:e;const[n,r,i,o,s,a]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,o,s,a)},viewport:(t,e)=>t.viewport(...e)};function Di(t,e,n){return void 0!==e[t]?e[t]:n[t]}const ji={blendEquation:(t,e,n)=>t.blendEquationSeparate(Di(32777,e,n),Di(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Di(32969,e,n),Di(32968,e,n),Di(32971,e,n),Di(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Di(32824,e,n),Di(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Di(32938,e,n),Di(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Di(2962,e,n),Di(2967,e,n),Di(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Di(34816,e,n),Di(36003,e,n),Di(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Di(2964,e,n),Di(2965,e,n),Di(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Di(34817,e,n),Di(34818,e,n),Di(34819,e,n))},Ui={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,r,i)=>t({32773:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,r,i)=>t({32969:e,32968:n,32971:r,32970:i}),clearColor:(t,e,n,r,i)=>t({3106:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,r,i)=>t({3107:[e,n,r,i]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,r,i)=>t({3088:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[1028===e?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({2962:e,2967:n,2963:r,34816:e,36003:n,36004:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[1028===e?2962:34816]:n,[1028===e?2967:36003]:r,[1028===e?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({2964:e,2965:n,2966:r,34817:e,34818:n,34819:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[1028===e?2964:34817]:n,[1028===e?2965:34818]:r,[1028===e?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({2978:[e,n,r,i]})},Vi=(t,e)=>t.isEnabled(e),Wi={3042:Vi,2884:Vi,2929:Vi,3024:Vi,32823:Vi,32926:Vi,32928:Vi,3089:Vi,2960:Vi,35977:Vi};function Gi(t){for(const e in t)return!1;return!0}function Hi(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}return!1}function qi(t,e){const n=t[e].bind(t);t[e]=function(){const e=arguments.length<=0?void 0:arguments[0];return e in t.state.cache&&t.state.enable?t.state.cache[e]:n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function Yi(t,e,n){const r=t[e].bind(t);t[e]=function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];const{valueChanged:s,oldValue:a}=n(t.state._updateCache,...i);return s&&r(...i),a},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}class Xi{constructor(t){let{copyState:e=!1,log:n=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=e?function(t,e){if("number"===typeof(e=e||Li)){const n=e,r=Wi[n];return r?r(t,n):t.getParameter(n)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const i of n){const e=Wi[i];r[i]=e?e(t,Number(i)):t.getParameter(Number(i))}return r}(t):Object.assign({},Li),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){fi(this.stateStack.length>0);const t=this.stateStack[this.stateStack.length-1];$i(this.gl,t),this.stateStack.pop()}_updateCache(t){let e,n=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const i in t){fi(void 0!==i);const o=t[i],s=this.cache[i];Hi(o,s)||(n=!0,e=s,r&&!(i in r)&&(r[i]=s),this.cache[i]=o)}return{valueChanged:n,oldValue:e}}}function Zi(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:n=!0,copyState:r}=e;if(fi(void 0!==r),!t.state){const{polyfillContext:e}=globalThis;e&&e(t),t.state=new Xi(t,{copyState:r}),function(t){const e=t.useProgram.bind(t);t.useProgram=function(n){t.state.program!==n&&(e(n),t.state.program=n)}}(t);for(const n in Ui){Yi(t,n,Ui[n])}qi(t,"getParameter"),qi(t,"isEnabled")}return t.state.enable=n,t}function Ki(t){fi(t.state),t.state.pop()}function $i(t,e){if(fi(mi(t),"setParameters requires a WebGL context"),Gi(e))return;const n={};for(const i in e){const r=Number(i),o=zi[i];o&&("string"===typeof o?n[o]=!0:o(t,e[i],r))}const r=t.state&&t.state.cache;if(r)for(const i in n){(0,ji[i])(t,e,r)}}function Qi(t,e,n){if(Gi(e))return n(t);const{nocatch:r=!0}=e;let i;if(function(t){t.state||Zi(t,{copyState:!1}),t.state.push()}(t),$i(t,e),r)i=n(t),Ki(t);else try{i=n(t)}finally{Ki(t)}return i}function Ji(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,r="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return r?t.drawingBufferWidth/r:1}return 1}function to(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(t,e,n,r,i){const o=eo(t[0],e,n);let s=no(t[1],e,r,i),a=eo(t[0]+1,e,n);const l=a===n-1?a:a-1;let c;a=no(t[1]+1,e,r,i),i?(a=0===a?a:a+1,c=s,s=a):c=a===r-1?a:a-1;return{x:o,y:s,width:Math.max(l-o+1,1),height:Math.max(c-s+1,1)}}(e,Ji(t),t.drawingBufferWidth,t.drawingBufferHeight,n)}function eo(t,e,n){return Math.min(Math.round(t*e),n-1)}function no(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const ro=S(),io=ro&&"undefined"!==typeof document,oo={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function so(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};fi(ro,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),t=Object.assign({},oo,t);const{width:e,height:n}=t;function r(e){if(t.throwOnError)throw new Error(e);return console.error(e),null}let i;t.onError=r;const{canvas:o}=t,s=function(t){let e,{canvas:n,width:r=800,height:i=600,onError:o}=t;if("string"===typeof n){io&&"complete"===document.readyState||o("createGLContext called on canvas '".concat(n,"' before page was loaded")),e=document.getElementById(n)}else n?e=n:(e=document.createElement("canvas"),e.id="lumagl-canvas",e.style.width=Number.isFinite(r)?"".concat(r,"px"):"100%",e.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(e,document.body.firstChild));return e}({canvas:o,width:e,height:n,onError:r});return i=function(t,e){const{onError:n}=e;let r=null;const i=t=>r=t.statusMessage||r;t.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:o=!0,webgl2:s=!0}=e;let a=null;s&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e));o&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e));if(t.removeEventListener("webglcontextcreationerror",i,!1),!a)return n("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"));e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1);e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1);return a}(s,t),i?(i=ao(i,t),function(t){const e=yi(t)?"WebGL2":"WebGL1",n=function(t){const e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info"),i=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),o=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||e,renderer:o||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";hi.info(1,"".concat(e).concat(i," context ").concat(r))()}(i),i):null}function ao(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||function(t){if("undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext)return 2;return 1}(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},oo,e);const{manageState:n,debug:r}=e;return n&&Zi(t,{copyState:!1,log:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return hi.log(1,...e)()}}),ro&&r&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),hi.level=Math.max(hi.level,1)):hi.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function lo(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas){return void function(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;r&&i||(hi.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1);t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const o=t.luma.canvasSizeInfo;if(o.clientWidth!==r||o.clientHeight!==i||o.devicePixelRatio!==e){let n=e;const o=Math.floor(r*n),s=Math.floor(i*n);t.canvas.width=o,t.canvas.height=s,t.drawingBufferWidth===o&&t.drawingBufferHeight===s||(hi.warn("Device pixel ratio clamped")(),n=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*n),t.canvas.height=Math.floor(i*n)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}(t,function(t){const e="undefined"===typeof window?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}(e.useDevicePixels),e)}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}const co="8.5.21";const uo=new class{constructor(){this.stats=new Map}get(t){return this.stats.has(t)||this.stats.set(t,new Q({id:t})),this.stats.get(t)}};if(globalThis.luma&&globalThis.luma.VERSION!==co)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(co));globalThis.luma||(S()&&hi.log(1,"luma.gl ".concat(co," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:co,version:co,log:hi,stats:uo,globals:{modules:{},nodeIO:{}}});globalThis.luma;function ho(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function fo(t,e){if("string"!==typeof e)return e;const n=Number(e);if(!isNaN(n))return n;const r=t[e=e.replace(/^.*\./,"")];return ho(void 0!==r,"Accessing undefined constant GL.".concat(e)),r}function po(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}const go={};function mo(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";go[t]=go[t]||1;const e=go[t]++;return"".concat(t,"-").concat(e)}function yo(t){return ho("number"===typeof t,"Input must be a number"),t&&0===(t&t-1)}function vo(t){let e=!0;for(const n in t){e=!1;break}return e}function bo(t,e,n,r){const i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(t);r.forEach((t=>{o.methodName||(o[t]=()=>{throw hi.removed("Calling removed method ".concat(e,".").concat(t,": "),i)(),new Error(t)})}))}const _o="Resource subclass must define virtual methods";class wo{get[Symbol.toStringTag](){return"Resource"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};vi(t);const{id:n,userData:r={}}=e;this.gl=t,this.gl2=t,this.id=n||mo(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=e.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,e&&t&&e.filter(Boolean).forEach((t=>t.delete())),this}bind(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!==typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}unbind(){this.bind(null)}getParameter(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ho(t=fo(this.gl,t));const n=(this.constructor.PARAMETERS||{})[t];if(n){const t=yi(this.gl);if(!((!("webgl2"in n)||t)&&(!("extension"in n)||this.gl.getExtension(n.extension)))){const e=n.webgl1,r="webgl2"in n?n.webgl2:n.webgl1;return t?r:e}}return this._getParameter(t,e)}getParameters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:e,keys:n}=t,r=this.constructor.PARAMETERS||{},i=yi(this.gl),o={},s=e||Object.keys(r);for(const a of s){const e=r[a];if(e&&(!("webgl2"in e)||i)&&(!("extension"in e)||this.gl.getExtension(e.extension))){const r=n?po(this.gl,a):a;o[r]=this.getParameter(a,t),n&&"GLenum"===e.type&&(o[r]=po(this.gl,o[r]))}}return o}setParameter(t,e){ho(t=fo(this.gl,t));const n=(this.constructor.PARAMETERS||{})[t];if(n){const t=yi(this.gl);if(!((!("webgl2"in n)||t)&&(!("extension"in n)||this.gl.getExtension(n.extension))))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(e=fo(e))}return this._setParameter(t,e),this}setParameters(t){for(const e in t)this.setParameter(e,t[e]);return this}stubRemovedMethods(t,e,n){return bo(this,t,e,n)}initialize(t){}_createHandle(){throw new Error(_o)}_deleteHandle(){throw new Error(_o)}_bindHandle(t){throw new Error(_o)}_getOptsFromHandle(){throw new Error(_o)}_getParameter(t,e){throw new Error(_o)}_setParameter(t,e){throw new Error(_o)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const t=this[Symbol.toStringTag],e=uo.get("Resource Counts");e.get("Resources Created").incrementCount(),e.get("".concat(t,"s Created")).incrementCount(),e.get("".concat(t,"s Active")).incrementCount()}_removeStats(){const t=this[Symbol.toStringTag];uo.get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}_trackAllocatedMemory(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(t,e),this._trackAllocatedMemoryForContext(t,e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=t}_trackAllocatedMemoryForContext(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const r=uo.get("Memory Usage".concat(n));r.get("GPU Memory").addCount(t),r.get("".concat(e," Memory")).addCount(t)}_trackDeallocatedMemory(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(t),this._trackDeallocatedMemoryForContext(t,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=uo.get("Memory Usage".concat(e));n.get("GPU Memory").subtractCount(this.byteLength),n.get("".concat(t," Memory")).subtractCount(this.byteLength)}}const xo="Failed to deduce GL constant from typed array";function So(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(xo)}}function Ao(t){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Eo(t){let{data:e,width:n,height:r}=t;const i=Math.round(n/2),o=Math.round(r/2),s=new Uint8Array(i*o*4);for(let a=0;a<o;a++)for(let t=0;t<i;t++)for(let r=0;r<4;r++)s[4*(a*i+t)+r]=e[4*(2*a*n+2*t)+r];return{data:s,width:i,height:o}}function To(t,e,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:o={}}=n;for(const a in r)if(a in e){const e=r[a]?"".concat(t,".").concat(r[a]):"N/A";hi.removed("".concat(t,".").concat(a),e)()}for(const a in i)if(a in e){const e=i[a];hi.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(e))()}let s=null;for(const a in o)if(a in e){const n=o[a];hi.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(n))(),s=s||Object.assign({},e),s[n]=e[a],delete s[a]}return s||e}const Po={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Co={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Io{static getBytesPerElement(t){return Ao(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(t){ho(t.size);return Ao(t.type||5126).BYTES_PER_ELEMENT*t.size}static resolve(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new Io(...[Po,...e])}constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((t=>this._assign(t))),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Io.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Io.getBytesPerVertex(this)}_assign(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=To("Accessor",t,Co),void 0!==t.type&&(this.type=t.type,5124!==t.type&&5125!==t.type||(this.integer=!0)),void 0!==t.size&&(this.size=t.size),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.buffer&&(this.buffer=t.buffer),void 0!==t.index&&("boolean"===typeof t.index?this.index=t.index?1:0:this.index=t.index),void 0!==t.instanced&&(this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(this.divisor=t.isInstanced?1:0),this}}const Mo={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},ko={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:Mo},Oo={removedProps:Mo};class Lo extends wo{get[Symbol.toStringTag](){return"Buffer"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=e.target||(this.gl.webgl2?36662:34962),this.initialize(e),Object.seal(this)}getElementCount(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/Io.getBytesPerElement(t))}getVertexCount(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/Io.getBytesPerVertex(t))}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=To("Buffer",t,ko),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}setProps(t){return"accessor"in(t=To("Buffer",t,Oo))&&this.setAccessor(t.accessor),this}setAccessor(t){return delete(t=Object.assign({},t)).buffer,this.accessor=new Io(t),this}reallocate(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}setData(t){return this.initialize(t)}subData(t){ArrayBuffer.isView(t)&&(t={data:t});const{data:e,offset:n=0,srcOffset:r=0}=t,i=t.byteLength||t.length;ho(e);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==r||void 0!==i?(bi(this.gl),this.gl.bufferSubData(this.target,n,e,r,i)):this.gl.bufferSubData(o,n,e),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(e),this}copyData(t){let{sourceBuffer:e,readOffset:n=0,writeOffset:r=0,size:i}=t;const{gl:o}=this;return bi(o),o.bindBuffer(36662,e.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,n,r,i),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:t=null,srcByteOffset:e=0,dstOffset:n=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};bi(this.gl);const i=Ao(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(e),s=n;let a,l;t?(l=t.length,a=l-s):(a=Math.min(o,r||o),l=s+a);const c=Math.min(o,a);return r=r||c,ho(r<=c),t=t||new i(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,e,t,n,r),this.gl.bindBuffer(36662,null),t}bind(){let{target:t=this.target,index:e=this.accessor&&this.accessor.index,offset:n=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===t||35982===t?void 0!==r?this.gl.bindBufferRange(t,e,this.handle,n,r):(ho(0===n),this.gl.bindBufferBase(t,e,this.handle)):this.gl.bindBuffer(t,this.handle),this}unbind(){let{target:t=this.target,index:e=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===t||35982===t?this.gl.bindBufferBase(t,e,null):this.gl.bindBuffer(t,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.byteLength+e;ho(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,this.usage),this.gl.bufferSubData(r,e,t),this.gl.bindBuffer(r,null),this.debugData=t.slice(0,10),this.bytesUsed=n,this._trackAllocatedMemory(n);const i=So(t);return ho(i),this.setAccessor(new Io(this.accessor,{type:i})),this}_setByteLength(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;ho(t>=0),this._trackDeallocatedMemory();let n=t;0===t&&(n=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,e),this.gl.bindBuffer(r,null),this.usage=e,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(t){const e=t/Ao(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-e}_inferType(t){this.accessor.type||this.setAccessor(new Io(this.accessor,{type:So(t)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(t){this.gl.bindBuffer(this.target,this.handle);const e=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),e}get type(){return hi.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return hi.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(t){return hi.deprecated("setByteLength","reallocate")(),this.reallocate(t)}updateAccessor(t){return hi.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Io(this.accessor,t),this}}const Ro={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},Fo={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},Bo={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};const No=[9729,9728],zo=globalThis.WebGLBuffer||function(){};class Do extends wo{get[Symbol.toStringTag](){return"Texture"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:n,linearFiltering:r}=e;let i=!0;return n&&(i=i&&function(t,e){const n=Ro[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;const r=yi(t)&&n.gl2||n.gl1;return"string"===typeof r?t.getExtension(r):r}(t,n),i=i&&(!r||function(t,e){const n=Ro[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}(t,n))),i}constructor(t,e){const{id:n=mo("texture"),handle:r,target:i}=e;super(t,{id:n,handle:r}),this.target=i,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data;if(e instanceof Promise)return e.then((e=>this.initialize(Object.assign({},t,{pixels:e,data:e})))),this;const n="undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement;if(n&&e.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,e.addEventListener("loadeddata",(()=>this.initialize(t))),this;const{pixels:r=null,format:i=6408,border:o=0,recreate:s=!1,parameters:a={},pixelStore:l={},textureUnit:c}=t;e||(e=r);let{width:u,height:d,dataFormat:h,type:f,compressed:p=!1,mipmaps:g=!0}=t;const{depth:m=0}=t;return({width:u,height:d,compressed:p,dataFormat:h,type:f}=this._deduceParameters({format:i,type:f,dataFormat:h,compressed:p,data:e,width:u,height:d})),this.width=u,this.height=d,this.depth=m,this.format=i,this.type=f,this.dataFormat=h,this.border=o,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),g&&this._isNPOT()&&(hi.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),g=!1,this._updateForNPOT(a)),this.mipmaps=g,this.setImageData({data:e,width:u,height:d,depth:m,format:i,type:f,dataFormat:h,border:o,mipmaps:g,parameters:l,compressed:p}),g&&this.generateMipmap(),this.setParameters(a),s&&(this.data=e),n&&(this._video={video:e,parameters:a,lastTime:e.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?e.currentTime:-1}),this}update(){if(this._video){const{video:t,parameters:e,lastTime:n}=this._video;if(n===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:e}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}resize(t){let{height:e,width:n,mipmaps:r=!1}=t;return n!==this.width||e!==this.height?this.initialize({width:n,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(hi.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Qi(this.gl,t,(()=>{this.gl.generateMipmap(this.target)})),this.gl.bindTexture(this.target,null),this)}setImageData(t){this._trackDeallocatedMemory("Texture");const{target:e=this.target,pixels:n=null,level:r=0,format:i=this.format,border:o=this.border,offset:s=0,parameters:a={}}=t;let{data:l=null,type:c=this.type,width:u=this.width,height:d=this.height,dataFormat:h=this.dataFormat,compressed:f=!1}=t;l||(l=n),({type:c,dataFormat:h,compressed:f,width:u,height:d}=this._deduceParameters({format:i,type:c,dataFormat:h,compressed:f,data:l,width:u,height:d}));const{gl:p}=this;p.bindTexture(this.target,this.handle);let g,m=null;({data:l,dataType:m}=this._getDataType({data:l,compressed:f}));let y=0;if(Qi(this.gl,a,(()=>{switch(m){case"null":p.texImage2D(e,r,i,u,d,o,h,c,l);break;case"typed-array":p.texImage2D(e,r,i,u,d,o,h,c,l,s);break;case"buffer":g=bi(p),g.bindBuffer(35052,l.handle||l),g.texImage2D(e,r,i,u,d,o,h,c,s),g.bindBuffer(35052,null);break;case"browser-object":yi(p)?p.texImage2D(e,r,i,u,d,o,h,c,l):p.texImage2D(e,r,i,h,c,l);break;case"compressed":for(const[t,n]of l.entries())p.compressedTexImage2D(e,t,n.format,n.width,n.height,o,n.data),y+=n.levelSize;break;default:ho(!1,"Unknown image data type")}})),"compressed"===m)this._trackAllocatedMemory(y,"Texture");else if(l&&l.byteLength)this._trackAllocatedMemory(l.byteLength,"Texture");else{const t=Fo[this.dataFormat]||4,e=Bo[this.type]||1;this._trackAllocatedMemory(this.width*this.height*t*e,"Texture")}return this.loaded=!0,this}setSubImageData(t){let{target:e=this.target,pixels:n=null,data:r=null,x:i=0,y:o=0,width:s=this.width,height:a=this.height,level:l=0,format:c=this.format,type:u=this.type,dataFormat:d=this.dataFormat,compressed:h=!1,offset:f=0,border:p=this.border,parameters:g={}}=t;if(({type:u,dataFormat:d,compressed:h,width:s,height:a}=this._deduceParameters({format:c,type:u,dataFormat:d,compressed:h,data:r,width:s,height:a})),ho(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=n),r&&r.data){const t=r;r=t.data,s=t.shape[0],a=t.shape[1]}r instanceof Lo&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),Qi(this.gl,g,(()=>{if(h)this.gl.compressedTexSubImage2D(e,l,i,o,s,a,c,r);else if(null===r)this.gl.texSubImage2D(e,l,i,o,s,a,d,u,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(e,l,i,o,s,a,d,u,r,f);else if(r instanceof zo){const t=bi(this.gl);t.bindBuffer(35052,r),t.texSubImage2D(e,l,i,o,s,a,d,u,f),t.bindBuffer(35052,null)}else if(yi(this.gl)){bi(this.gl).texSubImage2D(e,l,i,o,s,a,d,u,r)}else this.gl.texSubImage2D(e,l,i,o,d,u,r)})),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return hi.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,this.handle),t}unbind(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,null),t}_getDataType(t){let{data:e,compressed:n=!1}=t;return n?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof Lo?{data:e.handle,dataType:"buffer"}:e instanceof zo?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(t){const{format:e,data:n}=t;let{width:r,height:i,dataFormat:o,type:s,compressed:a}=t;const l=Ro[e];return o=o||l&&l.dataFormat,s=s||l&&l.types[0],a=a||l&&l.compressed,({width:r,height:i}=this._deduceImageSize(n,r,i)),{dataFormat:o,type:s,compressed:a,width:r,height:i,format:e,data:n}}_deduceImageSize(t,e,n){let r;return r="undefined"!==typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?{width:t.width,height:t.height}:"undefined"!==typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:e,height:n}:{width:e>=0?e:1,height:n>=0?n:1},ho(r,"Could not deduced texture size"),ho(void 0===e||r.width===e,"Deduced texture width does not match supplied width"),ho(void 0===n||r.height===n,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}}_setParameter(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,e);break;case 4096:case 4097:ho(!1);break;default:this.gl.texParameteri(this.target,t,e)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!yi(this.gl)&&(!(!this.width||!this.height)&&(!yo(this.width)||!yo(this.height)))}_updateForNPOT(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,e){if(this._isNPOT())switch(t){case 10241:-1===No.indexOf(e)&&(e=9729);break;case 10242:case 10243:33071!==e&&(e=33071)}return e}}let jo="";class Uo extends Do{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(t,e){return Do.isSupported(t,e)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;vi(t),(e instanceof Promise||"string"===typeof e)&&(e={data:e}),"string"===typeof e.data&&(e=Object.assign({},e,{data:(n=e.data,ho("string"===typeof n),n=jo+n,new Promise(((t,e)=>{try{const i=new Image;i.onload=()=>t(i),i.onerror=()=>e(new Error("Could not load image ".concat(n,"."))),i.crossOrigin=r&&r.crossOrigin||"anonymous",i.src=n}catch(i){e(i)}})))})),super(t,Object.assign({},e,{target:3553})),this.initialize(e),Object.seal(this)}}const Vo="EXT_color_buffer_float",Wo={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Vo,bpp:2},33327:{gl2:Vo,bpp:4},34842:{gl2:Vo,bpp:8},33326:{gl2:Vo,bpp:4},33328:{gl2:Vo,bpp:8},34836:{gl2:Vo,bpp:16},35898:{gl2:Vo,bpp:4}};class Go extends wo{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(t){let{format:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!e||function(t,e,n){const r=n[e];if(!r)return!1;const i=yi(t)&&r.gl2||r.gl1;return"string"===typeof i?t.getExtension(i):i}(t,e,Wo)}static getSamplesForFormat(t,e){let{format:n}=e;return t.getInternalformatParameter(36161,n,32937)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.initialize(e),Object.seal(this)}initialize(t){let{format:e,width:n=1,height:r=1,samples:i=0}=t;return ho(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==i&&yi(this.gl)?this.gl.renderbufferStorageMultisample(36161,i,e,n,r):this.gl.renderbufferStorage(36161,e,n,r),this.format=e,this.width=n,this.height=r,this.samples=i,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*Wo[this.format].bpp),this}resize(t){let{width:e,height:n}=t;return e!==this.width||n!==this.height?this.initialize({width:e,height:n,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(t){this.gl.bindRenderbuffer(36161,t)}_syncHandle(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(t){this.gl.bindRenderbuffer(36161,this.handle);return this.gl.getRenderbufferParameter(36161,t)}}const Ho=6144,qo="clear: bad arguments";function Yo(t){let{framebuffer:e=null,color:n=null,depth:r=null,stencil:i=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o={};e&&(o.framebuffer=e);let s=0;n&&(s|=16384,!0!==n&&(o.clearColor=n)),r&&(s|=256,!0!==r&&(o.clearDepth=r)),i&&(s|=1024,!0!==r&&(o.clearStencil=r)),ho(0!==s,qo),Qi(t,o,(()=>{t.clear(s)}))}const Xo=[34069,34070,34071,34072,34073,34074];class Zo extends Do{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};vi(t),super(t,Object.assign({},e,{target:34067})),this.initialize(e),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:e=!0,parameters:n={}}=t;return this.opts=t,this.setCubeMapImageData(t).then((()=>{this.loaded=!0,e&&this.generateMipmap(t),this.setParameters(n)})),this}subImage(t){let{face:e,data:n,x:r=0,y:i=0,mipmapLevel:o=0}=t;return this._subImage({target:e,data:n,x:r,y:i,mipmapLevel:o})}async setCubeMapImageData(t){let{width:e,height:n,pixels:r,data:i,border:o=0,format:s=6408,type:a=5121}=t;const{gl:l}=this,c=r||i,u=await Promise.all(Xo.map((t=>{const e=c[t];return Promise.all(Array.isArray(e)?e:[e])})));this.bind(),Xo.forEach(((t,r)=>{u[r].length>1&&!1!==this.opts.mipmaps&&hi.warn("".concat(this.id," has mipmap and multiple LODs."))(),u[r].forEach(((r,i)=>{e&&n?l.texImage2D(t,i,s,e,n,o,s,a,r):l.texImage2D(t,i,s,s,a,r)}))})),this.unbind()}setImageDataForFace(t){const{face:e,width:n,height:r,pixels:i,data:o,border:s=0,format:a=6408,type:l=5121}=t,{gl:c}=this,u=i||o;return this.bind(),u instanceof Promise?u.then((n=>this.setImageDataForFace(Object.assign({},t,{face:e,data:n,pixels:n})))):this.width||this.height?c.texImage2D(e,0,a,n,r,s,a,l,u):c.texImage2D(e,0,a,a,l,u),this}}Zo.FACES=Xo;class Ko extends Do{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(t){return yi(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};bi(t),e=Object.assign({depth:1},e,{target:32879,unpackFlipY:!1}),super(t,e),this.initialize(e),Object.seal(this)}setImageData(t){let{level:e=0,dataFormat:n=6408,width:r,height:i,depth:o=1,border:s=0,format:a,type:l=5121,offset:c=0,data:u,parameters:d={}}=t;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Qi(this.gl,d,(()=>{ArrayBuffer.isView(u)&&this.gl.texImage3D(this.target,e,n,r,i,o,s,a,l,u),u instanceof Lo&&(this.gl.bindBuffer(35052,u.handle),this.gl.texImage3D(this.target,e,n,r,i,o,s,a,l,c))})),u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{const t=Fo[this.dataFormat]||4,e=Bo[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*t*e,"Texture")}return this.loaded=!0,this}}function $o(t,e){const{gl:n,width:r,height:i,id:o}=t;return new ls(n,Object.assign({},e,{id:"framebuffer-for-".concat(o),width:r,height:i,attachments:{36064:t}}))}function Qo(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:o=36064,target:s=null,sourceWidth:a,sourceHeight:l,sourceType:c}=e;const{framebuffer:u,deleteFramebuffer:d}=ts(t);ho(u);const{gl:h,handle:f,attachments:p}=u;a=a||u.width,l=l||u.height,36064===o&&null===f&&(o=1028),ho(p[o]),c=c||p[o].type,s=function(t,e,n,r,i){if(t)return t;const o=Ao(e=e||5121,{clamped:!1}),s=function(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return ho(!1),0}}(n);return new o(r*i*s)}(s,c,i,a,l),c=c||So(s);const g=h.bindFramebuffer(36160,f);return h.readPixels(n,r,a,l,i,c,s),h.bindFramebuffer(36160,g||null),d&&u.delete(),s}function Jo(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Qo(t,{sourceAttachment:e}),{width:i,height:o}=t;for(;o>n;)({data:r,width:i,height:o}=Eo({data:r,width:i,height:o}));!function(t){let{data:e,width:n,height:r,bytesPerPixel:i=4,temp:o}=t;const s=n*i;o=o||new Uint8Array(s);for(let a=0;a<r/2;++a){const t=a*s,n=(r-a-1)*s;o.set(e.subarray(t,t+s)),e.copyWithin(t,n,n+s),e.set(o,n)}}({data:r,width:i,height:o});const s=document.createElement("canvas");s.width=i,s.height=o;const a=s.getContext("2d"),l=a.createImageData(i,o);return l.data.set(r),a.putImageData(l,0,0),s.toDataURL()}function ts(t){return t instanceof ls?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:$o(t),deleteFramebuffer:!0}}const es="TIMER_QUERY",ns="ELEMENT_INDEX_UINT32";const rs={["WEBGL2"]:[!1,!0],["VERTEX_ARRAY_OBJECT"]:["OES_vertex_array_object",!0],[es]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],["INSTANCED_RENDERING"]:["ANGLE_instanced_arrays",!0],["MULTIPLE_RENDER_TARGETS"]:["WEBGL_draw_buffers",!0],[ns]:["OES_element_index_uint",!0],["BLEND_EQUATION_MINMAX"]:["EXT_blend_minmax",!0],["FLOAT_BLEND"]:["EXT_float_blend"],["COLOR_ENCODING_SRGB"]:["EXT_sRGB",!0],["TEXTURE_DEPTH"]:["WEBGL_depth_texture",!0],["TEXTURE_FLOAT"]:["OES_texture_float",!0],["TEXTURE_HALF_FLOAT"]:["OES_texture_half_float",!0],["TEXTURE_FILTER_LINEAR_FLOAT"]:["OES_texture_float_linear"],["TEXTURE_FILTER_LINEAR_HALF_FLOAT"]:["OES_texture_half_float_linear"],["TEXTURE_FILTER_ANISOTROPIC"]:["EXT_texture_filter_anisotropic"],["COLOR_ATTACHMENT_RGBA32F"]:[function(t){const e=new Uo(t,{format:6408,type:5126,dataFormat:6408}),n=new ls(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),r=n.getStatus();return e.delete(),n.delete(),36053===r},"EXT_color_buffer_float"],["COLOR_ATTACHMENT_FLOAT"]:[!1,"EXT_color_buffer_float"],["COLOR_ATTACHMENT_HALF_FLOAT"]:["EXT_color_buffer_half_float"],["GLSL_FRAG_DATA"]:["WEBGL_draw_buffers",!0],["GLSL_FRAG_DEPTH"]:["EXT_frag_depth",!0],["GLSL_DERIVATIVES"]:["OES_standard_derivatives",!0],["GLSL_TEXTURE_LOD"]:["EXT_shader_texture_lod",!0]},is=2;function os(t,e){return(e=Array.isArray(e)?e:[e]).every((e=>ss(t,e)))}function ss(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function(t,e){const n=rs[e];let r;ho(n,e);const i=yi(t)&&n[1]||n[0];if("function"===typeof i)r=i(t);else if(Array.isArray(i)){r=!0;for(const e of i)r=r&&Boolean(t.getExtension(e))}else"string"===typeof i?r=Boolean(t.getExtension(i)):"boolean"===typeof i?r=i:ho(!1);return r}(t,e)),t.luma.caps[e]||hi.log(is,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}const as="Multiple render targets not supported";class ls extends wo{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:n,colorBufferHalfFloat:r}=e;let i=!0;return n&&(i=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),r&&(i=i&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),i}static getDefaultFramebuffer(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new ls(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const t=bi(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const t=bi(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(e),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(t){let{width:e=1,height:n=1,attachments:r=null,color:i=!0,depth:o=!0,stencil:s=!1,check:a=!0,readBuffer:l,drawBuffers:c}=t;if(ho(e>=0&&n>=0,"Width and height need to be integers"),this.width=e,this.height=n,r)for(const u in r){const t=r[u];(Array.isArray(t)?t[0]:t).resize({width:e,height:n})}else r=this._createDefaultAttachments(i,o,s,e,n);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:c}),r&&a&&this.checkStatus()}delete(){for(const t of this.ownResources)t.delete();return super.delete(),this}update(t){let{attachments:e={},readBuffer:n,drawBuffers:r,clearAttachments:i=!1,resizeAttachments:o=!0}=t;this.attach(e,{clearAttachments:i,resizeAttachments:o});const{gl:s}=this,a=s.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),r&&this._setDrawBuffers(r),s.bindFramebuffer(36160,a||null),this}resize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:e,height:n}=t;if(null===this.handle)return ho(void 0===e&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===e&&(e=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),e!==this.width&&n!==this.height&&hi.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(e,"x").concat(n))();for(const r in this.attachments)this.attachments[r].resize({width:e,height:n});return this.width=e,this.height=n,this}attach(t){let{clearAttachments:e=!1,resizeAttachments:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};e&&Object.keys(this.attachments).forEach((t=>{r[t]=null})),Object.assign(r,t);const i=this.gl.bindFramebuffer(36160,this.handle);for(const o in r){ho(void 0!==o,"Misspelled framebuffer binding point?");const t=Number(o),e=r[t];let i=e;if(i)if(i instanceof Go)this._attachRenderbuffer({attachment:t,renderbuffer:i});else if(Array.isArray(e)){const[n,r=0,o=0]=e;i=n,this._attachTexture({attachment:t,texture:n,layer:r,level:o})}else this._attachTexture({attachment:t,texture:i,layer:0,level:0});else this._unattach(t);n&&i&&i.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,i||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter((t=>!this.attachments[t])).forEach((t=>{delete this.attachments[t]}))}checkStatus(){const{gl:t}=this,e=this.getStatus();if(36053!==e)throw new Error(function(t){return(ls.STATUS||{})[t]||"Framebuffer error ".concat(t)}(e));return this}getStatus(){const{gl:t}=this,e=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,e||null),n}clear(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:e,depth:n,stencil:r,drawBuffers:i=[]}=t,o=this.gl.bindFramebuffer(36160,this.handle);return(e||n||r)&&Yo(this.gl,{color:e,depth:n,stencil:r}),i.forEach(((t,e)=>{!function(t){let{framebuffer:e=null,buffer:n=Ho,drawBuffer:r=0,value:i=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};bi(t),Qi(t,{framebuffer:e},(()=>{switch(n){case Ho:switch(i.constructor){case Int32Array:t.clearBufferiv(n,r,i);break;case Uint32Array:t.clearBufferuiv(n,r,i);break;case Float32Array:default:t.clearBufferfv(n,r,i)}break;case 6145:t.clearBufferfv(6145,0,[i]);break;case 6146:t.clearBufferiv(6146,0,[i]);break;case 34041:const[e,o]=i;t.clearBufferfi(34041,0,e,o);break;default:ho(!1,qo)}}))}(this.gl,{drawBuffer:e,value:t})})),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return hi.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return hi.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return hi.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return hi.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return hi.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return hi.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(t){let{attachments:e=[],x:n=0,y:r=0,width:i,height:o}=t;const s=bi(this.gl),a=s.bindFramebuffer(36008,this.handle);return 0===n&&0===r&&void 0===i&&void 0===o?s.invalidateFramebuffer(36008,e):s.invalidateFramebuffer(36008,e,n,r,i,o),s.bindFramebuffer(36008,a),this}getAttachmentParameter(t,e,n){let r=this._getAttachmentParameterFallback(e);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,t,e),this.gl.bindFramebuffer(36160,null)),n&&r>1e3&&(r=po(this.gl,r)),r}getAttachmentParameters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const i of n){r[e?po(this.gl,i):i]=this.getAttachmentParameter(t,i,e)}return r}getParameters(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=Object.keys(this.attachments),n={};for(const r of e){const e=Number(r);n[t?po(this.gl,e):e]=this.getAttachmentParameters(e,t)}return n}show(){return"undefined"!==typeof window&&window.open(Jo(this),"luma-debug-texture"),this}log(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t>hi.level||"undefined"===typeof window)return this;e=e||"Framebuffer ".concat(this.id);const n=Jo(this,{targetMaxHeight:100});return hi.image({logLevel:t,message:e,image:n},e)(),this}bind(){let{target:t=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(t,this.handle),this}unbind(){let{target:t=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(t,null),this}_createDefaultAttachments(t,e,n,r,i){let o=null;return t&&(o=o||{},o[36064]=new Uo(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:i,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),e&&n?(o=o||{},o[33306]=new Go(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(o[33306])):e?(o=o||{},o[36096]=new Go(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:i}),this.ownResources.push(o[36096])):n&&ho(!1),o}_unattach(t){const e=this.attachments[t];e&&(e instanceof Go?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}_attachRenderbuffer(t){let{attachment:e=36064,renderbuffer:n}=t;const{gl:r}=this;r.framebufferRenderbuffer(36160,e,36161,n.handle),this.attachments[e]=n}_attachTexture(t){let{attachment:e=36064,texture:n,layer:r,level:i}=t;const{gl:o}=this;switch(o.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:bi(o).framebufferTextureLayer(36160,e,n.target,i,r);break;case 34067:const t=function(t){return t<34069?t+34069:t}(r);o.framebufferTexture2D(36160,e,t,n.handle,i);break;case 3553:o.framebufferTexture2D(36160,e,3553,n.handle,i);break;default:ho(!1,"Illegal texture type")}o.bindTexture(n.target,null),this.attachments[e]=n}_setReadBuffer(t){const e=yi(n=this.gl)?n:null;var n;e?e.readBuffer(t):ho(36064===t||1029===t,as),this.readBuffer=t}_setDrawBuffers(t){const{gl:e}=this,n=bi(e);if(n)n.drawBuffers(t);else{const n=e.getExtension("WEBGL_draw_buffers");n?n.drawBuffersWEBGL(t):ho(1===t.length&&(36064===t[0]||1029===t[0]),as)}this.drawBuffers=t}_getAttachmentParameterFallback(t){const e=function(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in rs)void 0===t.luma.caps[e]&&(t.luma.caps[e]=ss(t,e));return t.luma.caps}(this.gl);switch(t){case 36052:return e.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return e.WEBGL2?null:8;case 33297:return e.WEBGL2?null:5125;case 33296:return e.WEBGL2||e.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(t){return this.gl.bindFramebuffer(36160,t)}}ls.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const cs={5126:Ss.bind(null,"uniform1fv",gs,1,As),35664:Ss.bind(null,"uniform2fv",gs,2,As),35665:Ss.bind(null,"uniform3fv",gs,3,As),35666:Ss.bind(null,"uniform4fv",gs,4,As),5124:Ss.bind(null,"uniform1iv",ms,1,As),35667:Ss.bind(null,"uniform2iv",ms,2,As),35668:Ss.bind(null,"uniform3iv",ms,3,As),35669:Ss.bind(null,"uniform4iv",ms,4,As),35670:Ss.bind(null,"uniform1iv",ms,1,As),35671:Ss.bind(null,"uniform2iv",ms,2,As),35672:Ss.bind(null,"uniform3iv",ms,3,As),35673:Ss.bind(null,"uniform4iv",ms,4,As),35674:Ss.bind(null,"uniformMatrix2fv",gs,4,Es),35675:Ss.bind(null,"uniformMatrix3fv",gs,9,Es),35676:Ss.bind(null,"uniformMatrix4fv",gs,16,Es),35678:xs,35680:xs,5125:Ss.bind(null,"uniform1uiv",ys,1,As),36294:Ss.bind(null,"uniform2uiv",ys,2,As),36295:Ss.bind(null,"uniform3uiv",ys,3,As),36296:Ss.bind(null,"uniform4uiv",ys,4,As),35685:Ss.bind(null,"uniformMatrix2x3fv",gs,6,Es),35686:Ss.bind(null,"uniformMatrix2x4fv",gs,8,Es),35687:Ss.bind(null,"uniformMatrix3x2fv",gs,6,Es),35688:Ss.bind(null,"uniformMatrix3x4fv",gs,12,Es),35689:Ss.bind(null,"uniformMatrix4x2fv",gs,8,Es),35690:Ss.bind(null,"uniformMatrix4x3fv",gs,12,Es),35678:xs,35680:xs,35679:xs,35682:xs,36289:xs,36292:xs,36293:xs,36298:xs,36299:xs,36300:xs,36303:xs,36306:xs,36307:xs,36308:xs,36311:xs},us={},ds={},hs={},fs=[0];function ps(t,e,n,r){1===e&&"boolean"===typeof t&&(t=t?1:0),Number.isFinite(t)&&(fs[0]=t,t=fs);const i=t.length;if(i%e&&hi.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let o=r[i];o||(o=new n(i),r[i]=o);for(let s=0;s<i;s++)o[s]=t[s];return o}function gs(t,e){return ps(t,e,Float32Array,us)}function ms(t,e){return ps(t,e,Int32Array,ds)}function ys(t,e){return ps(t,e,Uint32Array,hs)}function vs(t,e,n){const r=cs[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function bs(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};const e=t.match(/([^[]*)(\[[0-9]+\])?/);if(!e||e.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:e[1],length:e[2]||1,isArray:Boolean(e[2])}}function _s(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function(t){if(0===t.length)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!isFinite(t)||(!0===t||!1===t||(t instanceof Do||(t instanceof Go||t instanceof ls&&Boolean(t.texture))))}function ws(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const r=t[e];for(let t=0,e=n.length;t<e;++t)r[t]=n[t]}else t[e]=n.slice();else t[e]=n}function xs(){let t=null;return(e,n,r)=>{const i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function Ss(t,e,n,r){let i=null,o=null;return(s,a,l)=>{const c=e(l,n),u=c.length;let d=!1;if(null===i)i=new Float32Array(u),o=u,d=!0;else{ho(o===u,"Uniform length cannot change.");for(let t=0;t<u;++t)if(c[t]!==i[t]){d=!0;break}}return d&&(r(s,t,a,c),i.set(c)),d}}function As(t,e,n,r){t[e](n,r)}function Es(t,e,n,r){t[e](n,!1,r)}function Ts(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const n=t.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return n?n[1]:e}const Ps=35632,Cs=35633;function Is(t,e,n,r){const i=t.split(/\r?\n/),o={},s={},a=r||Ts(e)||"(unnamed)",l="".concat(function(t){switch(t){case Ps:return"fragment";case Cs:return"vertex";default:return"unknown type"}}(n)," shader ").concat(a);for(let u=0;u<i.length;u++){const e=i[u];if(e.length<=1)continue;const n=e.split(":"),r=n[0],a=parseInt(n[2],10);if(isNaN(a))throw new Error("GLSL compilation error in ".concat(l,": ").concat(t));"WARNING"!==r?o[a]=e:s[a]=e}const c=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map(((t,r)=>{const o=String(r+e),s=o.length;return ks(o,i-s)+n+t}))}(e);return{shaderName:l,errors:Ms(o,c),warnings:Ms(s,c)}}function Ms(t,e){let n="";for(let r=0;r<e.length;r++){const i=e[r];if((t[r+3]||t[r+2]||t[r+1])&&(n+="".concat(i,"\n"),t[r+1])){const e=t[r+1],i=e.split(":",3),o=i[0],s=parseInt(i[1],10)||0,a=e.substring(i.join(":").length+1).trim();n+=ks("^^^ ".concat(o,": ").concat(a,"\n\n"),s)}}return n}function ks(t,e){let n="";for(let r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}class Os extends wo{get[Symbol.toStringTag](){return"Shader"}static getTypeName(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return ho(!1),"unknown"}}constructor(t,e){vi(t),ho("string"===typeof e.source,"Shader: GLSL source code must be a JavaScript string");super(t,{id:Ts(e.source,null)||e.id||mo("unnamed ".concat(Os.getTypeName(e.shaderType)))}),this.shaderType=e.shaderType,this.source=e.source,this.initialize(e)}initialize(t){let{source:e}=t;const n=Ts(e,null);n&&(this.id=mo(n)),this._compile(e)}getParameter(t){return this.gl.getShaderParameter(this.handle,t)}toString(){return"".concat(Os.getTypeName(this.shaderType),":").concat(this.id)}getName(){return Ts(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;t.startsWith("#version ")||(t="#version 100\n".concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);if(!this.getParameter(35713)){const t=this.gl.getShaderInfoLog(this.handle),{shaderName:e,errors:n,warnings:r}=Is(t,this.source,this.shaderType,this.id);throw hi.error("GLSL compilation errors in ".concat(e,"\n").concat(n))(),hi.warn("GLSL compilation warnings in ".concat(e,"\n").concat(r))(),new Error("GLSL compilation errors in ".concat(e))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class Ls extends Os{get[Symbol.toStringTag](){return"VertexShader"}constructor(t,e){"string"===typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class Rs extends Os{get[Symbol.toStringTag](){return"FragmentShader"}constructor(t,e){"string"===typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const Fs=5120,Bs=5121,Ns=5122,zs=5123,Ds=0,js=1,Us=2,Vs=3,Ws=4,Gs=5,Hs=6,qs=5126,Ys=5124,Xs=5125,Zs={[qs]:[qs,1,"float"],35664:[qs,2,"vec2"],35665:[qs,3,"vec3"],35666:[qs,4,"vec4"],[Ys]:[Ys,1,"int"],35667:[Ys,2,"ivec2"],35668:[Ys,3,"ivec3"],35669:[Ys,4,"ivec4"],[Xs]:[Xs,1,"uint"],36294:[Xs,2,"uvec2"],36295:[Xs,3,"uvec3"],36296:[Xs,4,"uvec4"],35670:[qs,1,"bool"],35671:[qs,2,"bvec2"],35672:[qs,3,"bvec3"],35673:[qs,4,"bvec4"],35674:[qs,8,"mat2"],35685:[qs,8,"mat2x3"],35686:[qs,8,"mat2x4"],35675:[qs,12,"mat3"],35687:[qs,12,"mat3x2"],35688:[qs,12,"mat3x4"],35676:[qs,16,"mat4"],35689:[qs,16,"mat4x2"],35690:[qs,16,"mat4x3"]};function Ks(t){switch(t){case Ds:return Ds;case js:case Vs:case Us:return js;case Ws:case Gs:case Hs:return Ws;default:return ho(!1),0}}function $s(t){const e=Zs[t];if(!e)return null;const[n,r]=e;return{type:n,components:r}}function Qs(t,e){switch(t){case Fs:case Bs:case Ns:case zs:t=qs}for(const n in Zs){const[r,i,o]=Zs[n];if(r===t&&i===e)return{glType:n,name:o}}return null}class Js{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){const e=Number(t);return Number.isFinite(e)?this.attributeInfosByLocation[e]:this.attributeInfosByName[t]||null}getAttributeLocation(t){const e=this.getAttributeInfo(t);return e?e.location:-1}getAttributeAccessor(t){const e=this.getAttributeInfo(t);return e?e.accessor:null}getVaryingInfo(t){const e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null}getVaryingIndex(t){const e=this.getVaryingInfo();return e?e.location:-1}getVaryingAccessor(t){const e=this.getVaryingInfo();return e?e.accessor:null}_readAttributesFromProgram(t){const{gl:e}=t,n=e.getProgramParameter(t.handle,35721);for(let r=0;r<n;r++){const{name:n,type:i,size:o}=e.getActiveAttrib(t.handle,r),s=e.getAttribLocation(t.handle,n);s>=0&&this._addAttribute(s,n,i,o)}this.attributeInfos.sort(((t,e)=>t.location-e.location))}_readVaryingsFromProgram(t){const{gl:e}=t;if(!yi(e))return;const n=e.getProgramParameter(t.handle,35971);for(let r=0;r<n;r++){const{name:n,type:i,size:o}=e.getTransformFeedbackVarying(t.handle,r);this._addVarying(r,n,i,o)}this.varyingInfos.sort(((t,e)=>t.location-e.location))}_addAttribute(t,e,n,r){const{type:i,components:o}=$s(n),s={type:i,size:r*o};this._inferProperties(t,e,s);const a={location:t,name:e,accessor:new Io(s)};this.attributeInfos.push(a),this.attributeInfosByLocation[t]=a,this.attributeInfosByName[a.name]=a}_inferProperties(t,e,n){/instance/i.test(e)&&(n.divisor=1)}_addVarying(t,e,n,r){const{type:i,components:o}=$s(n),s={location:t,name:e,accessor:new Io({type:i,size:r*o})};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}const ta=35981,ea=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class na extends wo{get[Symbol.toStringTag](){return"Program"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,e),this.stubRemovedMethods("Program","v6.0",ea),this._isCached=!1,this.initialize(e),Object.seal(this),this._setId(e.id)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:e,vs:n,fs:r,varyings:i,bufferMode:o=ta}=t;return this.hash=e||"",this.vs="string"===typeof n?new Ls(this.gl,{id:"".concat(t.id,"-vs"),source:n}):n,this.fs="string"===typeof r?new Rs(this.gl,{id:"".concat(t.id,"-fs"),source:r}):r,ho(this.vs instanceof Ls),ho(this.fs instanceof Rs),this.uniforms={},this._textureUniforms={},i&&i.length>0&&(bi(this.gl),this.varyings=i,this.gl2.transformFeedbackVaryings(this.handle,i,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Js(this),this.setProps(t)}delete(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:super.delete(t)}setProps(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}draw(t){let{logPriority:e,drawMode:n=4,vertexCount:r,offset:i=0,start:o,end:s,isIndexed:a=!1,indexType:l=5123,instanceCount:c=0,isInstanced:u=c>0,vertexArray:d=null,transformFeedback:h,framebuffer:f,parameters:p={},uniforms:g,samplers:m}=t;if((g||m)&&(hi.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(g||{})),hi.priority>=e){const t=f?f.id:"default",i="mode=".concat(po(this.gl,n)," verts=").concat(r," ")+"instances=".concat(c," indexType=").concat(po(this.gl,l)," ")+"isInstanced=".concat(u," isIndexed=").concat(a," ")+"Framebuffer=".concat(t);hi.log(e,i)()}return ho(d),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||u&&0===c)&&(d.bindForDraw(r,c,(()=>{if(void 0!==f&&(p=Object.assign({},p,{framebuffer:f})),h){const t=Ks(n);h.begin(t)}this._bindTextures(),Qi(this.gl,p,(()=>{a&&u?this.gl2.drawElementsInstanced(n,r,l,i,c):a&&yi(this.gl)&&!isNaN(o)&&!isNaN(s)?this.gl2.drawRangeElements(n,o,s,r,l,i):a?this.gl.drawElements(n,r,l,i):u?this.gl2.drawArraysInstanced(n,i,r,c):this.gl.drawArrays(n,i,r)})),h&&h.end()})),!0)}setUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};hi.priority>=2&&function(t,e,n){for(const r in t){const i=t[r];if((!n||Boolean(n[r]))&&!_s(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}}(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const e in t){const n=t[e],r=this._uniformSetters[e];if(r){let t=n,i=!1;if(t instanceof ls&&(t=t.texture),t instanceof Do)if(i=this.uniforms[e]!==n,i){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const n=t,{textureIndex:i}=r;n.bind(i),t=i,this._textureUniforms[e]=n}else t=r.textureIndex;else this._textureUniforms[e]&&delete this._textureUniforms[e];(r(t)||i)&&ws(this.uniforms,e,n)}}return this}_areTexturesRenderable(){let t=!0;for(const e in this._textureUniforms){const n=this._textureUniforms[e];n.update(),t=t&&n.loaded}return t}_bindTextures(){for(const t in this._textureUniforms){const e=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(e)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(t){const e=this.gl.getAttachedShaders(t),n={};for(const r of e){switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new Ls({handle:r});break;case 35632:n.fs=new Rs({handle:r})}}return n}_getParameter(t){return this.gl.getProgramParameter(this.handle,t)}_setId(t){if(!t){const t=this._getName();this.id=mo(t)}}_getName(){let t=this.vs.getName()||this.fs.getName();return t=t.replace(/shader/i,""),t=t?"".concat(t,"-program"):"program",t}_compileAndLink(){const{gl:t}=this;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),hi.time(4,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),hi.timeEnd(4,"linkProgram for ".concat(this._getName()))(),t.debug||hi.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));t.validateProgram(this.handle);if(!t.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:t}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let e=0;e<this._uniformCount;e++){const n=this.gl.getActiveUniform(this.handle,e),{name:r}=bs(n.name);let i=t.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=vs(t,i,n),n.size>1)for(let e=0;e<n.size;e++)i=t.getUniformLocation(this.handle,"".concat(r,"[").concat(e,"]")),this._uniformSetters["".concat(r,"[").concat(e,"]")]=vs(t,i,n)}this._textureIndexCounter=0}getActiveUniforms(t,e){return this.gl2.getActiveUniforms(this.handle,t,e)}getUniformBlockIndex(t){return this.gl2.getUniformBlockIndex(this.handle,t)}getActiveUniformBlockParameter(t,e){return this.gl2.getActiveUniformBlockParameter(this.handle,t,e)}uniformBlockBinding(t,e){this.gl2.uniformBlockBinding(this.handle,t,e)}}class ra{static getDefaultProgramManager(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new ra(t),t.luma.defaultProgramManager}constructor(t){this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(t){this._defaultModules.find((e=>e.name===t.name))||this._defaultModules.push(t),this.stateHash++}removeDefaultModule(t){const e="string"===typeof t?t:t.name;this._defaultModules=this._defaultModules.filter((t=>t.name!==e)),this.stateHash++}addShaderHook(t,e){e&&(t=Object.assign(e,{hook:t})),this._hookFunctions.push(t),this.stateHash++}get(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:e="",fs:n="",defines:r={},inject:i={},varyings:o=[],bufferMode:s=35981,transpileToGLSL100:a=!1}=t,l=this._getModuleList(t.modules),c=this._getHash(e),u=this._getHash(n),d=l.map((t=>this._getHash(t.name))).sort(),h=o.map((t=>this._getHash(t))),f=Object.keys(r).sort(),p=Object.keys(i).sort(),g=[],m=[];for(const v of f)g.push(this._getHash(v)),g.push(this._getHash(r[v]));for(const v of p)m.push(this._getHash(v)),m.push(this._getHash(i[v]));const y="".concat(c,"/").concat(u,"D").concat(g.join("/"),"M").concat(d.join("/"),"I").concat(m.join("/"),"V").concat(h.join("/"),"H").concat(this.stateHash,"B").concat(s).concat(a?"T":"");if(!this._programCache[y]){const t=function(t,e){const{vs:n,fs:r}=e,i=Pr(e.modules||[]);return{gl:t,vs:ui(t,Object.assign({},e,{source:n,type:_r,modules:i})),fs:ui(t,Object.assign({},e,{source:r,type:wr,modules:i})),getUniforms:di(i)}}(this.gl,{vs:e,fs:n,modules:l,inject:i,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:a});this._programCache[y]=new na(this.gl,{hash:y,vs:t.vs,fs:t.fs,varyings:o,bufferMode:s}),this._getUniforms[y]=t.getUniforms||(t=>{}),this._useCounts[y]=0}return this._useCounts[y]++,this._programCache[y]}getUniforms(t){return this._getUniforms[t.hash]||null}release(t){const e=t.hash;this._useCounts[e]--,0===this._useCounts[e]&&(this._programCache[e].delete(),delete this._programCache[e],delete this._getUniforms[e],delete this._useCounts[e])}_getHash(t){return void 0===this._hashes[t]&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}_getModuleList(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const e=new Array(this._defaultModules.length+t.length),n={};let r=0;for(let i=0,o=this._defaultModules.length;i<o;++i){const t=this._defaultModules[i],o=t.name;e[r++]=t,n[o]=!0}for(let i=0,o=t.length;i<o;++i){const o=t[i],s=o.name;n[s]||(e[r++]=o,n[s]=!0)}return e.length=r,e}}const ia={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},oa="#define SMOOTH_EDGE_RADIUS 0.5",sa={name:"geometry",vs:"\n".concat(oa,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(oa,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},aa=Object.keys(dr).map((t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(dr[t],";"))).join(""),la=Object.keys(hr).map((t=>"const int PROJECTION_MODE_".concat(t," = ").concat(hr[t],";"))).join(""),ca=Object.keys(fr).map((t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(fr[t],";"))).join(""),ua="".concat(aa,"\n").concat(la,"\n").concat(ca,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world) + project_offset_(project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n");function da(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function ha(t){let e,n={};return r=>{for(const i in r)if(!da(r[i],n[i])){e=t(r),n=r;break}return e}}const fa=[0,0,0,0],pa=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],ga=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ma=[0,0,0],ya=[0,0,0],va=ha((function(t){let{viewport:e,devicePixelRatio:n,coordinateSystem:r,coordinateOrigin:i}=t;const{projectionCenter:o,viewProjectionMatrix:s,originCommon:a,cameraPosCommon:l,shaderCoordinateOrigin:c,geospatialOrigin:u}=function(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:i}=t;let{viewMatrix:o,viewProjectionMatrix:s}=t,a=fa,l=fa,c=t.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:d,offsetMode:h}=ba(t,e,n);h&&(l=t.projectPosition(u||d),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,a=Pn([],l,s),o=r||o,s=fn([],i,o),s=fn([],s,pa));return{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:a,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:d,geospatialOrigin:u}}(e,r,i),d=e.getDistanceScales(),h=[e.width*n,e.height*n],f=Pn([],[0,0,-e.focalDistance,1],e.projectionMatrix)[3]||1,p={project_uCoordinateSystem:r,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:a.slice(0,3),project_uCenter:o,project_uPseudoMeters:Boolean(e._pseudoMeters),project_uViewportSize:h,project_uDevicePixelRatio:n,project_uFocalDistance:f,project_uCommonUnitsPerMeter:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:ma,project_uScale:e.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:ga,project_uCameraPosition:l};if(u){const t=e.getDistanceScales(u);switch(r){case dr.METER_OFFSETS:p.project_uCommonUnitsPerWorldUnit=t.unitsPerMeter,p.project_uCommonUnitsPerWorldUnit2=t.unitsPerMeter2;break;case dr.LNGLAT:case dr.LNGLAT_OFFSETS:e._pseudoMeters||(p.project_uCommonUnitsPerMeter=t.unitsPerMeter),p.project_uCommonUnitsPerWorldUnit=t.unitsPerDegree,p.project_uCommonUnitsPerWorldUnit2=t.unitsPerDegree2;break;case dr.CARTESIAN:p.project_uCommonUnitsPerWorldUnit=[1,1,t.unitsPerMeter[2]],p.project_uCommonUnitsPerWorldUnit2=[0,0,t.unitsPerMeter2[2]]}}return p}));function ba(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ya;n.length<3&&(n=[n[0],n[1],0]);let r,i=n,o=!0;switch(r=e===dr.LNGLAT_OFFSETS||e===dr.METER_OFFSETS?n:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case hr.WEB_MERCATOR:e!==dr.LNGLAT&&e!==dr.CARTESIAN||(r=[0,0,0],o=!1);break;case hr.WEB_MERCATOR_AUTO_OFFSET:e===dr.LNGLAT?i=r:e===dr.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],r=t.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case hr.IDENTITY:i=t.position.map(Math.fround),i[2]=i[2]||0;break;case hr.GLOBE:o=!1,r=null;break;default:o=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:o}}const _a={};const wa={name:"project",dependencies:[ia,sa],vs:ua,getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_a;return"viewport"in t?function(t){let{viewport:e,devicePixelRatio:n=1,modelMatrix:r=null,coordinateSystem:i=dr.DEFAULT,coordinateOrigin:o=ya,autoWrapLongitude:s=!1}=t;i===dr.DEFAULT&&(i=e.isGeospatial?dr.LNGLAT:dr.CARTESIAN);const a=va({viewport:e,devicePixelRatio:n,coordinateSystem:i,coordinateOrigin:o});return a.project_uWrapLongitude=s,a.project_uModelMatrix=r||ga,a}(t):{}}},xa=[wa],Sa=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function Aa(t){const e=ra.getDefaultProgramManager(t);for(const n of xa)e.addDefaultModule(n);for(const n of Sa)e.addShaderHook(n);return e}class Ea{constructor(t){let{deck:e,stats:n,viewport:r,timeline:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,"layers",void 0),s(this,"context",void 0),s(this,"resourceManager",void 0),s(this,"_lastRenderedLayers",[]),s(this,"_needsRedraw",!1),s(this,"_needsUpdate",!1),s(this,"_nextLayers",null),s(this,"_debug",!1),s(this,"activateViewport",(t=>{q("layerManager.activateViewport",this,t),t&&(this.context.viewport=t)})),this.layers=[],this.resourceManager=new Ce({gl:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:t,deck:e,programManager:t&&Aa(t),stats:n||new Q({id:"deck.gl"}),viewport:r||new br({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:i||new c,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const t of this.layers)this._finalizeLayer(t)}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const r=n.getNeedsRedraw(t);e=e||r}return e}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers(){let{layerIds:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t?this.layers.filter((e=>t.find((t=>0===e.id.indexOf(t))))):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,e){q("layerManager.setLayers",this,e,t),this._lastRenderedLayers=t;const n=Y(t,Boolean);for(const r of n)r.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}_handleError(t,e,n){n.raiseError(e,"".concat(t," of ").concat(n))}_updateLayers(t,e){const n={};for(const o of t)n[o.id]?W.warn("Multiple old layers with same id ".concat(o.id))():n[o.id]=o;const r=[];this._updateSublayersRecursively(e,n,r),this._finalizeOldLayers(n);let i=!1;for(const o of r)if(o.hasUniformTransition()){i="Uniform transition in ".concat(o);break}this._needsUpdate=i,this.layers=r}_updateSublayersRecursively(t,e,n){for(const i of t){i.context=this.context;const t=e[i.id];null===t&&W.warn("Multiple new layers with same id ".concat(i.id))(),e[i.id]=null;let o=null;try{this._debug&&t!==i&&i.validateProps(),t?(this._transferLayerState(t,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),o=i.isComposite?i.getSubLayers():null}catch(r){this._handleError("matching",r,i)}o&&this._updateSublayersRecursively(o,e,n)}}_finalizeOldLayers(t){for(const e in t){const n=t[e];n&&this._finalizeLayer(n)}}_initializeLayer(t){try{t._initialize(),t.lifecycle=h}catch(e){this._handleError("initialization",e,t)}}_transferLayerState(t,e){e._transferState(t),e.lifecycle=d,e!==t&&(t.lifecycle=f)}_updateLayer(t){try{t._update()}catch(e){this._handleError("update",e,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(t),t.lifecycle=p;try{t._finalize(),t.lifecycle=g}catch(e){this._handleError("finalization",e,t)}}}function Ta(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!Ta(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if("object"===typeof t&&"object"===typeof e){const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const o of r){if(!e.hasOwnProperty(o))return!1;if(!Ta(t[o],e[o],n-1))return!1}return!0}return!1}class Pa{constructor(t){s(this,"width",void 0),s(this,"height",void 0),s(this,"views",void 0),s(this,"viewState",void 0),s(this,"controllers",void 0),s(this,"timeline",void 0),s(this,"_viewports",void 0),s(this,"_viewportMap",void 0),s(this,"_isUpdating",void 0),s(this,"_needsRedraw",void 0),s(this,"_needsUpdate",void 0),s(this,"_eventManager",void 0),s(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(const t in this.controllers){const e=this.controllers[t];e&&e.finalize()}this.controllers={}}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(const t in this.controllers){const e=this.controllers[t];e&&e.updateTransition()}}getViewports(t){return t?this._viewports.filter((e=>e.containsPixel(t))):this._viewports}getViews(){const t={};return this.views.forEach((e=>{t[e.id]=e})),t}getView(t){return this.views.find((e=>e.id===t))}getViewState(t){const e="string"===typeof t?this.getView(t):t,n=e&&this.viewState[e.getViewStateId()]||this.viewState;return e?e.filterViewState(n):n}getViewport(t){return this._viewportMap[t]}unproject(t,e){const n=this.getViewports(),r={x:t[0],y:t[1]};for(let i=n.length-1;i>=0;--i){const o=n[i];if(o.containsPixel(r)){const n=t.slice();return n[0]-=o.x,n[1]-=o.y,o.unproject(n,e)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,e){t===this.width&&e===this.height||(this.width=t,this.height=e,this.setNeedsUpdate("Size changed"))}_setViews(t){t=Y(t,Boolean);this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){if(t){!Ta(t,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=t}else W.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(t,e){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...e,viewId:t})}_createController(t,e){return new(0,e.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,e.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:e=>{var n;return null===(n=this.getView(t.id))||void 0===n?void 0:n.makeViewport({viewState:e,width:this.width,height:this.height})}})}_updateController(t,e,n,r){const i=t.controller;if(i&&n){const o={...e,...i,id:t.id,x:n.x,y:n.y,width:n.width,height:n.height};return r&&r.constructor===i.type||(r=this._createController(t,o)),r&&r.setProps(o),r}return null}_rebuildViewports(){const{views:t}=this,e=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let r=t.length;r--;){const i=t[r],o=this.getViewState(i),s=i.makeViewport({viewState:o,width:this.width,height:this.height});let a=e[i.id];const l=Boolean(i.controller);l&&!a&&(n=!0),!n&&l||!a||(a.finalize(),a=null),this.controllers[i.id]=this._updateController(i,o,s,a),s&&this._viewports.unshift(s)}for(const r in e){const t=e[r];t&&!this.controllers[r]&&t.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach((t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)}))}_diffViews(t,e){return t.length!==e.length||t.some(((n,r)=>!t[r].equals(e[r])))}}const Ca=/([0-9]+\.?[0-9]*)(%|px)/;function Ia(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=Ca.exec(t);if(e&&e.length>=3){const t="%"===e[2],n=parseFloat(e[1]);return{position:t?n/100:n,relative:t}}default:throw new Error("Could not parse position string ".concat(t))}}function Ma(t,e){return t.relative?Math.round(t.position*e):t.position}function ka(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class Oa{constructor(t){s(this,"id",void 0),s(this,"viewportInstance",void 0),s(this,"_x",void 0),s(this,"_y",void 0),s(this,"_width",void 0),s(this,"_height",void 0),s(this,"_padding",void 0),s(this,"props",void 0);const{id:e,x:n=0,y:r=0,width:i="100%",height:o="100%",padding:a=null,viewportInstance:l}=t||{};ka(!l||l instanceof br),this.viewportInstance=l,this.id=e||this.constructor.displayName||"view",this.props={...t,id:this.id},this._x=Ia(n),this._y=Ia(r),this._width=Ia(i),this._height=Ia(o),this._padding=a&&{left:Ia(a.left||0),right:Ia(a.right||0),top:Ia(a.top||0),bottom:Ia(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t||(this.viewportInstance?!!t.viewportInstance&&this.viewportInstance.equals(t.viewportInstance):this.ViewportType===t.ViewportType&&Ta(this.props,t.props,2))}makeViewport(t){let{width:e,height:n,viewState:r}=t;if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);const i=this.getDimensions({width:e,height:n});return i.height&&i.width?new this.ViewportType({...r,...this.props,...i}):null}getViewStateId(){const{viewState:t}=this.props;return"string"===typeof t?t:(null===t||void 0===t?void 0:t.id)||this.id}filterViewState(t){if(this.props.viewState&&"object"===typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const e={...t};for(const t in this.props.viewState)"id"!==t&&(e[t]=this.props.viewState[t]);return e}return t}getDimensions(t){let{width:e,height:n}=t;const r={x:Ma(this._x,e),y:Ma(this._y,n),width:Ma(this._width,e),height:Ma(this._height,n)};return this._padding&&(r.padding={left:Ma(this._padding.left,e),top:Ma(this._padding.top,n),right:Ma(this._padding.right,e),bottom:Ma(this._padding.bottom,n)}),r}get controller(){const t=this.props.controller;return t?!0===t?{type:this.ControllerType}:"function"===typeof t?{type:t}:{type:this.ControllerType,...t}:null}}class La extends br{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{latitude:e=0,longitude:n=0,zoom:r=0,pitch:i=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:l=1.01,nearZ:c,farZ:u,orthographic:d=!1,projectionMatrix:h,repeat:f=!1,worldOffset:p=0,position:g,padding:m,legacyMeterSizes:y=!1}=t;let{width:v,height:b,altitude:_=1.5}=t;const w=Math.pow(2,r);let x;v=v||1,b=b||1;let S=null;if(h)_=h[5]/2,x=ir(_);else{let n;if(t.fovy?(x=t.fovy,_=or(x)):x=ir(_),m){const{top:t=0,bottom:e=0}=m;n=[0,Le((t+b-e)/2,0,b)-b/2]}S=rr({width:v,height:b,scale:w,center:g&&[0,0,g[2]*tr(e)],offset:n,pitch:i,fovy:x,nearZMultiplier:a,farZMultiplier:l}),Number.isFinite(c)&&(S.near=c),Number.isFinite(u)&&(S.far=u)}let A=function(t){const{height:e,pitch:n,bearing:r,altitude:i,scale:o,center:s}=t,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];pn(a,a,[0,0,-i]),mn(a,a,-n*Hn),yn(a,a,r*Hn);const l=o/e;var c,u;return gn(a,a,[l,l,l]),s&&pn(a,a,((c=[])[0]=-(u=s)[0],c[1]=-u[1],c[2]=-u[2],c)),a}({height:b,pitch:i,bearing:o,scale:w,altitude:_});if(p){A=(new Rn).translate([512*p,0,0]).multiplyLeft(A)}super({...t,width:v,height:b,viewMatrix:A,longitude:n,latitude:e,zoom:r,...S,fovy:x,focalDistance:_}),s(this,"longitude",void 0),s(this,"latitude",void 0),s(this,"pitch",void 0),s(this,"bearing",void 0),s(this,"altitude",void 0),s(this,"fovy",void 0),s(this,"orthographic",void 0),s(this,"_subViewports",void 0),s(this,"_pseudoMeters",void 0),this.latitude=e,this.longitude=n,this.zoom=r,this.pitch=i,this.bearing=o,this.altitude=_,this.fovy=x,this.orthographic=d,this._subViewports=f?[]:null,this._pseudoMeters=y,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),e=Math.floor((t[0]+180)/360),n=Math.ceil((t[2]-180)/360);for(let r=e;r<=n;r++){const t=r?new La({...this,worldOffset:r}):this;this._subViewports.push(t)}}return this._subViewports}projectPosition(t){if(this._pseudoMeters)return super.projectPosition(t);const[e,n]=this.projectFlat(t);return[e,n,(t[2]||0)*tr(t[1])]}unprojectPosition(t){if(this._pseudoMeters)return super.unprojectPosition(t);const[e,n]=this.unprojectFlat(t);return[e,n,(t[2]||0)/tr(n)]}addMetersToLngLat(t,e){return nr(t,e)}panByPosition(t,e){const n=ar(e,this.pixelUnprojectionMatrix),r=wn([],this.projectFlat(t),xn([],n)),i=wn([],this.center,r),[o,s]=this.unprojectFlat(i);return{longitude:o,latitude:s}}getBounds(){const t=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{width:n,height:r,unproject:i}=t,o={targetZ:e},s=i([0,r],o),a=i([n,r],o);let l,c;return(t.fovy?.5*t.fovy*cr:Math.atan(.5/t.altitude))>(90-t.pitch)*cr-.01?(l=ur(t,0,e),c=ur(t,n,e)):(l=i([0,0],o),c=i([n,0],o)),[s,a,c,l]}(this,(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0);return[Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),Math.min(t[0][1],t[1][1],t[2][1],t[3][1]),Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),Math.max(t[0][1],t[1][1],t[2][1],t[3][1])]}fitBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{width:n,height:r}=this,{longitude:i,latitude:o,zoom:s}=lr({width:n,height:r,bounds:t,...e});return new La({width:n,height:r,longitude:i,latitude:o,zoom:s})}}s(La,"displayName","WebMercatorViewport");class Ra{constructor(t){s(this,"_inProgress",void 0),s(this,"_handle",void 0),s(this,"_timeline",void 0),s(this,"time",void 0),s(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=t,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(t){var e,n;this.cancel(),this.settings=t,this._inProgress=!0,null===(e=(n=this.settings).onStart)||void 0===e||e.call(n,this)}end(){var t,e;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(t=(e=this.settings).onEnd)||void 0===t||t.call(e,this))}cancel(){var t,e;this._inProgress&&(null===(t=(e=this.settings).onInterrupt)||void 0===t||t.call(e,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var t,e;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:t,settings:e}=this;this._handle=t.addChannel({delay:t.getTime(),duration:e.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(t=(e=this.settings).onUpdate)||void 0===t||t.call(e,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const Fa=()=>{},Ba=2,Na=3,za=t=>t,Da=1;class ja{constructor(t){s(this,"getControllerState",void 0),s(this,"props",void 0),s(this,"propsInTransition",void 0),s(this,"transition",void 0),s(this,"onViewStateChange",void 0),s(this,"onStateChange",void 0),s(this,"_onTransitionUpdate",(t=>{const{time:e,settings:{interpolator:n,startProps:r,endProps:i,duration:o,easing:s}}=t,a=s(e/o),l=n.interpolateProps(r,i,a);this.propsInTransition=this.getControllerState({...this.props,...l}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})})),this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new Ra(t.timeline),this.onViewStateChange=t.onViewStateChange||Fa,this.onStateChange=t.onStateChange||Fa}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let e=!1;const n=this.props;if(this.props=t,!n||this._shouldIgnoreViewportChange(n,t))return!1;if(this._isTransitionEnabled(t)){let r=n;if(this.transition.inProgress){const{interruption:t,endProps:e}=this.transition.settings;r={...n,...t===Ba?e:this.propsInTransition||n}}this._triggerTransition(r,t),e=!0}else this.transition.cancel();return e}updateTransition(){this.transition.update()}_isTransitionEnabled(t){const{transitionDuration:e,transitionInterpolator:n}=t;return(e>0||"auto"===e)&&Boolean(n)}_isUpdateDueToCurrentTransition(t){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition)}_shouldIgnoreViewportChange(t,e){return this.transition.inProgress?this.transition.settings.interruption===Na||this._isUpdateDueToCurrentTransition(e):!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e)}_triggerTransition(t,e){const n=this.getControllerState(t),r=this.getControllerState(e).shortestPathFrom(n),i=e.transitionInterpolator,o=i.getDuration?i.getDuration(t,e):e.transitionDuration;if(0===o)return;const s=i.initializeProps(t,r);this.propsInTransition={};const a={duration:o,easing:e.transitionEasing||za,interpolator:i,interruption:e.transitionInterruption||Da,startProps:s.start,endProps:s.end,onStart:e.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(e.onTransitionInterrupt),onEnd:this._onTransitionEnd(e.onTransitionEnd)};this.transition.start(a),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return e=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),null===t||void 0===t||t(e)}}}class Ua{constructor(t){s(this,"_propsToCompare",void 0),s(this,"_propsToExtract",void 0),s(this,"_requiredProps",void 0);const{compare:e,extract:n,required:r}=t;this._propsToCompare=e,this._propsToExtract=n||e,this._requiredProps=r}arePropsEqual(t,e){for(const n of this._propsToCompare)if(!(n in t)||!(n in e)||!Fe(t[n],e[n]))return!1;return!0}initializeProps(t,e){const n={},r={};for(const i of this._propsToExtract)(i in t||i in e)&&(n[i]=t[i],r[i]=e[i]);return this._checkRequiredProps(n),this._checkRequiredProps(r),{start:n,end:r}}getDuration(t,e){return e.transitionDuration}_checkRequiredProps(t){this._requiredProps&&this._requiredProps.forEach((e=>{const n=t[e];ka(Number.isFinite(n)||Array.isArray(n),"".concat(e," is required for transition"))}))}}const Va=["longitude","latitude","zoom","bearing","pitch"],Wa=["longitude","latitude","zoom"];class Ga extends Ua{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=Array.isArray(t)?t:t.transitionProps,n=Array.isArray(t)?{}:t;n.transitionProps=Array.isArray(e)?{compare:e,required:e}:e||{compare:Va,required:Wa},super(n.transitionProps),s(this,"opts",void 0),this.opts=n}initializeProps(t,e){const n=super.initializeProps(t,e),{makeViewport:r,around:i}=this.opts;if(r&&i){const o=r(t),s=r(e),a=o.unproject(i);n.start.around=i,Object.assign(n.end,{around:s.project(a),aroundPosition:a,width:e.width,height:e.height})}return n}interpolateProps(t,e,n){const r={};for(const i of this._propsToExtract)r[i]=Re(t[i]||0,e[i]||0,n);if(e.aroundPosition&&this.opts.makeViewport){const i=this.opts.makeViewport({...e,...r});Object.assign(r,i.panByPosition(e.aroundPosition,Re(t.around,e.around,n)))}return r}}const Ha={transitionDuration:0},qa=t=>1-(1-t)*(1-t),Ya=["wheel"],Xa=["panstart","panmove","panend"],Za=["pinchstart","pinchmove","pinchend"],Ka=["tripanstart","tripanmove","tripanend"],$a=["doubletap"],Qa=["keydown"],Ja={};class tl{constructor(t){s(this,"props",void 0),s(this,"state",{}),s(this,"transitionManager",void 0),s(this,"eventManager",void 0),s(this,"onViewStateChange",void 0),s(this,"onStateChange",void 0),s(this,"makeViewport",void 0),s(this,"_controllerState",void 0),s(this,"_events",{}),s(this,"_interactionState",{isDragging:!1}),s(this,"_customEvents",[]),s(this,"_eventStartBlocked",null),s(this,"_panMove",!1),s(this,"invertPan",!1),s(this,"dragMode","rotate"),s(this,"inertia",0),s(this,"scrollZoom",!0),s(this,"dragPan",!0),s(this,"dragRotate",!0),s(this,"doubleClickZoom",!0),s(this,"touchZoom",!0),s(this,"touchRotate",!1),s(this,"keyboard",!0),this.transitionManager=new ja({...t,getControllerState:t=>new this.ControllerState(t),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){for(const e in this._events){var t;if(this._events[e])null===(t=this.eventManager)||void 0===t||t.off(e,this.handleEvent)}this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;const e=this._eventStartBlocked;switch(t.type){case"panstart":return!e&&this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return!e&&this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return!e&&this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(t){const{x:e,y:n}=this.props,{offsetCenter:r}=t;return[r.x-e,r.y-n]}isPointInBounds(t,e){const{width:n,height:r}=this.props;if(e&&e.handled)return!1;const i=t[0]>=0&&t[0]<=n&&t[1]>=0&&t[1]<=r;return i&&e&&e.stopPropagation(),i}isFunctionKeyPressed(t){const{srcEvent:e}=t;return Boolean(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){const e=setTimeout((()=>{this._eventStartBlocked===e&&(this._eventStartBlocked=null)}),t);this._eventStartBlocked=e}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);const{inertia:e}=t;this.inertia=Number.isFinite(e)?e:!0===e?300:0;const{scrollZoom:n=!0,dragPan:r=!0,dragRotate:i=!0,doubleClickZoom:o=!0,touchZoom:s=!0,touchRotate:a=!1,keyboard:l=!0}=t,c=Boolean(this.onViewStateChange);this.toggleEvents(Ya,c&&n),this.toggleEvents(Xa,c),this.toggleEvents(Za,c&&(s||a)),this.toggleEvents(Ka,c&&a),this.toggleEvents($a,c&&o),this.toggleEvents(Qa,c&&l),this.scrollZoom=n,this.dragPan=r,this.dragRotate=i,this.doubleClickZoom=o,this.touchZoom=s,this.touchRotate=a,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,e){this.eventManager&&t.forEach((t=>{this._events[t]!==e&&(this._events[t]=e,e?this.eventManager.on(t,this.handleEvent):this.eventManager.off(t,this.handleEvent))}))}updateViewport(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={...t.getViewportProps(),...e},i=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(n),i){const t=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:t})}}_onTransition(t){this.onViewStateChange({...t,interactionState:this._interactionState})}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;let n=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(n=!n);const r=this.controllerState[n?"panStart":"rotateStart"]({pos:e});return this._panMove=n,this.updateViewport(r,Ha,{isDragging:!0}),!0}_onPan(t){return!!this.isDragging()&&(this._panMove?this._onPanMove(t):this._onPanRotate(t))}_onPanEnd(t){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t))}_onPanMove(t){if(!this.dragPan)return!1;const e=this.getCenter(t),n=this.controllerState.pan({pos:e});return this.updateViewport(n,Ha,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){const{inertia:e}=this;if(this.dragPan&&e&&t.velocity){const n=this.getCenter(t),r=[n[0]+t.velocityX*e/2,n[1]+t.velocityY*e/2],i=this.controllerState.pan({pos:r}).panEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:qa},{isDragging:!1,isPanning:!0})}else{const t=this.controllerState.panEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;const e=this.getCenter(t),n=this.controllerState.rotate({pos:e});return this.updateViewport(n,Ha,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){const{inertia:e}=this;if(this.dragRotate&&e&&t.velocity){const n=this.getCenter(t),r=[n[0]+t.velocityX*e/2,n[1]+t.velocityY*e/2],i=this.controllerState.rotate({pos:r}).rotateEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:qa},{isDragging:!1,isRotating:!0})}else{const t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;t.srcEvent.preventDefault();const{speed:n=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:i}=t;let o=2/(1+Math.exp(-Math.abs(i*n)));i<0&&0!==o&&(o=1/o);const s=this.controllerState.zoom({pos:e,scale:o});return this.updateViewport(s,{...this._getTransitionProps({around:e}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const n=this.controllerState.rotateStart({pos:e});return this.updateViewport(n,Ha,{isDragging:!0}),!0}_onTriplePan(t){if(!this.touchRotate)return!1;if(!this.isDragging())return!1;const e=this.getCenter(t);e[0]-=t.deltaX;const n=this.controllerState.rotate({pos:e});return this.updateViewport(n,Ha,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(t){if(!this.isDragging())return!1;const{inertia:e}=this;if(this.touchRotate&&e&&t.velocityY){const n=this.getCenter(t),r=[n[0],n[1]+=t.velocityY*e/2],i=this.controllerState.rotate({pos:r});this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:qa},{isDragging:!1,isRotating:!0}),this.blockEvents(e)}else{const t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const n=this.controllerState.zoomStart({pos:e}).rotateStart({pos:e});return Ja._startPinchRotation=t.rotation,Ja._lastPinchEvent=t,this.updateViewport(n,Ha,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;let e=this.controllerState;if(this.touchZoom){const{scale:n}=t,r=this.getCenter(t);e=e.zoom({pos:r,scale:n})}if(this.touchRotate){const{rotation:n}=t;e=e.rotate({deltaAngleX:Ja._startPinchRotation-n})}return this.updateViewport(e,Ha,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Ja._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;const{inertia:e}=this,{_lastPinchEvent:n}=Ja;if(this.touchZoom&&e&&n&&t.scale!==n.scale){const r=this.getCenter(t);let i=this.controllerState.rotateEnd();const o=Math.log2(t.scale),s=(o-Math.log2(n.scale))/(t.deltaTime-n.deltaTime),a=Math.pow(2,o+s*e/2);i=i.zoom({pos:r,scale:a}).zoomEnd(),this.updateViewport(i,{...this._getTransitionProps({around:r}),transitionDuration:e,transitionEasing:qa},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(e)}else{const t=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Ja._startPinchRotation=null,Ja._lastPinchEvent=null,!0}_onDoubleTap(t){if(!this.doubleClickZoom)return!1;const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const n=this.isFunctionKeyPressed(t),r=this.controllerState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(r,this._getTransitionProps({around:e}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){if(!this.keyboard)return!1;const e=this.isFunctionKeyPressed(t),{zoomSpeed:n,moveSpeed:r,rotateSpeedX:i,rotateSpeedY:o}=!0===this.keyboard?{}:this.keyboard,{controllerState:s}=this;let a;const l={};switch(t.srcEvent.code){case"Minus":a=e?s.zoomOut(n).zoomOut(n):s.zoomOut(n),l.isZooming=!0;break;case"Equal":a=e?s.zoomIn(n).zoomIn(n):s.zoomIn(n),l.isZooming=!0;break;case"ArrowLeft":e?(a=s.rotateLeft(i),l.isRotating=!0):(a=s.moveLeft(r),l.isPanning=!0);break;case"ArrowRight":e?(a=s.rotateRight(i),l.isRotating=!0):(a=s.moveRight(r),l.isPanning=!0);break;case"ArrowUp":e?(a=s.rotateUp(o),l.isRotating=!0):(a=s.moveUp(r),l.isPanning=!0);break;case"ArrowDown":e?(a=s.rotateDown(o),l.isRotating=!0):(a=s.moveDown(r),l.isPanning=!0);break;default:return!1}return this.updateViewport(a,this._getTransitionProps(),l),!0}_getTransitionProps(t){const{transition:e}=this;return e&&e.transitionInterpolator?t?{...e,transitionInterpolator:new Ga({...t,...e.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:e:Ha}}class el{constructor(t,e){s(this,"_viewportProps",void 0),s(this,"_state",void 0),this._viewportProps=this.applyConstraints(t),this._state=e}getViewportProps(){return this._viewportProps}getState(){return this._state}}class nl extends el{constructor(t){const{width:e,height:n,latitude:r,longitude:i,zoom:o,bearing:a=0,pitch:l=0,altitude:c=1.5,position:u=[0,0,0],maxZoom:d=20,minZoom:h=0,maxPitch:f=60,minPitch:p=0,startPanLngLat:g,startZoomLngLat:m,startRotatePos:y,startBearing:v,startPitch:b,startZoom:_,normalize:w=!0}=t;ka(Number.isFinite(i)),ka(Number.isFinite(r)),ka(Number.isFinite(o)),super({width:e,height:n,latitude:r,longitude:i,zoom:o,bearing:a,pitch:l,altitude:c,maxZoom:d,minZoom:h,maxPitch:f,minPitch:p,normalize:w,position:u},{startPanLngLat:g,startZoomLngLat:m,startRotatePos:y,startBearing:v,startPitch:b,startZoom:_}),s(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart(t){let{pos:e}=t;return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan(t){let{pos:e,startPos:n}=t;const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const i=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(i)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart(t){let{pos:e}=t;return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate(t){let{pos:e,deltaAngleX:n=0,deltaAngleY:r=0}=t;const{startRotatePos:i,startBearing:o,startPitch:s}=this.getState();if(!i||void 0===o||void 0===s)return this;let a;return a=e?this._getNewRotation(e,i,s,o):{bearing:o+n,pitch:s+r},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart(t){let{pos:e}=t;return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom(t){let{pos:e,startPos:n,scale:r}=t,{startZoom:i,startZoomLngLat:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;const{maxZoom:s,minZoom:a}=this.getViewportProps();let l=i+Math.log2(r);l=Le(l,a,s);const c=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...c.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(t)}zoomOut(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._zoomFromCenter(1/t)}moveLeft(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([t,0])}moveRight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([-t,0])}moveUp(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,t])}moveDown(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return this._panFromCenter([0,-t])}rotateLeft(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){const e=t.getViewportProps(),n={...this.getViewportProps()},{bearing:r,longitude:i}=n;return Math.abs(r-e.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-e.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}applyConstraints(t){const{maxZoom:e,minZoom:n,zoom:r}=t;t.zoom=Le(r,n,e);const{maxPitch:i,minPitch:o,pitch:s}=t;t.pitch=Le(s,o,i);const{normalize:a=!0}=t;return a&&Object.assign(t,function(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:i,latitude:o,zoom:s,bearing:a=0}=t;(i<-180||i>180)&&(i=Dn(i+180,360)-180),(a<-180||a>180)&&(a=Dn(a+180,360)-180);const l=Un(n/512);if(s<=l)s=l,o=0;else{const t=n/2/Math.pow(2,s),e=Qn([0,t])[1];if(o<e)o=e;else{const e=Qn([0,512-t])[1];o>e&&(o=e)}}return{width:e,height:n,longitude:i,latitude:o,zoom:s,pitch:r,bearing:a}}(t)),t}_zoomFromCenter(t){const{width:e,height:n}=this.getViewportProps();return this.zoom({pos:[e/2,n/2],scale:t})}_panFromCenter(t){const{width:e,height:n}=this.getViewportProps();return this.pan({startPos:[e/2,n/2],pos:[e/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}_unproject(t){const e=this.makeViewport(this.getViewportProps());return t&&e.unproject(t)}_getNewRotation(t,e,n,r){const i=t[0]-e[0],o=t[1]-e[1],s=t[1],a=e[1],{width:l,height:c}=this.getViewportProps(),u=i/l;let d=0;o>0?Math.abs(c-a)>5&&(d=o/(a-c)*1.2):o<0&&a>5&&(d=1-s/a),d=Le(d,-1,1);const{minPitch:h,maxPitch:f}=this.getViewportProps();let p=n;return d>0?p=n+d*(f-n):d<0&&(p=n-d*(h-n)),{pitch:p,bearing:r+180*u}}}class rl extends tl{constructor(){super(...arguments),s(this,"ControllerState",nl),s(this,"transition",{transitionDuration:300,transitionInterpolator:new Ga({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),s(this,"dragMode","pan")}setProps(t){t.position=t.position||[0,0,0];const e=this.props;super.setProps(t);(!e||e.height!==t.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...t,...this.state}))}}class il extends Oa{get ViewportType(){return La}get ControllerType(){return rl}}s(il,"displayName","MapView");const ol=[255,255,255],sl=1;let al=0;class ll{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,"id",void 0),s(this,"color",void 0),s(this,"intensity",void 0),s(this,"type","ambient");const{color:e=ol}=t,{intensity:n=sl}=t;this.id=t.id||"ambient-".concat(al++),this.color=e,this.intensity=n}}const cl=[255,255,255],ul=1,dl=[0,0,-1];let hl=0;class fl{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,"id",void 0),s(this,"color",void 0),s(this,"intensity",void 0),s(this,"type","directional"),s(this,"direction",void 0),s(this,"shadow",void 0);const{color:e=cl}=t,{intensity:n=ul}=t,{direction:r=dl}=t,{_shadow:i=!1}=t;this.id=t.id||"directional-".concat(hl++),this.color=e,this.intensity=n,this.type="directional",this.direction=new on(r).normalize().toArray(),this.shadow=i}getProjectedLight(t){return this}}class pl{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:"pass"};s(this,"id",void 0),s(this,"gl",void 0),s(this,"props",void 0);const{id:n}=e;this.id=n,this.gl=t,this.props={...e}}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}class gl extends pl{constructor(){super(...arguments),s(this,"_lastRenderIndex",-1)}render(t){return $i(this.gl,{framebuffer:t.target}),this._drawLayers(t)}_drawLayers(t){const{target:e,moduleParameters:n,viewports:r,views:i,onViewportActive:o,clearStack:s=!0,clearCanvas:a=!0}=t;t.pass=t.pass||"unknown";const l=this.gl;a&&function(t,e){const n=e?e.width:t.drawingBufferWidth,r=e?e.height:t.drawingBufferHeight;$i(t,{viewport:[0,0,n,r]}),t.clear(16640)}(l,e),s&&(this._lastRenderIndex=-1);const c=[];for(const u of r){const r=i&&i[u.id];null===o||void 0===o||o(u);const s=this._getDrawLayerParams(u,t),a=u.subViewports||[u];for(const i of a){const o=this._drawLayersInViewport(l,{target:e,moduleParameters:n,viewport:i,view:r,pass:t.pass,layers:t.layers},s);c.push(o)}}return c}_getDrawLayerParams(t,e){let{layers:n,pass:r,isPicking:i=!1,layerFilter:o,cullRect:s,effects:a,moduleParameters:l}=e,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const u=[],d=ml(this._lastRenderIndex+1),h={layer:n[0],viewport:t,isPicking:i,renderPass:r,cullRect:s},f={};for(let p=0;p<n.length;p++){const e=n[p],i=this._shouldDrawLayer(e,h,o,f),s={shouldDrawLayer:i};i&&!c&&(s.layerRenderIndex=d(e,i),s.moduleParameters=this._getModuleParameters(e,a,r,l),s.layerParameters=this.getLayerParameters(e,p,t)),u[p]=s}return u}_drawLayersInViewport(t,e,n){let{layers:r,moduleParameters:i,pass:o,target:s,viewport:a,view:l}=e;const c=function(t,e){let{moduleParameters:n,target:r,viewport:i}=e;const o=r&&"default-framebuffer"!==r.id,s=n&&n.devicePixelRatio||Ji(t),a=o?r.height:t.drawingBufferHeight,l=i;return[l.x*s,a-(l.y+l.height)*s,l.width*s,l.height*s]}(t,{moduleParameters:i,target:s,viewport:a});if(l&&l.props.clear){const e=!0===l.props.clear?{color:!0,depth:!0}:l.props.clear;Qi(t,{scissorTest:!0,scissor:c},(()=>Yo(t,e)))}const u={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};$i(t,{viewport:c});for(let h=0;h<r.length;h++){const t=r[h],{shouldDrawLayer:e,layerRenderIndex:i,moduleParameters:s,layerParameters:l}=n[h];if(e&&t.props.pickable&&u.pickableCount++,t.isComposite)u.compositeCount++;else if(e){u.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,i),s.viewport=a;try{t._drawLayer({moduleParameters:s,uniforms:{layerIndex:i},parameters:l})}catch(d){t.raiseError(d,"drawing ".concat(t," to ").concat(o))}}}return u}shouldDrawLayer(t){return!0}getModuleParameters(t,e){return null}getLayerParameters(t,e,n){return t.props.parameters}_shouldDrawLayer(t,e,n,r){if(!(t.props.visible&&this.shouldDrawLayer(t)))return!1;e.layer=t;let i=t.parent;for(;i;){if(!i.props.visible||!i.filterSubLayer(e))return!1;e.layer=i,i=i.parent}if(n){const t=e.layer.id;if(t in r||(r[t]=n(e)),!r[t])return!1}return t.activateViewport(e.viewport),!0}_getModuleParameters(t,e,n,r){var i;const o=Object.assign(Object.create((null===(i=t.internalState)||void 0===i?void 0:i.propsInTransition)||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:Ji(this.gl)});if(e)for(const a of e){var s;Object.assign(o,null===(s=a.getModuleParameters)||void 0===s?void 0:s.call(a,t))}return Object.assign(o,this.getModuleParameters(t,e),r)}}function ml(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={},r=(i,o)=>{const s=i.props._offset,a=i.id,l=i.parent&&i.parent.id;let c;if(l&&!(l in e)&&r(i.parent,!1),l in n){const t=n[l]=n[l]||ml(e[l],e);c=t(i,o),n[a]=t}else Number.isFinite(s)?(c=s+(e[l]||0),n[a]=null):c=t;return o&&c>=t&&(t=c+1),e[a]=c,c};return r}class yl extends gl{constructor(t,e){super(t,e),s(this,"shadowMap",void 0),s(this,"depthBuffer",void 0),s(this,"fbo",void 0),this.shadowMap=new Uo(t,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new Go(t,{format:33189,width:1,height:1}),this.fbo=new ls(t,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(t){const e=this.fbo;Qi(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},(()=>{const n=t.viewports[0],r=Ji(this.gl),i=n.width*r,o=n.height*r;i===e.width&&o===e.height||e.resize({width:i,height:o}),super.render({...t,target:e,pass:"shadow"})}))}shouldDrawLayer(t){return!1!==t.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const vl=ha((function(t){let{viewport:e,center:n}=t;return new Rn(e.viewProjectionMatrix).invert().transform(n)})),bl=ha((function(t){let{viewport:e,shadowMatrices:n}=t;const r=[],i=e.pixelUnprojectionMatrix,o=e.isGeospatial?void 0:1,s=[[0,0,o],[e.width,0,o],[0,e.height,o],[e.width,e.height,o],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map((t=>function(t,e){const[n,r,i]=t,o=ar([n,r,i],e);if(Number.isFinite(i))return o;return[o[0],o[1],0]}(t,i)));for(const a of n){const t=a.clone().translate(new on(e.center).negate()),n=s.map((e=>t.transform(e))),i=(new Rn).ortho({left:Math.min(...n.map((t=>t[0]))),right:Math.max(...n.map((t=>t[0]))),bottom:Math.min(...n.map((t=>t[1]))),top:Math.max(...n.map((t=>t[1]))),near:Math.min(...n.map((t=>-t[2]))),far:Math.max(...n.map((t=>-t[2])))});r.push(i.multiplyRight(a))}return r})),_l=[0,0,0,1],wl=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];const xl={name:"shadow",dependencies:[wa],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?function(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const r={shadow_uDrawShadowMap:Boolean(t.drawToShadowMap),shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||_l,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},i=vl({viewport:t.viewport,center:e.project_uCenter}),o=[],s=bl({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const n=s[a],r=n.clone().translate(new on(t.viewport.center).negate());e.project_uCoordinateSystem===dr.LNGLAT&&e.project_uProjectionMode===hr.WEB_MERCATOR?(s[a]=r,o[a]=i):(s[a]=n.clone().multiplyRight(wl),o[a]=r.transform(i))}for(let a=0;a<s.length;a++)r["shadow_uViewProjectionMatrices[".concat(a,"]")]=s[a],r["shadow_uProjectCenters[".concat(a,"]")]=o[a],t.shadowMaps&&t.shadowMaps.length>0?r["shadow_uShadowMap".concat(a)]=t.shadowMaps[a]:r["shadow_uShadowMap".concat(a)]=t.dummyShadowMap;return r}(t,e):{}}},Sl={color:[255,255,255],intensity:1},Al=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],El=[0,0,0,200/255];class Tl{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,"id","lighting-effect"),s(this,"props",void 0),s(this,"shadowColor",El),s(this,"shadow",void 0),s(this,"ambientLight",void 0),s(this,"directionalLights",void 0),s(this,"pointLights",void 0),s(this,"shadowPasses",[]),s(this,"shadowMaps",[]),s(this,"dummyShadowMap",null),s(this,"programManager",void 0),s(this,"shadowMatrices",void 0),this.setProps(t)}setProps(t){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const e in t){const n=t[e];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some((t=>t.shadow)),this.props=t}preRender(t,e){let{layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:s}=e;if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(t),this.programManager||(this.programManager=ra.getDefaultProgramManager(t),xl&&this.programManager.addDefaultModule(xl)),this.dummyShadowMap||(this.dummyShadowMap=new Uo(t,{width:1,height:1}));for(let t=0;t<this.shadowPasses.length;t++){this.shadowPasses[t].render({layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:s,moduleParameters:{shadowLightId:t,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}getModuleParameters(t){const e=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return e.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((e=>e.getProjectedLight({layer:t}))),pointLights:this.pointLights.map((e=>e.getProjectedLight({layer:t})))},e}cleanup(){for(const t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(xl),this.programManager=null)}_calculateMatrices(){const t=[];for(const e of this.directionalLights){const n=(new Rn).lookAt({eye:new on(e.direction).negate()});t.push(n)}return t}_createShadowPasses(t){for(let e=0;e<this.directionalLights.length;e++){const n=new yl(t);this.shadowPasses[e]=n,this.shadowMaps[e]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:t,pointLights:e,directionalLights:n}=this;t||0!==e.length||0!==n.length||(this.ambientLight=new ll(Sl),this.directionalLights.push(new fl(Al[0]),new fl(Al[1])))}}const Pl=new Tl;class Cl{constructor(){s(this,"effects",void 0),s(this,"_resolvedEffects",[]),s(this,"_defaultEffects",[]),s(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(t){const e=this._defaultEffects;if(!e.find((e=>e.id===t.id))){const n=e.findIndex((e=>function(t,e){var n,r;return(null!==(n=t.order)&&void 0!==n?n:1/0)-(null!==(r=e.order)&&void 0!==r?r:1/0)}(e,t)>0));n<0?e.push(t):e.splice(n,0,t),this._setEffects(this.effects)}}setProps(t){"effects"in t&&(Ta(t.effects,this.effects,1)||this._setEffects(t.effects))}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}getEffects(){return this._resolvedEffects}_setEffects(t){const e={};for(const r of this.effects)e[r.id]=r;const n=[];for(const r of t){const t=e[r.id];t&&t!==r?t.setProps?(t.setProps(r.props),n.push(t)):(t.cleanup(),n.push(r)):n.push(r),delete e[r.id]}for(const r in e)e[r].cleanup();this.effects=n,this._resolvedEffects=n.concat(this._defaultEffects),t.some((t=>t instanceof Tl))||this._resolvedEffects.push(Pl),this._needsRedraw="effects changed"}finalize(){for(const t of this._resolvedEffects)t.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class Il extends gl{shouldDrawLayer(t){const{operation:e}=t.props;return e.includes("draw")||e.includes("terrain")}}const Ml={blendFunc:[1,0,32771,0],blendEquation:32774};class kl extends gl{constructor(){super(...arguments),s(this,"pickZ",void 0),s(this,"_colorEncoderState",null)}render(t){return"pickingFBO"in t?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer(t){let{layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:o,pickingFBO:s,deviceRect:{x:a,y:l,width:c,height:u},cullRect:d,effects:h,pass:f="picking",pickZ:p,moduleParameters:g}=t;const m=this.gl;this.pickZ=p;const y=this._resetColorEncoder(p),v=Qi(m,{scissorTest:!0,scissor:[a,l,c,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...Ml,blend:!p},(()=>super.render({target:s,layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:o,cullRect:d,effects:null===h||void 0===h?void 0:h.filter((t=>t.useInPicking)),pass:f,isPicking:!0,moduleParameters:g})));this._colorEncoderState=null;return{decodePickingColor:y&&Ol.bind(null,y),stats:v}}shouldDrawLayer(t){const{pickable:e,operation:n}=t.props;return e&&n.includes("draw")||n.includes("terrain")||n.includes("mask")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(t,e,n){const r={...t.props.parameters},{pickable:i,operation:o}=t.props;return this._colorEncoderState?i&&o.includes("draw")&&(Object.assign(r,Ml),r.blend=!0,r.blendColor=function(t,e,n){const{byLayer:r,byAlpha:i}=t;let o,s=r.get(e);s?(s.viewports.push(n),o=s.a):(o=r.size+1,o<=255?(s={a:o,layer:e,viewports:[n]},r.set(e,s),i[o]=s):(W.warn("Too many pickable layers, only picking the first 255")(),o=0));return[0,0,0,o/255]}(this._colorEncoderState,t,n)):r.blend=!1,o.includes("terrain")&&(r.blend=!1),r}_resetColorEncoder(t){return this._colorEncoderState=t?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function Ol(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}class Ll{constructor(t){s(this,"gl",void 0),s(this,"layerFilter",void 0),s(this,"drawPickingColors",void 0),s(this,"drawLayersPass",void 0),s(this,"pickLayersPass",void 0),s(this,"renderCount",void 0),s(this,"_needsRedraw",void 0),s(this,"renderBuffers",void 0),s(this,"lastPostProcessEffect",void 0),this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Il(t),this.pickLayersPass=new kl(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){if(!t.viewports.length)return;const e=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,n={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...t,target:t.target||ls.getDefaultFramebuffer(this.gl)};n.effects&&this._preRender(n.effects,n);const r=this.lastPostProcessEffect?this.renderBuffers[0]:n.target,i=e.render({...n,target:r});n.effects&&this._postRender(n.effects,n),this.renderCount++,q("deckRenderer.renderLayers",this,i,t)}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}finalize(){const{renderBuffers:t}=this;for(const e of t)e.delete();t.length=0}_preRender(t,e){this.lastPostProcessEffect=null,e.preRenderStats=e.preRenderStats||{};for(const n of t)e.preRenderStats[n.id]=n.preRender(this.gl,e),n.postRender&&(this.lastPostProcessEffect=n.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:t}=this;0===t.length&&t.push(new ls(this.gl),new ls(this.gl));for(const e of t)e.resize()}_postRender(t,e){const{renderBuffers:n}=this,r={...e,inputBuffer:n[0],swapBuffer:n[1],target:null};for(const i of t)if(i.postRender){if(i.id===this.lastPostProcessEffect){r.target=e.target,i.postRender(this.gl,r);break}const t=i.postRender(this.gl,r);r.inputBuffer=t,r.swapBuffer=t===n[0]?n[1]:n[0]}}}const Rl={pickedColor:null,pickedObjectIndex:-1};function Fl(t){let{pickedColors:e,decodePickingColor:n,deviceX:r,deviceY:i,deviceRadius:o,deviceRect:s}=t;const{x:a,y:l,width:c,height:u}=s;let d=o*o,h=-1,f=0;for(let p=0;p<u;p++){const t=p+l-i,n=t*t;if(n>d)f+=4*c;else for(let i=0;i<c;i++){if(e[f+3]-1>=0){const t=i+a-r,e=t*t+n;e<=d&&(d=e,h=f)}f+=4}}if(h>=0){const t=e.slice(h,h+4),r=n(t);if(r){const e=Math.floor(h/4/c),n=h/4-e*c;return{...r,pickedColor:t,pickedX:a+n,pickedY:l+e}}W.error("Picked non-existent layer. Is picking buffer corrupt?")()}return Rl}function Bl(t){let e,{pickInfo:n,viewports:r,pixelRatio:i,x:o,y:s,z:a}=t,l=r[0];if(r.length>1&&(l=function(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}((null===n||void 0===n?void 0:n.pickedViewports)||r,{x:o,y:s})),l){const t=[o-l.x,s-l.y];void 0!==a&&(t[2]=a),e=l.unproject(t)}return{color:null,layer:null,viewport:l,index:-1,picked:!1,x:o,y:s,pixel:[o,s],coordinate:e,devicePixel:n&&"pickedX"in n?[n.pickedX,n.pickedY]:void 0,pixelRatio:i}}function Nl(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:i}=t,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=e,l=s?[s]:[];if("hover"===r){const t=n.index,e=n.layerId,r=s?s.props.id:null;if(r!==e||a!==t){if(r!==e){const t=i.find((t=>t.props.id===e));t&&l.unshift(t)}n.layerId=r,n.index=a,n.info=null}}const c=Bl(t),u=new Map;return u.set(null,c),l.forEach((t=>{let e={...c};t===s&&(e.color=o,e.index=a,e.picked=!0),e=zl({layer:t,info:e,mode:r});const i=e.layer;t===s&&"hover"===r&&(n.info=e),u.set(i.id,e),"hover"===r&&i.updateAutoHighlight(e)})),u}function zl(t){let{layer:e,info:n,mode:r}=t;for(;e&&n;){const t=n.layer||null;n.sourceLayer=t,n.layer=e,n=e.getPickingInfo({info:n,mode:r,sourceLayer:t}),e=e.parent}return n}class Dl{constructor(t){s(this,"gl",void 0),s(this,"pickingFBO",void 0),s(this,"depthFBO",void 0),s(this,"pickLayersPass",void 0),s(this,"layerFilter",void 0),s(this,"lastPickedInfo",void 0),s(this,"_pickable",!0),this.gl=t,this.pickLayersPass=new kl(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject(t){let{x:e,y:n,layers:r,viewports:i}=t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info;const s=o&&o.layer&&o.layer.id,a=o&&o.viewport&&o.viewport.id,l=s?r.find((t=>t.id===s)):null,c=a&&i.find((t=>t.id===a))||i[0],u=c&&c.unproject([e-c.x,n-c.y]),d={x:e,y:n,viewport:c,coordinate:u,layer:l};return{...o,...d}}_resizeBuffer(){var t,e;const{gl:n}=this;if(!this.pickingFBO&&(this.pickingFBO=new ls(n),ls.isSupported(n,{colorBufferFloat:!0}))){const t=new ls(n);t.attach({36064:new Uo(n,{format:yi(n)?34836:6408,type:5126})}),this.depthFBO=t}null===(t=this.pickingFBO)||void 0===t||t.resize({width:n.canvas.width,height:n.canvas.height}),null===(e=this.depthFBO)||void 0===e||e.resize({width:n.canvas.width,height:n.canvas.height})}_getPickable(t){if(!1===this._pickable)return null;const e=t.filter((t=>this.pickLayersPass.shouldDrawLayer(t)&&!t.isComposite));return e.length?e:null}_pickClosestObject(t){let{layers:e,views:n,viewports:r,x:i,y:o,radius:s=0,depth:a=1,mode:l="query",unproject3D:c,onViewportActive:u,effects:d}=t;const h=this._getPickable(e),f=Ji(this.gl);if(!h)return{result:[],emptyInfo:Bl({viewports:r,x:i,y:o,pixelRatio:f})};this._resizeBuffer();const p=to(this.gl,[i,o],!0),g=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],m=Math.round(s*f),{width:y,height:v}=this.pickingFBO,b=this._getPickingRect({deviceX:g[0],deviceY:g[1],deviceRadius:m,deviceWidth:y,deviceHeight:v}),_={x:i-s,y:o-s,width:2*s+1,height:2*s+1};let w;const x=[],S=new Set;for(let A=0;A<a;A++){let t,e;if(b){t=Fl({...this._drawAndSample({layers:h,views:n,viewports:r,onViewportActive:u,deviceRect:b,cullRect:_,effects:d,pass:"picking:".concat(l)}),deviceX:g[0],deviceY:g[1],deviceRadius:m,deviceRect:b})}else t={pickedColor:null,pickedObjectIndex:-1};if(t.pickedLayer&&c&&this.depthFBO){const{pickedColors:i}=this._drawAndSample({layers:[t.pickedLayer],views:n,viewports:r,onViewportActive:u,deviceRect:{x:t.pickedX,y:t.pickedY,width:1,height:1},cullRect:_,effects:d,pass:"picking:".concat(l,":z")},!0);i[3]&&(e=i[0])}t.pickedLayer&&A+1<a&&(S.add(t.pickedLayer),t.pickedLayer.disablePickingIndex(t.pickedObjectIndex)),w=Nl({pickInfo:t,lastPickedInfo:this.lastPickedInfo,mode:l,layers:h,viewports:r,x:i,y:o,z:e,pixelRatio:f});for(const n of w.values())n.layer&&x.push(n);if(!t.pickedColor)break}for(const A of S)A.restorePickingColors();return{result:x,emptyInfo:w.get(null)}}_pickVisibleObjects(t){let{layers:e,views:n,viewports:r,x:i,y:o,width:s=1,height:a=1,mode:l="query",maxObjects:c=null,onViewportActive:u,effects:d}=t;const h=this._getPickable(e);if(!h)return[];this._resizeBuffer();const f=Ji(this.gl),p=to(this.gl,[i,o],!0),g=p.x,m=p.y+p.height,y=to(this.gl,[i+s,o+a],!0),v=y.x+y.width,b=y.y,_={x:g,y:b,width:v-g,height:m-b},w=function(t){let{pickedColors:e,decodePickingColor:n}=t;const r=new Map;if(e)for(let i=0;i<e.length;i+=4)if(e[i+3]-1>=0){const t=e.slice(i,i+4),o=t.join(",");if(!r.has(o)){const e=n(t);e?r.set(o,{...e,color:t}):W.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(r.values())}(this._drawAndSample({layers:h,views:n,viewports:r,onViewportActive:u,deviceRect:_,cullRect:{x:i,y:o,width:s,height:a},effects:d,pass:"picking:".concat(l)})),x=new Map,S=Number.isFinite(c);for(let E=0;E<w.length;E++){var A;if(S&&c&&x.size>=c)break;const t=w[E];let e={color:t.pickedColor,layer:null,index:t.pickedObjectIndex,picked:!0,x:i,y:o,pixelRatio:f};e=zl({layer:t.pickedLayer,info:e,mode:l});const n=null!==(A=e.object)&&void 0!==A?A:"".concat(e.layer.id,"[").concat(e.index,"]");x.has(n)||x.set(n,e)}return Array.from(x.values())}_drawAndSample(t){let{layers:e,views:n,viewports:r,onViewportActive:i,deviceRect:o,cullRect:s,effects:a,pass:l}=t,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const u=c?this.depthFBO:this.pickingFBO,d={layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:u,deviceRect:o,cullRect:s,effects:a,pass:l,pickZ:c,preRenderStats:{}};for(const v of a)v.useInPicking&&(d.preRenderStats[v.id]=v.preRender(this.gl,d));const{decodePickingColor:h}=this.pickLayersPass.render(d),{x:f,y:p,width:g,height:m}=o,y=new(c?Float32Array:Uint8Array)(g*m*4);return Qo(u,{sourceX:f,sourceY:p,sourceWidth:g,sourceHeight:m,target:y}),{pickedColors:y,decodePickingColor:h}}_getPickingRect(t){let{deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:i,deviceHeight:o}=t;const s=Math.max(0,e-r),a=Math.max(0,n-r),l=Math.min(i,e+r+1)-s,c=Math.min(o,n+r+1)-a;return l<=0||c<=0?null:{x:s,y:a,width:l,height:c}}}const jl={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class Ul{constructor(t){s(this,"el",null),s(this,"isVisible",!1);const e=t.parentElement;e&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,jl),e.appendChild(this.el))}setTooltip(t,e,n){const r=this.el;if(r){if("string"===typeof t)r.innerText=t;else{if(!t)return this.isVisible=!1,void(r.style.display="none");t.text&&(r.innerText=t.text),t.html&&(r.innerHTML=t.html),t.className&&(r.className=t.className)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(e,"px, ").concat(n,"px)"),t&&"object"===typeof t&&"style"in t&&Object.assign(r.style,t.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}const{_parseImageNode:Vl}=globalThis,Wl="undefined"!==typeof Image,Gl="undefined"!==typeof ImageBitmap,Hl=Boolean(Vl),ql=!!Et||Hl;function Yl(t){const e=Zl(t);if(!e)throw new Error("Not an image");return e}function Xl(t){switch(Yl(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function Zl(t){return"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?"imagebitmap":"undefined"!==typeof Image&&t instanceof Image?"image":t&&"object"===typeof t&&t.data&&t.width&&t.height?"data":null}const Kl=/^data:image\/svg\+xml/,$l=/\.svg((\?|#).*)?$/;function Ql(t){return t&&(Kl.test(t)||$l.test(t))}function Jl(t,e){if(Ql(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function tc(t,e,n){const r=function(t,e){if(Ql(e)){let e=(new TextDecoder).decode(t);try{"function"===typeof unescape&&"function"===typeof encodeURIComponent&&(e=unescape(encodeURIComponent(e)))}catch(n){throw new Error(n.message)}return"data:image/svg+xml;base64,".concat(btoa(e))}return Jl(t,e)}(t,n),i=self.URL||self.webkitURL,o="string"!==typeof r&&i.createObjectURL(r);try{return await async function(t,e){const n=new Image;if(n.src=t,e.image&&e.image.decode&&n.decode)return await n.decode(),n;return await new Promise(((e,r)=>{try{n.onload=()=>e(n),n.onerror=e=>r(new Error("Could not load image ".concat(t,": ").concat(e)))}catch(i){r(i)}}))}(o||r,e)}finally{o&&i.revokeObjectURL(o)}}const ec={};let nc=!0;async function rc(t,e,n){let r;if(Ql(n)){r=await tc(t,e,n)}else r=Jl(t,n);const i=e&&e.imagebitmap;return await async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t){for(const e in t||ec)return!1;return!0}(e)&&nc||(e=null);if(e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),nc=!1}return await createImageBitmap(t)}(r,i)}function ic(t){return function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=(i=e,[...i].map((t=>t.charCodeAt(0))));var i;for(let o=0;o<r.length;++o)if(r[o]!==t[o+n])return!1;return!0}(t,"ftyp",4)?0===(96&t[8])?null:function(t){switch((e=t,n=8,r=12,String.fromCharCode(...e.slice(n,r))).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}var e,n,r}(t):null}const oc=!1,sc=!0;function ac(t){const e=lc(t);return function(t){const e=lc(t),n=e.byteLength>=24&&2303741511===e.getUint32(0,oc);if(!n)return null;return{mimeType:"image/png",width:e.getUint32(16,oc),height:e.getUint32(20,oc)}}(e)||function(t){const e=lc(t),n=e.byteLength>=3&&65496===e.getUint16(0,oc)&&255===e.getUint8(2);if(!n)return null;const{tableMarkers:r,sofMarkers:i}=function(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);const e=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:t,sofMarkers:e}}();let o=2;for(;o+9<e.byteLength;){const t=e.getUint16(o,oc);if(i.has(t))return{mimeType:"image/jpeg",height:e.getUint16(o+5,oc),width:e.getUint16(o+7,oc)};if(!r.has(t))return null;o+=2,o+=e.getUint16(o,oc)}return null}(e)||function(t){const e=lc(t),n=e.byteLength>=10&&1195984440===e.getUint32(0,oc);if(!n)return null;return{mimeType:"image/gif",width:e.getUint16(6,sc),height:e.getUint16(8,sc)}}(e)||function(t){const e=lc(t),n=e.byteLength>=14&&16973===e.getUint16(0,oc)&&e.getUint32(2,sc)===e.byteLength;if(!n)return null;return{mimeType:"image/bmp",width:e.getUint32(18,sc),height:e.getUint32(22,sc)}}(e)||function(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=ic(e);if(!n)return null;return{mimeType:n.mimeType,width:0,height:0}}(e)}function lc(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}const cc={id:"image",module:"images",name:"Images",version:"3.4.15",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:async function(t,e,n){const r=((e=e||{}).image||{}).type||"auto",{url:i}=n||{};let o;switch(function(t){switch(t){case"auto":case"data":return function(){if(Gl)return"imagebitmap";if(Wl)return"image";if(ql)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(t){switch(t){case"auto":return Gl||Wl||ql;case"imagebitmap":return Gl;case"image":return Wl;case"data":return ql;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}(r)){case"imagebitmap":o=await rc(t,e,i);break;case"image":o=await tc(t,e,i);break;case"data":o=await async function(t,e){const{mimeType:n}=ac(t)||{},r=globalThis._parseImageNode;return ct(r),await r(t,n)}(t);break;default:ct(!1)}return"data"===r&&(o=Xl(o)),o},tests:[t=>Boolean(ac(new DataView(t)))],options:{image:{type:"auto",decode:!0}}};const uc={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(t){const e=t[0],n=t[t.length-1];return"{"===e&&"}"===n||"["===e&&"]"===n},parseTextSync:JSON.parse};const dc=function(){const t="8.9.35",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||(W.log(1,"deck.gl ".concat(t))(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:W,_registerLoggers:H},function(t){const e=ge();t=Array.isArray(t)?t:[t];for(const n of t){const t=dt(n);e.find((e=>t===e))||e.unshift(t)}}([uc,[cc,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}(),hc=globalThis;function fc(t){if(!t&&!S())return"Node";if(x(t))return"Electron";const e="undefined"!==typeof navigator?navigator:{},n=t||e.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i?"IE":hc.chrome?"Chrome":hc.safari?"Safari":hc.mozInnerScreenX?"Firefox":"Unknown"}class pc extends wo{get[Symbol.toStringTag](){return"Query"}static isSupported(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=yi(t),r=os(t,es);let i=n||r;for(const o of e)switch(o){case"queries":i=i&&n;break;case"timers":i=i&&r;break;default:ho(!1)}return i}constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(t?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(t){return this._queryPending||(this.target=t,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const t=this.gl2.getQueryParameter(this.handle,34919);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let e=0;return this._pollingPromise=new Promise(((n,r)=>{const i=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):e++>t?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(i)};requestAnimationFrame(i)})),this._pollingPromise}_createHandle(){return pc.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const gc=S()&&"undefined"!==typeof document;let mc=0;class yc{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:e=(t=>so(t)),onAddHTML:n=null,onInitialize:r=(()=>{}),onRender:i=(()=>{}),onFinalize:o=(()=>{}),onError:s,gl:a=null,glOptions:l={},debug:c=!1,createFramebuffer:u=!1,autoResizeViewport:d=!0,autoResizeDrawingBuffer:h=!0,stats:f=uo.get("animation-loop-".concat(mc++))}=t;let{useDevicePixels:p=!0}=t;"useDevicePixelRatio"in t&&(hi.deprecated("useDevicePixelRatio","useDevicePixels")(),p=t.useDevicePixelRatio),this.props={onCreateContext:e,onAddHTML:n,onInitialize:r,onRender:i,onFinalize:o,onError:s,gl:a,glOptions:l,debug:c,createFramebuffer:u},this.gl=a,this.needsRedraw=null,this.timeline=null,this.stats=f,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:d,autoResizeDrawingBuffer:h,useDevicePixels:p}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(t){return ho("string"===typeof t),this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}start(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const e=this._getPageLoadPromise().then((()=>!this._running||this._initialized?null:(this._createWebGLContext(t),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=pc.isSupported(this.gl,["timers"])?new pc(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps)))).then((t=>{this._running&&(this._addCallbackData(t||{}),!1!==t&&this._startLoop())}));return this.props.onError&&e.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((t=>{this._resolveNextFrame=t}))),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=document.getElementById(t);return n?Number(n.value):e}setViewParameters(){return hi.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const t=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(t))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(t)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=gc?new Promise(((t,e)=>{gc&&"complete"===document.readyState?t(document):window.addEventListener("load",(()=>{t(document)}))})):Promise.resolve({})),this._pageLoadPromise}_setDisplay(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_cancelAnimationFrame(t){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(t):(e=t,"undefined"!==typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e));var e}_requestAnimationFrame(t){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(t):(e=t,"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60));var e}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:t,height:e,aspect:n}=this._getSizeAndAspect();t===this.animationProps.width&&e===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=e,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(t){"object"===typeof t&&null!==t&&(this.animationProps=Object.assign({},this.animationProps,t))}_createWebGLContext(t){if(this.offScreen=t.canvas&&"undefined"!==typeof OffscreenCanvas&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?ao(this.props.gl,t):this.onCreateContext(t),!mi(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");$i(this.gl,Li),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";const e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.bottom="10px",e.style.width="300px",e.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(e);const n=this.props.onAddHTML(e);n&&(e.innerHTML=n)}}_getSizeAndAspect(){const t=this.gl.drawingBufferWidth,e=this.gl.drawingBufferHeight;let n=1;const{canvas:r}=this.gl;return r&&r.clientHeight?n=r.clientWidth/r.clientHeight:t>0&&e>0&&(n=t/e),{width:t,height:e,aspect:n}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&lo(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new ls(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:t}=this.gl;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}_onMouseleave(t){this.animationProps._mousePosition=null}}var vc=n(6895);const bc={mousedown:1,mousemove:2,mouseup:4};!function(t){const e=t.prototype.handler;t.prototype.handler=function(t){const n=this.store;t.button>0&&"pointerdown"===t.type&&(function(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(n,(e=>e.pointerId===t.pointerId))||n.push(t)),e.call(this,t)}}(vc.PointerEventInput),vc.MouseInput.prototype.handler=function(t){let e=bc[t.type];1&e&&t.button>=0&&(this.pressed=!0),2&e&&0===t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))};const _c=vc.Manager,wc=vc;class xc{constructor(t,e,n){this.element=t,this.callback=e,this.options={enable:!0,...n}}}const Sc=wc?[[wc.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[wc.Rotate,{enable:!1}],[wc.Pinch,{enable:!1}],[wc.Swipe,{enable:!1}],[wc.Pan,{threshold:0,enable:!1}],[wc.Press,{enable:!1}],[wc.Tap,{event:"doubletap",taps:2,enable:!1}],[wc.Tap,{event:"anytap",enable:!1}],[wc.Tap,{enable:!1}]]:null,Ac={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Ec={doubletap:["tap"]},Tc={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},Pc={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Cc={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},Ic={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Mc="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",kc="undefined"!==typeof window?window:n.g;"undefined"!==typeof n.g?n.g:window,"undefined"!==typeof document&&document;let Oc=!1;try{const t={get passive(){return Oc=!0,!0}};kc.addEventListener("test",null,t),kc.removeEventListener("test",null)}catch(mM){Oc=!1}const Lc=-1!==Mc.indexOf("firefox"),{WHEEL_EVENTS:Rc}=Pc,Fc="wheel",Bc=4.000244140625;class Nc extends xc{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{if(!this.options.enable)return;let e=t.deltaY;kc.WheelEvent&&(Lc&&t.deltaMode===kc.WheelEvent.DOM_DELTA_PIXEL&&(e/=kc.devicePixelRatio),t.deltaMode===kc.WheelEvent.DOM_DELTA_LINE&&(e*=40)),0!==e&&e%Bc===0&&(e=Math.floor(e/Bc)),t.shiftKey&&e&&(e*=.25),this.callback({type:Fc,center:{x:t.clientX,y:t.clientY},delta:-e,srcEvent:t,pointerType:"mouse",target:t.target})},this.events=(this.options.events||[]).concat(Rc),this.events.forEach((e=>t.addEventListener(e,this.handleEvent,!!Oc&&{passive:!1})))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===Fc&&(this.options.enable=e)}}const{MOUSE_EVENTS:zc}=Pc,Dc="pointermove",jc="pointerover",Uc="pointerout",Vc="pointerenter",Wc="pointerleave";class Gc extends xc{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{this.handleOverEvent(t),this.handleOutEvent(t),this.handleEnterEvent(t),this.handleLeaveEvent(t),this.handleMoveEvent(t)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(zc),this.events.forEach((e=>t.addEventListener(e,this.handleEvent)))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===Dc&&(this.enableMoveEvent=e),t===jc&&(this.enableOverEvent=e),t===Uc&&(this.enableOutEvent=e),t===Vc&&(this.enableEnterEvent=e),t===Wc&&(this.enableLeaveEvent=e)}handleOverEvent(t){this.enableOverEvent&&"mouseover"===t.type&&this._emit(jc,t)}handleOutEvent(t){this.enableOutEvent&&"mouseout"===t.type&&this._emit(Uc,t)}handleEnterEvent(t){this.enableEnterEvent&&"mouseenter"===t.type&&this._emit(Vc,t)}handleLeaveEvent(t){this.enableLeaveEvent&&"mouseleave"===t.type&&this._emit(Wc,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":0===t.which&&(this.pressed=!1),this.pressed||this._emit(Dc,t);break;case"mouseup":this.pressed=!1}}_emit(t,e){this.callback({type:t,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}const{KEY_EVENTS:Hc}=Pc,qc="keydown",Yc="keyup";class Xc extends xc{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{const e=t.target||t.srcElement;"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName||(this.enableDownEvent&&"keydown"===t.type&&this.callback({type:qc,srcEvent:t,key:t.key,target:t.target}),this.enableUpEvent&&"keyup"===t.type&&this.callback({type:Yc,srcEvent:t,key:t.key,target:t.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(Hc),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach((e=>t.addEventListener(e,this.handleEvent)))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===qc&&(this.enableDownEvent=e),t===Yc&&(this.enableUpEvent=e)}}const Zc="contextmenu";class Kc extends xc{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{this.options.enable&&this.callback({type:Zc,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,e){t===Zc&&(this.options.enable=e)}}const $c={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function Qc(t){const e=$c[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r,which:i}=t.srcEvent;let o=!1,s=!1,a=!1;return 4===e||2===e&&!Number.isFinite(n)?(o=1===i,s=2===i,a=3===i):2===e?(o=Boolean(1&n),s=Boolean(4&n),a=Boolean(2&n)):1===e&&(o=0===r,s=1===r,a=2===r),{leftButton:o,middleButton:s,rightButton:a}}function Jc(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),i=r.width/e.offsetWidth||1,o=r.height/e.offsetHeight||1;return{center:n,offsetCenter:{x:(n.x-r.left-e.clientLeft)/i,y:(n.y-r.top-e.clientTop)/o}}}const tu={srcElement:"root",priority:0};class eu{constructor(t){this.handleEvent=t=>{if(this.isEmpty())return;const e=this._normalizeEvent(t);let n=t.srcEvent.target;for(;n&&n!==e.rootElement;){if(this._emit(e,n),e.handled)return;n=n.parentNode}this._emit(e,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const{handlers:o,handlersByElement:s}=this;let a=tu;"string"===typeof n||n&&n.addEventListener?a={...tu,srcElement:n}:n&&(a={...tu,...n});let l=s.get(a.srcElement);l||(l=[],s.set(a.srcElement,l));const c={type:t,handler:e,srcElement:a.srcElement,priority:a.priority};r&&(c.once=!0),i&&(c.passive=!0),o.push(c),this._active=this._active||!c.passive;let u=l.length-1;for(;u>=0&&!(l[u].priority>=c.priority);)u--;l.splice(u+1,0,c)}remove(t,e){const{handlers:n,handlersByElement:r}=this;for(let i=n.length-1;i>=0;i--){const o=n[i];if(o.type===t&&o.handler===e){n.splice(i,1);const t=r.get(o.srcElement);t.splice(t.indexOf(o),1),0===t.length&&r.delete(o.srcElement)}}this._active=n.some((t=>!t.passive))}_emit(t,e){const n=this.handlersByElement.get(e);if(n){let e=!1;const r=()=>{t.handled=!0},i=()=>{t.handled=!0,e=!0},o=[];for(let s=0;s<n.length;s++){const{type:a,handler:l,once:c}=n[s];if(l({...t,type:a,stopPropagation:r,stopImmediatePropagation:i}),c&&o.push(n[s]),e)break}for(let t=0;t<o.length;t++){const{type:e,handler:n}=o[t];this.remove(e,n)}}}_normalizeEvent(t){const e=this.eventManager.getElement();return{...t,...Qc(t),...Jc(t,e),preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:e}}}const nu={events:null,recognizers:null,recognizerOptions:{},Manager:_c,touchAction:"none",tabIndex:0};class ru{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;this._onBasicInput=t=>{const{srcEvent:e}=t,n=Tc[e.type];n&&this.manager.emit(n,t)},this._onOtherEvent=t=>{this.manager.emit(t.type,t)},this.options={...nu,...e},this.events=new Map,this.setElement(t);const{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;const{options:e}=this,n=e.Manager;this.manager=new n(t,{touchAction:e.touchAction,recognizers:e.recognizers||Sc}).on("hammer.input",this._onBasicInput),e.recognizers||Object.keys(Ac).forEach((t=>{const e=this.manager.get(t);e&&Ac[t].forEach((t=>{e.recognizeWith(t)}))}));for(const r in e.recognizerOptions){const t=this.manager.get(r);if(t){const n=e.recognizerOptions[r];delete n.enable,t.set(n)}}this.wheelInput=new Nc(t,this._onOtherEvent,{enable:!1}),this.moveInput=new Gc(t,this._onOtherEvent,{enable:!1}),this.keyInput=new Xc(t,this._onOtherEvent,{enable:!1,tabIndex:e.tabIndex}),this.contextmenuInput=new Kc(t,this._onOtherEvent,{enable:!1});for(const[r,i]of this.events)i.isEmpty()||(this._toggleRecognizer(i.recognizerName,!0),this.manager.on(r,i.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,e,n){this._addEventHandler(t,e,n,!1)}once(t,e,n){this._addEventHandler(t,e,n,!0)}watch(t,e,n){this._addEventHandler(t,e,n,!1,!0)}off(t,e){this._removeEventHandler(t,e)}_toggleRecognizer(t,e){const{manager:n}=this;if(!n)return;const r=n.get(t);if(r&&r.options.enable!==e){r.set({enable:e});const i=Ec[t];i&&!this.options.recognizers&&i.forEach((i=>{const o=n.get(i);e?(o.requireFailure(t),r.dropRequireFailure(i)):o.dropRequireFailure(t)}))}this.wheelInput.enableEventType(t,e),this.moveInput.enableEventType(t,e),this.keyInput.enableEventType(t,e),this.contextmenuInput.enableEventType(t,e)}_addEventHandler(t,e,n,r,i){if("string"!==typeof t){n=e;for(const e in t)this._addEventHandler(e,t[e],n,r,i);return}const{manager:o,events:s}=this,a=Ic[t]||t;let l=s.get(a);l||(l=new eu(this),s.set(a,l),l.recognizerName=Cc[a]||a,o&&o.on(a,l.handleEvent)),l.add(t,e,n,r,i),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(t,e){if("string"!==typeof t){for(const e in t)this._removeEventHandler(e,t[e]);return}const{events:n}=this,r=Ic[t]||t,i=n.get(r);if(i&&(i.remove(t,e),i.isEmpty())){const{recognizerName:t}=i;let e=!1;for(const r of n.values())if(r.recognizerName===t&&!r.isEmpty()){e=!0;break}e||this._toggleRecognizer(t,!1)}}}function iu(){}const ou={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:iu,onResize:iu,onViewStateChange:iu,onInteractionStateChange:iu,onBeforeRender:iu,onAfterRender:iu,onLoad:iu,onError:t=>W.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:t=>{let{isDragging:e}=t;return e?"grabbing":"grab"},getTooltip:null,debug:!1,drawPickingColors:!1};class su{constructor(t){s(this,"props",void 0),s(this,"width",0),s(this,"height",0),s(this,"userData",{}),s(this,"canvas",null),s(this,"viewManager",null),s(this,"layerManager",null),s(this,"effectManager",null),s(this,"deckRenderer",null),s(this,"deckPicker",null),s(this,"eventManager",null),s(this,"tooltip",null),s(this,"metrics",void 0),s(this,"animationLoop",void 0),s(this,"stats",void 0),s(this,"viewState",void 0),s(this,"cursorState",void 0),s(this,"_needsRedraw",void 0),s(this,"_pickRequest",void 0),s(this,"_lastPointerDownInfo",null),s(this,"_metricsCounter",void 0),s(this,"_onPointerMove",(t=>{const{_pickRequest:e}=this;if("pointerleave"===t.type)e.x=-1,e.y=-1,e.radius=0;else{if(t.leftButton||t.rightButton)return;{const n=t.offsetCenter;if(!n)return;e.x=n.x,e.y=n.y,e.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:e.x,y:e.y}),e.event=t})),s(this,"_onEvent",(t=>{const e=pr[t.type],n=t.offsetCenter;if(!e||!n||!this.layerManager)return;const r=this.layerManager.getLayers(),i=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:r,viewports:this.getViewports(n)},this._lastPointerDownInfo),{layer:o}=i,s=o&&(o[e.handler]||o.props[e.handler]),a=this.props[e.handler];let l=!1;s&&(l=s.call(o,i,t)),!l&&a&&a(i,t)})),s(this,"_onPointerDown",(t=>{const e=t.offsetCenter,n=this._pick("pickObject","pickObject Time",{x:e.x,y:e.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=n.result[0]||n.emptyInfo})),this.props={...ou,...t},t=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},t.viewState&&t.initialViewState&&W.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===fc()&&W.warn("IE 11 is not supported")(),this.viewState=t.initialViewState,t.gl||"undefined"!==typeof document&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new Q({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),t._typedArrayManagerProps&&Ie.setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){var t,e,n,r,i,o,s,a,l;(null===(t=this.animationLoop)||void 0===t||t.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(e=this.layerManager)||void 0===e||e.finalize(),this.layerManager=null,null===(n=this.viewManager)||void 0===n||n.finalize(),this.viewManager=null,null===(r=this.effectManager)||void 0===r||r.finalize(),this.effectManager=null,null===(i=this.deckRenderer)||void 0===i||i.finalize(),this.deckRenderer=null,null===(o=this.deckPicker)||void 0===o||o.finalize(),this.deckPicker=null,null===(s=this.eventManager)||void 0===s||s.destroy(),this.eventManager=null,null===(a=this.tooltip)||void 0===a||a.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas)||(null===(l=this.canvas.parentElement)||void 0===l||l.removeChild(this.canvas),this.canvas=null)}setProps(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&W.removed("onLayerHover","onHover")(),"onLayerClick"in t&&W.removed("onLayerClick","onClick")(),t.initialViewState&&!Ta(this.props.initialViewState,t.initialViewState,3)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);const e=Object.create(this.props);Object.assign(e,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(e),this.layerManager&&(this.viewManager.setProps(e),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(e),this.effectManager.setProps(e),this.deckRenderer.setProps(e),this.deckPicker.setProps(e)),this.stats.get("setProps Time").timeEnd()}needsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(t),r=this.layerManager.needsRedraw(t),i=this.effectManager.needsRedraw(t),o=this.deckRenderer.needsRedraw(t);return e=e||n||r||i||o,e}redraw(t){if(!this.layerManager)return;let e=this.needsRedraw({clearRedrawFlags:!0});e=t||e,e&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(e):this._drawLayers(e))}get isInitialized(){return null!==this.viewManager}getViews(){return ka(this.viewManager),this.viewManager.views}getViewports(t){return ka(this.viewManager),this.viewManager.getViewports(t)}getCanvas(){return this.canvas}pickObject(t){const e=this._pick("pickObject","pickObject Time",t).result;return e.length?e[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(const n in t)this.layerManager.resourceManager.add({resourceId:n,data:t[n],forceUpdate:e})}_removeResources(t){for(const e of t)this.layerManager.resourceManager.remove(e)}_addDefaultEffect(t){this.effectManager.addDefaultEffect(t)}_pick(t,e,n){ka(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(e).timeStart();const i=this.deckPicker[t]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return r.get(e).timeEnd(),i}_createCanvas(t){let e=t.canvas;if("string"===typeof e&&(e=document.getElementById(e),ka(e)),!e){e=document.createElement("canvas"),e.id=t.id||"deckgl-overlay";(t.parent||document.body).appendChild(e)}return Object.assign(e.style,t.style),e}_setCanvasSize(t){if(!this.canvas)return;const{width:e,height:n}=t;if(e||0===e){const t=Number.isFinite(e)?"".concat(e,"px"):e;this.canvas.style.width=t}if(n||0===n){var r;const e=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.position=(null===(r=t.style)||void 0===r?void 0:r.position)||"absolute",this.canvas.style.height=e}}_updateCanvasSize(){var t,e;const{canvas:n}=this;if(!n)return;const r=null!==(t=n.clientWidth)&&void 0!==t?t:n.width,i=null!==(e=n.clientHeight)&&void 0!==e?e:n.height;var o,s;r===this.width&&i===this.height||(this.width=r,this.height=i,null===(o=this.viewManager)||void 0===o||o.setProps({width:r,height:i}),null===(s=this.layerManager)||void 0===s||s.activateViewport(this.getViewports()[0]),this.props.onResize({width:r,height:i}))}_createAnimationLoop(t){const{width:e,height:n,gl:r,glOptions:i,debug:o,onError:s,onBeforeRender:a,onAfterRender:l,useDevicePixels:c}=t;return new yc({width:e,height:n,useDevicePixels:c,autoResizeDrawingBuffer:!r,autoResizeViewport:!1,gl:r,onCreateContext:t=>so({...i,...t,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:t=>this._setGLContext(t.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:a,onAfterRender:l,onError:s})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let t=this.props.views||[new il({id:"default-view"})];return t=Array.isArray(t)?t:[t],t.length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}_onContextLost(){const{onError:t}=this.props;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:t}=this;if(t.event){const{result:n,emptyInfo:r}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=n.length>0;let i=r,o=!1;for(const s of n){var e;i=s,o=(null===(e=s.layer)||void 0===e?void 0:e.onHover(s,t.event))||o}if(!o&&this.props.onHover&&this.props.onHover(i,t.event),this.props.getTooltip&&this.tooltip){const t=this.props.getTooltip(i);this.tooltip.setTooltip(t,i.x,i.y)}t.event=null}}_updateCursor(){const t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(t){if(this.layerManager)return;this.canvas||(this.canvas=t.canvas,ao(t,{enable:!0,copyState:!0})),this.tooltip=new Ul(this.canvas),$i(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);const e=new c;e.play(),this.animationLoop.attachTimeline(e),this.eventManager=new ru(this.props.parent||t.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in pr)this.eventManager.on(r,this._onEvent);this.viewManager=new Pa({timeline:e,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new Ea(t,{deck:this,stats:this.stats,viewport:n,timeline:e}),this.effectManager=new Cl,this.deckRenderer=new Ll(t),this.deckPicker=new Dl(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,e){const{gl:n}=this.layerManager.context;$i(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...e}),this.props.onAfterRender({gl:n})}_onRenderFrame(t){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),W.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){const e=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState={...this.viewState,[t.viewId]:e},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){const{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();const e=this.animationLoop.stats;t.get("GPU Time").addTime(e.get("GPU Time").lastTiming),t.get("CPU Time").addTime(e.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:t,stats:e}=this;t.fps=e.get("frameRate").getHz(),t.setPropsTime=e.get("setProps Time").time,t.updateAttributesTime=e.get("Update Attributes").time,t.framesRedrawn=e.get("Redraw Count").count,t.pickTime=e.get("pickObject Time").time+e.get("pickMultipleObjects Time").time+e.get("pickObjects Time").time,t.pickCount=e.get("Pick Count").count,t.gpuTime=e.get("GPU Time").time,t.cpuTime=e.get("CPU Time").time,t.gpuTimePerFrame=e.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=e.get("CPU Time").getAverageTime();const n=uo.get("Memory Usage");t.bufferMemory=n.get("Buffer Memory").count,t.textureMemory=n.get("Texture Memory").count,t.renderbufferMemory=n.get("Renderbuffer Memory").count,t.gpuMemory=n.get("GPU Memory").count}}s(su,"defaultProps",ou),s(su,"VERSION",dc);const au="undefined"!==typeof window?t.useLayoutEffect:t.useEffect;function lu(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}class cu{constructor(t,e){s(this,"opts",void 0),s(this,"source",void 0),this.opts=e,this.source=t}get value(){return this.source.value}getValue(){const t=this.source.getBuffer(),e=this.getAccessor();if(t)return[t,e];const{value:n}=this.source,{size:r}=e;let i=n;if(n&&n.length!==r){i=new Float32Array(r);const t=e.elementOffset||0;for(let e=0;e<r;++e)i[e]=n[t+e]}return i}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function uu(t){return t.stride||t.size*t.bytesPerElement}function du(t,e){e.offset&&W.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=uu(t),r=(void 0!==e.vertexOffset?e.vertexOffset:t.vertexOffset||0)*n+(e.elementOffset||0)*t.bytesPerElement+(t.offset||0);return{...e,offset:r,stride:n}}class hu{constructor(t,e,n){s(this,"gl",void 0),s(this,"id",void 0),s(this,"size",void 0),s(this,"settings",void 0),s(this,"value",void 0),s(this,"doublePrecision",void 0),s(this,"_buffer",void 0),s(this,"state",void 0),this.gl=t,this.id=e.id||"",this.size=e.size||1;const r=e.logicalType||e.type,i=5130===r;let o,{defaultValue:a}=e;a=Number.isFinite(a)?[a]:a||new Array(this.size).fill(0),o=i?5126:!r&&e.isIndexed?t&&function(t,e){return os(t,e)}(t,ns)?5125:5123:r||5126;let l=function(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||o||5126);this.doublePrecision=i,i&&!1===e.fp64&&(l=Float32Array),this.value=null,this.settings={...e,defaultType:l,defaultValue:a,logicalType:r,type:o,size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:t,type:e}=this.settings;this._buffer=new Lo(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:e}})}return this._buffer}get byteOffset(){const t=this.getAccessor();return t.vertexOffset?t.vertexOffset*uu(t):0}get numInstances(){return this.state.numInstances}set numInstances(t){this.state.numInstances=t}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Ie.release(this.state.allocatedValue)}getShaderAttributes(t,e){if(this.doublePrecision){const n={},r=this.value instanceof Float64Array,i=function(t,e){const n=du(t,e);return{high:n,low:{...n,offset:n.offset+4*t.size}}}(this.getAccessor(),e||{});return n[t]=new cu(this,i.high),n["".concat(t,"64Low")]=r?new cu(this,i.low):new Float32Array(this.size),n}if(e){const n=du(this.getAccessor(),e);return{[t]:new cu(this,n)}}return{[t]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let t=null;if(this.state.constant&&this.value){const e=Array.from(this.value);t=[e,e]}else{const{value:e,numInstances:n,size:r}=this,i=n*r;if(e&&i&&e.length>=i){const n=new Array(r).fill(1/0),o=new Array(r).fill(-1/0);for(let t=0;t<i;)for(let i=0;i<r;i++){const r=e[t++];r<n[i]&&(n[i]=r),r>o[i]&&(o[i]=r)}t=[n,o]}}return this.state.bounds=t,t}setData(t){const{state:e}=this;let n;n=ArrayBuffer.isView(t)?{value:t}:t instanceof Lo?{buffer:t}:t;const r={...this.settings,...n};if(e.bufferAccessor=r,e.bounds=null,n.constant){let t=n.value;t=this._normalizeValue(t,[],0),this.settings.normalized&&(t=this.normalizeConstant(t));if(!(!e.constant||!this._areValuesEqual(t,this.value)))return!1;e.externalBuffer=null,e.constant=!0,this.value=t}else if(n.buffer){const t=n.buffer;e.externalBuffer=t,e.constant=!1,this.value=n.value||null;const i=n.value instanceof Float64Array;r.type=n.type||t.accessor.type,r.bytesPerElement=t.accessor.BYTES_PER_ELEMENT*(i?2:1),r.stride=uu(r)}else if(n.value){this._checkExternalBuffer(n);let t=n.value;e.externalBuffer=null,e.constant=!1,this.value=t,r.bytesPerElement=t.BYTES_PER_ELEMENT,r.stride=uu(r);const{buffer:i,byteOffset:o}=this;this.doublePrecision&&t instanceof Float64Array&&(t=cn(t,r));const s=t.byteLength+o+2*r.stride;i.byteLength<s&&i.reallocate(s),i.setAccessor(null),i.subData({data:t,offset:o}),r.type=n.type||i.accessor.type}return!0}updateSubBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state.bounds=null;const e=this.value,{startOffset:n=0,endOffset:r}=t;this.buffer.subData({data:this.doublePrecision&&e instanceof Float64Array?cn(e,{size:this.size,startIndex:n,endIndex:r}):e.subarray(n,r),offset:n*e.BYTES_PER_ELEMENT+this.byteOffset})}allocate(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{state:n}=this,r=n.allocatedValue,i=Ie.allocate(r,t+1,{size:this.size,type:this.settings.defaultType,copy:e});this.value=i;const{buffer:o,byteOffset:s}=this;return o.byteLength<i.byteLength+s&&(o.reallocate(i.byteLength+s),e&&r&&o.subData({data:r instanceof Float64Array?cn(r,this):r,offset:s})),n.allocatedValue=i,n.constant=!1,n.externalBuffer=null,n.bufferAccessor=this.settings,!0}_checkExternalBuffer(t){const{value:e}=t;if(!ArrayBuffer.isView(e))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const n=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=e.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(e.constructor.name));e instanceof n||!this.settings.normalized||"normalized"in t||W.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(t){switch(this.settings.type){case 5120:return new Float32Array(t).map((t=>(t+128)/255*2-1));case 5122:return new Float32Array(t).map((t=>(t+32768)/65535*2-1));case 5121:return new Float32Array(t).map((t=>t/255));case 5123:return new Float32Array(t).map((t=>t/65535));default:return t}}_normalizeValue(t,e,n){const{defaultValue:r,size:i}=this.settings;if(Number.isFinite(t))return e[n]=t,e;if(!t){let t=i;for(;--t>=0;)e[n+t]=r[t];return e}switch(i){case 4:e[n+3]=Number.isFinite(t[3])?t[3]:r[3];case 3:e[n+2]=Number.isFinite(t[2])?t[2]:r[2];case 2:e[n+1]=Number.isFinite(t[1])?t[1]:r[1];case 1:e[n+0]=Number.isFinite(t[0])?t[0]:r[0];break;default:let o=i;for(;--o>=0;)e[n+o]=Number.isFinite(t[o])?t[o]:r[o]}return e}_areValuesEqual(t,e){if(!t||!e)return!1;const{size:n}=this;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}}const fu=[],pu=[];function gu(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=fu;const i={index:-1,data:t,target:[]};return t?"function"===typeof t[Symbol.iterator]?r=t:t.length>0&&(pu.length=t.length,r=pu):r=fu,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function mu(t){return t&&t[Symbol.asyncIterator]}function yu(t,e){const{size:n,stride:r,offset:i,startIndices:o,nested:s}=e,a=t.BYTES_PER_ELEMENT,l=r?r/a:n,c=i?i/a:0,u=Math.floor((t.length-c)/l);return(e,r)=>{let{index:i,target:a}=r;if(!o){const e=i*l+c;for(let r=0;r<n;r++)a[r]=t[e+r];return a}const d=o[i],h=o[i+1]||u;let f;if(s){f=new Array(h-d);for(let e=d;e<h;e++){const r=e*l+c;a=new Array(n);for(let e=0;e<n;e++)a[e]=t[r+e];f[e-d]=a}}else if(l===n)f=t.subarray(d*n+c,h*n+c);else{f=new t.constructor((h-d)*n);let e=0;for(let r=d;r<h;r++){const i=r*l+c;for(let r=0;r<n;r++)f[e++]=t[i+r]}}return f}}const vu=[],bu=[[0,1/0]];function _u(t){const{source:e,target:n,start:r=0,size:i,getData:o}=t,s=t.end||n.length,a=e.length,l=s-r;if(a>l)return void n.set(e.subarray(0,l),r);if(n.set(e,r),!o)return;let c=a;for(;c<l;){const t=o(c,e);for(let e=0;e<i;e++)n[r+c]=t[e]||0,c++}}const wu={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function xu(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...wu[n],...e,...t,type:n}}function Su(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function Au(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function Eu(t){t.push(t.shift())}function Tu(t,e){const{doublePrecision:n,settings:r,value:i,size:o}=t,s=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*o)*s}function Pu(t){let{buffer:e,numInstances:n,attribute:r,fromLength:i,fromStartIndices:o,getData:s=(t=>t)}=t;const a=r.doublePrecision&&r.value instanceof Float64Array?2:1,l=r.size*a,c=r.byteOffset,u=r.startIndices,d=o&&u,h=Tu(r,n),f=r.isConstant;if(!d&&i>=h)return;const p=f?r.value:r.getBuffer().getData({srcByteOffset:c});if(r.settings.normalized&&!f){const t=s;s=(e,n)=>r.normalizeConstant(t(e,n))}const g=f?(t,e)=>s(p,e):(t,e)=>s(p.subarray(t,t+l),e),m=e.getData({length:i}),y=new Float32Array(h);!function(t){let{source:e,target:n,size:r,getData:i,sourceStartIndices:o,targetStartIndices:s}=t;if(!Array.isArray(s))return _u({source:e,target:n,size:r,getData:i}),n;let a=0,l=0;const c=i&&((t,e)=>i(t+l,e)),u=Math.min(o.length,s.length);for(let d=1;d<u;d++){const t=o[d]*r,i=s[d]*r;_u({source:e.subarray(a,t),target:n,start:l,end:i,size:r,getData:c}),a=t,l=i}l<n.length&&_u({source:[],target:n,start:l,size:r,getData:c})}({source:m,target:y,sourceStartIndices:o,targetStartIndices:u,size:l,getData:g}),e.byteLength<y.byteLength+c&&e.reallocate(y.byteLength+c),e.subData({data:y,offset:c})}class Cu extends hu{constructor(t,e){super(t,e,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:bu}),s(this,"constant",!1),this.settings.update=e.update||(e.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(t){this.state.startIndices=t}needsUpdate(){return this.state.needsUpdate}needsRedraw(){let{clearChangedFlags:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this.state.needsRedraw;return this.state.needsRedraw=e&&!t,e}getUpdateTriggers(){const{accessor:t}=this.settings;return[this.id].concat("function"!==typeof t&&t||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(t){if(!t||!this.supportsTransition())return null;const{accessor:e}=this.settings,n=this.settings.transition;return xu(Array.isArray(e)?t[e.find((e=>t[e]))]:t[e],n)}setNeedsUpdate(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,e=arguments.length>1?arguments[1]:void 0;if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),e){const{startRow:t=0,endRow:n=1/0}=e;this.state.updateRanges=function(t,e){if(t===bu)return t;if(e[0]<0&&(e[0]=0),e[0]>=e[1])return t;const n=[],r=t.length;let i=0;for(let o=0;o<r;o++){const r=t[o];r[1]<e[0]?(n.push(r),i=o+1):r[0]>e[1]?n.push(r):e=[Math.min(r[0],e[0]),Math.max(r[1],e[1])]}return n.splice(i,0,e),n}(this.state.updateRanges,[t,n])}else this.state.updateRanges=bu}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=vu}setNeedsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.state.needsRedraw=this.state.needsRedraw||t}allocate(t){const{state:e,settings:n}=this;return!n.noAlloc&&(!!n.update&&(super.allocate(t,e.updateRanges!==bu),!0))}updateBuffer(t){let{numInstances:e,data:n,props:r,context:i}=t;if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:s,noAlloc:a}}=this;let l=!0;if(s){for(const[t,a]of o)s.call(i,this,{data:n,startRow:t,endRow:a,props:r,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[t,n]of o){const r=Number.isFinite(t)?this.getVertexOffset(t):0,i=Number.isFinite(n)?this.getVertexOffset(n):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:r,endOffset:i})}else;this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(t){if(void 0===t||"function"===typeof t)return!1;return this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0}setExternalBuffer(t){const{state:e}=this;return t?(this.clearNeedsUpdate(),e.lastExternalBuffer===t||(e.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(e.lastExternalBuffer=null,!1)}setBinaryValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{state:n,settings:r}=this;if(!t)return n.binaryValue=null,n.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(n.binaryValue===t)return this.clearNeedsUpdate(),!0;n.binaryValue=t,this.setNeedsRedraw();if(r.transform||e!==this.startIndices){ArrayBuffer.isView(t)&&(t={value:t});const i=t;ka(ArrayBuffer.isView(i.value),"invalid ".concat(r.accessor));const o=Boolean(i.size)&&i.size!==this.size;return n.binaryAccessor=yu(i.value,{size:i.size||this.size,stride:i.stride,offset:i.offset,startIndices:e,nested:o}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}getVertexOffset(t){const{startIndices:e}=this;return(e?t<e.length?e[t]:this.numInstances:t)*this.size}getShaderAttributes(){const t=this.settings.shaderAttributes||{[this.id]:null},e={};for(const n in t)Object.assign(e,super.getShaderAttributes(n,t[n]));return e}_autoUpdater(t,e){let{data:n,startRow:r,endRow:i,props:o,numInstances:s}=e;if(t.constant)return;const{settings:a,state:l,value:c,size:u,startIndices:d}=t,{accessor:h,transform:f}=a,p=l.binaryAccessor||("function"===typeof h?h:o[h]);ka("function"===typeof p,'accessor "'.concat(h,'" is not a function'));let g=t.getVertexOffset(r);const{iterable:m,objectInfo:y}=gu(n,r,i);for(const v of m){y.index++;let e=p(v,y);if(f&&(e=f.call(this,e)),d){const n=(y.index<d.length-1?d[y.index+1]:s)-d[y.index];if(e&&Array.isArray(e[0])){let n=g;for(const r of e)t._normalizeValue(r,c,n),n+=u}else e&&e.length>u?c.set(e,g):(t._normalizeValue(e,y.target,0),Z({target:c,source:y.target,start:g,count:n}));g+=n*u}else t._normalizeValue(e,c,g),g+=u}}_validateAttributeUpdaters(){const{settings:t}=this;if(!(t.noAlloc||"function"===typeof t.update))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:t}=this,e=Math.min(4,this.size);if(t&&t.length>=e){let n=!0;switch(e){case 4:n=n&&Number.isFinite(t[3]);case 3:n=n&&Number.isFinite(t[2]);case 2:n=n&&Number.isFinite(t[1]);case 1:n=n&&Number.isFinite(t[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}}const Iu="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",Mu="#version 300 es\n".concat(Iu);function ku(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[r,i,o]=n;if(!e.includes(r)||!i||!o)return null;return{qualifier:r,type:i,name:o.split(";")[0]}}function Ou(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:n,inputType:r,output:i}=t;if(!n)return 300===e?Mu:e>300?"#version ".concat(e,"\n").concat(Iu):"void main() {gl_FragColor = vec4(0);}";const o=function(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return xr(!1),null}}(n,r);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(r," ").concat(n,";\nout vec4 ").concat(i,";\nvoid main() {\n  ").concat(i," = ").concat(o,";\n}"):"varying ".concat(r," ").concat(n,";\nvoid main() {\n  gl_FragColor = ").concat(o,";\n}")}class Lu extends wo{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(t){return yi(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};bi(t),super(t,e),this.initialize(e),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,vo(this.buffers)||this.bind((()=>this._unbindBuffers())),this.setProps(t),this}setProps(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}setBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((()=>{for(const e in t)this.setBuffer(e,t[e])})),this}setBuffer(t,e){const n=this._getVaryingIndex(t),{buffer:r,byteSize:i,byteOffset:o}=this._getBufferParams(e);return n<0?(this.unused[t]=r,hi.warn("".concat(this.id," unused varying buffer ").concat(t))(),this):(this.buffers[n]=e,this.bindOnUse||this._bindBuffer(n,r,o,i),this)}begin(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(t){let e,n,r;return t instanceof Lo===!1?(r=t.buffer,n=t.byteSize,e=t.byteOffset):r=t,void 0===e&&void 0===n||(e=e||0,n=n||r.byteLength-e),{buffer:r,byteOffset:e,byteSize:n}}_getVaryingInfo(t){return this.configuration&&this.configuration.getVaryingInfo(t)}_getVaryingIndex(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;const e=Number(t);return Number.isFinite(e)?e:-1}_bindBuffers(){if(this.bindOnUse)for(const t in this.buffers){const{buffer:e,byteSize:n,byteOffset:r}=this._getBufferParams(this.buffers[t]);this._bindBuffer(t,e,r,n)}}_unbindBuffers(){if(this.bindOnUse)for(const t in this.buffers)this._bindBuffer(t,null)}_bindBuffer(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;const i=e&&e.handle;return i&&void 0!==r?this.gl.bindBufferRange(35982,t,i,n,r):this.gl.bindBufferBase(35982,t,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(t){this.gl.bindTransformFeedback(36386,this.handle)}}class Ru{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}setupResources(t){for(const e of this.bindings)this._setupTransformFeedback(e,t)}updateModelProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:e}=this;return e.length>0&&(t=Object.assign({},t,{varyings:e})),t}getDrawOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this.bindings[this.currentIndex],{sourceBuffers:n,transformFeedback:r}=e;return{attributes:Object.assign({},n,t.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t)}getBuffer(t){const{feedbackBuffers:e}=this.bindings[this.currentIndex],n=t?e[t]:null;return n?n instanceof Lo?n:n.buffer:null}getData(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:e}=t,n=this.getBuffer(e);return n?n.getData():null}delete(){for(const t in this.resources)this.resources[t].delete()}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&ho(yi(this.gl))}_getFeedbackBuffers(t){const{sourceBuffers:e={}}=t,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap){const t=this.feedbackMap[r];r in e&&(n[t]=r)}Object.assign(n,t.feedbackBuffers);for(const r in n){const t=n[r];if("string"===typeof t){const i=e[t],{byteLength:o,usage:s,accessor:a}=i;n[r]=this._createNewBuffer(r,{byteLength:o,usage:s,accessor:a})}}return n}_setupBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e=null}=t;Object.assign(this.feedbackMap,t.feedbackMap);const n=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:e,feedbackBuffers:n})}_setupTransformFeedback(t,e){let{model:n}=e;const{program:r}=n;t.transformFeedback=new Lu(this.gl,{program:r,buffers:t.feedbackBuffers})}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){const{sourceBuffers:t,feedbackBuffers:e}=this._swapBuffers(this.bindings[this.currentIndex]),n=this._getNextIndex();this.bindings[n]=this._updateBinding(this.bindings[n],{sourceBuffers:t,feedbackBuffers:e})}}_updateBinding(t,e){return t?(Object.assign(t.sourceBuffers,e.sourceBuffers),Object.assign(t.feedbackBuffers,e.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},e.sourceBuffers),feedbackBuffers:Object.assign({},e.feedbackBuffers)}}_swapBuffers(t){if(!this.feedbackMap)return null;const e=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(const r in this.feedbackMap){const i=this.feedbackMap[r];e[r]=t.feedbackBuffers[i],n[i]=t.sourceBuffers[r],ho(n[i]instanceof Lo)}return{sourceBuffers:e,feedbackBuffers:n}}_createNewBuffer(t,e){const n=new Lo(this.gl,e);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}_getNextIndex(){return(this.currentIndex+1)%2}}function Fu(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){const t=parseInt(n[1],10);Number.isFinite(t)&&(e=t)}return e}const Bu={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},Nu="transform_uSampler_",zu="transform_uSize_",Du="transform_position";function ju(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:r,targetTexture:i}=t;let o=Object.keys(n).length,s=null;const a={};let l=e,c={};if(o>0||r){const t=l.split("\n"),e=t.slice();if(t.forEach(((t,i,l)=>{if(o>0){const r=function(t,e){const n={},r=function(t){return ku(t,["attribute","in"])}(t);if(!r)return null;const{type:i,name:o}=r;if(o&&e[o]){const e="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:r,sizeName:s,uniformDeclerations:a}=function(t){const e="".concat(Nu).concat(t),n="".concat(zu).concat(t),r="  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}(o),l=function(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return xr(!1),null}}(i),c="  ".concat(i," ").concat(o," = transform_getInput(").concat(r,", ").concat(s,").").concat(l,";\n");n[r]=o;return{updatedLine:e,inject:{"vs:#decl":a,"vs:#main-start":c},samplerTextureMap:n}}return null}(t,n);if(r){const{updatedLine:t,inject:n}=r;e[i]=t,c=Xr([c,n]),Object.assign(a,r.samplerTextureMap),o--}}r&&!s&&(s=function(t,e){const n=ku(t,["varying","out"]);if(!n)return null;return n.name===e?n.type:null}(t,r))})),r){ho(i);const t="".concat(zu).concat(r),e="uniform vec2 ".concat(t,";\n"),n="     vec2 ".concat(Du," = transform_getPos(").concat(t,");\n     gl_Position = vec4(").concat(Du,", 0, 1.);\n");c=Xr([c,{"vs:#decl":e,"vs:#main-start":n}])}l=e.join("\n")}return{vs:l,targetTextureType:s,inject:c,samplerTextureMap:a}}const Uu={10241:9728,10240:9728,10242:33071,10243:33071};class Vu{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}updateModelProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this._processVertexShader(t);return Object.assign({},t,e)}getDrawOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e,sourceTextures:n,framebuffer:r,targetTexture:i}=this.bindings[this.currentIndex],o=Object.assign({},e,t.attributes),s=Object.assign({},t.uniforms),a=Object.assign({},t.parameters);let l=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const e in this.samplerTextureMap){const t=this.samplerTextureMap[e];s[e]=n[t]}this._setSourceTextureParameters();const t=function(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}=t;const i={};let o,s;n&&(({width:o,height:s}=r),i["".concat(zu).concat(n)]=[o,s]);for(const a in e)({width:o,height:s}=e[a]),i["".concat(zu).concat(a)]=[o,s];return i}({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:i});Object.assign(s,t)}return this.hasTargetTexture&&(l=!1,a.viewport=[0,0,r.width,r.height]),{attributes:o,framebuffer:r,uniforms:s,discard:l,parameters:a}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(t)}getTargetTexture(){const{targetTexture:t}=this.bindings[this.currentIndex];return t}getData(){let{packed:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:e}=this.bindings[this.currentIndex],n=Qo(e);if(!t)return n;const r=n.constructor,i=function(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return xr(!1),null}}(this.targetTextureType),o=new r(n.length*i/4);let s=0;for(let a=0;a<n.length;a+=4)for(let t=0;t<i;t++)o[s++]=n[a+t];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:e,_swapTexture:n}=t;this._swapTexture=n,this.targetTextureVarying=e,this.hasTargetTexture=e,this._setupTextures(t)}_createTargetTexture(t){const{sourceTextures:e,textureOrReference:n}=t;if(n instanceof Uo)return n;const r=e[n];return r?(this._targetRefTexName=n,this._createNewTexture(r)):null}_setupTextures(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:e,_sourceTextures:n={},_targetTexture:r}=t,i=this._createTargetTexture({sourceTextures:n,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:e,sourceTextures:n,targetTexture:i}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}_updateElementIDBuffer(t){if("number"!==typeof t||this.elementCount>=t)return;const e=new Float32Array(t);e.forEach(((t,e,n)=>{n[e]=e})),this.elementIDBuffer?this.elementIDBuffer.setData({data:e}):this.elementIDBuffer=new Lo(this.gl,{data:e,accessor:{size:1}}),this.elementCount=t}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){const{sourceTextures:t,targetTexture:e}=this._swapTextures(this.bindings[this.currentIndex]),n=this._getNextIndex();this.bindings[n]=this._updateBinding(this.bindings[n],{sourceTextures:t,targetTexture:e})}}_updateBinding(t,e){const{sourceBuffers:n,sourceTextures:r,targetTexture:i}=e;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,r),Object.assign(t.sourceBuffers,n),i){t.targetTexture=i;const{width:e,height:n}=i,{framebuffer:r}=t;r?(r.update({attachments:{36064:i},resizeAttachments:!1}),r.resize({width:e,height:n})):t.framebuffer=new ls(this.gl,{id:"transform-framebuffer",width:e,height:n,attachments:{36064:i}})}return t}_setSourceTextureParameters(){const t=this.currentIndex,{sourceTextures:e}=this.bindings[t];for(const n in e)e[n].setParameters(Uu)}_swapTextures(t){if(!this._swapTexture)return null;const e=Object.assign({},t.sourceTextures);e[this._swapTexture]=t.targetTexture;return{sourceTextures:e,targetTexture:t.sourceTextures[this._swapTexture]}}_createNewTexture(t){const e=function(t,e){ho(t instanceof Uo||t instanceof Zo||t instanceof Ko);const n=t.constructor,{gl:r,width:i,height:o,format:s,type:a,dataFormat:l,border:c,mipmaps:u}=t;return new n(r,Object.assign({width:i,height:o,format:s,type:a,dataFormat:l,border:c,mipmaps:u},e))}(t,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=e,e}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:e,targetTexture:n}=this.bindings[this.currentIndex],{vs:r,uniforms:i,targetTextureType:o,inject:s,samplerTextureMap:a}=ju({vs:t.vs,sourceTextureMap:e,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),l=Xr([t.inject||{},s]);this.targetTextureType=o,this.samplerTextureMap=a;return{vs:r,fs:t._fs||Ou({version:Fu(r),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[Bu].concat(t.modules||[]):t.modules,uniforms:i,inject:l}}}let Wu=null;function Gu(t,e){var n;return new t((n=t.BYTES_PER_ELEMENT*e,(!Wu||Wu.byteLength<n)&&(Wu=new ArrayBuffer(n)),Wu),0,e)}class Hu extends wo{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(t){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||(yi(t)||"Chrome"===fc())}static getDefaultArray(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new Hu(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}static getMaxAttributes(t){return Hu.MAX_ATTRIBUTES=Hu.MAX_ATTRIBUTES||t.getParameter(34921),Hu.MAX_ATTRIBUTES}static setConstant(t,e,n){switch(n.constructor){case Float32Array:Hu._setConstantFloatArray(t,e,n);break;case Int32Array:Hu._setConstantIntArray(t,e,n);break;case Uint32Array:Hu._setConstantUintArray(t,e,n);break;default:ho(!1)}}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.id||e.program&&e.program.id;super(t,Object.assign({},e,{id:n})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=e.isDefaultArray||!1,this.gl2=t,this.initialize(e),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Hu.getMaxAttributes(this.gl)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(t)}setProps(t){return this}setElementBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return ho(!t||34963===t.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind((()=>{this.gl.bindBuffer(34963,t?t.handle:null)})),this}setBuffer(t,e,n){if(34963===e.target)return this.setElementBuffer(e,n);const{size:r,type:i,stride:o,offset:s,normalized:a,integer:l,divisor:c}=n,{gl:u,gl2:d}=this;return t=Number(t),this.bind((()=>{u.bindBuffer(34962,e.handle),l?(ho(yi(u)),d.vertexAttribIPointer(t,r,i,o,s)):u.vertexAttribPointer(t,r,i,a,o,s),u.enableVertexAttribArray(t),d.vertexAttribDivisor(t,c||0)})),this}enable(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!e&&0===t&&!Hu.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind((()=>e?this.gl.enableVertexAttribArray(t):this.gl.disableVertexAttribArray(t)))),this}getConstantBuffer(t,e){const n=this._normalizeConstantArrayValue(e),r=n.byteLength*t,i=n.length*t;let o=!this.buffer;if(this.buffer=this.buffer||new Lo(this.gl,r),o=o||this.buffer.reallocate(r),o=o||!this._compareConstantArrayValues(n,this.bufferValue),o){const t=Gu(e.constructor,i);!function(t){let{target:e,source:n,start:r=0,count:i=1}=t;const o=n.length,s=i*o;let a=0;for(let l=r;a<o;a++)e[l++]=n[a];for(;a<s;)a<s-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+s-a),a=s)}({target:t,source:n,start:0,count:i}),this.buffer.subData(t),this.bufferValue=e}return this.buffer}_normalizeConstantArrayValue(t){return Array.isArray(t)?new Float32Array(t):t}_compareConstantArrayValues(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}static _setConstantFloatArray(t,e,n){switch(n.length){case 1:t.vertexAttrib1fv(e,n);break;case 2:t.vertexAttrib2fv(e,n);break;case 3:t.vertexAttrib3fv(e,n);break;case 4:t.vertexAttrib4fv(e,n);break;default:ho(!1)}}static _setConstantIntArray(t,e,n){switch(ho(yi(t)),n.length){case 1:t.vertexAttribI1iv(e,n);break;case 2:t.vertexAttribI2iv(e,n);break;case 3:t.vertexAttribI3iv(e,n);break;case 4:t.vertexAttribI4iv(e,n);break;default:ho(!1)}}static _setConstantUintArray(t,e,n){switch(ho(yi(t)),n.length){case 1:t.vertexAttribI1uiv(e,n);break;case 2:t.vertexAttribI2uiv(e,n);break;case 3:t.vertexAttribI3uiv(e,n);break;case 4:t.vertexAttribI4uiv(e,n);break;default:ho(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(t){return this.gl2.deleteVertexArray(t),[this.elements]}_bindHandle(t){this.gl2.bindVertexArray(t)}_getParameter(t,e){let{location:n}=e;return ho(Number.isFinite(n)),this.bind((()=>34373===t?this.gl.getVertexAttribOffset(n,t):this.gl.getVertexAttrib(n,t)))}}const qu=/^(.+)__LOCATION_([0-9]+)$/,Yu=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class Xu{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.id||e.program&&e.program.id;this.id=n,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Hu(t),bo(this,"VertexArray","v6.0",Yu),this.initialize(e),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind((()=>{for(const e in t){const n=t[e];this._setAttribute(e,n)}this.gl.bindBuffer(34962,null)})),this}setElementBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=t,this.elementsAccessor=e,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,e),this}setBuffer(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===e.target)return this.setElementBuffer(e,n);const{location:r,accessor:i}=this._resolveLocationAndAccessor(t,e,e.accessor,n);return r>=0&&(this.values[r]=e,this.accessors[r]=i,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,e,i)),this}setConstant(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:i}=this._resolveLocationAndAccessor(t,e,Object.assign({size:e.length},n));return r>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e),this.values[r]=e,this.accessors[r]=i,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Lo(this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof Lo&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))})),this}bindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){const e=this.values[t];e instanceof Lo&&this.setBuffer(t,e)}})),this}bindForDraw(t,e,n){let r;return this.vertexArrayObject.bind((()=>{this._setConstantAttributes(t,e),r=n()})),r}_resolveLocationAndAccessor(t,e,n,r){const i={location:-1,accessor:null},{location:o,name:s}=this._getAttributeIndex(t);if(!Number.isFinite(o)||o<0)return this.unused[t]=e,hi.once(3,(()=>"unused value ".concat(t," in ").concat(this.id)))(),i;const a=this._getAttributeInfo(s||o);if(!a)return i;const l=this.accessors[o]||{},c=Io.resolve(a.accessor,l,n,r),{size:u,type:d}=c;return ho(Number.isFinite(u)&&Number.isFinite(d)),{location:o,accessor:c}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){const e=Number(t);if(Number.isFinite(e))return{location:e};const n=qu.exec(t),r=n?n[1]:t,i=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+i,name:r}:{location:-1}}_setAttribute(t,e){if(e instanceof Lo)this.setBuffer(t,e);else if(Array.isArray(e)&&e.length&&e[0]instanceof Lo){const n=e[0],r=e[1];this.setBuffer(t,n,r)}else if(ArrayBuffer.isView(e)||Array.isArray(e)){const n=e;this.setConstant(t,n)}else{if(!(e.buffer instanceof Lo))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");{const n=e;this.setBuffer(t,n.buffer,n)}}}_setConstantAttributes(t,e){const n=Math.max(0|t,0|e);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(let i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)r=this.values[i],ArrayBuffer.isView(r)&&this._setConstantAttribute(i,r)}_setConstantAttributeZero(t,e){if(Hu.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,t);const n=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}_setConstantAttribute(t,e){Hu.setConstant(this.gl,t,e)}_updateDrawParams(){const t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,e){const n=this.values[e],r=this.accessors[e];if(!n)return;const{divisor:i}=r,o=i>0;if(t.isInstanced=t.isInstanced||o,n instanceof Lo){const e=n;if(o){const n=e.getVertexCount(r);t.instanceCount=Math.min(t.instanceCount,n)}else{const n=e.getVertexCount(r);t.vertexCount=Math.min(t.vertexCount,n)}}}setElements(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return hi.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,e)}}function Zu(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:n=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return function(t,e){const{maxElts:n=16,size:r=1}=e;let i="[";for(let s=0;s<t.length&&s<n;++s)s>0&&(i+=",".concat(s%r===0?" ":"")),i+=Zu(t[s],e);const o=t.length>n?"...":"]";return"".concat(i).concat(o)}(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return n?"0":"0.";if(n)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const r=t.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function Ku(t,e,n,r){const{gl:i}=t;if(!e)return{[r]:"null","Format ":"N/A"};let o,s,a,l="NOT PROVIDED",c=1,u=0,d=0;if(n&&(l=n.type,c=n.size,l=String(l).replace("Array",""),o=-1!==l.indexOf("nt")),e instanceof Lo){const t=e,{data:h,changed:f}=t.getDebugData();let p;if(s=f?"*":"",a=h,d=t.byteLength,u=d/h.BYTES_PER_ELEMENT/c,n){const t=n.divisor>0;p="".concat(t?"I ":"P "," ").concat(u," (x").concat(c,"=").concat(d," bytes ").concat(po(i,l),")")}else o=!0,p="".concat(d," bytes");return{[r]:"".concat(s).concat(Zu(a,{size:c,isInteger:o})),"Format ":p}}return a=e,c=e.length,l=String(e.constructor.name).replace("Array",""),o=-1!==l.indexOf("nt"),{[r]:"".concat(Zu(a,{size:c,isInteger:o})," (constant)"),"Format ":"".concat(c,"x").concat(l," (constant)")}}function $u(t,e){const{type:n,size:r}=e,i=Qs(n,r);return i?"".concat(t," (").concat(i.name,")"):t}function Qu(t){let{header:e="Uniforms",program:n,uniforms:r,undefinedOnly:i=!1}=t;ho(n);const o=".*Matrix",s=n._uniformSetters,a={},l=Object.keys(s).sort();let c=0;for(const h of l)h.match(".*_.*")||h.match(o)||Ju({table:a,header:e,uniforms:r,uniformName:h,undefinedOnly:i})&&c++;for(const h of l)h.match(o)&&Ju({table:a,header:e,uniforms:r,uniformName:h,undefinedOnly:i})&&c++;for(const h of l)a[h]||Ju({table:a,header:e,uniforms:r,uniformName:h,undefinedOnly:i})&&c++;let u=0;const d={};if(!i)for(const h in r){const t=r[h];a[h]||(u++,d[h]={Type:"NOT USED: ".concat(t),[e]:Zu(t)})}return{table:a,count:c,unusedTable:d,unusedCount:u}}function Ju(t){let{table:e,header:n,uniforms:r,uniformName:i,undefinedOnly:o}=t;const s=r[i],a=function(t){return void 0!==t&&null!==t}(s);return(!o||!a)&&(e[i]={[n]:a?Zu(s):"N/A","Uniform Type":a?s:"NOT PROVIDED"},!0)}function td(t){const{type:e,size:n}=t.accessor,r=Qs(e,n);return r?"".concat(r.name," ").concat(t.name):t.name}const ed={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function nd(t,e){const{attributeMap:n=ed}=e||{};return n&&n[t]||t}function rd(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}ho(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const id=()=>{},od={};class sd{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:n=mo("model")}=e;ho(mi(t)),this.id=n,this.gl=t,this.id=e.id||mo("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(e)}initialize(t){this.props={},this.programManager=t.programManager||ra.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:e=null,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:l,transpileToGLSL100:c}=t;this.programProps={program:e,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:l,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=void 0!==t.drawMode?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},ho(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(t){this._setModelProps(t)}delete(){for(const t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(t){const{program:e,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:l,transpileToGLSL100:c}=t;this.programProps={program:e,vs:n,fs:r,modules:i,defines:o,inject:s,varyings:a,bufferMode:l,transpileToGLSL100:c},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(t){return this.drawMode=t,this}setVertexCount(t){return ho(Number.isFinite(t)),this.vertexCount=t,this}setInstanceCount(t){return ho(Number.isFinite(t)),this.instanceCount=t,this}setGeometry(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(t,e,n){const r={};let i=e.indices;for(const o in e.attributes){const s=e.attributes[o],a=nd(o,n);if("indices"===o)i=s;else if(s.constant)r[a]=s.value;else{const e=s.value,n={...s};delete n.value,r[a]=[new Lo(t,e),n],rd(o,n)}}if(i){const e=i.value||i;ho(e instanceof Uint16Array||e instanceof Uint32Array,'attribute array for "indices" must be of integer type');const n={size:1,isIndexed:void 0===i.isIndexed||i.isIndexed};r.indices=[new Lo(t,{data:e,target:34963}),n]}return r}(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(vo(t))return this;const e={};for(const n in t){const r=t[n];e[n]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(e),this}setUniforms(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.uniforms,t),this}getModuleUniforms(t){this._checkProgram();const e=this.programManager.getUniforms(this.program);return e?e(t):{}}updateModuleSettings(t){const e=this.getModuleUniforms(t||{});return this.setUniforms(e)}clear(t){return Yo(this.program.gl,t),this}draw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:e=null,framebuffer:n,uniforms:r={},attributes:i={},transformFeedback:o=this.transformFeedback,parameters:s={},vertexArray:a=this.vertexArray}=t;let l;this.setAttributes(i),this.updateModuleSettings(e),this.setUniforms(r),hi.priority>=2&&(l=this._logDrawCallStart(2));const c=this.vertexArray.getDrawParams(),{isIndexed:u=c.isIndexed,indexType:d=c.indexType,indexOffset:h=c.indexOffset,vertexArrayInstanced:f=c.isInstanced}=this.props;f&&!this.isInstanced&&hi.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:p,instanceCount:g}=this,{onBeforeRender:m=id,onAfterRender:y=id}=this.props;m(),this.program.setUniforms(this.uniforms);const v=this.program.draw(Object.assign(od,t,{logPriority:l,uniforms:null,framebuffer:n,parameters:s,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:a,transformFeedback:o,isIndexed:u,indexType:d,isInstanced:p,instanceCount:g,offset:u?h:0}));return y(),hi.priority>=2&&this._logDrawCallEnd(l,a,n),v}transform(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:e=!0,feedbackBuffers:n,unbindModels:r=[]}=t;let{parameters:i}=t;n&&this._setFeedbackBuffers(n),e&&(i=Object.assign({},i,{35977:e})),r.forEach((t=>t.vertexArray.unbindBuffers()));try{this.draw(Object.assign({},t,{parameters:i}))}finally{r.forEach((t=>t.vertexArray.bindBuffers()))}return this}render(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return hi.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}_setModelProps(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{const{vs:e,fs:n,modules:r,inject:i,defines:o,varyings:s,bufferMode:a,transpileToGLSL100:l}=this.programProps;t=this.programManager.get({vs:e,fs:n,modules:r,inject:i,defines:o,varyings:s,bufferMode:a,transpileToGLSL100:l}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}ho(t instanceof na,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new Xu(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const t in this.geometryBuffers){const e=this.geometryBuffers[t][0]||this.geometryBuffers[t];e instanceof Lo&&e.delete()}}_setAnimationProps(t){this.animated&&ho(t,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(vo(t))return this;const{gl:e}=this.program;return this.transformFeedback=this.transformFeedback||new Lu(e,{program:this.program}),this.transformFeedback.setBuffers(t),this}_logDrawCallStart(t){const e=t>3?0:1e4;if(!(Date.now()-this.lastLogTime<e))return this.lastLogTime=Date.now(),hi.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:hi.level<=2})(),t}_logDrawCallEnd(t,e,n,r){if(void 0===t)return;const i=function(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=Ku(e,e.elements,null,n));const i=e.values;for(const o in i){const t=e._getAttributeInfo(o);if(t){let s="".concat(o,": ").concat(t.name);const a=e.accessors[t.location];a&&(s="".concat(o,": ").concat($u(t.name,a))),r[s]=Ku(e,i[o],a,n)}}return r}({vertexArray:e,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:s,unusedCount:a}=Qu({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),{table:l,count:c}=Qu({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0});c>0&&hi.log("MISSING UNIFORMS",Object.keys(l))(),a>0&&hi.log("UNUSED UNIFORMS",Object.keys(s))();const u=function(t){const e={},n="Accessors for ".concat(t.id);for(const r of t.attributeInfos)if(r){const t=td(r);e["in ".concat(t)]={[n]:JSON.stringify(r.accessor)}}for(const r of t.varyingInfos)if(r){const t=td(r);e["out ".concat(t)]={[n]:JSON.stringify(r.accessor)}}return e}(this.vertexArray.configuration);hi.table(t,i)(),hi.table(t,o)(),hi.table(t+1,u)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),hi.groupEnd(2)()}}class ad{static isSupported(t){return yi(t)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(e),Object.seal(this)}delete(){const{model:t,bufferTransform:e,textureTransform:n}=this;t&&t.delete(),e&&e.delete(),n&&n.delete()}run(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:e=!0}=t,n=this._updateDrawOptions(t);e&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}swap(){let t=!1;const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of e)t=t||n.swap();ho(t,"Nothing to swap")}getBuffer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}getData(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of e){const e=n.getData(t);if(e)return e}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);const e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of e)n.update(t)}_initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:e}=this;this._buildResourceTransforms(e,t),t=this._updateModelProps(t),this.model=new sd(e,Object.assign({},t,{fs:t.fs||Ou({version:Fu(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(t){let e=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=r.updateModelProps(e);return e}_buildResourceTransforms(t,e){(function(t){if(!vo(t.feedbackBuffers)||!vo(t.feedbackMap)||t.varyings&&t.varyings.length>0)return!0;return!1})(e)&&(this.bufferTransform=new Ru(t,e)),function(t){if(!vo(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)return!0;return!1}(e)&&(this.textureTransform=new Vu(t,e)),ho(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(t){let e=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=Object.assign(e,r.getDrawOptions(e));return e}}const ld="\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n";const cd={interpolation:class{constructor(t){let{gl:e,attribute:n,timeline:r}=t;s(this,"gl",void 0),s(this,"type","interpolation"),s(this,"attributeInTransition",void 0),s(this,"settings",void 0),s(this,"attribute",void 0),s(this,"transition",void 0),s(this,"currentStartIndices",void 0),s(this,"currentLength",void 0),s(this,"transform",void 0),s(this,"buffers",void 0),this.gl=e,this.transition=new Ra(r),this.attribute=n,this.attributeInTransition=new Cu(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=function(t,e){const n=Au(e.size);return new ad(t,{vs:ld,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(e,n);const i={byteLength:0,usage:35050};this.buffers=[new Lo(e,i),new Lo(e,i)]}get inProgress(){return this.transition.inProgress}start(t,e){if(t.duration<=0)return void this.transition.cancel();this.settings=t;const{gl:n,buffers:r,attribute:i}=this;Eu(r);const o={numInstances:e,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const s of r)Pu({buffer:s,...o});this.currentStartIndices=i.startIndices,this.currentLength=Tu(i,e),this.attributeInTransition.setData({buffer:r[1],value:i.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aFrom:r[0],aTo:Su(0,i)},feedbackBuffers:{vCurrent:r[1]}})}update(){const t=this.transition.update();if(t){const{duration:t,easing:e}=this.settings,{time:n}=this.transition;let r=n/t;e&&(r=e(r)),this.transform.run({uniforms:{time:r}})}return t}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0}},spring:class{constructor(t){let{gl:e,attribute:n,timeline:r}=t;s(this,"gl",void 0),s(this,"type","spring"),s(this,"attributeInTransition",void 0),s(this,"settings",void 0),s(this,"attribute",void 0),s(this,"transition",void 0),s(this,"currentStartIndices",void 0),s(this,"currentLength",void 0),s(this,"texture",void 0),s(this,"framebuffer",void 0),s(this,"transform",void 0),s(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new Ra(r),this.attribute=n,this.attributeInTransition=new Cu(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=function(t){return new Uo(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function(t,e){return new ls(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function(t,e,n){const r=Au(e.size);return new ad(t,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}(e,n,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new Lo(e,i),new Lo(e,i),new Lo(e,i)]}get inProgress(){return this.transition.inProgress}start(t,e){const{gl:n,buffers:r,attribute:i}=this,o={numInstances:e,attribute:i,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const s of r)Pu({buffer:s,...o});this.settings=t,this.currentStartIndices=i.startIndices,this.currentLength=Tu(i,e),this.attributeInTransition.setData({buffer:r[1],value:i.value}),this.transition.start({...t,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/i.size),sourceBuffers:{aTo:Su(0,i)}})}update(){const{buffers:t,transform:e,framebuffer:n,transition:r}=this;if(!r.update())return!1;const i=this.settings;e.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),e.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:i.stiffness,damping:i.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),Eu(t),this.attributeInTransition.setData({buffer:t[1],value:this.attribute.value});return Qo(n)[0]>0||r.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class ud{constructor(t,e){let{id:n,timeline:r}=e;s(this,"id",void 0),s(this,"isSupported",void 0),s(this,"gl",void 0),s(this,"timeline",void 0),s(this,"transitions",void 0),s(this,"needsRedraw",void 0),s(this,"numInstances",void 0),this.id=n,this.gl=t,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=ad.isSupported(t)}finalize(){for(const t in this.transitions)this._removeTransition(t)}update(t){let{attributes:e,transitions:n,numInstances:r}=t;this.numInstances=r||1;for(const i in e){const t=e[i],r=t.getTransitionSetting(n);r&&this._updateAttribute(i,t,r)}for(const i in this.transitions){const t=e[i];t&&t.getTransitionSetting(n)||this._removeTransition(i)}}hasAttribute(t){const e=this.transitions[t];return e&&e.inProgress}getAttributes(){const t={};for(const e in this.transitions){const n=this.transitions[e];n.inProgress&&(t[e]=n.attributeInTransition)}return t}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const e in this.transitions){this.transitions[e].update()&&(this.needsRedraw=!0)}const t=this.needsRedraw;return this.needsRedraw=!1,t}_removeTransition(t){this.transitions[t].cancel(),delete this.transitions[t]}_updateAttribute(t,e,n){const r=this.transitions[t];let i=!r||r.type!==n.type;if(i){if(!this.isSupported)return void W.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();r&&this._removeTransition(t);const o=cd[n.type];o?this.transitions[t]=new o({attribute:e,timeline:this.timeline,gl:this.gl}):(W.error("unsupported transition type '".concat(n.type,"'"))(),i=!1)}(i||e.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(n,this.numInstances))}}const dd="attributeManager.invalidate";class hd{constructor(t){let{id:e="attribute-manager",stats:n,timeline:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,"id",void 0),s(this,"gl",void 0),s(this,"attributes",void 0),s(this,"updateTriggers",void 0),s(this,"needsRedraw",void 0),s(this,"userData",void 0),s(this,"stats",void 0),s(this,"attributeTransitionManager",void 0),s(this,"mergeBoundsMemoized",ha(un)),this.id=e,this.gl=t,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new ud(t,{id:"".concat(e,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};const e=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,e&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(t){this._add(t)}addInstanced(t){this._add(t,{instanced:1})}remove(t){for(const e of t)void 0!==this.attributes[e]&&(this.attributes[e].delete(),delete this.attributes[e])}invalidate(t,e){const n=this._invalidateTrigger(t,e);q(dd,this,t,n)}invalidateAll(t){for(const e in this.attributes)this.attributes[e].setNeedsUpdate(e,t);q(dd,this,"all")}update(t){let{data:e,numInstances:n,startIndices:r=null,transitions:i,props:o={},buffers:s={},context:a={}}=t,l=!1;q("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const c in this.attributes){const t=this.attributes[c],i=t.settings.accessor;t.startIndices=r,t.numInstances=n,o[c]&&W.removed("props.".concat(c),"data.attributes.".concat(c))(),t.setExternalBuffer(s[c])||t.setBinaryValue("string"===typeof i?s[i]:void 0,e.startIndices)||"string"===typeof i&&!s[i]&&t.setConstantValue(o[i])||t.needsUpdate()&&(l=!0,this._updateAttribute({attribute:t,numInstances:n,data:e,props:o,context:a})),this.needsRedraw=this.needsRedraw||t.needsRedraw()}l&&q("attributeManager.updateEnd",this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}updateTransition(){const{attributeTransitionManager:t}=this,e=t.run();return this.needsRedraw=this.needsRedraw||e,e}getAttributes(){return this.attributes}getBounds(t){const e=t.map((t=>{var e;return null===(e=this.attributes[t])||void 0===e?void 0:e.getBounds()}));return this.mergeBoundsMemoized(e)}getChangedAttributes(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1};const{attributes:e,attributeTransitionManager:n}=this,r={...n.getAttributes()};for(const i in e){const o=e[i];o.needsRedraw(t)&&!n.hasAttribute(i)&&(r[i]=o)}return r}getShaderAttributes(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t||(t=this.getAttributes());const n={};for(const r in t)e[r]||Object.assign(n,t[r].getShaderAttributes());return n}_add(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const n in t){const r=t[n];this.attributes[n]=this._createAttribute(n,r,e)}this._mapUpdateTriggersToAttributes()}_createAttribute(t,e,n){const r={...e,id:t,size:(e.isIndexed?1:e.size)||1,divisor:n.instanced?1:e.divisor||0};return new Cu(this.gl,r)}_mapUpdateTriggersToAttributes(){const t={};for(const e in this.attributes){this.attributes[e].getUpdateTriggers().forEach((n=>{t[n]||(t[n]=[]),t[n].push(e)}))}this.updateTriggers=t}_invalidateTrigger(t,e){const{attributes:n,updateTriggers:r}=this,i=r[t];return i&&i.forEach((t=>{const r=n[t];r&&r.setNeedsUpdate(r.id,e)})),i}_updateAttribute(t){const{attribute:e,numInstances:n}=t;if(q("attribute.updateStart",e),e.constant)return void e.setConstantValue(e.value);e.allocate(n)&&q("attribute.allocate",e,n);e.updateBuffer(t)&&(this.needsRedraw=!0,q("attribute.updateEnd",e,n))}}const fd=1e-5;function pd(t,e,n,r,i){const o=e-t;return(n-e)*i+-o*r+o+e}function gd(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}const md={interpolation:class extends Ra{get value(){return this._value}_onUpdate(){const{time:t,settings:{fromValue:e,toValue:n,duration:r,easing:i}}=this,o=i(t/r);this._value=Re(e,n,o)}},spring:class extends Ra{get value(){return this._currValue}_onUpdate(){const{fromValue:t,toValue:e,damping:n,stiffness:r}=this.settings,{_prevValue:i=t,_currValue:o=t}=this;let s=function(t,e,n,r,i){if(Array.isArray(n)){const o=[];for(let s=0;s<n.length;s++)o[s]=pd(t[s],e[s],n[s],r,i);return o}return pd(t,e,n,r,i)}(i,o,e,n,r);const a=gd(s,e),l=gd(s,o);a<fd&&l<fd&&(s=e,this.end()),this._prevValue=o,this._currValue=s}}};class yd{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(t,e,n,r){const{transitions:i}=this;if(i.has(t)){const n=i.get(t),{value:r=n.settings.fromValue}=n;e=r,this.remove(t)}if(!(r=xu(r)))return;const o=md[r.type];if(!o)return void W.error("unsupported transition type '".concat(r.type,"'"))();const s=new o(this.timeline);s.start({...r,fromValue:e,toValue:n}),i.set(t,s)}remove(t){const{transitions:e}=this;e.has(t)&&(e.get(t).cancel(),e.delete(t))}update(){const t={};for(const[e,n]of this.transitions)n.update(),t[e]=n.value,n.inProgress||this.remove(e);return t}clear(){for(const t of this.transitions.keys())this.remove(t)}}function vd(t,e){const n=_d({newProps:t,oldProps:e,propTypes:t[y],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=function(t,e){if(null===e)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:i}=t;r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied");n&&i&&(n=i(t.data,e.data)||n);return n}(t,e);let i=!1;return r||(i=function(t,e){if(null===e)return{all:!0};if("all"in t.updateTriggers){if(Sd(t,e,"all"))return{all:!0}}const n={};let r=!1;for(const i in t.updateTriggers)if("all"!==i){Sd(t,e,i)&&(n[i]=!0,r=!0)}return!!r&&n}(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:xd(t,e),transitionsChanged:bd(t,e)}}function bd(t,e){if(!t.transitions)return!1;const n={},r=t[y];let i=!1;for(const o in t.transitions){const s=r[o],a=s&&s.type;("number"===a||"color"===a||"array"===a)&&wd(t[o],e[o],s)&&(n[o]=!0,i=!0)}return!!i&&n}function _d(t){let{newProps:e,oldProps:n,ignoreProps:r={},propTypes:i={},triggerName:o="props"}=t;if(n===e)return!1;if("object"!==typeof e||null===e)return"".concat(o," changed shallowly");if("object"!==typeof n||null===n)return"".concat(o," changed shallowly");for(const s of Object.keys(e))if(!(s in r)){if(!(s in n))return"".concat(o,".").concat(s," added");const t=wd(e[s],n[s],i[s]);if(t)return"".concat(o,".").concat(s," ").concat(t)}for(const s of Object.keys(n))if(!(s in r)){if(!(s in e))return"".concat(o,".").concat(s," dropped");if(!Object.hasOwnProperty.call(e,s)){const t=wd(e[s],n[s],i[s]);if(t)return"".concat(o,".").concat(s," ").concat(t)}}return!1}function wd(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)?"changed deeply":r||(r=t&&e&&t.equals,!r||r.call(t,e))?r||e===t?null:"changed shallowly":"changed deeply"}function xd(t,e){if(null===e)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r)return!0;if(r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function Sd(t,e,n){let r=t.updateTriggers[n];r=void 0===r||null===r?{}:r;let i=e.updateTriggers[n];i=void 0===i||null===i?{}:i;return _d({oldProps:i,newProps:r,triggerName:n})}function Ad(t){if(null===(e=t)||"object"!==typeof e)throw new Error("count(): argument not an object");var e;if("function"===typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function(t){return null!==t&&"object"===typeof t&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error("count(): argument not a container")}function Ed(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some((t=>"project64"===t.name)))){const t=n.modules.findIndex((t=>"project32"===t.name));t>=0&&n.modules.splice(t,1)}if("inject"in e)if(t.inject){const r={...t.inject};for(const t in e.inject)r[t]=(r[t]||"")+e.inject[t];n.inject=r}else n.inject=e.inject;return n}const Td=[0,0,0];function Pd(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=e.projectPosition(t);if(n&&e instanceof La){const[n,i,o=0]=t,s=e.getDistanceScales([n,i]);r[2]=o*s.unitsPerMeter[2]}return r}function Cd(t,e){let{viewport:n,modelMatrix:r,coordinateSystem:i,coordinateOrigin:o,offsetMode:s}=e,[a,l,c=0]=t;switch(r&&([a,l,c]=Pn([],[a,l,c,1],r)),i){case dr.LNGLAT:return Pd([a,l,c],n,s);case dr.LNGLAT_OFFSETS:return Pd([a+o[0],l+o[1],c+(o[2]||0)],n,s);case dr.METER_OFFSETS:return Pd(nr(o,[a,l,c]),n,s);case dr.CARTESIAN:default:return n.isGeospatial?[a+o[0],l+o[1],c+o[2]]:n.projectPosition([a,l,c])}}function Id(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=function(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:s}=t;return i===dr.DEFAULT&&(i=e.isGeospatial?dr.LNGLAT:dr.CARTESIAN),void 0===o&&(o=i),void 0===s&&(s=r),{viewport:e,coordinateSystem:i,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:o,fromCoordinateOrigin:s}}(e),{autoOffset:l=!0}=e,{geospatialOrigin:c=Td,shaderCoordinateOrigin:u=Td,offsetMode:d=!1}=l?ba(n,r,i):{},h=Cd(t,{viewport:n,modelMatrix:o,coordinateSystem:s,coordinateOrigin:a,offsetMode:d});if(d){const t=n.projectPosition(c||u);$e(h,h,t)}return h}const Md={10241:9987,10240:9729,10242:33071,10243:33071},kd={};const Od={boolean:{validate:(t,e)=>!0,equal:(t,e,n)=>Boolean(t)===Boolean(e)},number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},color:{validate:(t,e)=>e.optional&&!t||Fd(t)&&(3===t.length||4===t.length),equal:(t,e,n)=>Ta(t,e,1)},accessor:{validate(t,e){const n=Bd(t);return"function"===n||n===Bd(e.value)},equal:(t,e,n)=>"function"===typeof e||Ta(t,e,1)},array:{validate:(t,e)=>e.optional&&!t||Fd(t),equal(t,e,n){const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?Ta(t,e,i):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?Ta(t,e,i):t===e}},function:{validate:(t,e)=>e.optional&&!t||"function"===typeof t,equal:(t,e,n)=>!n.compare&&!1!==n.ignore||t===e},data:{transform:(t,e,n)=>{const{dataTransform:r}=n.props;return r&&t?r(t):t}},image:{transform:(t,e,n)=>{const r=n.context;return r&&r.gl?function(t,e,n,r){if(n instanceof Uo)return n;n.constructor&&"Object"!==n.constructor.name&&(n={data:n});let i=null;n.compressed&&(i={10241:n.data.length>1?9985:9729});const o=new Uo(e,{...n,parameters:{...Md,...i,...r}});return kd[o.id]=t,o}(n.id,r.gl,t,{...e.parameters,...n.props.textureParameters}):null},release:(t,e,n)=>{var r,i;r=n.id,(i=t)&&i instanceof Uo&&kd[i.id]===r&&(i.delete(),delete kd[i.id])}}};function Ld(t,e){switch(Bd(e)){case"object":return Rd(t,e);case"array":return Rd(t,{type:"array",value:e,compare:!1});case"boolean":return Rd(t,{type:"boolean",value:e});case"number":return Rd(t,{type:"number",value:e});case"function":return Rd(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function Rd(t,e){return"type"in e?{name:t,...Od[e.type],...e}:"value"in e?{name:t,type:Bd(e.value),...e}:{name:t,type:"object",value:e}}function Fd(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function Bd(t){return Fd(t)?"array":null===t?"null":typeof t}const Nd="_mergedDefaultProps";function zd(t,e){let n=Nd;if(e)for(const i of e){const t=i.constructor;t&&(n+=":".concat(t.extensionName||t.name))}const r=Ud(t,n);return r||(t[n]=function(t,e){const n=t.prototype;if(!n)return null;const r=Object.getPrototypeOf(t),i=zd(r),o=Ud(t,"defaultProps")||{},s=function(t){const e={},n={},r={};for(const[i,o]of Object.entries(t)){const t=null===o||void 0===o?void 0:o.deprecatedFor;if(t)r[i]=Array.isArray(t)?t:[t];else{const t=Ld(i,o);e[i]=t,n[i]=t.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}(o),a=Object.assign(Object.create(null),i,s.defaultProps),l=Object.assign(Object.create(null),null===i||void 0===i?void 0:i[y],s.propTypes),c=Object.assign(Object.create(null),null===i||void 0===i?void 0:i[v],s.deprecatedProps);for(const u of e){const t=zd(u.constructor);t&&(Object.assign(a,t),Object.assign(l,t[y]),Object.assign(c,t[v]))}(function(t,e){const n=function(t){const e=t.componentName;e||W.warn("".concat(t.name,".componentName not specified"))();return e||t.name}(e);Object.defineProperties(t,{id:{writable:!0,value:n}})})(a,t),function(t,e){const n={},r={};for(const i in e){const t=e[i],{name:o,value:s}=t;t.async&&(n[o]=s,r[o]=Dd(o))}t[b]=n,t[_]={},Object.defineProperties(t,r)}(a,l),function(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(t){const r="".concat(this.id,": ").concat(n);for(const i of e[n])jd(this,i)||(this[i]=t);W.deprecated(r,e[n].join("/"))()}})}(a,c),a[y]=l,a[v]=c,0!==e.length||jd(t,"_propTypes")||(t._propTypes=l);return a}(t,e||[]))}function Dd(t){return{enumerable:!0,set(e){"string"===typeof e||e instanceof Promise||mu(e)?this[_][t]=e:this[w][t]=e},get(){if(this[w]){if(t in this[w]){return this[w][t]||this[b][t]}if(t in this[_]){const e=this[m]&&this[m].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[b][t]}}return this[b][t]}}}function jd(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ud(t,e){return jd(t,e)&&t[e]}let Vd=0;class Wd{constructor(){s(this,"id",void 0),s(this,"props",void 0),s(this,"count",void 0);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.props=function(t,e){let n;for(let o=e.length-1;o>=0;o--){const t=e[o];"extensions"in t&&(n=t.extensions)}const r=zd(t.constructor,n),i=Object.create(r);i[m]=t,i[_]={},i[w]={};for(let o=0;o<e.length;++o){const t=e[o];for(const e in t)i[e]=t[e]}return Object.freeze(i),i}(this,e),this.id=this.props.id,this.count=Vd++}clone(t){const{props:e}=this,n={};for(const r in e[b])r in e[w]?n[r]=e[w][r]:r in e[_]&&(n[r]=e[_][r]);return new this.constructor({...e,...n,...t})}}s(Wd,"componentName","Component"),s(Wd,"defaultProps",{});const Gd=Object.freeze({});class Hd{constructor(t){s(this,"component",void 0),s(this,"onAsyncPropUpdated",void 0),s(this,"asyncProps",void 0),s(this,"oldProps",void 0),s(this,"oldAsyncProps",void 0),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const t in this.asyncProps){const e=this.asyncProps[t];e&&e.type&&e.type.release&&e.type.release(e.resolvedValue,e.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||Gd}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(t){return t in this.asyncProps}getAsyncProp(t){const e=this.asyncProps[t];return e&&e.resolvedValue}isAsyncPropLoading(t){if(t){const e=this.asyncProps[t];return Boolean(e&&e.pendingLoadCount>0&&e.pendingLoadCount!==e.resolvedLoadCount)}for(const e in this.asyncProps)if(this.isAsyncPropLoading(e))return!0;return!1}reloadAsyncProp(t,e){this._watchPromise(t,Promise.resolve(e))}setAsyncProps(t){this.component=t[m]||this.component;const e=t[w]||{},n=t[_]||t,r=t[b]||{};for(const i in e){const t=e[i];this._createAsyncPropData(i,r[i]),this._updateAsyncProp(i,t),e[i]=this.getAsyncProp(i)}for(const i in n){const t=n[i];this._createAsyncPropData(i,r[i]),this._updateAsyncProp(i,t)}}_fetch(t,e){return null}_onResolve(t,e){}_onError(t,e){}_updateAsyncProp(t,e){this._didAsyncInputValueChange(t,e)&&("string"===typeof e&&(e=this._fetch(t,e)),e instanceof Promise?this._watchPromise(t,e):mu(e)?this._resolveAsyncIterable(t,e):this._setPropValue(t,e))}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const t in this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}}_didAsyncInputValueChange(t,e){const n=this.asyncProps[t];return e!==n.resolvedValue&&e!==n.lastValue&&(n.lastValue=e,!0)}_setPropValue(t,e){this._freezeAsyncOldProps();const n=this.asyncProps[t];n&&(e=this._postProcessValue(n,e),n.resolvedValue=e,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(t,e,n){const r=this.asyncProps[t];r&&n>=r.resolvedLoadCount&&void 0!==e&&(this._freezeAsyncOldProps(),r.resolvedValue=e,r.resolvedLoadCount=n,this.onAsyncPropUpdated(t,e))}_watchPromise(t,e){const n=this.asyncProps[t];if(n){n.pendingLoadCount++;const r=n.pendingLoadCount;e.then((e=>{this.component&&(e=this._postProcessValue(n,e),this._setAsyncPropValue(t,e,r),this._onResolve(t,e))})).catch((e=>{this._onError(t,e)}))}}async _resolveAsyncIterable(t,e){if("data"!==t)return void this._setPropValue(t,e);const n=this.asyncProps[t];if(!n)return;n.pendingLoadCount++;const r=n.pendingLoadCount;let i=[],o=0;for await(const s of e){if(!this.component)return;const{dataTransform:e}=this.component.props;i=e?e(s,i):i.concat(s),Object.defineProperty(i,"__diff",{enumerable:!1,value:[{startRow:o,endRow:i.length}]}),o=i.length,this._setAsyncPropValue(t,i,r)}this._onResolve(t,i)}_postProcessValue(t,e){const n=t.type;return n&&this.component&&(n.release&&n.release(t.resolvedValue,n,this.component),n.transform)?n.transform(e,n,this.component):e}_createAsyncPropData(t,e){if(!this.asyncProps[t]){const n=this.component&&this.component.props[y];this.asyncProps[t]={type:n&&n[t],lastValue:null,resolvedValue:e,pendingLoadCount:0,resolvedLoadCount:0}}}}class qd extends Hd{constructor(t){let{attributeManager:e,layer:n}=t;super(n),s(this,"attributeManager",void 0),s(this,"needsRedraw",void 0),s(this,"needsUpdate",void 0),s(this,"subLayers",void 0),s(this,"usesPickingColorCache",void 0),s(this,"hasPickingBuffer",void 0),s(this,"changeFlags",void 0),s(this,"viewport",void 0),s(this,"uniformTransitions",void 0),s(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(t,e){const n=this.layer,r=null===n||void 0===n?void 0:n.props.fetch;return r?r(e,{propName:t,layer:n}):super._fetch(t,e)}_onResolve(t,e){const n=this.layer;if(n){const r=n.props.onDataLoad;"data"===t&&r&&r(e,{propName:t,layer:n})}}_onError(t,e){const n=this.layer;n&&n.raiseError(e,"loading ".concat(t," of ").concat(this.layer))}}const Yd=2**24-1,Xd=Object.freeze([]),Zd=ha((t=>{let{oldViewport:e,viewport:n}=t;return e.equals(n)}));let Kd=new Uint8ClampedArray(0);const $d={data:{type:"data",value:Xd,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,e)=>{let{propName:n,layer:r,loaders:i,loadOptions:o,signal:s}=e;const{resourceManager:a}=r.context;var l;(o=o||r.getLoadOptions(),i=i||r.props.loaders,s)&&(o={...o,fetch:{...null===(l=o)||void 0===l?void 0:l.fetch,signal:s}});let c=a.contains(t);return c||o||(a.add({resourceId:t,data:Te(t,i),persistent:!1}),c=!0),c?a.subscribe({resourceId:t,onChange:t=>{var e;return null===(e=r.internalState)||void 0===e?void 0:e.reloadAsyncProp(n,t)},consumerId:r.id,requestId:n}):Te(t,i,o)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:dr.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:t=>{let{layerIndex:e}=t;return[0,100*-e]}},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Qd extends Wd{constructor(){super(...arguments),s(this,"internalState",null),s(this,"lifecycle",u),s(this,"context",void 0),s(this,"state",void 0),s(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let t=this;for(;t.parent;)t=t.parent;return t}toString(){const t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}project(t){ka(this.internalState);const e=this.internalState.viewport||this.context.viewport,n=Cd(t,{viewport:e,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,i,o]=sr(n,e.pixelProjectionMatrix);return 2===t.length?[r,i]:[r,i,o]}unproject(t){ka(this.internalState);return(this.internalState.viewport||this.context.viewport).unproject(t)}projectPosition(t,e){ka(this.internalState);return Id(t,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...e})}get isComposite(){return!1}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(t){for(const e of this.getModels())e.updateModuleSettings(t)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===dr.DEFAULT||t===dr.LNGLAT||t===dr.CARTESIAN}onHover(t,e){return this.props.onHover&&this.props.onHover(t,e)||!1}onClick(t,e){return this.props.onClick&&this.props.onClick(t,e)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[0]=t+1&255,e[1]=t+1>>8&255,e[2]=t+1>>8>>8&255,e}decodePickingColor(t){ka(t instanceof Uint8Array);const[e,n,r]=t;return e+256*n+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:Ad(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var t;return null===(t=this.getAttributeManager())||void 0===t?void 0:t.getBounds(["positions","instancePositions"])}getShaders(t){for(const e of this.props.extensions)t=Ed(t,e.getShaders.call(this,e));return t}shouldUpdateState(t){return t.changeFlags.propsOrDataChanged}updateState(t){const e=this.getAttributeManager(),{dataChanged:n}=t.changeFlags;if(n&&e)if(Array.isArray(n))for(const r of n)e.invalidateAll(r);else e.invalidateAll();if(e){const{props:n}=t,r=this.internalState.hasPickingBuffer,i=Number.isInteger(n.highlightedObjectIndex)||n.pickable||n.extensions.some((t=>t.getNeedsPickingBuffer.call(this,t)));if(r!==i){this.internalState.hasPickingBuffer=i;const{pickingColors:t,instancePickingColors:n}=e.attributes,r=t||n;r&&(i&&r.constant&&(r.constant=!1,e.invalidate(r.id)),r.value||i||(r.constant=!0,r.value=[0,0,0]))}}}finalizeState(t){for(const n of this.getModels())n.delete();const e=this.getAttributeManager();e&&e.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(t){for(const e of this.getModels())e.draw(t)}getPickingInfo(t){let{info:e,mode:n,sourceLayer:r}=t;const{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(t,e){var n,r,i,o;(e&&(t=new Error("".concat(e,": ").concat(t.message),{cause:t})),null!==(n=(r=this.props).onError)&&void 0!==n&&n.call(r,t))||(null===(i=this.context)||void 0===i||null===(o=i.onError)||void 0===o||o.call(i,t,this))}getNeedsRedraw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(t)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var t;return(null===(t=this.internalState)||void 0===t?void 0:t.uniformTransitions.active)||!1}activateViewport(t){if(!this.internalState)return;const e=this.internalState.viewport;this.internalState.viewport=t,e&&Zd({oldViewport:e,viewport:t})||(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";const e=this.getAttributeManager();e&&("all"===t?e.invalidateAll():e.invalidate(t))}updateAttributes(t){for(const e of this.getModels())this._setModelAttributes(e,t)}_updateAttributes(){const t=this.getAttributeManager();if(!t)return;const e=this.props,n=this.getNumInstances(),r=this.getStartIndices();t.update({data:e.data,numInstances:n,startIndices:r,props:e,transitions:e.transitions,buffers:e.data.attributes,context:this});const i=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const e=t.update(),n=Object.create(this.props);for(const t in e)Object.defineProperty(n,t,{value:e[t]});return n}return this.props}calculateInstancePickingColors(t,e){let{numInstances:n}=e;if(t.constant)return;const r=Math.floor(Kd.length/3);if(this.internalState.usesPickingColorCache=!0,r<n){n>Yd&&W.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Kd=Ie.allocate(Kd,n,{size:3,copy:!0,maxCount:Math.max(n,Yd)});const t=Math.floor(Kd.length/3),e=[];for(let n=r;n<t;n++)this.encodePickingColor(n,e),Kd[3*n+0]=e[0],Kd[3*n+1]=e[1],Kd[3*n+2]=e[2]}t.value=Kd.subarray(0,3*n)}_setModelAttributes(t,e){const n=this.getAttributeManager(),r=t.userData.excludeAttributes||{},i=n.getShaderAttributes(e,r);t.setAttributes(i)}disablePickingIndex(t){const e=this.props.data;if(!("attributes"in e))return void this._disablePickingIndex(t);const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r,o=i&&e.attributes&&e.attributes[i.id];if(o&&o.value){const n=o.value,r=this.encodePickingColor(t);for(let t=0;t<e.length;t++){const e=i.getVertexOffset(t);n[e]===r[0]&&n[e+1]===r[1]&&n[e+2]===r[2]&&this._disablePickingIndex(t)}}else this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;if(!r)return;const i=r.getVertexOffset(t),o=r.getVertexOffset(t+1);r.buffer.subData({data:new Uint8Array(o-i),offset:i})}restorePickingColors(){const{pickingColors:t,instancePickingColors:e}=this.getAttributeManager().attributes,n=t||e;n&&(this.internalState.usesPickingColorCache&&n.value.buffer!==Kd.buffer&&(n.value=Kd.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){ka(!this.internalState),ka(Number.isFinite(this.props.coordinateSystem)),q("layer.initialize",this);const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new qd({attributeManager:t,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(W.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),t)}),this.internalState.uniformTransitions=new yd(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const e of this.props.extensions)e.initializeState.call(this,this.context,e);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(t){q("layer.matched",this,this===t);const{state:e,internalState:n}=t;this!==t&&(this.internalState=n,this.state=e,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const t=this.needsUpdate();if(q("layer.update",this,t),!t)return;const e=this.props,n=this.context,r=this.internalState,i=n.viewport,o=this._updateUniformTransition();r.propsInTransition=o,n.viewport=r.viewport||i,this.props=o;try{const t=this._getUpdateParams(),e=this.getModels();if(n.gl)this.updateState(t);else try{this.updateState(t)}catch(s){}for(const n of this.props.extensions)n.updateState.call(this,t,n);const r=this.getModels()[0]!==e[0];this._postUpdate(t,r)}finally{n.viewport=i,this.props=e,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){q("layer.finalize",this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,this.context,t)}_drawLayer(t){let{moduleParameters:e=null,uniforms:n={},parameters:r={}}=t;this._updateAttributeTransition();const i=this.props,o=this.context;this.props=this.internalState.propsInTransition||i;const s=this.props.opacity;n.opacity=Math.pow(s,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:t}=this.props,i=t&&t(n)||[0,0];$i(o.gl,{polygonOffset:i}),Qi(o.gl,r,(()=>{const t={moduleParameters:e,uniforms:n,parameters:r,context:o};for(const e of this.props.extensions)e.draw.call(this,t,e);this.draw(t)}))}finally{this.props=i}}getChangeFlags(){var t;return null===(t=this.internalState)||void 0===t?void 0:t.changeFlags}setChangeFlags(t){if(!this.internalState)return;const{changeFlags:e}=this.internalState;for(const r in t)if(t[r]){let n=!1;if("dataChanged"===r){const i=t[r],o=e[r];i&&Array.isArray(o)&&(e.dataChanged=Array.isArray(i)?o.concat(i):i,n=!0)}e[r]||(e[r]=t[r],n=!0),n&&q("layer.changeFlag",this,r,t)}const n=Boolean(e.dataChanged||e.updateTriggersChanged||e.propsChanged||e.extensionsChanged);e.propsOrDataChanged=n,e.somethingChanged=n||e.viewportChanged||e.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(t,e){const n=vd(t,e);if(n.updateTriggersChanged)for(const i in n.updateTriggersChanged)n.updateTriggersChanged[i]&&this.invalidateAttribute(i);if(n.transitionsChanged)for(const i in n.transitionsChanged){var r;this.internalState.uniformTransitions.add(i,e[i],t[i],null===(r=t.transitions)||void 0===r?void 0:r[i])}return this.setChangeFlags(n)}validateProps(){!function(t){const e=t[y];for(const n in e){const r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}(this.props)}updateAutoHighlight(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const e={pickingSelectedColor:t.picked?t.color:null},{highlightColor:n}=this.props;t.picked&&"function"===typeof n&&(e.pickingHighlightColor=n(t)),this.setModuleParameters(e),this.setNeedsRedraw()}_getAttributeManager(){const t=this.context;return new hd(t.gl,{id:this.props.id,stats:t.stats,timeline:t.timeline})}_postUpdate(t,e){const{props:n,oldProps:r}=t;this.setNeedsRedraw(),this._updateAttributes();const{model:i}=this.state;null===i||void 0===i||i.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:s,highlightColor:a}=n;if(e||r.autoHighlight!==o||r.highlightedObjectIndex!==s||r.highlightColor!==a){const t={};o||(t.pickingSelectedColor=null),Array.isArray(a)&&(t.pickingHighlightColor=a),(e||s!==r.highlightedObjectIndex)&&(t.pickingSelectedColor=Number.isFinite(s)&&s>=0?this.encodePickingColor(s):null),this.setModuleParameters(t)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let e=!1;e=e||this.internalState.needsRedraw&&this.id;const n=this.getAttributeManager(),r=!!n&&n.getNeedsRedraw(t);if(e=e||r,e)for(const i of this.props.extensions)i.onNeedsRedraw.call(this,i);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags,e}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}s(Qd,"defaultProps",$d),s(Qd,"layerName","Layer");const Jd={position:"absolute",zIndex:-1};function th(e,n){if("function"===typeof e)return e(n);if(Array.isArray(e))return e.map((t=>th(t,n)));if(eh(e)){if(function(t){var e;return null===(e=t.props)||void 0===e?void 0:e.mapStyle}(e))return n.style=Jd,(0,t.cloneElement)(e,n);if(function(t){const e=t.type;return e&&e.deckGLViewProps}(e))return(0,t.cloneElement)(e,n)}return e}function eh(t){return t&&"object"===typeof t&&"type"in t||!1}function nh(e){if("function"===typeof e)return(0,t.createElement)(Oa,{},e);if(Array.isArray(e))return e.map(nh);if(eh(e)){if(e.type===t.Fragment)return nh(e.props.children);if(lu(e.type,Oa))return e}return e}const rh={mixBlendMode:null};function ih(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}const oh=(0,t.forwardRef)(((e,n)=>{const[r,i]=(0,t.useState)(0),o=(0,t.useRef)({control:null,version:r,forceUpdate:()=>i((t=>t+1))}).current,s=(0,t.useRef)(null),a=(0,t.useRef)(null),l=(0,t.useMemo)((()=>function(e){let{children:n,layers:r=[],views:i=null}=e;const o=[],s=[],a={};return t.Children.forEach(nh(n),(t=>{if(eh(t)){const e=t.type;if(lu(e,Qd)){const n=function(t,e){const n={},r=t.defaultProps||{};for(const i in e)r[i]!==e[i]&&(n[i]=e[i]);return new t(n)}(e,t.props);s.push(n)}else o.push(t);if(lu(e,Oa)&&e!==Oa&&t.props.id){const n=new e(t.props);a[n.id]=n}}else t&&o.push(t)})),Object.keys(a).length>0&&(Array.isArray(i)?i.forEach((t=>{a[t.id]=t})):i&&(a[i.id]=i),i=Object.values(a)),r=s.length>0?[...s,...r]:r,{layers:r,children:o,views:i}}(e)),[e.layers,e.views,e.children]);let c=!0;const u=t=>{var n;return c&&e.viewState?(o.viewStateUpdateRequested=t,null):(o.viewStateUpdateRequested=null,null===(n=e.onViewStateChange)||void 0===n?void 0:n.call(e,t))},d=t=>{var n;c?o.interactionStateUpdateRequested=t:(o.interactionStateUpdateRequested=null,null===(n=e.onInteractionStateChange)||void 0===n||n.call(e,t))},h=(0,t.useMemo)((()=>{const t={...e,style:null,width:"100%",height:"100%",parent:s.current,canvas:a.current,layers:l.layers,views:l.views,onViewStateChange:u,onInteractionStateChange:d};return delete t._customRender,o.deck&&o.deck.setProps(t),t}),[e]);(0,t.useEffect)((()=>{const t=e.Deck||su;return o.deck=function(t,e,n){const r=new e({...n,_customRender:e=>{t.redrawReason=e;const n=r.getViewports();t.lastRenderedViewports!==n?t.forceUpdate():ih(t)}});return r}(o,t,{...h,parent:s.current,canvas:a.current}),()=>{var t;return null===(t=o.deck)||void 0===t?void 0:t.finalize()}}),[]),au((()=>{ih(o);const{viewStateUpdateRequested:t,interactionStateUpdateRequested:e}=o;t&&u(t),e&&d(e)})),(0,t.useImperativeHandle)(n,(()=>function(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}(o)),[]);const f=o.deck&&o.deck.isInitialized?o.deck.getViewports():void 0,{ContextProvider:p,width:g,height:m,id:y,style:v}=e,{containerStyle:b,canvasStyle:_}=(0,t.useMemo)((()=>function(t){let{width:e,height:n,style:r}=t;const i={position:"absolute",zIndex:0,left:0,top:0,width:e,height:n},o={left:0,top:0};if(r)for(const s in r)s in rh?o[s]=r[s]:i[s]=r[s];return{containerStyle:i,canvasStyle:o}}({width:g,height:m,style:v})),[g,m,v]);if(!o.viewStateUpdateRequested&&o.lastRenderedViewports===f||o.version!==r){o.lastRenderedViewports=f,o.version=r;const e=function(e){let{children:n,deck:r,ContextProvider:i}=e;const{viewManager:o}=r||{};if(!o||!o.views.length)return[];const s={},a=o.views[0].id;for(const t of n){let e=a,n=t;eh(t)&&lu(t.type,Oa)&&(e=t.props.id||a,n=t.props.children);const r=o.getViewport(e),i=o.getViewState(e);if(r){i.padding=r.padding;const{x:t,y:o,width:a,height:l}=r;n=th(n,{x:t,y:o,width:a,height:l,viewport:r,viewState:i}),s[e]||(s[e]={viewport:r,children:[]}),s[e].children.push(n)}}return Object.keys(s).map((e=>{const{viewport:n,children:o}=s[e],{x:a,y:l,width:c,height:u}=n,d={position:"absolute",left:a,top:l,width:c,height:u},h="view-".concat(e),f=(0,t.createElement)("div",{key:h,id:h,style:d},...o);if(i){const o={viewport:n,container:r.canvas.offsetParent,eventManager:r.eventManager,onViewStateChange:t=>{t.viewId=e,r._onViewStateChange(t)}};return(0,t.createElement)(i,{key:h,value:o},f)}return f}))}({children:l.children,deck:o.deck,ContextProvider:p}),n=(0,t.createElement)("canvas",{key:"canvas",id:y||"deckgl-overlay",ref:a,style:_});o.control=(0,t.createElement)("div",{id:"".concat(y||"deckgl","-wrapper"),ref:s,style:b},[n,e])}return c=!1,o.control}));oh.defaultProps=su.defaultProps;const sh=oh,ah={name:"project32",dependencies:[wa],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},lh={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1};const ch={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},...{name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lh;const e={};if(void 0!==t.pickingSelectedColor)if(t.pickingSelectedColor){const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}else e.picking_uSelectedColorValid=0;if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,(t=>t/255));Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return void 0!==t.pickingActive&&(e.picking_uActive=Boolean(t.pickingActive),e.picking_uAttribute=Boolean(t.pickingAttribute)),e}}},uh={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class dh{static get DRAW_MODE(){return uh}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:e=mo("geometry"),drawMode:n=uh.TRIANGLES,attributes:r={},indices:i=null,vertexCount:o=null}=t;this.id=e,this.drawMode=0|n,this.attributes={},this.userData={},this._setAttributes(r,i),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return"Geometry ".concat(this.id," attribute ").concat(t)}_setAttributes(t,e){e&&(this.indices=ArrayBuffer.isView(e)?{value:e,size:1}:e);for(const n in t){let e=t[n];e=ArrayBuffer.isView(e)?{value:e}:e,ho(ArrayBuffer.isView(e.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),"POSITION"!==n&&"positions"!==n||e.size||(e.size=3),"indices"===n?(ho(!this.indices),this.indices=e):this.attributes[n]=e}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(t,e){if(e)return e.value.length;let n=1/0;for(const r in t){const e=t[r],{value:i,size:o,constant:s}=e;!s&&i&&o>=1&&(n=Math.min(n,i.length/o))}return ho(Number.isFinite(n)),n}}const hh=new Uint16Array([0,2,1,0,3,2]),fh=new Float32Array([0,1,0,0,1,0,1,1]);function ph(t,e){if(!e)return function(t){const e=new Float64Array(12);for(let n=0;n<t.length;n++)e[3*n+0]=t[n][0],e[3*n+1]=t[n][1],e[3*n+2]=t[n][2]||0;return{vertexCount:6,positions:e,indices:hh,texCoords:fh}}(t);const n=Math.max(Math.abs(t[0][0]-t[3][0]),Math.abs(t[1][0]-t[2][0])),r=Math.max(Math.abs(t[1][1]-t[0][1]),Math.abs(t[2][1]-t[3][1])),i=Math.ceil(n/e)+1,o=Math.ceil(r/e)+1,s=(i-1)*(o-1)*6,a=new Uint32Array(s),l=new Float32Array(i*o*2),c=new Float64Array(i*o*3);let u=0,d=0;for(let h=0;h<i;h++){const e=h/(i-1);for(let n=0;n<o;n++){const r=n/(o-1),i=gh(t,e,r);c[3*u+0]=i[0],c[3*u+1]=i[1],c[3*u+2]=i[2]||0,l[2*u+0]=e,l[2*u+1]=1-r,h>0&&n>0&&(a[d++]=u-o,a[d++]=u-o-1,a[d++]=u-1,a[d++]=u-o,a[d++]=u-1,a[d++]=u),u++}}return{vertexCount:s,positions:c,indices:a,texCoords:l}}function gh(t,e,n){return Re(Re(t[0],t[1],n),Re(t[3],t[2],n),e)}const mh="\n#define SHADER_NAME bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D bitmapTexture;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float desaturate;\nuniform vec4 transparentColor;\nuniform vec3 tintColor;\nuniform float opacity;\n\nuniform float coordinateConversion;\nuniform vec4 bounds;\n\n/* projection utils */\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / PI / 2.0;\n\n// from degrees to Web Mercator\nvec2 lnglat_to_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\n// from Web Mercator to degrees\nvec2 mercator_to_lnglat(vec2 xy) {\n  xy /= WORLD_SCALE;\n  return degrees(vec2(\n    xy.x - PI,\n    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5\n  ));\n}\n/* End projection utils */\n\n// apply desaturation\nvec3 color_desaturate(vec3 color) {\n  float luminance = (color.r + color.g + color.b) * 0.333333333;\n  return mix(color, vec3(luminance), desaturate);\n}\n\n// apply tint\nvec3 color_tint(vec3 color) {\n  return color * tintColor;\n}\n\n// blend with background color\nvec4 apply_opacity(vec3 color, float alpha) {\n  if (transparentColor.a == 0.0) {\n    return vec4(color, alpha);\n  }\n  float blendedAlpha = alpha + transparentColor.a * (1.0 - alpha);\n  float highLightRatio = alpha / blendedAlpha;\n  vec3 blendedRGB = mix(transparentColor.rgb, color, highLightRatio);\n  return vec4(blendedRGB, blendedAlpha);\n}\n\nvec2 getUV(vec2 pos) {\n  return vec2(\n    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),\n    (pos.y - bounds[3]) / (bounds[1] - bounds[3])\n  );\n}\n\n".concat("\nvec3 packUVsIntoRGB(vec2 uv) {\n  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction\n  vec2 uv8bit = floor(uv * 256.);\n\n  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits\n  // Scale and clamp to 0-1 range\n  vec2 uvFraction = fract(uv * 256.);\n  vec2 uvFraction4bit = floor(uvFraction * 16.);\n\n  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates\n  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;\n\n  return vec3(uv8bit, fractions) / 255.;\n}\n","\n\nvoid main(void) {\n  vec2 uv = vTexCoord;\n  if (coordinateConversion < -0.5) {\n    vec2 lnglat = mercator_to_lnglat(vTexPos);\n    uv = getUV(lnglat);\n  } else if (coordinateConversion > 0.5) {\n    vec2 commonPos = lnglat_to_mercator(vTexPos);\n    uv = getUV(commonPos);\n  }\n  vec4 bitmapColor = texture2D(bitmapTexture, uv);\n\n  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);\n\n  geometry.uv = uv;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n\n  if (picking_uActive && !picking_uAttribute) {\n    // Since instance information is not used, we can use picking color for pixel index\n    gl_FragColor.rgb = packUVsIntoRGB(uv);\n  }\n}\n"),yh={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:dr.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]},textureParameters:{type:"object",ignore:!0}};class vh extends Qd{constructor(){super(...arguments),s(this,"state",void 0)}getShaders(){return super.getShaders({vs:"\n#define SHADER_NAME bitmap-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec3 positions64Low;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexPos;\n\nuniform float coordinateConversion;\n\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = pickingColor;\n\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTexCoord = texCoords;\n\n  if (coordinateConversion < -0.5) {\n    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;\n  } else if (coordinateConversion > 0.5) {\n    vTexPos = geometry.worldPosition.xy;\n  }\n\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n",fs:mh,modules:[ah,ch]})}initializeState(){const t=this.getAttributeManager();t.remove(["instancePickingColors"]);const e=!0;t.add({indices:{size:1,isIndexed:!0,update:t=>t.value=this.state.mesh.indices,noAlloc:e},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:t=>t.value=this.state.mesh.positions,noAlloc:e},texCoords:{size:2,update:t=>t.value=this.state.mesh.texCoords,noAlloc:e}})}updateState(t){let{props:e,oldProps:n,changeFlags:r}=t;const i=this.getAttributeManager();if(r.extensionsChanged){var o;const{gl:t}=this.context;null===(o=this.state.model)||void 0===o||o.delete(),this.state.model=this._getModel(t),i.invalidateAll()}if(e.bounds!==n.bounds){const t=this.state.mesh,e=this._createMesh();this.state.model.setVertexCount(e.vertexCount);for(const n in e)t&&t[n]!==e[n]&&i.invalidate(n);this.setState({mesh:e,...this._getCoordinateUniforms()})}else e._imageCoordinateSystem!==n._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(t){const{image:e}=this.props,n=t.info;if(!n.color||!e)return n.bitmap=null,n;const{width:r,height:i}=e;n.index=0;const o=function(t){const[e,n,r]=t;return[(e+(15&r)/16)/256,(n+(240&r)/256)/256]}(n.color),s=[Math.floor(o[0]*r),Math.floor(o[1]*i)];return n.bitmap={size:{width:r,height:i},uv:o,pixel:s},n}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(t){super._updateAutoHighlight({...t,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:t}=this.props;let e=t;return bh(t)&&(e=[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]]]),ph(e,this.context.viewport.resolution)}_getModel(t){return t?new sd(t,{...this.getShaders(),id:this.props.id,geometry:new dh({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(t){const{uniforms:e,moduleParameters:n}=t,{model:r,coordinateConversion:i,bounds:o,disablePicking:s}=this.state,{image:a,desaturate:l,transparentColor:c,tintColor:u}=this.props;n.pickingActive&&s||a&&r&&r.setUniforms(e).setUniforms({bitmapTexture:a,desaturate:l,transparentColor:c.map((t=>t/255)),tintColor:u.slice(0,3).map((t=>t/255)),coordinateConversion:i,bounds:o}).draw()}_getCoordinateUniforms(){const{LNGLAT:t,CARTESIAN:e,DEFAULT:n}=dr;let{_imageCoordinateSystem:r}=this.props;if(r!==n){const{bounds:n}=this.props;if(!bh(n))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const i=this.context.viewport.resolution?t:e;if(r=r===t?t:e,r===t&&i===e)return{coordinateConversion:-1,bounds:n};if(r===e&&i===t){const t=$n([n[0],n[1]]),e=$n([n[2],n[3]]);return{coordinateConversion:1,bounds:[t[0],t[1],e[0],e[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}function bh(t){return Number.isFinite(t[0])}s(vh,"layerName","BitmapLayer"),s(vh,"defaultProps",yh);class _h extends Qd{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every((t=>t.isLoaded))}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(t){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo(t){let{info:e}=t;const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id?(e.object=n.__source.object,e.index=n.__source.index,e):e}filterSubLayer(t){return!0}shouldRenderSubLayer(t,e){return e&&e.length}getSubLayerClass(t,e){const{_subLayerProps:n}=this.props;return n&&n[t]&&n[t].type||e}getSubLayerRow(t,e,n){return t.__source={parent:this,object:e,index:n},t}getSubLayerAccessor(t){if("function"===typeof t){const e={index:-1,data:this.props.data,target:[]};return(n,r)=>n&&n.__source?(e.index=n.__source.index,t(n.__source.object,e)):t(n,r)}return t}getSubLayerProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var e;const{opacity:n,pickable:r,visible:i,parameters:o,getPolygonOffset:s,highlightedObjectIndex:a,autoHighlight:l,highlightColor:c,coordinateSystem:u,coordinateOrigin:d,wrapLongitude:h,positionFormat:f,modelMatrix:p,extensions:g,fetch:m,operation:v,_subLayerProps:b}=this.props,_={id:"",updateTriggers:{},opacity:n,pickable:r,visible:i,parameters:o,getPolygonOffset:s,highlightedObjectIndex:a,autoHighlight:l,highlightColor:c,coordinateSystem:u,coordinateOrigin:d,wrapLongitude:h,positionFormat:f,modelMatrix:p,extensions:g,fetch:m,operation:v},w=b&&t.id&&b[t.id],x=w&&w.updateTriggers,S=t.id||"sublayer";if(w){const e=this.props[y],n=t.type?t.type._propTypes:{};for(const t in w){const r=n[t]||e[t];r&&"accessor"===r.type&&(w[t]=this.getSubLayerAccessor(w[t]))}}Object.assign(_,t,w),_.id="".concat(this.props.id,"-").concat(S),_.updateTriggers={all:null===(e=this.props.updateTriggers)||void 0===e?void 0:e.all,...t.updateTriggers,...x};for(const y of g){const t=y.getSubLayerProps.call(this,y);t&&Object.assign(_,t,{updateTriggers:Object.assign(_.updateTriggers,t.updateTriggers)})}return _}_updateAutoHighlight(t){for(const e of this.getSubLayers())e.updateAutoHighlight(t)}_getAttributeManager(){return null}_postUpdate(t,e){let n=this.internalState.subLayers;const r=!n||this.needsUpdate();if(r){n=Y(this.renderLayers(),Boolean),this.internalState.subLayers=n}q("compositeLayer.renderLayers",this,r,n);for(const i of n)i.parent=this}}function wh(t){let{data:e,getIndex:n,dataRange:r,replace:i}=t;const{startRow:o=0,endRow:s=1/0}=r,a=e.length;let l=a,c=a;for(let h=0;h<a;h++){const t=n(e[h]);if(l>h&&t>=o&&(l=h),t>=s){c=h;break}}let u=l;const d=c-l!==i.length?e.slice(c):void 0;for(let h=0;h<i.length;h++)e[u++]=i[h];if(d){for(let t=0;t<d.length;t++)e[u++]=d[t];e.length=u}return{startRow:l,endRow:l+i.length}}s(_h,"layerName","CompositeLayer");const xh=()=>{},Sh={10241:9987,10240:9729,10242:33071,10243:33071};function Ah(t,e,n,r){const i=Math.min(n/e.width,r/e.height),o=Math.floor(e.width*i),s=Math.floor(e.height*i);return 1===i?{data:e,width:o,height:s}:(t.canvas.height=s,t.canvas.width=o,t.clearRect(0,0,o,s),t.drawImage(e,0,0,e.width,e.height,0,0,o,s),{data:t.canvas,width:o,height:s})}function Eh(t){return t&&(t.id||t.url)}function Th(t,e,n,r){const i=t.width,o=t.height,s=new Uo(t.gl,{width:e,height:n,parameters:r});return function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:r=0,sourceY:i=0,targetMipmaplevel:o=0,targetInternalFormat:s=6408}=n;let{targetX:a,targetY:l,targetZ:c,width:u,height:d}=n;const{framebuffer:h,deleteFramebuffer:f}=ts(t);ho(h);const{gl:p,handle:g}=h,m="undefined"!==typeof a||"undefined"!==typeof l||"undefined"!==typeof c;a=a||0,l=l||0,c=c||0;const y=p.bindFramebuffer(36160,g);ho(e);let v=null;if(e instanceof Do&&(v=e,u=Number.isFinite(u)?u:v.width,d=Number.isFinite(d)?d:v.height,v.bind(0),e=v.target),m)switch(e){case 3553:case 34067:p.copyTexSubImage2D(e,o,a,l,r,i,u,d);break;case 35866:case 32879:bi(p).copyTexSubImage3D(e,o,a,l,c,r,i,u,d)}else p.copyTexImage2D(e,o,s,r,i,u,d,0);v&&v.unbind(),p.bindFramebuffer(36160,y||null),f&&h.delete()}(t,s,{targetY:0,width:i,height:o}),t.delete(),s}function Ph(t,e,n){for(let r=0;r<e.length;r++){const{icon:i,xOffset:o}=e[r];t[Eh(i)]={...i,x:o,y:n}}}class Ch{constructor(t,e){let{onUpdate:n=xh,onError:r=xh}=e;s(this,"gl",void 0),s(this,"onUpdate",void 0),s(this,"onError",void 0),s(this,"_loadOptions",null),s(this,"_texture",null),s(this,"_externalTexture",null),s(this,"_mapping",{}),s(this,"_textureParameters",null),s(this,"_pendingCount",0),s(this,"_autoPacking",!1),s(this,"_xOffset",0),s(this,"_yOffset",0),s(this,"_rowHeight",0),s(this,"_buffer",4),s(this,"_canvasWidth",1024),s(this,"_canvasHeight",0),s(this,"_canvas",null),this.gl=t,this.onUpdate=n,this.onError=r}finalize(){var t;null===(t=this._texture)||void 0===t||t.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(t){const e=this._autoPacking?Eh(t):t;return this._mapping[e]||{}}setProps(t){let{loadOptions:e,autoPacking:n,iconAtlas:r,iconMapping:i,textureParameters:o}=t;var s;(e&&(this._loadOptions=e),void 0!==n&&(this._autoPacking=n),i&&(this._mapping=i),r)&&(null===(s=this._texture)||void 0===s||s.delete(),this._texture=null,this._externalTexture=r);o&&(this._textureParameters=o)}get isLoaded(){return 0===this._pendingCount}packIcons(t,e){if(!this._autoPacking||"undefined"===typeof document)return;const n=Object.values(function(t,e,n){if(!t||!e)return null;n=n||{};const r={},{iterable:i,objectInfo:o}=gu(t);for(const s of i){o.index++;const t=e(s,o),i=Eh(t);if(!t)throw new Error("Icon is missing.");if(!t.url)throw new Error("Icon url is missing.");r[i]||n[i]&&t.url===n[i].url||(r[i]={...t,source:s,sourceIndex:o.index})}return r}(t,e,this._mapping)||{});if(n.length>0){const{mapping:t,xOffset:e,yOffset:r,rowHeight:i,canvasHeight:o}=function(t){let{icons:e,buffer:n,mapping:r={},xOffset:i=0,yOffset:o=0,rowHeight:s=0,canvasWidth:a}=t,l=[];for(let u=0;u<e.length;u++){const t=e[u];if(!r[Eh(t)]){const{height:e,width:c}=t;i+c+n>a&&(Ph(r,l,o),i=0,o=s+o+n,s=0,l=[]),l.push({icon:t,xOffset:i}),i=i+c+n,s=Math.max(s,e)}}return l.length>0&&Ph(r,l,o),{mapping:r,rowHeight:s,xOffset:i,yOffset:o,canvasWidth:a,canvasHeight:(c=s+o+n,Math.pow(2,Math.ceil(Math.log2(c))))};var c}({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=i,this._mapping=t,this._xOffset=e,this._yOffset=r,this._canvasHeight=o,this._texture||(this._texture=new Uo(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||Sh})),this._texture.height!==this._canvasHeight&&(this._texture=Th(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||Sh)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n)}}_loadIcons(t){const e=this._canvas.getContext("2d",{willReadFrequently:!0});for(const n of t)this._pendingCount++,Te(n.url,this._loadOptions).then((t=>{const r=Eh(n),i=this._mapping[r],{x:o,y:s,width:a,height:l}=i,{data:c,width:u,height:d}=Ah(e,t,a,l);this._texture.setSubImageData({data:c,x:o+(a-u)/2,y:s+(l-d)/2,width:u,height:d}),i.width=u,i.height=d,this._texture.generateMipmap(),this.onUpdate()})).catch((t=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:t})})).finally((()=>{this._pendingCount--}))}}const Ih=[0,0,0,255],Mh={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:Ih},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0}};class kh extends Qd{constructor(){super(...arguments),s(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n",fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[ah,ch]})}initializeState(){this.state={iconManager:new Ch(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})};this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:Ih},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(t){super.updateState(t);const{props:e,oldProps:n,changeFlags:r}=t,i=this.getAttributeManager(),{iconAtlas:o,iconMapping:s,data:a,getIcon:l,textureParameters:c}=e,{iconManager:u}=this.state,d=o||this.internalState.isAsyncPropLoading("iconAtlas");if(u.setProps({loadOptions:e.loadOptions,autoPacking:!d,iconAtlas:o,iconMapping:d?s:null,textureParameters:c}),d?n.iconMapping!==e.iconMapping&&i.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&u.packIcons(a,l),r.extensionsChanged){var h;const{gl:t}=this.context;null===(h=this.state.model)||void 0===h||h.delete(),this.state.model=this._getModel(t),i.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(t){super.finalizeState(t),this.state.iconManager.finalize()}draw(t){let{uniforms:e}=t;const{sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,sizeUnits:o,billboard:s,alphaCutoff:a}=this.props,{iconManager:l}=this.state,c=l.getTexture();c&&this.state.model.setUniforms(e).setUniforms({iconsTexture:c,iconsTextureDim:[c.width,c.height],sizeUnits:fr[o],sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,billboard:s,alphaCutoff:a}).draw()}_getModel(t){return new sd(t,{...this.getShaders(),id:this.props.id,geometry:new dh({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(t){var e;const n=null===(e=this.getCurrentLayer())||void 0===e?void 0:e.props.onIconError;n?n(t):W.error(t.error.message)()}getInstanceOffset(t){const{width:e,height:n,anchorX:r=e/2,anchorY:i=n/2}=this.state.iconManager.getIconMapping(t);return[e/2-r,n/2-i]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){const{x:e,y:n,width:r,height:i}=this.state.iconManager.getIconMapping(t);return[e,n,r,i]}}s(kh,"defaultProps",Mh),s(kh,"layerName","IconLayer");const Oh=[0,0,0,255],Lh={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:Oh},getLineColor:{type:"accessor",value:Oh},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class Rh extends Qd{getShaders(){return super.getShaders({vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\nuniform bool antialiasing;\nuniform bool billboard;\nuniform int radiusUnits;\nuniform int lineWidthUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;\n  unitPosition = edgePadding * positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  if (billboard) {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = edgePadding * positions * outerRadiusPixels;\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\nuniform float stroked;\nuniform bool antialiasing;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\n  float inCircle = antialiasing ? \n    smoothedge(distToCenter, outerRadiusPixels) : \n    step(distToCenter, outerRadiusPixels);\n\n  if (inCircle == 0.0) {\n    discard;\n  }\n\n  if (stroked > 0.5) {\n    float isLine = antialiasing ? \n      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :\n      step(innerUnitRadius * outerRadiusPixels, distToCenter);\n\n    if (filled) {\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        discard;\n      }\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n    }\n  } else if (!filled) {\n    discard;\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  gl_FragColor.a *= inCircle;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[ah,ch]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var e;const{gl:t}=this.context;null===(e=this.state.model)||void 0===e||e.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}}draw(t){let{uniforms:e}=t;const{radiusUnits:n,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o,stroked:s,filled:a,billboard:l,antialiasing:c,lineWidthUnits:u,lineWidthScale:d,lineWidthMinPixels:h,lineWidthMaxPixels:f}=this.props;this.state.model.setUniforms(e).setUniforms({stroked:s?1:0,filled:a,billboard:l,antialiasing:c,radiusUnits:fr[n],radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o,lineWidthUnits:fr[u],lineWidthScale:d,lineWidthMinPixels:h,lineWidthMaxPixels:f}).draw()}_getModel(t){return new sd(t,{...this.getShaders(),id:this.props.id,geometry:new dh({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}}}),isInstanced:!0})}}s(Rh,"defaultProps",Lh),s(Rh,"layerName","ScatterplotLayer");const Fh=.75,Bh=[];class Nh extends kh{constructor(){super(...arguments),s(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float sdfBuffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState();this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(t,e)=>{let{index:n,target:r}=e;return this.encodePickingColor(n,r)}}})}updateState(t){super.updateState(t);const{props:e,oldProps:n}=t;let{outlineColor:r}=e;r!==n.outlineColor&&(r=r.map((t=>t/255)),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!e.sdf&&e.outlineWidth&&W.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(t){const{sdf:e,smoothing:n,outlineWidth:r}=this.props,{outlineColor:i}=this.state,o=r?Math.max(n,Fh*(1-r)):-1;if(t.uniforms={...t.uniforms,sdfBuffer:Fh,outlineBuffer:o,gamma:n,sdf:Boolean(e),outlineColor:i},super.draw(t),e&&r){const{iconManager:t}=this.state;t.getTexture()&&this.state.model.draw({uniforms:{outlineBuffer:Fh}})}}getInstanceOffset(t){return t?Array.from(t).flatMap((t=>super.getInstanceOffset(t))):Bh}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).flatMap((t=>super.getInstanceIconFrame(t))):Bh}}s(Nh,"defaultProps",{getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),s(Nh,"layerName","MultiIconLayer");const zh=1e20;class Dh{constructor(){let{fontSize:t=24,buffer:e=3,radius:n=8,cutoff:r=.25,fontFamily:i="sans-serif",fontWeight:o="normal",fontStyle:s="normal"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.buffer=e,this.cutoff=r,this.radius=n;const a=this.size=t+4*e,l=this._createCanvas(a),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font="".concat(s," ").concat(o," ").concat(t,"px ").concat(i),c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:r,actualBoundingBoxLeft:i,actualBoundingBoxRight:o}=this.ctx.measureText(t),s=Math.ceil(n),a=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-i))),l=Math.min(this.size-this.buffer,s+Math.ceil(r)),c=a+2*this.buffer,u=l+2*this.buffer,d=Math.max(c*u,0),h=new Uint8ClampedArray(d),f={data:h,width:c,height:u,glyphWidth:a,glyphHeight:l,glyphTop:s,glyphLeft:0,glyphAdvance:e};if(0===a||0===l)return f;const{ctx:p,buffer:g,gridInner:m,gridOuter:y}=this;p.clearRect(g,g,a,l),p.fillText(t,g,g+s);const v=p.getImageData(g,g,a,l);y.fill(zh,0,d),m.fill(0,0,d);for(let b=0;b<l;b++)for(let t=0;t<a;t++){const e=v.data[4*(b*a+t)+3]/255;if(0===e)continue;const n=(b+g)*c+t+g;if(1===e)y[n]=0,m[n]=zh;else{const t=.5-e;y[n]=t>0?t*t:0,m[n]=t<0?t*t:0}}jh(y,0,0,c,u,c,this.f,this.v,this.z),jh(m,g,g,a,l,c,this.f,this.v,this.z);for(let b=0;b<d;b++){const t=Math.sqrt(y[b])-Math.sqrt(m[b]);h[b]=Math.round(255-255*(t/this.radius+this.cutoff))}return f}}function jh(t,e,n,r,i,o,s,a,l){for(let c=e;c<e+r;c++)Uh(t,n*o+c,o,i,s,a,l);for(let c=n;c<n+i;c++)Uh(t,c*o+e,1,r,s,a,l)}function Uh(t,e,n,r,i,o,s){o[0]=0,s[0]=-zh,s[1]=zh,i[0]=t[e];for(let a=1,l=0,c=0;a<r;a++){i[a]=t[e+a*n];const r=a*a;do{const t=o[l];c=(i[a]-i[t]+r-t*t)/(a-t)/2}while(c<=s[l]&&--l>-1);l++,o[l]=a,s[l]=c,s[l+1]=zh}for(let a=0,l=0;a<r;a++){for(;s[l+1]<a;)l++;const r=o[l],c=a-r;t[e+a*n]=i[r]+c*c}}const Vh=32,Wh=[];function Gh(t,e,n,r){let i=0;for(let s=e;s<n;s++){var o;i+=(null===(o=r[t[s]])||void 0===o?void 0:o.layoutWidth)||0}return i}function Hh(t,e,n,r,i,o){let s=e,a=0;for(let l=e;l<n;l++){const e=Gh(t,l,l+1,i);a+e>r&&(s<l&&o.push(l),s=l,a=0),a+=e}return a}function qh(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;void 0===o&&(o=t.length);const s=[];return"break-all"===e?Hh(t,i,o,n,r,s):function(t,e,n,r,i,o){let s=e,a=e,l=e,c=0;for(let u=e;u<n;u++)if(" "===t[u]?l=u+1:" "!==t[u+1]&&u+1!==n||(l=u+1),l>a){let e=Gh(t,a,l,i);c+e>r&&(s<a&&(o.push(a),s=a,c=0),e>r&&(e=Hh(t,a,l,r,i,o),s=o[o.length-1])),a=l,c+=e}}(t,i,o,n,r,s),s}function Yh(t,e,n,r,i,o){let s=0,a=0;for(let l=e;l<n;l++){const e=t[l],n=r[e];n?(a||(a=n.layoutHeight),i[l]=s+n.layoutWidth/2,s+=n.layoutWidth):(W.warn("Missing character: ".concat(e," (").concat(e.codePointAt(0),")"))(),i[l]=s,s+=Vh)}o[0]=s,o[1]=a}class Xh{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;s(this,"limit",void 0),s(this,"_cache",{}),s(this,"_order",[]),this.limit=t}get(t){const e=this._cache[t];return e&&(this._deleteOrder(t),this._appendOrder(t)),e}set(t,e){this._cache[t]?(this.delete(t),this._cache[t]=e,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=e,this._appendOrder(t))}delete(t){this._cache[t]&&(delete this._cache[t],this._deleteOrder(t))}_deleteOrder(t){const e=this._order.indexOf(t);e>=0&&this._order.splice(e,1)}_appendOrder(t){this._order.push(t)}}const Zh={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let Kh=new Xh(3);function $h(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function Qh(t,e,n,r){t.font="".concat(r," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}class Jh{constructor(){s(this,"props",{...Zh}),s(this,"_key",void 0),s(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:t,buffer:e}=this.props;return(1.2*t+2*e)/t}setProps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this.props,t),this._key=this._getKey();const e=function(t,e){let n;n="string"===typeof e?new Set(Array.from(e)):new Set(e);const r=Kh.get(t);if(!r)return n;for(const i in r.mapping)n.has(i)&&n.delete(i);return n}(this._key,this.props.characterSet),n=Kh.get(this._key);if(n&&0===e.size)return void(this._atlas!==n&&(this._atlas=n));const r=this._generateFontAtlas(e,n);this._atlas=r,Kh.set(this._key,r)}_generateFontAtlas(t,e){const{fontFamily:n,fontWeight:r,fontSize:i,buffer:o,sdf:s,radius:a,cutoff:l}=this.props;let c=e&&e.data;c||(c=document.createElement("canvas"),c.width=1024);const u=c.getContext("2d",{willReadFrequently:!0});Qh(u,n,i,r);const{mapping:d,canvasHeight:h,xOffset:f,yOffset:p}=function(t){let{characterSet:e,getFontWidth:n,fontHeight:r,buffer:i,maxCanvasWidth:o,mapping:s={},xOffset:a=0,yOffset:l=0}=t,c=0,u=a;const d=r+2*i;for(const f of e)if(!s[f]){const t=n(f);u+t+2*i>o&&(u=0,c++),s[f]={x:u+i,y:l+c*d+i,width:t,height:d,layoutWidth:t,layoutHeight:r},u+=t+2*i}return{mapping:s,xOffset:u,yOffset:l+c*d,canvasHeight:(h=l+(c+1)*d,Math.pow(2,Math.ceil(Math.log2(h))))};var h}({getFontWidth:t=>u.measureText(t).width,fontHeight:1.2*i,buffer:o,characterSet:t,maxCanvasWidth:1024,...e&&{mapping:e.mapping,xOffset:e.xOffset,yOffset:e.yOffset}});if(c.height!==h){const t=u.getImageData(0,0,c.width,c.height);c.height=h,u.putImageData(t,0,0)}if(Qh(u,n,i,r),s){const e=new Dh({fontSize:i,buffer:o,radius:a,cutoff:l,fontFamily:n,fontWeight:"".concat(r)});for(const n of t){const{data:t,width:r,height:o,glyphTop:s}=e.draw(n);d[n].width=r,d[n].layoutOffsetY=.9*i-s;const a=u.createImageData(r,o);$h(t,a),u.putImageData(a,d[n].x,d[n].y)}}else for(const g of t)u.fillText(g,d[g].x,d[g].y+o+.9*i);return{xOffset:f,yOffset:p,mapping:d,data:c,width:c.width,height:c.height}}_getKey(){const{fontFamily:t,fontWeight:e,fontSize:n,buffer:r,sdf:i,radius:o,cutoff:s}=this.props;return i?"".concat(t," ").concat(e," ").concat(n," ").concat(r," ").concat(o," ").concat(s):"".concat(t," ").concat(e," ").concat(n," ").concat(r)}}const tf={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class ef extends Qd{constructor(){super(...arguments),s(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[ah,ch]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t);const{changeFlags:e}=t;if(e.extensionsChanged){var n;const{gl:t}=this.context;null===(n=this.state.model)||void 0===n||n.delete(),this.state.model=this._getModel(t),this.getAttributeManager().invalidateAll()}}draw(t){let{uniforms:e}=t;const{billboard:n,sizeScale:r,sizeUnits:i,sizeMinPixels:o,sizeMaxPixels:s,getLineWidth:a}=this.props;let{padding:l}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),this.state.model.setUniforms(e).setUniforms({billboard:n,stroked:Boolean(a),padding:l,sizeUnits:fr[i],sizeScale:r,sizeMinPixels:o,sizeMaxPixels:s}).draw()}_getModel(t){return new sd(t,{...this.getShaders(),id:this.props.id,geometry:new dh({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}s(ef,"defaultProps",tf),s(ef,"layerName","TextBackgroundLayer");const nf={start:1,middle:0,end:-1},rf={top:1,center:0,bottom:-1},of=[0,0,0,255],sf={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:of},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Zh.characterSet},fontFamily:Zh.fontFamily,fontWeight:Zh.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:of},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:of},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class af extends _h{constructor(){super(...arguments),s(this,"state",void 0),s(this,"getBoundingRect",((t,e)=>{let{size:[n,r]}=this.transformParagraph(t,e);const{fontSize:i}=this.state.fontAtlasManager.props;n/=i,r/=i;const{getTextAnchor:o,getAlignmentBaseline:s}=this.props;return[(nf["function"===typeof o?o(t,e):o]-1)*n/2,(rf["function"===typeof s?s(t,e):s]-1)*r/2,n,r]})),s(this,"getIconOffsets",((t,e)=>{const{getTextAnchor:n,getAlignmentBaseline:r}=this.props,{x:i,y:o,rowWidth:s,size:[a,l]}=this.transformParagraph(t,e),c=nf["function"===typeof n?n(t,e):n],u=rf["function"===typeof r?r(t,e):r],d=i.length,h=new Array(2*d);let f=0;for(let p=0;p<d;p++){const t=(1-c)*(a-s[p])/2;h[f++]=(c-1)*a/2+t+i[p],h[f++]=(u-1)*l/2+o[p]}return h}))}initializeState(){this.state={styleVersion:0,fontAtlasManager:new Jh},this.props.maxWidth>0&&W.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(t){const{props:e,oldProps:n,changeFlags:r}=t;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText();(this._updateFontAtlas()||e.lineHeight!==n.lineHeight||e.wordBreak!==n.wordBreak||e.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo(t){let{info:e}=t;return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:t,fontFamily:e,fontWeight:n}=this.props,{fontAtlasManager:r,characterSet:i}=this.state,o={...t,characterSet:i,fontFamily:e,fontWeight:n};if(!r.mapping)return r.setProps(o),!0;for(const s in o)if(o[s]!==r.props[s])return r.setProps(o),!0;return!1}_updateText(){var t;const{data:e,characterSet:n}=this.props,r=null===(t=e.attributes)||void 0===t?void 0:t.getText;let i,{getText:o}=this.props,s=e.startIndices;const a="auto"===n&&new Set;if(r&&s){const{texts:t,characterCount:n}=function(t){let{value:e,length:n,stride:r,offset:i,startIndices:o,characterSet:s}=t;const a=e.BYTES_PER_ELEMENT,l=r?r/a:1,c=i?i/a:0,u=o[n]||Math.ceil((e.length-c)/l),d=s&&new Set,h=new Array(n);let f=e;if(l>1||c>0){f=new(0,e.constructor)(u);for(let t=0;t<u;t++)f[t]=e[t*l+c]}for(let p=0;p<n;p++){const t=o[p],e=o[p+1]||u,n=f.subarray(t,e);h[p]=String.fromCodePoint.apply(null,n),d&&n.forEach(d.add,d)}if(d)for(const p of d)s.add(String.fromCodePoint(p));return{texts:h,characterCount:u}}({...ArrayBuffer.isView(r)?{value:r}:r,length:e.length,startIndices:s,characterSet:a});i=n,o=(e,n)=>{let{index:r}=n;return t[r]}}else{const{iterable:t,objectInfo:n}=gu(e);s=[0],i=0;for(const e of t){n.index++;const t=Array.from(o(e,n)||"");a&&t.forEach(a.add,a),i+=t.length,s.push(i)}}this.setState({getText:o,startIndices:s,numInstances:i,characterSet:a||n})}transformParagraph(t,e){const{fontAtlasManager:n}=this.state,r=n.mapping,i=this.state.getText,{wordBreak:o,lineHeight:s,maxWidth:a}=this.props;return function(t,e,n,r,i){const o=Array.from(t),s=o.length,a=new Array(s),l=new Array(s),c=new Array(s),u=("break-word"===n||"break-all"===n)&&isFinite(r)&&r>0,d=[0,0],h=[0,0];let f=0,p=0,g=0;for(let y=0;y<=s;y++){const t=o[y];if("\n"!==t&&y!==s||(g=y),g>p){const t=u?qh(o,n,r,i,p,g):Wh;for(let n=0;n<=t.length;n++){const r=0===n?p:t[n-1],s=n<t.length?t[n]:g;Yh(o,r,s,i,a,h);for(let t=r;t<s;t++){var m;const e=(null===(m=i[o[t]])||void 0===m?void 0:m.layoutOffsetY)||0;l[t]=f+h[1]/2+e,c[t]=h[0]}f+=h[1]*e,d[0]=Math.max(d[0],h[0])}p=g}"\n"===t&&(a[p]=0,l[p]=0,c[p]=0,p++)}return d[1]=f,{x:a,y:l,rowWidth:c,size:d}}(i(t,e)||"",s,o,a*n.props.fontSize,r)}renderLayers(){const{startIndices:t,numInstances:e,getText:n,fontAtlasManager:{scale:r,texture:i,mapping:o},styleVersion:s}=this.state,{data:a,_dataDiff:l,getPosition:c,getColor:u,getSize:d,getAngle:h,getPixelOffset:f,getBackgroundColor:p,getBorderColor:g,getBorderWidth:m,backgroundPadding:y,background:v,billboard:b,fontSettings:_,outlineWidth:w,outlineColor:x,sizeScale:S,sizeUnits:A,sizeMinPixels:E,sizeMaxPixels:T,transitions:P,updateTriggers:C}=this.props,I=this.getSubLayerClass("characters",Nh),M=this.getSubLayerClass("background",ef);return[v&&new M({getFillColor:p,getLineColor:g,getLineWidth:m,padding:y,getPosition:c,getSize:d,getAngle:h,getPixelOffset:f,billboard:b,sizeScale:S,sizeUnits:A,sizeMinPixels:E,sizeMaxPixels:T,transitions:P&&{getPosition:P.getPosition,getAngle:P.getAngle,getSize:P.getSize,getFillColor:P.getBackgroundColor,getLineColor:P.getBorderColor,getLineWidth:P.getBorderWidth,getPixelOffset:P.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:C.getPosition,getAngle:C.getAngle,getSize:C.getSize,getFillColor:C.getBackgroundColor,getLineColor:C.getBorderColor,getLineWidth:C.getBorderWidth,getPixelOffset:C.getPixelOffset,getBoundingRect:{getText:C.getText,getTextAnchor:C.getTextAnchor,getAlignmentBaseline:C.getAlignmentBaseline,styleVersion:s}}}),{data:a.attributes&&a.attributes.background?{length:a.length,attributes:a.attributes.background}:a,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new I({sdf:_.sdf,smoothing:Number.isFinite(_.smoothing)?_.smoothing:Zh.smoothing,outlineWidth:w/(_.radius||Zh.radius),outlineColor:x,iconAtlas:i,iconMapping:o,getPosition:c,getColor:u,getSize:d,getAngle:h,getPixelOffset:f,billboard:b,sizeScale:S*r,sizeUnits:A,sizeMinPixels:E*r,sizeMaxPixels:T*r,transitions:P&&{getPosition:P.getPosition,getAngle:P.getAngle,getColor:P.getColor,getSize:P.getSize,getPixelOffset:P.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:C.getText,getPosition:C.getPosition,getAngle:C.getAngle,getColor:C.getColor,getSize:C.getSize,getPixelOffset:C.getPixelOffset,getIconOffsets:{getTextAnchor:C.getTextAnchor,getAlignmentBaseline:C.getAlignmentBaseline,styleVersion:s}}}),{data:a,_dataDiff:l,startIndices:t,numInstances:e,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(t){!function(t){W.assert(Number.isFinite(t)&&t>=3,"Invalid cache limit"),Kh=new Xh(t)}(t)}}s(af,"defaultProps",sf),s(af,"layerName","TextLayer");class lf{constructor(t){s(this,"opts",void 0),s(this,"typedArrayManager",void 0),s(this,"indexStarts",[0]),s(this,"vertexStarts",[0]),s(this,"vertexCount",0),s(this,"instanceCount",0),s(this,"attributes",void 0),s(this,"_attributeDefs",void 0),s(this,"data",void 0),s(this,"getGeometry",void 0),s(this,"geometryBuffer",void 0),s(this,"buffers",void 0),s(this,"positionSize",void 0),s(this,"normalize",void 0);const{attributes:e={}}=t;this.typedArrayManager=Ie,this.attributes={},this._attributeDefs=e,this.opts=t,this.updateGeometry(t)}updateGeometry(t){Object.assign(this.opts,t);const{data:e,buffers:n={},getGeometry:r,geometryBuffer:i,positionFormat:o,dataChanged:s,normalize:a=!0}=this.opts;if(this.data=e,this.getGeometry=r,this.positionSize=i&&i.size||("XY"===o?2:3),this.buffers=n,this.normalize=a,i&&(ka(e.startIndices),this.getGeometry=this.getGeometryFromBuffer(i),a||(n.positions=i)),this.geometryBuffer=n.positions,Array.isArray(s))for(const l of s)this._rebuildGeometry(l);else this._rebuildGeometry()}updatePartialGeometry(t){let{startRow:e,endRow:n}=t;this._rebuildGeometry({startRow:e,endRow:n})}getGeometryFromBuffer(t){const e=t.value||t;return ArrayBuffer.isView(e)?yu(e,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices}):null}_allocate(t,e){const{attributes:n,buffers:r,_attributeDefs:i,typedArrayManager:o}=this;for(const s in i)if(s in r)o.release(n[s]),n[s]=null;else{const r=i[s];r.copy=e,n[s]=o.allocate(n[s],t,r)}}_forEachGeometry(t,e,n){const{data:r,getGeometry:i}=this,{iterable:o,objectInfo:s}=gu(r,e,n);for(const a of o){s.index++;t(i?i(a,s):null,s.index)}}_rebuildGeometry(t){if(!this.data)return;let{indexStarts:e,vertexStarts:n,instanceCount:r}=this;const{data:i,geometryBuffer:o}=this,{startRow:s=0,endRow:a=1/0}=t||{},l={};if(t||(e=[0],n=[0]),this.normalize||!o)this._forEachGeometry(((t,e)=>{const r=t&&this.normalizeGeometry(t);l[e]=r,n[e+1]=n[e]+(r?this.getGeometrySize(r):0)}),s,a),r=n[n.length-1];else if(n=i.startIndices,r=n[i.length]||0,ArrayBuffer.isView(o))r=r||o.length/this.positionSize;else if(o instanceof Lo){const t=o.accessor.stride||4*this.positionSize;r=r||o.byteLength/t}else if(o.buffer){const t=o.stride||4*this.positionSize;r=r||o.buffer.byteLength/t}else if(o.value){const t=o.value,e=o.stride/t.BYTES_PER_ELEMENT||this.positionSize;r=r||t.length/e}this._allocate(r,Boolean(t)),this.indexStarts=e,this.vertexStarts=n,this.instanceCount=r;const c={};this._forEachGeometry(((t,i)=>{const o=l[i]||t;c.vertexStart=n[i],c.indexStart=e[i];const s=i<n.length-1?n[i+1]:r;c.geometrySize=s-n[i],c.geometryIndex=i,this.updateGeometryAttributes(o,c)}),s,a),this.vertexCount=e[e.length-1]}}const cf=1,uf=-1;function df(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Math.sign(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{start:n=0,end:r=t.length}=e,i=e.size||2;let o=0;for(let s=n,a=r-i;s<r;s+=i)o+=(t[s]-t[a])*(t[s+1]+t[a+1]),a=s;return o/2}(t,e))}(t,n);return r!==e&&(function(t,e){const{start:n=0,end:r=t.length,size:i=2}=e,o=(r-n)/i,s=Math.floor(o/2);for(let a=0;a<s;++a){const e=n+a*i,r=n+(o-1-a)*i;for(let n=0;n<i;++n){const i=t[e+n];t[e+n]=t[r+n],t[r+n]=i}}}(t,n),!0)}function hf(t,e,n,r){let i,o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(8&n)i=(r[3]-t[1])/(e[1]-t[1]),o=3;else if(4&n)i=(r[1]-t[1])/(e[1]-t[1]),o=1;else if(2&n)i=(r[2]-t[0])/(e[0]-t[0]),o=2;else{if(!(1&n))return null;i=(r[0]-t[0])/(e[0]-t[0]),o=0}for(let a=0;a<t.length;a++)s[a]=(1&o)===a?r[o]:i*(e[a]-t[a])+t[a];return s}function ff(t,e){let n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function pf(t,e){const n=e.length,r=t.length;if(r>0){let i=!0;for(let o=0;o<n;o++)if(t[r-n+o]!==e[o]){i=!1;break}if(i)return!1}for(let i=0;i<n;i++)t[r+i]=e[i];return!0}function gf(t,e){const n=e.length;for(let r=0;r<n;r++)t[r]=e[r]}function mf(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];const o=r+e*n;for(let s=0;s<n;s++)i[s]=t[o+s];return i}function yf(t,e){const{size:n=2,broken:r=!1,gridResolution:i=10,gridOffset:o=[0,0],startIndex:s=0,endIndex:a=t.length}=e||{},l=(a-s)/n;let c=[];const u=[c],d=mf(t,0,n,s);let h,f;const p=Sf(d,i,o,[]),g=[];pf(c,d);for(let m=1;m<l;m++){for(h=mf(t,m,n,s,h),f=ff(h,p);f;){hf(d,h,f,p,g);const t=ff(g,p);t&&(hf(d,g,t,p,g),f=t),pf(c,g),gf(d,g),Af(p,i,f),r&&c.length>n&&(c=[],u.push(c),pf(c,d)),f=ff(h,p)}pf(c,h),gf(d,h)}return r?u:u[0]}const vf=0,bf=1;function _f(t,e){for(let n=0;n<e.length;n++)t.push(e[n]);return t}function wf(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;if(!t.length)return[];const{size:r=2,gridResolution:i=10,gridOffset:o=[0,0],edgeTypes:s=!1}=n||{},a=[],l=[{pos:t,types:s?new Array(t.length/r).fill(bf):null,holes:e||[]}],c=[[],[]];let u=[];for(;l.length;){const{pos:t,types:e,holes:n}=l.shift();Ef(t,r,n[0]||t.length,c),u=Sf(c[0],i,o,u);const d=ff(c[1],u);if(d){let i=xf(t,e,r,0,n[0]||t.length,u,d);const o={pos:i[0].pos,types:i[0].types,holes:[]},a={pos:i[1].pos,types:i[1].types,holes:[]};l.push(o,a);for(let l=0;l<n.length;l++)i=xf(t,e,r,n[l],n[l+1]||t.length,u,d),i[0]&&(o.holes.push(o.pos.length),o.pos=_f(o.pos,i[0].pos),s&&(o.types=_f(o.types,i[0].types))),i[1]&&(a.holes.push(a.pos.length),a.pos=_f(a.pos,i[1].pos),s&&(a.types=_f(a.types,i[1].types)))}else{const r={positions:t};s&&(r.edgeTypes=e),n.length&&(r.holeIndices=n),a.push(r)}}return a}function xf(t,e,n,r,i,o,s){const a=(i-r)/n,l=[],c=[],u=[],d=[],h=[];let f,p,g;const m=mf(t,a-1,n,r);let y=Math.sign(8&s?m[1]-o[3]:m[0]-o[2]),v=e&&e[a-1],b=0,_=0;for(let w=0;w<a;w++)f=mf(t,w,n,r,f),p=Math.sign(8&s?f[1]-o[3]:f[0]-o[2]),g=e&&e[r/n+w],p&&y&&y!==p&&(hf(m,f,s,o,h),pf(l,h)&&u.push(v),pf(c,h)&&d.push(v)),p<=0?(pf(l,f)&&u.push(g),b-=p):u.length&&(u[u.length-1]=vf),p>=0?(pf(c,f)&&d.push(g),_+=p):d.length&&(d[d.length-1]=vf),gf(m,f),y=p,v=g;return[b?{pos:l,types:e&&u}:null,_?{pos:c,types:e&&d}:null]}function Sf(t,e,n,r){const i=Math.floor((t[0]-n[0])/e)*e+n[0],o=Math.floor((t[1]-n[1])/e)*e+n[1];return r[0]=i,r[1]=o,r[2]=i+e,r[3]=o+e,r}function Af(t,e,n){8&n?(t[1]+=e,t[3]+=e):4&n?(t[1]-=e,t[3]-=e):2&n?(t[0]+=e,t[2]+=e):1&n&&(t[0]-=e,t[2]-=e)}function Ef(t,e,n,r){let i=1/0,o=-1/0,s=1/0,a=-1/0;for(let l=0;l<n;l+=e){const e=t[l],n=t[l+1];i=e<i?e:i,o=e>o?e:o,s=n<s?n:s,a=n>a?n:a}return r[0][0]=i,r[0][1]=s,r[1][0]=o,r[1][1]=a,r}const Tf=85.051129;function Pf(t,e,n,r){let i=-1,o=-1;for(let s=n+1;s<r;s+=e){const e=Math.abs(t[s]);e>i&&(i=e,o=s-1)}return o}function Cf(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Tf;const o=t[n],s=t[r-e];if(Math.abs(o-s)>180){const r=mf(t,0,e,n);r[0]+=360*Math.round((s-o)/360),pf(t,r),r[1]=Math.sign(r[1])*i,pf(t,r),r[0]=o,pf(t,r)}}function If(t,e,n,r){let i,o=t[0];for(let s=n;s<r;s+=e){i=t[s];const e=i-o;(e>180||e<-180)&&(i-=360*Math.round(e/360)),t[s]=o=i}}function Mf(t,e){let n;const r=t.length/e;for(let o=0;o<r&&(n=t[o*e],(n+180)%360===0);o++);const i=360*-Math.round(n/360);if(0!==i)for(let o=0;o<r;o++)t[o*e]+=i}function kf(t,e,n,r){let i;if(Array.isArray(t[0])){const n=t.length*e;i=new Array(n);for(let r=0;r<t.length;r++)for(let n=0;n<e;n++)i[r*e+n]=t[r][n]||0}else i=t;return n?yf(i,{size:e,gridResolution:n}):r?function(t,e){const{size:n=2,startIndex:r=0,endIndex:i=t.length,normalize:o=!0}=e||{},s=t.slice(r,i);If(s,n,0,i-r);const a=yf(s,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const l of a)Mf(l,n);return a}(i,{size:e}):i}class Of extends lf{constructor(t){super({...t,attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(t){return this.attributes[t]}getGeometryFromBuffer(t){return this.normalize?super.getGeometryFromBuffer(t):null}normalizeGeometry(t){return this.normalize?kf(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}getGeometrySize(t){if(Lf(t)){let e=0;for(const n of t)e+=this.getGeometrySize(n);return e}const e=this.getPathLength(t);return e<2?0:this.isClosed(t)?e<3?0:e+2:e}updateGeometryAttributes(t,e){if(0!==e.geometrySize)if(t&&Lf(t))for(const n of t){const t=this.getGeometrySize(n);e.geometrySize=t,this.updateGeometryAttributes(n,e),e.vertexStart+=t}else this._updateSegmentTypes(t,e),this._updatePositions(t,e)}_updateSegmentTypes(t,e){const n=this.attributes.segmentTypes,r=!!t&&this.isClosed(t),{vertexStart:i,geometrySize:o}=e;n.fill(0,i,i+o),r?(n[i]=4,n[i+o-2]=4):(n[i]+=1,n[i+o-2]+=2),n[i+o-1]=4}_updatePositions(t,e){const{positions:n}=this.attributes;if(!n||!t)return;const{vertexStart:r,geometrySize:i}=e,o=new Array(3);for(let s=r,a=0;a<i;s++,a++)this.getPointOnPath(t,a,o),n[3*s]=o[0],n[3*s+1]=o[1],n[3*s+2]=o[2]}getPathLength(t){return t.length/this.positionSize}getPointOnPath(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const{positionSize:r}=this;e*r>=t.length&&(e+=1-t.length/r);const i=e*r;return n[0]=t[i],n[1]=t[i+1],n[2]=3===r&&t[i+2]||0,n}isClosed(t){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:e}=this,n=t.length-e;return t[0]===t[n]&&t[1]===t[n+1]&&(2===e||t[2]===t[n+2])}}function Lf(t){return Array.isArray(t[0])}const Rf=[0,0,0,255],Ff={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:Rf},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},Bf={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class Nf extends Qd{constructor(){super(...arguments),s(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute float instanceTypes;\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec3 instanceLeftPositions64Low;\nattribute vec3 instanceStartPositions64Low;\nattribute vec3 instanceEndPositions64Low;\nattribute vec3 instanceRightPositions64Low;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float capType;\nuniform float miterLimit;\nuniform bool billboard;\nuniform int widthUnits;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 getLineJoinOffset(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  vec2 width\n) {\n  bool isEnd = positions.x > 0.0;\n  float sideOfPath = positions.y;\n  float isJoint = float(sideOfPath == 0.0);\n\n  vec3 deltaA3 = (currPoint - prevPoint);\n  vec3 deltaB3 = (nextPoint - currPoint);\n\n  mat3 rotationMatrix;\n  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);\n  if (needsRotation) {\n    deltaA3 = deltaA3 * rotationMatrix;\n    deltaB3 = deltaB3 * rotationMatrix;\n  }\n  vec2 deltaA = deltaA3.xy / width;\n  vec2 deltaB = deltaB3.xy / width;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = dirA + dirB;\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 dir = isEnd ? dirA : dirB;\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\n  float cornerPosition = sideOfPath * turnDirection;\n\n  float miterSize = 1.0 / max(sinHalfA, EPSILON);\n  miterSize = mix(\n    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\n    miterSize,\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n    * (sideOfPath + isJoint * turnDirection);\n  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\n  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\n  bool isCap = isStartCap || isEndCap;\n  if (isCap) {\n    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);\n    vJointType = capType;\n  } else {\n    vJointType = jointType;\n  }\n  vPathLength = L;\n  vCornerOffset = offsetVec;\n  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);\n  vMiterLength = isCap ? isJoint : vMiterLength;\n\n  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\n  vPathPosition = vec2(\n    dot(offsetFromStartOfPath, perp),\n    dot(offsetFromStartOfPath, dir)\n  );\n  geometry.uv = vPathPosition;\n\n  float isValid = step(instanceTypes, 3.5);\n  vec3 offset = vec3(offsetVec * width * isValid, 0.0);\n\n  if (needsRotation) {\n    offset = rotationMatrix * offset;\n  }\n  return offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\n  if (position.w < EPSILON) {\n    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\n    position = refPosition + (position - refPosition) * r;\n  }\n}\n\nvoid main() {\n  geometry.pickingColor = instancePickingColors;\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\n\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\n\n  geometry.worldPosition = currPosition;\n  vec2 widthPixels = vec2(clamp(\n    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),\n    widthMinPixels, widthMaxPixels) / 2.0);\n  vec3 width;\n\n  if (billboard) {\n    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\n    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\n    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\n\n    clipLine(prevPositionScreen, currPositionScreen);\n    clipLine(nextPositionScreen, currPositionScreen);\n    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\n\n    width = vec3(widthPixels, 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 offset = getLineJoinOffset(\n      prevPositionScreen.xyz / prevPositionScreen.w,\n      currPositionScreen.xyz / currPositionScreen.w,\n      nextPositionScreen.xyz / nextPositionScreen.w,\n      project_pixel_size_to_clipspace(width.xy)\n    );\n\n    DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);\n    gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);\n  } else {\n    prevPosition = project_position(prevPosition, prevPosition64Low);\n    currPosition = project_position(currPosition, currPosition64Low);\n    nextPosition = project_position(nextPosition, nextPosition64Low);\n\n    width = vec3(project_pixel_size(widthPixels), 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);\n    geometry.position = vec4(currPosition + offset, 1.0);\n    gl_Position = project_common_position_to_clipspace(geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float miterLimit;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nvoid main(void) {\n  geometry.uv = vPathPosition;\n\n  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\n    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {\n      discard;\n    }\n    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {\n      discard;\n    }\n  }\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[ah,ch]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:Bf,accessor:"getPath",update:this.calculatePositions,noAlloc:true,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:true},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:Bf,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:Bf,defaultValue:Rf},instancePickingColors:{size:3,type:5121,accessor:(t,e)=>{let{index:n,target:r}=e;return this.encodePickingColor(t&&t.__source?t.__source.index:n,r)}}}),this.setState({pathTesselator:new Of({fp64:this.use64bitPositions()})})}updateState(t){super.updateState(t);const{props:e,changeFlags:n}=t,r=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:t}=this.state,i=e.data.attributes||{};t.updateGeometry({data:e.data,geometryBuffer:i.getPath,buffers:i,normalize:!e._pathType,loop:"loop"===e._pathType,getGeometry:e.getPath,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:t.instanceCount,startIndices:t.vertexStarts}),n.dataChanged||r.invalidateAll()}if(n.extensionsChanged){var i;const{gl:t}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(t),r.invalidateAll()}}getPickingInfo(t){const e=super.getPickingInfo(t),{index:n}=e,{data:r}=this.props;return r[0]&&r[0].__source&&(e.object=r.find((t=>t.__source.index===n))),e}disablePickingIndex(t){const{data:e}=this.props;if(e[0]&&e[0].__source)for(let n=0;n<e.length;n++)e[n].__source.index===t&&this._disablePickingIndex(n);else super.disablePickingIndex(t)}draw(t){let{uniforms:e}=t;const{jointRounded:n,capRounded:r,billboard:i,miterLimit:o,widthUnits:s,widthScale:a,widthMinPixels:l,widthMaxPixels:c}=this.props;this.state.model.setUniforms(e).setUniforms({jointType:Number(n),capType:Number(r),billboard:i,widthUnits:fr[s],widthScale:a,miterLimit:o,widthMinPixels:l,widthMaxPixels:c}).draw()}_getModel(t){return new sd(t,{...this.getShaders(),id:this.props.id,geometry:new dh({drawMode:4,attributes:{indices:new Uint16Array([0,1,2,1,4,2,1,3,4,3,5,4]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0})}calculatePositions(t){const{pathTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("positions")}calculateSegmentTypes(t){const{pathTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("segmentTypes")}}s(Nf,"defaultProps",Ff),s(Nf,"layerName","PathLayer");const zf="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",Df={lightSources:{}};function jf(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.map((t=>t*e/255))}const Uf={name:"lights",vs:zf,fs:zf,getUniforms:function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Df;if("lightSources"in e){const{ambientLight:t,pointLights:n,directionalLights:r}=e.lightSources||{};return t||n&&n.length>0||r&&r.length>0?Object.assign({},function(t){let{ambientLight:e,pointLights:n=[],directionalLights:r=[]}=t;const i={};return i["lighting_uAmbientLight.color"]=e?jf(e):[0,0,0],n.forEach(((t,e)=>{i["lighting_uPointLight[".concat(e,"].color")]=jf(t),i["lighting_uPointLight[".concat(e,"].position")]=t.position,i["lighting_uPointLight[".concat(e,"].attenuation")]=t.attenuation||[1,0,0]})),i.lighting_uPointLightCount=n.length,r.forEach(((t,e)=>{i["lighting_uDirectionalLight[".concat(e,"].color")]=jf(t),i["lighting_uDirectionalLight[".concat(e,"].direction")]=t.direction})),i.lighting_uDirectionalLightCount=r.length,i}({ambientLight:t,pointLights:n,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){const n={pointLights:[],directionalLights:[]};for(const t of e.lights||[])switch(t.type){case"ambient":n.ambientLight=t;break;case"directional":n.directionalLights.push(t);break;case"point":n.pointLights.push(t)}return t({lightSources:n})}return{}},defines:{MAX_LIGHTS:3}},Vf="\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",Wf={};function Gf(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wf;if(!("material"in t))return{};const{material:e}=t;return e?function(t){const{ambient:e=.35,diffuse:n=.6,shininess:r=32,specularColor:i=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:r,lighting_uSpecularColor:i.map((t=>t/255))}}(e):{lighting_uEnabled:!1}}const Hf={name:"gouraud-lighting",dependencies:[Uf],vs:Vf,defines:{LIGHTING_VERTEX:1},getUniforms:Gf};var qf=n(973),Yf=n.n(qf);const Xf=cf,Zf=uf,Kf={isClosed:!0};function $f(t){return"positions"in t?t.positions:t}function Qf(t){return"holeIndices"in t?t.holeIndices:null}function Jf(t,e,n,r,i){let o=e;const s=n.length;for(let a=0;a<s;a++)for(let e=0;e<r;e++)t[o++]=n[a][e]||0;if(!function(t){const e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}(n))for(let a=0;a<r;a++)t[o++]=n[0][a]||0;return Kf.start=e,Kf.end=o,Kf.size=r,df(t,i,Kf),o}function tp(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;o=o||n.length;const a=o-i;if(a<=0)return e;let l=e;for(let c=0;c<a;c++)t[l++]=n[i+c];if(!function(t,e,n,r){for(let i=0;i<e;i++)if(t[n+i]!==t[r-e+i])return!1;return!0}(n,r,i,o))for(let c=0;c<r;c++)t[l++]=n[i+c];return Kf.start=e,Kf.end=l,Kf.size=r,df(t,s,Kf),l}function ep(t,e){!function(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}(t);const n=[],r=[];if("positions"in t){const{positions:i,holeIndices:o}=t;if(o){let t=0;for(let s=0;s<=o.length;s++)t=tp(n,t,i,e,o[s-1],o[s],0===s?Xf:Zf),r.push(t);return r.pop(),{positions:n,holeIndices:r}}t=i}if(!function(t){return Array.isArray(t[0])}(t))return tp(n,0,t,e,0,n.length,Xf),n;if(!function(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}(t)){let i=0;for(const[o,s]of t.entries())i=Jf(n,i,s,e,0===o?Xf:Zf),r.push(i);return r.pop(),{positions:n,holeIndices:r}}return Jf(n,0,t,e,Xf),n}function np(t,e,n){const r=t.length/3;let i=0;for(let o=0;o<r;o++){const s=(o+1)%r;i+=t[3*o+e]*t[3*s+n],i-=t[3*s+e]*t[3*o+n]}return Math.abs(i/2)}function rp(t,e,n,r){const i=t.length/3;for(let o=0;o<i;o++){const i=3*o,s=t[i+0],a=t[i+1],l=t[i+2];t[i+e]=s,t[i+n]=a,t[i+r]=l}}class ip extends lf{constructor(t){const{fp64:e,IndexType:n=Uint32Array}=t;super({...t,attributes:{positions:{size:3,type:e?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:n,size:1}}})}get(t){const{attributes:e}=this;return"indices"===t?e.indices&&e.indices.subarray(0,this.vertexCount):e[t]}updateGeometry(t){super.updateGeometry(t);const e=this.buffers.indices;if(e)this.vertexCount=(e.value||e).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(t){if(this.normalize){const e=ep(t,this.positionSize);return this.opts.resolution?wf($f(e),Qf(e),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;const{size:r=2,normalize:i=!0,edgeTypes:o=!1}=n||{};e=e||[];const s=[],a=[];let l=0,c=0;for(let d=0;d<=e.length;d++){const i=e[d]||t.length,o=c,u=Pf(t,r,l,i);for(let e=u;e<i;e++)s[c++]=t[e];for(let e=l;e<u;e++)s[c++]=t[e];If(s,r,o,c),Cf(s,r,o,c,null===n||void 0===n?void 0:n.maxLatitude),l=i,a[d]=c}a.pop();const u=wf(s,a,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(i)for(const d of u)Mf(d.positions,r);return u}($f(e),Qf(e),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):e}return t}getGeometrySize(t){if(op(t)){let e=0;for(const n of t)e+=this.getGeometrySize(n);return e}return $f(t).length/this.positionSize}getGeometryFromBuffer(t){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(t):null}updateGeometryAttributes(t,e){if(t&&op(t))for(const n of t){const t=this.getGeometrySize(n);e.geometrySize=t,this.updateGeometryAttributes(n,e),e.vertexStart+=t,e.indexStart=this.indexStarts[e.geometryIndex+1]}else this._updateIndices(t,e),this._updatePositions(t,e),this._updateVertexValid(t,e)}_updateIndices(t,e){let{geometryIndex:n,vertexStart:r,indexStart:i}=e;const{attributes:o,indexStarts:s,typedArrayManager:a}=this;let l=o.indices;if(!l||!t)return;let c=i;const u=function(t,e,n,r){let i=Qf(t);i&&(i=i.map((t=>t/e)));let o=$f(t);const s=r&&3===e;if(n){const t=o.length;o=o.slice();const r=[];for(let i=0;i<t;i+=e){r[0]=o[i],r[1]=o[i+1],s&&(r[2]=o[i+2]);const t=n(r);o[i]=t[0],o[i+1]=t[1],s&&(o[i+2]=t[2])}}if(s){const t=np(o,0,1),e=np(o,0,2),r=np(o,1,2);if(!t&&!e&&!r)return[];t>e&&t>r||(e>r?(n||(o=o.slice()),rp(o,0,2,1)):(n||(o=o.slice()),rp(o,2,0,1)))}return Yf()(o,i,e)}(t,this.positionSize,this.opts.preproject,this.opts.full3d);l=a.allocate(l,i+u.length,{copy:!0});for(let d=0;d<u.length;d++)l[c++]=u[d]+r;s[n+1]=i+u.length,o.indices=l}_updatePositions(t,e){let{vertexStart:n,geometrySize:r}=e;const{attributes:{positions:i},positionSize:o}=this;if(!i||!t)return;const s=$f(t);for(let a=n,l=0;l<r;a++,l++){const t=s[l*o],e=s[l*o+1],n=o>2?s[l*o+2]:0;i[3*a]=t,i[3*a+1]=e,i[3*a+2]=n}}_updateVertexValid(t,e){let{vertexStart:n,geometrySize:r}=e;const{positionSize:i}=this,o=this.attributes.vertexValid,s=t&&Qf(t);if(t&&t.edgeTypes?o.set(t.edgeTypes,n):o.fill(1,n,n+r),s)for(let a=0;a<s.length;a++)o[n+s[a]/i-1]=0;o[n+r-1]=0}}function op(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}const sp="\nattribute vec2 vertexPositions;\nattribute float vertexValid;\n\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nstruct PolygonProps {\n  vec4 fillColors;\n  vec4 lineColors;\n  vec3 positions;\n  vec3 nextPositions;\n  vec3 pickingColors;\n  vec3 positions64Low;\n  vec3 nextPositions64Low;\n  float elevations;\n};\n\nvec3 project_offset_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uCommonUnitsPerWorldUnit);\n  }\n  return project_normal(vector);\n}\n\nvoid calculatePosition(PolygonProps props) {\n#ifdef IS_SIDE_VERTEX\n  if(vertexValid < 0.5){\n    gl_Position = vec4(0.);\n    return;\n  }\n#endif\n\n  vec3 pos;\n  vec3 pos64Low;\n  vec3 normal;\n  vec4 colors = isWireframe ? props.lineColors : props.fillColors;\n\n  geometry.worldPosition = props.positions;\n  geometry.worldPositionAlt = props.nextPositions;\n  geometry.pickingColor = props.pickingColors;\n\n#ifdef IS_SIDE_VERTEX\n  pos = mix(props.positions, props.nextPositions, vertexPositions.x);\n  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);\n#else\n  pos = props.positions;\n  pos64Low = props.positions64Low;\n#endif\n\n  if (extruded) {\n    pos.z += props.elevations * vertexPositions.y * elevationScale;\n  }\n  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\n\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  if (extruded) {\n  #ifdef IS_SIDE_VERTEX\n    normal = vec3(\n      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),\n      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),\n      0.0);\n    normal = project_offset_normal(normal);\n  #else\n    normal = project_normal(vec3(0.0, 0.0, 1.0));\n  #endif\n    geometry.normal = normal;\n    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);\n    vColor = vec4(lightColor, colors.a * opacity);\n  } else {\n    vColor = vec4(colors.rgb, colors.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",ap="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\n".concat(sp,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = positions;\n  props.positions64Low = positions64Low;\n  props.elevations = elevations;\n  props.fillColors = fillColors;\n  props.lineColors = lineColors;\n  props.pickingColors = pickingColors;\n\n  calculatePosition(props);\n}\n"),lp="#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\n\n\nattribute vec3 instancePositions;\nattribute vec3 nextPositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 nextPositions64Low;\nattribute float instanceElevations;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\n".concat(sp,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  #if RING_WINDING_ORDER_CW == 1\n    props.positions = instancePositions;\n    props.positions64Low = instancePositions64Low;\n    props.nextPositions = nextPositions;\n    props.nextPositions64Low = nextPositions64Low;\n  #else\n    props.positions = nextPositions;\n    props.positions64Low = nextPositions64Low;\n    props.nextPositions = instancePositions;\n    props.nextPositions64Low = instancePositions64Low;\n  #endif\n  props.elevations = instanceElevations;\n  props.fillColors = instanceFillColors;\n  props.lineColors = instanceLineColors;\n  props.pickingColors = instancePickingColors;\n\n  calculatePosition(props);\n}\n"),cp=[0,0,0,255],up={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:cp},getLineColor:{type:"accessor",value:cp},material:!0},dp={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class hp extends Qd{constructor(){super(...arguments),s(this,"state",void 0)}getShaders(t){return super.getShaders({vs:"top"===t?ap:lp,fs:"#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",defines:{RING_WINDING_ORDER_CW:this.props._normalize||"CCW"!==this.props._windingOrder?1:0},modules:[ah,Hf,ch]})}get wrapLongitude(){return!1}initializeState(){const{gl:t,viewport:e}=this.context;let{coordinateSystem:n}=this.props;const{_full3d:r}=this.props;let i;e.isGeospatial&&n===dr.DEFAULT&&(n=dr.LNGLAT),n===dr.LNGLAT&&(i=r?e.projectPosition.bind(e):e.projectFlat.bind(e)),this.setState({numInstances:0,polygonTesselator:new ip({preproject:i,fp64:this.use64bitPositions(),IndexType:!t||os(t,ns)?Uint32Array:Uint16Array})});const o=this.getAttributeManager(),s=!0;o.remove(["instancePickingColors"]),o.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:s},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:dp,accessor:"getPolygon",update:this.calculatePositions,noAlloc:s,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:s},elevations:{size:1,transition:dp,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:dp,accessor:"getFillColor",defaultValue:cp,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:dp,accessor:"getLineColor",defaultValue:cp,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(t,e)=>{let{index:n,target:r}=e;return this.encodePickingColor(t&&t.__source?t.__source.index:n,r)},shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(t){const e=super.getPickingInfo(t),{index:n}=e,{data:r}=this.props;return r[0]&&r[0].__source&&(e.object=r.find((t=>t.__source.index===n))),e}disablePickingIndex(t){const{data:e}=this.props;if(e[0]&&e[0].__source)for(let n=0;n<e.length;n++)e[n].__source.index===t&&this._disablePickingIndex(n);else super.disablePickingIndex(t)}draw(t){let{uniforms:e}=t;const{extruded:n,filled:r,wireframe:i,elevationScale:o}=this.props,{topModel:s,sideModel:a,polygonTesselator:l}=this.state,c={...e,extruded:Boolean(n),elevationScale:o};a&&(a.setInstanceCount(l.instanceCount-1),a.setUniforms(c),i&&(a.setDrawMode(3),a.setUniforms({isWireframe:!0}).draw()),r&&(a.setDrawMode(6),a.setUniforms({isWireframe:!1}).draw())),s&&(s.setVertexCount(l.vertexCount),s.setUniforms(c).draw())}updateState(t){super.updateState(t),this.updateGeometry(t);const{props:e,oldProps:n,changeFlags:r}=t,i=this.getAttributeManager();var o;(r.extensionsChanged||e.filled!==n.filled||e.extruded!==n.extruded)&&(null===(o=this.state.models)||void 0===o||o.forEach((t=>t.delete())),this.setState(this._getModels(this.context.gl)),i.invalidateAll())}updateGeometry(t){let{props:e,oldProps:n,changeFlags:r}=t;if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPolygon)){const{polygonTesselator:t}=this.state,n=e.data.attributes||{};t.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:n.getPolygon,buffers:n,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:r.dataChanged,full3d:e._full3d}),this.setState({numInstances:t.instanceCount,startIndices:t.vertexStarts}),r.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(t){const{id:e,filled:n,extruded:r}=this.props;let i,o;if(n){const n=this.getShaders("top");n.defines.NON_INSTANCED_MODEL=1,i=new sd(t,{...n,id:"".concat(e,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return r&&(o=new sd(t,{...this.getShaders("side"),id:"".concat(e,"-side"),geometry:new dh({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),o.userData.excludeAttributes={indices:!0}),{models:[o,i].filter(Boolean),topModel:i,sideModel:o}}calculateIndices(t){const{polygonTesselator:e}=this.state;t.startIndices=e.indexStarts,t.value=e.get("indices")}calculatePositions(t){const{polygonTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("positions")}calculateVertexValid(t){t.value=this.state.polygonTesselator.get("vertexValid")}}s(hp,"defaultProps",up),s(hp,"layerName","SolidPolygonLayer");const fp={circle:{type:Rh,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:kh,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:af,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},pp={type:Nf,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},gp={type:hp,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",_full3d:"_full3d",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function mp(t){let{type:e,props:n}=t;const r={};for(const i in n)r[i]=e.defaultProps[n[i]];return r}function yp(t,e){const{transitions:n,updateTriggers:r}=t.props,i={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(const o in e){const s=e[o];let a=t.props[o];o.startsWith("get")&&(a=t.getSubLayerAccessor(a),i.updateTriggers[s]=r[o],n&&(i.transitions[s]=n[o])),i[s]=a}return i}function vp(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:o=t.length}=n;for(let s=i;s<o;s++){const n=t[s],{geometry:i}=n;if(i)if("GeometryCollection"===i.type){W.assert(Array.isArray(i.geometries),"GeoJSON does not have geometries array");const{geometries:t}=i;for(let i=0;i<t.length;i++){bp(t[i],r,e,n,s)}}else bp(i,r,e,n,s)}return r}function bp(t,e,n,r,i){const{type:o,coordinates:s}=t,{pointFeatures:a,lineFeatures:l,polygonFeatures:c,polygonOutlineFeatures:u}=e;if(function(t,e){let n=_p[t];W.assert(n,"Unknown GeoJSON type ".concat(t));for(;e&&--n>0;)e=e[0];return e&&Number.isFinite(e[0])}(o,s))switch(o){case"Point":a.push(n({geometry:t},r,i));break;case"MultiPoint":s.forEach((t=>{a.push(n({geometry:{type:"Point",coordinates:t}},r,i))}));break;case"LineString":l.push(n({geometry:t},r,i));break;case"MultiLineString":s.forEach((t=>{l.push(n({geometry:{type:"LineString",coordinates:t}},r,i))}));break;case"Polygon":c.push(n({geometry:t},r,i)),s.forEach((t=>{u.push(n({geometry:{type:"LineString",coordinates:t}},r,i))}));break;case"MultiPolygon":s.forEach((t=>{c.push(n({geometry:{type:"Polygon",coordinates:t}},r,i)),t.forEach((t=>{u.push(n({geometry:{type:"LineString",coordinates:t}},r,i))}))}))}else W.warn("".concat(o," coordinates are malformed"))()}const _p={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function wp(t){return t.geometry.coordinates}function xp(t,e){const n={points:{},lines:{},polygons:{},polygonsOutline:{}},{points:r,lines:i,polygons:o}=t,s=function(t,e){const n={points:null,lines:null,polygons:null};for(const r in n){const i=t[r].globalFeatureIds.value;n[r]=new Uint8ClampedArray(3*i.length);const o=[];for(let t=0;t<i.length;t++)e(i[t],o),n[r][3*t+0]=o[0],n[r][3*t+1]=o[1],n[r][3*t+2]=o[2]}return n}(t,e);return n.points.data={length:r.positions.value.length/r.positions.size,attributes:{...r.attributes,getPosition:r.positions,instancePickingColors:{size:3,value:s.points}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},n.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:3,value:s.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},n.lines._pathType="open",n.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygons._normalize=!1,o.triangles&&(n.polygons.data.attributes.indices=o.triangles.value),n.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygonsOutline._pathType="open",n}const Sp=["points","linestrings","polygons"],Ap={...mp(fp.circle),...mp(fp.icon),...mp(fp.text),...mp(pp),...mp(gp),stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:t=>t.properties.icon},getText:{type:"accessor",value:t=>t.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class Ep extends _h{initializeState(){this.state={layerProps:{},features:{}}}updateState(t){let{props:e,changeFlags:n}=t;if(!n.dataChanged)return;const{data:r}=this.props,i=r&&"points"in r&&"polygons"in r&&"lines"in r;this.setState({binary:i}),i?this._updateStateBinary({props:e,changeFlags:n}):this._updateStateJSON({props:e,changeFlags:n})}_updateStateBinary(t){let{props:e,changeFlags:n}=t;const r=xp(e.data,this.encodePickingColor);this.setState({layerProps:r})}_updateStateJSON(t){let{props:e,changeFlags:n}=t;const r=function(t){if(Array.isArray(t))return t;switch(W.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return W.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}(e.data),i=this.getSubLayerRow.bind(this);let o={};const s={};if(Array.isArray(n.dataChanged)){const t=this.state.features;for(const e in t)o[e]=t[e].slice(),s[e]=[];for(const e of n.dataChanged){const n=vp(r,i,e);for(const r in t)s[r].push(wh({data:o[r],getIndex:t=>t.__source.index,dataRange:e,replace:n[r]}))}}else o=vp(r,i);const a=function(t,e){const n={points:{},lines:{},polygons:{},polygonsOutline:{}},{pointFeatures:r,lineFeatures:i,polygonFeatures:o,polygonOutlineFeatures:s}=t;return n.points.data=r,n.points._dataDiff=e.pointFeatures&&(()=>e.pointFeatures),n.points.getPosition=wp,n.lines.data=i,n.lines._dataDiff=e.lineFeatures&&(()=>e.lineFeatures),n.lines.getPath=wp,n.polygons.data=o,n.polygons._dataDiff=e.polygonFeatures&&(()=>e.polygonFeatures),n.polygons.getPolygon=wp,n.polygonsOutline.data=s,n.polygonsOutline._dataDiff=e.polygonOutlineFeatures&&(()=>e.polygonOutlineFeatures),n.polygonsOutline.getPath=wp,n}(o,s);this.setState({features:o,featuresDiff:s,layerProps:a})}getPickingInfo(t){const e=super.getPickingInfo(t),{index:n,sourceLayer:r}=e;return e.featureType=Sp.find((t=>r.id.startsWith("".concat(this.id,"-").concat(t,"-")))),n>=0&&r.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(e.index=this.props.data.points.globalFeatureIds.value[n]),e}_updateAutoHighlight(t){const e="".concat(this.id,"-points-"),n="points"===t.featureType;for(const r of this.getSubLayers())r.id.startsWith(e)===n&&r.updateAutoHighlight(t)}_renderPolygonLayer(){const{extruded:t,wireframe:e}=this.props,{layerProps:n}=this.state,r="polygons-fill",i=this.shouldRenderSubLayer(r,n.polygons.data)&&this.getSubLayerClass(r,gp.type);if(i){const o=yp(this,gp.props),s=t&&e;return s||delete o.getLineColor,o.updateTriggers.lineColors=s,new i(o,this.getSubLayerProps({id:r,updateTriggers:o.updateTriggers}),n.polygons)}return null}_renderLineLayers(){const{extruded:t,stroked:e}=this.props,{layerProps:n}=this.state,r="polygons-stroke",i="linestrings",o=!t&&e&&this.shouldRenderSubLayer(r,n.polygonsOutline.data)&&this.getSubLayerClass(r,pp.type),s=this.shouldRenderSubLayer(i,n.lines.data)&&this.getSubLayerClass(i,pp.type);if(o||s){const t=yp(this,pp.props);return[o&&new o(t,this.getSubLayerProps({id:r,updateTriggers:t.updateTriggers}),n.polygonsOutline),s&&new s(t,this.getSubLayerProps({id:i,updateTriggers:t.updateTriggers}),n.lines)]}return null}_renderPointLayers(){const{pointType:t}=this.props,{layerProps:e,binary:n}=this.state;let{highlightedObjectIndex:r}=this.props;!n&&Number.isFinite(r)&&(r=e.points.data.findIndex((t=>t.__source.index===r)));const i=new Set(t.split("+")),o=[];for(const s of i){const t="points-".concat(s),i=fp[s],a=i&&this.shouldRenderSubLayer(t,e.points.data)&&this.getSubLayerClass(t,i.type);if(a){const l=yp(this,i.props);let c=e.points;if("text"===s&&n){const{instancePickingColors:t,...e}=c.data.attributes;c={...c,data:{...c.data,attributes:e}}}o.push(new a(l,this.getSubLayerProps({id:t,updateTriggers:l.updateTriggers,highlightedObjectIndex:r}),c))}}return o}renderLayers(){const{extruded:t}=this.props,e=this._renderPolygonLayer();return[!t&&e,this._renderLineLayers(),this._renderPointLayers(),t&&e]}getSubLayerAccessor(t){const{binary:e}=this.state;return e&&"function"===typeof t?(e,n)=>{const{data:r,index:i}=n,o=function(t,e){if(!t)return null;const n="startIndices"in t?t.startIndices[e]:e,r=t.featureIds.value[n];return-1!==n?function(t,e,n){const r={properties:{...t.properties[e]}};for(const i in t.numericProps)r.properties[i]=t.numericProps[i].value[n];return r}(t,r,n):null}(r,i);return t(o,n)}:super.getSubLayerAccessor(t)}}s(Ep,"layerName","GeoJsonLayer"),s(Ep,"defaultProps",Ap);const Tp={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class Pp{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,"props",void 0),s(this,"stats",void 0),s(this,"activeRequestCount",0),s(this,"requestQueue",[]),s(this,"requestMap",new Map),s(this,"deferredUpdate",null),this.props={...Tp,...t},this.stats=new Q({id:this.props.id}),this.stats.get("Queued Requests"),this.stats.get("Active Requests"),this.stats.get("Cancelled Requests"),this.stats.get("Queued Requests Ever"),this.stats.get("Active Requests Ever")}scheduleRequest(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>0;if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(t))return this.requestMap.get(t);const n={handle:t,priority:0,getPriority:e},r=new Promise((t=>(n.resolve=t,n)));return this.requestQueue.push(n),this.requestMap.set(t,r),this._issueNewRequests(),r}_issueRequest(t){const{handle:e,resolve:n}=t;let r=!1;const i=()=>{r||(r=!0,this.requestMap.delete(e),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,n?n({done:i}):Promise.resolve({done:i})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout((()=>this._issueNewRequestsAsync()),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const t=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==t){this._updateAllRequests();for(let e=0;e<t;++e){const t=this.requestQueue.shift();t&&this._issueRequest(t)}}}_updateAllRequests(){const t=this.requestQueue;for(let e=0;e<t.length;++e){const n=t[e];this._updateRequest(n)||(t.splice(e,1),this.requestMap.delete(n.handle),e--)}t.sort(((t,e)=>t.priority-e.priority))}_updateRequest(t){return t.priority=t.getPriority(t.handle),!(t.priority<0)||(t.resolve(null),!1)}}class Cp{constructor(t){s(this,"index",void 0),s(this,"isVisible",void 0),s(this,"isSelected",void 0),s(this,"parent",void 0),s(this,"children",void 0),s(this,"content",void 0),s(this,"state",void 0),s(this,"layers",void 0),s(this,"id",void 0),s(this,"zoom",void 0),s(this,"userData",void 0),s(this,"boundingBox",void 0),s(this,"_abortController",void 0),s(this,"_loader",void 0),s(this,"_loaderId",void 0),s(this,"_isLoaded",void 0),s(this,"_isCancelled",void 0),s(this,"_needsReload",void 0),s(this,"_bbox",void 0),this.index=t,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get bbox(){return this._bbox}set bbox(t){this._bbox||(this._bbox=t,this.boundingBox="west"in t?[[t.west,t.south],[t.east,t.north]]:[[t.left,t.top],[t.right,t.bottom]])}get data(){return this.isLoading&&this._loader?this._loader.then((()=>this.data)):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return Boolean(this._loader)&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const t=this.content?this.content.byteLength:0;return Number.isFinite(t)||console.error("byteLength not defined in tile data"),t}async _loadData(t){let{getData:e,requestScheduler:n,onLoad:r,onError:i}=t;const{index:o,id:s,bbox:a,userData:l,zoom:c}=this,u=this._loaderId;this._abortController=new AbortController;const{signal:d}=this._abortController,h=await n.scheduleRequest(this,(t=>t.isSelected?1:-1));if(!h)return void(this._isCancelled=!0);if(this._isCancelled)return void h.done();let f,p=null;try{p=await e({index:o,id:s,bbox:a,userData:l,zoom:c,signal:d})}catch(mM){f=mM||!0}finally{h.done()}u===this._loaderId&&(this._loader=void 0,this.content=p,!this._isCancelled||p?(this._isLoaded=!0,this._isCancelled=!1,f?i(f,this):r(this)):this._isLoaded=!1)}loadData(t){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(t),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var t;this.isLoaded||(this._isCancelled=!0,null===(t=this._abortController)||void 0===t||t.abort())}}const Ip=Math.PI/180,Mp=180/Math.PI,kp=6370972,Op=256;function Lp(){const t=4018225162502676e-20,e=Math.PI/180*Op;return{unitsPerMeter:[t,t,t],unitsPerMeter2:[0,0,0],metersPerUnit:[24886.609375,24886.609375,24886.609375],unitsPerDegree:[e,e,t],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/e,1/e,24886.609375]}}class Rp extends br{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{latitude:e=0,longitude:n=0,zoom:r=0,nearZMultiplier:i=.1,farZMultiplier:o=2,resolution:a=10}=t;let{height:l,altitude:c=1.5}=t;l=l||1,c=Math.max(.75,c);const u=(new Rn).lookAt({eye:[0,-c,0],up:[0,0,1]}),d=Math.pow(2,r);u.rotateX(e*Ip),u.rotateZ(-n*Ip),u.scale(d/l);const h=Math.atan(.5/c),f=512*d/l;super({...t,height:l,viewMatrix:u,longitude:n,latitude:e,zoom:r,distanceScales:Lp(),fovyRadians:2*h,focalDistance:c,near:i,far:Math.min(2,1/f+1)*c*o}),s(this,"longitude",void 0),s(this,"latitude",void 0),s(this,"resolution",void 0),this.latitude=e,this.longitude=n,this.resolution=a}get projectionMode(){return hr.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(){const t={targetZ:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).z||0},e=this.unproject([0,this.height/2],t),n=this.unproject([this.width/2,0],t),r=this.unproject([this.width,this.height/2],t),i=this.unproject([this.width/2,this.height],t);return r[0]<this.longitude&&(r[0]+=360),e[0]>this.longitude&&(e[0]-=360),[Math.min(e[0],r[0],n[0],i[0]),Math.min(e[1],r[1],n[1],i[1]),Math.max(e[0],r[0],n[0],i[0]),Math.max(e[1],r[1],n[1],i[1])]}unproject(t){let{topLeft:e=!0,targetZ:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[r,i,o]=t,s=e?i:this.height-i,{pixelUnprojectionMatrix:a}=this;let l;if(Number.isFinite(o))l=Fp(a,[r,s,o,1]);else{const t=Fp(a,[r,s,-1,1]),e=Fp(a,[r,s,1,1]),i=((n||0)/kp+1)*Op,o=Je($e([],t,e)),c=Je(t),u=Je(e),d=4*((4*c*u-(o-c-u)**2)/16)/o;l=function(t,e,n,r){var i=e[0],o=e[1],s=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=s+r*(n[2]-s),t}([],t,e,(Math.sqrt(c-d)-Math.sqrt(Math.max(0,i*i-d)))/Math.sqrt(o))}const[c,u,d]=this.unprojectPosition(l);return Number.isFinite(o)?[c,u,d]:Number.isFinite(n)?[c,u,n]:[c,u]}projectPosition(t){const[e,n,r=0]=t,i=e*Ip,o=n*Ip,s=Math.cos(o),a=(r/kp+1)*Op;return[Math.sin(i)*s*a,-Math.cos(i)*s*a,Math.sin(o)*a]}unprojectPosition(t){const[e,n,r]=t,i=Qe(t),o=Math.asin(r/i);return[Math.atan2(e,-n)*Mp,o*Mp,(i/Op-1)*kp]}projectFlat(t){return t}unprojectFlat(t){return t}panByPosition(t,e){const n=this.unproject(e);return{longitude:t[0]-n[0]+this.longitude,latitude:t[1]-n[1]+this.latitude}}}function Fp(t,e){const n=Pn([],e,t);return An(n,n,1/n[3]),n}const Bp=-1,Np=0,zp=1,Dp=new on,jp=new on;class Up{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=arguments.length>2?arguments[2]:void 0;s(this,"center",void 0),s(this,"halfDiagonal",void 0),s(this,"minimum",void 0),s(this,"maximum",void 0),n=n||Dp.copy(t).add(e).scale(.5),this.center=new on(n),this.halfDiagonal=new on(e).subtract(this.center),this.minimum=new on(t),this.maximum=new on(e)}clone(){return new Up(this.minimum,this.maximum,this.center)}equals(t){return this===t||Boolean(t)&&this.minimum.equals(t.minimum)&&this.maximum.equals(t.maximum)}transform(t){return this.center.transformAsPoint(t),this.halfDiagonal.transform(t),this.minimum.transform(t),this.maximum.transform(t),this}intersectPlane(t){const{halfDiagonal:e}=this,n=jp.from(t.normal),r=e.x*Math.abs(n.x)+e.y*Math.abs(n.y)+e.z*Math.abs(n.z),i=this.center.dot(n)+t.distance;return i-r>0?zp:i+r<0?Bp:Np}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const e=Dp.from(t).subtract(this.center),{halfDiagonal:n}=this;let r,i=0;return r=Math.abs(e.x)-n.x,r>0&&(i+=r*r),r=Math.abs(e.y)-n.y,r>0&&(i+=r*r),r=Math.abs(e.z)-n.z,r>0&&(i+=r*r),i}}const Vp=new on,Wp=new on;class Gp{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;s(this,"center",void 0),s(this,"radius",void 0),this.radius=-0,this.center=new on,this.fromCenterRadius(t,e)}fromCenterRadius(t,e){return this.center.from(t),this.radius=e,this}fromCornerPoints(t,e){return e=Vp.from(e),this.center=(new on).from(t).add(e).scale(.5),this.radius=this.center.distance(e),this}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}clone(){return new Gp(this.center,this.radius)}union(t){const e=this.center,n=this.radius,r=t.center,i=t.radius,o=Vp.copy(r).subtract(e),s=o.magnitude();if(n>=s+i)return this.clone();if(i>=s+n)return t.clone();const a=.5*(n+s+i);return Wp.copy(o).scale((-n+a)/s).add(e),this.center.copy(Wp),this.radius=a,this}expand(t){const e=Vp.from(t).subtract(this.center).magnitude();return e>this.radius&&(this.radius=e),this}transform(t){this.center.transform(t);const e=vn(Vp,t);return this.radius=Math.max(e[0],Math.max(e[1],e[2]))*this.radius,this}distanceSquaredTo(t){const e=this.distanceTo(t);return e*e}distanceTo(t){const e=Vp.from(t).subtract(this.center);return Math.max(0,e.len()-this.radius)}intersectPlane(t){const e=this.center,n=this.radius,r=t.normal.dot(e)+t.distance;return r<-n?Bp:r<n?Np:zp}}function Hp(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=n[0],f=n[1],p=n[2],g=n[3],m=n[4],y=n[5],v=n[6],b=n[7],_=n[8];return t[0]=h*r+f*s+p*c,t[1]=h*i+f*a+p*u,t[2]=h*o+f*l+p*d,t[3]=g*r+m*s+y*c,t[4]=g*i+m*a+y*u,t[5]=g*o+m*l+y*d,t[6]=v*r+b*s+_*c,t[7]=v*i+b*a+_*u,t[8]=v*o+b*l+_*d,t}function qp(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}var Yp;!function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2"}(Yp||(Yp={}));const Xp=Object.freeze([1,0,0,0,1,0,0,0,1]);class Zp extends dn{static get IDENTITY(){return function(){$p||($p=new Zp,Object.freeze($p));return $p}()}static get ZERO(){return function(){Kp||(Kp=new Zp([0,0,0,0,0,0,0,0,0]),Object.freeze(Kp));return Kp}()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return Yp}constructor(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):n.length>0?this.copy([t,...n]):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}identity(){return this.copy(Xp)}fromObject(t){return this.check()}fromQuaternion(t){return function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n+n,a=r+r,l=i+i,c=n*s,u=r*s,d=r*a,h=i*s,f=i*a,p=i*l,g=o*s,m=o*a,y=o*l;t[0]=1-d-p,t[3]=u-y,t[6]=h+m,t[1]=u+y,t[4]=1-c-p,t[7]=f-g,t[2]=h-m,t[5]=f+g,t[8]=1-c-d}(this,t),this.check()}set(t,e,n,r,i,o,s,a,l){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=s,this[7]=a,this[8]=l,this.check()}setRowMajor(t,e,n,r,i,o,s,a,l){return this[0]=t,this[1]=r,this[2]=s,this[3]=e,this[4]=i,this[5]=a,this[6]=n,this[7]=o,this[8]=l,this.check()}determinant(){return function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],l=t[7],c=t[8];return e*(c*o-s*l)+n*(-c*i+s*a)+r*(l*i-o*a)}(this)}transpose(){return function(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]}(this,this),this.check()}invert(){return function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*s-a*c,h=-u*o+a*l,f=c*o-s*l,p=n*d+r*h+i*f;p&&(p=1/p,t[0]=d*p,t[1]=(-u*r+i*c)*p,t[2]=(a*r-i*s)*p,t[3]=h*p,t[4]=(u*n-i*l)*p,t[5]=(-a*n+i*o)*p,t[6]=f*p,t[7]=(-c*n+r*l)*p,t[8]=(s*n-r*o)*p)}(this,this),this.check()}multiplyLeft(t){return Hp(this,t,this),this.check()}multiplyRight(t){return Hp(this,this,t),this.check()}rotate(t){return function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=Math.sin(n),f=Math.cos(n);t[0]=f*r+h*s,t[1]=f*i+h*a,t[2]=f*o+h*l,t[3]=f*s-h*r,t[4]=f*a-h*i,t[5]=f*l-h*o,t[6]=c,t[7]=u,t[8]=d}(this,this,t),this.check()}scale(t){return Array.isArray(t)?qp(this,this,t):qp(this,this,[t,t]),this.check()}translate(t){return function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=n[0],f=n[1];t[0]=r,t[1]=i,t[2]=o,t[3]=s,t[4]=a,t[5]=l,t[6]=h*r+f*s+c,t[7]=h*i+f*a+u,t[8]=h*o+f*l+d}(this,this,t),this.check()}transform(t,e){let n;switch(t.length){case 2:n=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}(e||[-0,-0],t,this);break;case 3:n=Ze(e||[-0,-0,-0],t,this);break;case 4:n=en(e||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return De(n,t.length),n}transformVector(t,e){return this.transform(t,e)}transformVector2(t,e){return this.transform(t,e)}transformVector3(t,e){return this.transform(t,e)}}let Kp,$p,Qp;class Jp extends Ue{static get ZERO(){return Qp||(Qp=new Jp(0,0,0,0),Object.freeze(Qp)),Qp}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(-0,-0,-0,-0),Oe(t)&&1===arguments.length?this.copy(t):(Me.debug&&(ze(t),ze(e),ze(n),ze(r)),this[0]=t,this[1]=e,this[2]=n,this[3]=r)}set(t,e,n,r){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return Me.debug&&(ze(t.x),ze(t.y),ze(t.z),ze(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=ze(t)}get w(){return this[3]}set w(t){this[3]=ze(t)}transform(t){return Xe(this,this,t),this.check()}transformByMatrix3(t){return en(this,this,t),this.check()}transformByMatrix2(t){return function(t,e,n){const r=e[0],i=e[1];t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t[3]=e[3]}(this,this,t),this.check()}transformByQuaternion(t){return Ke(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}function tg(){var t=new We(4);return We!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function eg(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function ng(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=n[0],l=n[1],c=n[2],u=n[3];return t[0]=r*u+s*a+i*c-o*l,t[1]=i*u+s*l+o*a-r*c,t[2]=o*u+s*c+r*l-i*a,t[3]=s*u-r*a-i*l-o*c,t}function rg(t,e,n,r){var i,o,s,a,l,c=e[0],u=e[1],d=e[2],h=e[3],f=n[0],p=n[1],g=n[2],m=n[3];return(o=c*f+u*p+d*g+h*m)<0&&(o=-o,f=-f,p=-p,g=-g,m=-m),1-o>Ve?(i=Math.acos(o),s=Math.sin(i),a=Math.sin((1-r)*i)/s,l=Math.sin(r*i)/s):(a=1-r,l=r),t[0]=a*c+l*f,t[1]=a*u+l*p,t[2]=a*d+l*g,t[3]=a*h+l*m,t}function ig(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,s=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*s+s]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+s]-e[3*s+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[s]=(e[3*s+i]+e[3*i+s])*n}return t}var og=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},sg=An,ag=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},lg=function(t,e,n,r){var i=e[0],o=e[1],s=e[2],a=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=s+r*(n[2]-s),t[3]=a+r*(n[3]-a),t},cg=En,ug=Tn,dg=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n*n+r*r+i*i+o*o;return s>0&&(s=1/Math.sqrt(s)),t[0]=n*s,t[1]=r*s,t[2]=i*s,t[3]=o*s,t},hg=function(){var t=Ge(),e=He(1,0,0),n=He(0,1,0);return function(r,i,o){var s=qe(i,o);return s<-.999999?(Ye(t,e,i),Qe(t)<1e-6&&Ye(t,n,i),function(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o}(t,t),eg(r,t,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(Ye(t,i,o),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+s,dg(r,r))}}();(function(){var t=tg(),e=tg()})(),function(){var t=function(){var t=new We(9);return We!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}()}();const fg=[0,0,0,1];class pg extends Ne{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(-0,-0,-0,-0),Array.isArray(t)&&1===arguments.length?this.copy(t):this.set(t,e,n,r)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,e,n,r){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this.check()}fromObject(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this.check()}fromMatrix3(t){return ig(this,t),this.check()}fromAxisRotation(t,e){return eg(this,t,e),this.check()}identity(){var t;return(t=this)[0]=0,t[1]=0,t[2]=0,t[3]=1,this.check()}setAxisAngle(t,e){return this.fromAxisRotation(t,e)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=ze(t)}get y(){return this[1]}set y(t){this[1]=ze(t)}get z(){return this[2]}set z(t){this[2]=ze(t)}get w(){return this[3]}set w(t){this[3]=ze(t)}len(){return cg(this)}lengthSquared(){return ug(this)}dot(t){return ag(this,t)}rotationTo(t,e){return hg(this,t,e),this.check()}add(t){return og(this,this,t),this.check()}calculateW(){return function(t,e){var n=e[0],r=e[1],i=e[2];t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i))}(this,this),this.check()}conjugate(){var t,e;return e=this,(t=this)[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],this.check()}invert(){return function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n*n+r*r+i*i+o*o,a=s?1/s:0;t[0]=-n*a,t[1]=-r*a,t[2]=-i*a,t[3]=o*a}(this,this),this.check()}lerp(t,e,n){return void 0===n?this.lerp(this,t,e):(lg(this,t,e,n),this.check())}multiplyRight(t){return ng(this,this,t),this.check()}multiplyLeft(t){return ng(this,t,this),this.check()}normalize(){const t=this.len(),e=t>0?1/t:0;return this[0]=this[0]*e,this[1]=this[1]*e,this[2]=this[2]*e,this[3]=this[3]*e,0===t&&(this[3]=1),this.check()}rotateX(t){return function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),l=Math.cos(n);t[0]=r*l+s*a,t[1]=i*l+o*a,t[2]=o*l-i*a,t[3]=s*l-r*a}(this,this,t),this.check()}rotateY(t){return function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),l=Math.cos(n);t[0]=r*l-o*a,t[1]=i*l+s*a,t[2]=o*l+r*a,t[3]=s*l-i*a}(this,this,t),this.check()}rotateZ(t){return function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),l=Math.cos(n);t[0]=r*l+i*a,t[1]=i*l-r*a,t[2]=o*l+s*a,t[3]=s*l-o*a}(this,this,t),this.check()}scale(t){return sg(this,this,t),this.check()}slerp(t,e,n){let r,i,o;switch(arguments.length){case 1:({start:r=fg,target:i,ratio:o}=t);break;case 2:r=this,i=t,o=e;break;default:r=t,i=e,o=n}return rg(this,r,i,o),this.check()}transformVector4(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Jp;return function(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[0],a=n[1],l=n[2],c=n[3],u=c*r+a*o-l*i,d=c*i+l*r-s*o,h=c*o+s*i-a*r,f=-s*r-a*i-l*o;t[0]=u*c+f*-s+d*-l-h*-a,t[1]=d*c+f*-a+h*-s-u*-l,t[2]=h*c+f*-l+u*-a-d*-s,t[3]=e[3]}(e,t,this),De(e,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,e){return this.setAxisAngle(t,e)}premultiply(t){return this.multiplyLeft(t)}multiply(t){return this.multiplyRight(t)}}const gg=new on,mg=new on,yg=new on,vg=new on,bg=new on,_g=new on,wg=new on,xg=0,Sg=1,Ag=2,Eg=3,Tg=4,Pg=5,Cg=6,Ig=7,Mg=8;class kg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0,0,0,0,0,0];s(this,"center",void 0),s(this,"halfAxes",void 0),this.center=(new on).from(t),this.halfAxes=new Zp(e)}get halfSize(){const t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new on(t).len(),new on(e).len(),new on(n).len()]}get quaternion(){const t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),r=new on(t).normalize(),i=new on(e).normalize(),o=new on(n).normalize();return(new pg).fromMatrix3(new Zp([...r,...i,...o]))}fromCenterHalfSizeQuaternion(t,e,n){const r=new pg(n),i=(new Zp).fromQuaternion(r);return i[0]=i[0]*e[0],i[1]=i[1]*e[0],i[2]=i[2]*e[0],i[3]=i[3]*e[1],i[4]=i[4]*e[1],i[5]=i[5]*e[1],i[6]=i[6]*e[2],i[7]=i[7]*e[2],i[8]=i[8]*e[2],this.center=(new on).from(t),this.halfAxes=i,this}clone(){return new kg(this.center,this.halfAxes)}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}getBoundingSphere(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Gp;const e=this.halfAxes,n=e.getColumn(0,yg),r=e.getColumn(1,vg),i=e.getColumn(2,bg),o=gg.copy(n).add(r).add(i);return t.center.copy(this.center),t.radius=o.magnitude(),t}intersectPlane(t){const e=this.center,n=t.normal,r=this.halfAxes,i=n.x,o=n.y,s=n.z,a=Math.abs(i*r[xg]+o*r[Sg]+s*r[Ag])+Math.abs(i*r[Eg]+o*r[Tg]+s*r[Pg])+Math.abs(i*r[Cg]+o*r[Ig]+s*r[Mg]),l=n.dot(e)+t.distance;return l<=-a?Bp:l>=a?zp:Np}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const e=mg.from(t).subtract(this.center),n=this.halfAxes,r=n.getColumn(0,yg),i=n.getColumn(1,vg),o=n.getColumn(2,bg),s=r.magnitude(),a=i.magnitude(),l=o.magnitude();r.normalize(),i.normalize(),o.normalize();let c,u=0;return c=Math.abs(e.dot(r))-s,c>0&&(u+=c*c),c=Math.abs(e.dot(i))-a,c>0&&(u+=c*c),c=Math.abs(e.dot(o))-l,c>0&&(u+=c*c),u}computePlaneDistances(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[-0,-0],r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;const o=this.center,s=this.halfAxes,a=s.getColumn(0,yg),l=s.getColumn(1,vg),c=s.getColumn(2,bg),u=_g.copy(a).add(l).add(c).add(o),d=wg.copy(u).subtract(t);let h=e.dot(d);return r=Math.min(h,r),i=Math.max(h,i),u.copy(o).add(a).add(l).subtract(c),d.copy(u).subtract(t),h=e.dot(d),r=Math.min(h,r),i=Math.max(h,i),u.copy(o).add(a).subtract(l).add(c),d.copy(u).subtract(t),h=e.dot(d),r=Math.min(h,r),i=Math.max(h,i),u.copy(o).add(a).subtract(l).subtract(c),d.copy(u).subtract(t),h=e.dot(d),r=Math.min(h,r),i=Math.max(h,i),o.copy(u).subtract(a).add(l).add(c),d.copy(u).subtract(t),h=e.dot(d),r=Math.min(h,r),i=Math.max(h,i),o.copy(u).subtract(a).add(l).subtract(c),d.copy(u).subtract(t),h=e.dot(d),r=Math.min(h,r),i=Math.max(h,i),o.copy(u).subtract(a).subtract(l).add(c),d.copy(u).subtract(t),h=e.dot(d),r=Math.min(h,r),i=Math.max(h,i),o.copy(u).subtract(a).subtract(l).subtract(c),d.copy(u).subtract(t),h=e.dot(d),r=Math.min(h,r),i=Math.max(h,i),n[0]=r,n[1]=i,n}transform(t){this.center.transformAsPoint(t);const e=this.halfAxes.getColumn(0,yg);e.transformAsPoint(t);const n=this.halfAxes.getColumn(1,vg);n.transformAsPoint(t);const r=this.halfAxes.getColumn(2,bg);return r.transformAsPoint(t),this.halfAxes=new Zp([...e,...n,...r]),this}getTransform(){throw new Error("not implemented")}}const Og=new on,Lg=new on;class Rg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,1],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;s(this,"normal",void 0),s(this,"distance",void 0),this.normal=new on,this.distance=-0,this.fromNormalDistance(t,e)}fromNormalDistance(t,e){return je(Number.isFinite(e)),this.normal.from(t).normalize(),this.distance=e,this}fromPointNormal(t,e){t=Og.from(t),this.normal.from(e).normalize();const n=-this.normal.dot(t);return this.distance=n,this}fromCoefficients(t,e,n,r){return this.normal.set(t,e,n),je(Fe(this.normal.len(),1)),this.distance=r,this}clone(){return new Rg(this.normal,this.distance)}equals(t){return Fe(this.distance,t.distance)&&Fe(this.normal,t.normal)}getPointDistance(t){return this.normal.dot(t)+this.distance}transform(t){const e=Lg.copy(this.normal).transformAsVector(t).normalize(),n=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(n,e)}projectPointOntoPlane(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];t=Og.from(t);const n=this.getPointDistance(t),r=Lg.copy(this.normal).scale(n);return t.subtract(r).to(e)}}const Fg=[new on([1,0,0]),new on([0,1,0]),new on([0,0,1])],Bg=new on,Ng=new on;new Rg(new on(1,0,0),0);class zg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];s(this,"planes",void 0),this.planes=t}fromBoundingSphere(t){this.planes.length=2*Fg.length;const e=t.center,n=t.radius;let r=0;for(const i of Fg){let t=this.planes[r],o=this.planes[r+1];t||(t=this.planes[r]=new Rg),o||(o=this.planes[r+1]=new Rg);const s=Bg.copy(i).scale(-n).add(e);i.dot(s);t.fromPointNormal(s,i);const a=Bg.copy(i).scale(n).add(e),l=Ng.copy(i).negate();l.dot(a);o.fromPointNormal(a,l),r+=2}return this}computeVisibility(t){let e=zp;for(const n of this.planes){switch(t.intersectPlane(n)){case Bp:return Bp;case Np:e=Np}}return e}computeVisibilityWithPlaneMask(t,e){if(je(Number.isFinite(e),"parentPlaneMask is required."),e===zg.MASK_OUTSIDE||e===zg.MASK_INSIDE)return e;let n=zg.MASK_INSIDE;const r=this.planes;for(let i=0;i<this.planes.length;++i){const o=i<31?1<<i:0;if(i<31&&0===(e&o))continue;const s=r[i],a=t.intersectPlane(s);if(a===Bp)return zg.MASK_OUTSIDE;a===Np&&(n|=o)}return n}}s(zg,"MASK_OUTSIDE",4294967295),s(zg,"MASK_INSIDE",0),s(zg,"MASK_INDETERMINATE",2147483647);new on,new on,new on,new on,new on;new on,new on,new on,new on,new on,new on,new on,new on,new on,new on,new on,new on,Math.PI;const Dg={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI},jg=new Zp,Ug=new Zp,Vg=new Zp,Wg=new Zp,Gg=new Zp;function Hg(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Dg.EPSILON20;let r=0,i=0;const o=Ug,s=Vg;o.identity(),s.copy(t);const a=n*function(t){let e=0;for(let n=0;n<9;++n){const r=t[n];e+=r*r}return Math.sqrt(e)}(s);for(;i<10&&Xg(s)>a;)Zg(s,Wg),Gg.copy(Wg).transpose(),s.multiplyRight(Wg),s.multiplyLeft(Gg),o.multiplyRight(Wg),++r>2&&(++i,r=0);return e.unitary=o.toTarget(e.unitary),e.diagonal=s.toTarget(e.diagonal),e}const qg=[1,0,0],Yg=[2,2,1];function Xg(t){let e=0;for(let n=0;n<3;++n){const r=t[jg.getElementIndex(Yg[n],qg[n])];e+=2*r*r}return Math.sqrt(e)}function Zg(t,e){const n=Dg.EPSILON15;let r=0,i=1;for(let c=0;c<3;++c){const e=Math.abs(t[jg.getElementIndex(Yg[c],qg[c])]);e>r&&(i=c,r=e)}const o=qg[i],s=Yg[i];let a=1,l=0;if(Math.abs(t[jg.getElementIndex(s,o)])>n){const e=(t[jg.getElementIndex(s,s)]-t[jg.getElementIndex(o,o)])/2/t[jg.getElementIndex(s,o)];let n;n=e<0?-1/(-e+Math.sqrt(1+e*e)):1/(e+Math.sqrt(1+e*e)),a=1/Math.sqrt(1+n*n),l=n*a}return Zp.IDENTITY.to(e),e[jg.getElementIndex(o,o)]=e[jg.getElementIndex(s,s)]=a,e[jg.getElementIndex(s,o)]=l,e[jg.getElementIndex(o,s)]=-l,e}const Kg=new on,$g=new on,Qg=new on,Jg=new on,tm=new on,em=new Zp,nm={diagonal:new Zp,unitary:new Zp};const rm=512,im=3,om=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],sm=om.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),am=sm.concat([[.25,.5],[.75,.5]]);class lm{constructor(t,e,n){s(this,"x",void 0),s(this,"y",void 0),s(this,"z",void 0),s(this,"childVisible",void 0),s(this,"selected",void 0),s(this,"_children",void 0),this.x=t,this.y=e,this.z=n}get children(){if(!this._children){const t=2*this.x,e=2*this.y,n=this.z+1;this._children=[new lm(t,e,n),new lm(t,e+1,n),new lm(t+1,e,n),new lm(t+1,e+1,n)]}return this._children}update(t){const{viewport:e,cullingVolume:n,elevationBounds:r,minZ:i,maxZ:o,bounds:s,offset:a,project:l}=t,c=this.getBoundingVolume(r,a,l);if(s&&!this.insideBounds(s))return!1;if(n.computeVisibility(c)<0)return!1;if(!this.childVisible){let{z:t}=this;if(t<o&&t>=i){const n=c.distanceTo(e.cameraPosition)*e.scale/e.height;t+=Math.floor(Math.log2(n))}if(t>=o)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const u of this.children)u.update(t);return!0}getSelected(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(this.selected&&t.push(this),this._children)for(const e of this._children)e.getSelected(t);return t}insideBounds(t){let[e,n,r,i]=t;const o=Math.pow(2,this.z),s=rm/o;return this.x*s<r&&this.y*s<i&&(this.x+1)*s>e&&(this.y+1)*s>n}getBoundingVolume(t,e,n){if(n){const e=this.z<1?am:this.z<2?sm:om,r=[];for(const i of e){const e=ym(this.x+i[0],this.y+i[1],this.z);e[2]=t[0],r.push(n(e)),t[0]!==t[1]&&(e[2]=t[1],r.push(n(e)))}return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kg;if(!t||0===t.length)return e.halfAxes=new Zp([0,0,0,0,0,0,0,0,0]),e.center=new on,e;const n=t.length,r=new on(0,0,0);for(const E of t)r.add(E);const i=1/n;r.multiplyByScalar(i);let o=0,s=0,a=0,l=0,c=0,u=0;for(const E of t){const t=Kg.copy(E).subtract(r);o+=t.x*t.x,s+=t.x*t.y,a+=t.x*t.z,l+=t.y*t.y,c+=t.y*t.z,u+=t.z*t.z}o*=i,s*=i,a*=i,l*=i,c*=i,u*=i;const d=em;d[0]=o,d[1]=s,d[2]=a,d[3]=s,d[4]=l,d[5]=c,d[6]=a,d[7]=c,d[8]=u;const{unitary:h}=Hg(d,nm),f=e.halfAxes.copy(h);let p=f.getColumn(0,Qg),g=f.getColumn(1,Jg),m=f.getColumn(2,tm),y=-Number.MAX_VALUE,v=-Number.MAX_VALUE,b=-Number.MAX_VALUE,_=Number.MAX_VALUE,w=Number.MAX_VALUE,x=Number.MAX_VALUE;for(const E of t)Kg.copy(E),y=Math.max(Kg.dot(p),y),v=Math.max(Kg.dot(g),v),b=Math.max(Kg.dot(m),b),_=Math.min(Kg.dot(p),_),w=Math.min(Kg.dot(g),w),x=Math.min(Kg.dot(m),x);p=p.multiplyByScalar(.5*(_+y)),g=g.multiplyByScalar(.5*(w+v)),m=m.multiplyByScalar(.5*(x+b)),e.center.copy(p).add(g).add(m);const S=$g.set(y-_,v-w,b-x).multiplyByScalar(.5),A=new Zp([S[0],0,0,0,S[1],0,0,0,S[2]]);return e.halfAxes.multiplyRight(A),e}(r)}const r=Math.pow(2,this.z),i=rm/r,o=this.x*i+e*rm,s=rm-(this.y+1)*i;return new Up([o,s,t[0]],[o+i,s+i,t[1]])}}const cm=512,um=[-1/0,-1/0,1/0,1/0],dm={type:"object",value:null,validate:(t,e)=>e.optional&&null===t||"string"===typeof t||Array.isArray(t)&&t.every((t=>"string"===typeof t)),equal:(t,e)=>{if(t===e)return!0;if(!Array.isArray(t)||!Array.isArray(e))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}};function hm(t,e){const n=[e.transformAsPoint([t[0],t[1]]),e.transformAsPoint([t[2],t[1]]),e.transformAsPoint([t[0],t[3]]),e.transformAsPoint([t[2],t[3]])];return[Math.min(...n.map((t=>t[0]))),Math.min(...n.map((t=>t[1]))),Math.max(...n.map((t=>t[0]))),Math.max(...n.map((t=>t[1])))]}function fm(t,e){if(!t||!t.length)return null;const{index:n,id:r}=e;if(Array.isArray(t)){t=t[(i=r,Math.abs(i.split("").reduce(((t,e)=>(t<<5)-t+e.charCodeAt(0)|0),0))%t.length)]}var i;let o=t;for(const s of Object.keys(n)){const t=new RegExp("{".concat(s,"}"),"g");o=o.replace(t,String(n[s]))}return Number.isInteger(n.y)&&Number.isInteger(n.z)&&(o=o.replace(/\{-y\}/g,String(Math.pow(2,n.z)-n.y-1))),o}function pm(t){let{viewport:e,z:n=0,cullRect:r}=t;return(e.subViewports||[e]).map((t=>gm(t,n||0,r)))}function gm(t,e,n){if(!Array.isArray(e)){const r=n.x-t.x,i=n.y-t.y,{width:o,height:s}=n,a={targetZ:e},l=t.unproject([r,i],a),c=t.unproject([r+o,i],a),u=t.unproject([r,i+s],a),d=t.unproject([r+o,i+s],a);return[Math.min(l[0],c[0],u[0],d[0]),Math.min(l[1],c[1],u[1],d[1]),Math.max(l[0],c[0],u[0],d[0]),Math.max(l[1],c[1],u[1],d[1])]}const r=gm(t,e[0],n),i=gm(t,e[1],n);return[Math.min(r[0],i[0]),Math.min(r[1],i[1]),Math.max(r[2],i[2]),Math.max(r[3],i[3])]}function mm(t,e){return Math.pow(2,t)*cm/e}function ym(t,e,n){const r=mm(n,cm),i=t/r*360-180,o=Math.PI-2*Math.PI*e/r;return[i,180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)))]}function vm(t,e,n,r){const i=mm(n,r);return[t/i*cm,e/i*cm]}function bm(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:cm;if(t.isGeospatial){const[t,i]=ym(e,n,r),[o,s]=ym(e+1,n+1,r);return{west:t,north:i,east:o,south:s}}const[o,s]=vm(e,n,r,i),[a,l]=vm(e+1,n+1,r,i);return{left:o,top:s,right:a,bottom:l}}function _m(t,e,n,r,i){const o=function(t,e,n){let r;if(e&&2===e.length){const[n,i]=e,o=t.getBounds({z:n}),s=t.getBounds({z:i});r=[Math.min(o[0],s[0]),Math.min(o[1],s[1]),Math.max(o[2],s[2]),Math.max(o[3],s[3])]}else r=t.getBounds();return t.isGeospatial?[Math.max(r[0],n[0]),Math.max(r[1],n[1]),Math.min(r[2],n[2]),Math.min(r[3],n[3])]:[Math.max(Math.min(r[0],n[2]),n[0]),Math.max(Math.min(r[1],n[3]),n[1]),Math.min(Math.max(r[2],n[0]),n[2]),Math.min(Math.max(r[3],n[1]),n[3])]}(t,null,r),s=mm(e,n),[a,l,c,u]=function(t,e,n){if(n)return hm(t,n).map((t=>t*e/cm));return t.map((t=>t*e/cm))}(o,s,i),d=[];for(let h=Math.floor(a);h<c;h++)for(let t=Math.floor(l);t<u;t++)d.push({x:h,y:t,z:e});return d}function wm(t){let{viewport:e,maxZoom:n,minZoom:r,zRange:i,extent:o,tileSize:s=cm,modelMatrix:a,modelMatrixInverse:l,zoomOffset:c=0}=t,u=e.isGeospatial?Math.round(e.zoom+Math.log2(cm/s))+c:Math.ceil(e.zoom)+c;if("number"===typeof r&&Number.isFinite(r)&&u<r){if(!o)return[];u=r}"number"===typeof n&&Number.isFinite(n)&&u>n&&(u=n);let d=o;return a&&l&&o&&!e.isGeospatial&&(d=hm(o,a)),e.isGeospatial?function(t,e,n,r){const i=t instanceof Rp&&t.resolution?t.projectPosition:null,o=Object.values(t.getFrustumPlanes()).map((t=>{let{normal:e,distance:n}=t;return new Rg(e.clone().negate(),n)})),s=new zg(o),a=t.distanceScales.unitsPerMeter[2],l=n&&n[0]*a||0,c=n&&n[1]*a||0,u=t instanceof La&&t.pitch<=60?e:0;if(r){const[t,e,n,i]=r,o=$n([t,i]),s=$n([n,e]);r=[o[0],rm-o[1],s[0],rm-s[1]]}const d=new lm(0,0,0),h={viewport:t,project:i,cullingVolume:s,elevationBounds:[l,c],minZ:u,maxZ:e,bounds:r,offset:0};if(d.update(h),t instanceof La&&t.subViewports&&t.subViewports.length>1){for(h.offset=-1;d.update(h)&&!(--h.offset<-im););for(h.offset=1;d.update(h)&&!(++h.offset>im););}return d.getSelected()}(e,u,i,o):_m(e,u,s,d||um,l)}function xm(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}const Sm=2,Am="best-available",Em={[Am]:function(t){for(const e of t)e.state=0;for(const e of t)e.isSelected&&!Pm(e)&&Cm(e);for(const e of t)e.isVisible=Boolean(e.state&Sm)},"no-overlap":function(t){for(const n of t)n.state=0;for(const n of t)n.isSelected&&Pm(n);const e=Array.from(t).sort(((t,e)=>t.zoom-e.zoom));for(const n of e)if(n.isVisible=Boolean(n.state&Sm),n.children&&(n.isVisible||1&n.state))for(const t of n.children)t.state=1;else n.isSelected&&Cm(n)},never:()=>{}},Tm={extent:null,tileSize:512,maxZoom:null,minZoom:null,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:"best-available",zRange:null,maxRequests:6,zoomOffset:0,onTileLoad:()=>{},onTileUnload:()=>{},onTileError:()=>{}};function Pm(t){let e=t;for(;e;){if(e.isLoaded||e.content)return e.state|=Sm,!0;e=e.parent}return!1}function Cm(t){for(const e of t.children)e.isLoaded||e.content?e.state|=Sm:Cm(e)}const Im={TilesetClass:class{constructor(t){s(this,"opts",void 0),s(this,"_requestScheduler",void 0),s(this,"_cache",void 0),s(this,"_dirty",void 0),s(this,"_tiles",void 0),s(this,"_cacheByteSize",void 0),s(this,"_viewport",void 0),s(this,"_zRange",void 0),s(this,"_selectedTiles",void 0),s(this,"_frameNumber",void 0),s(this,"_modelMatrix",void 0),s(this,"_modelMatrixInverse",void 0),s(this,"_maxZoom",void 0),s(this,"_minZoom",void 0),s(this,"onTileLoad",void 0),s(this,"_getCullBounds",function(t){let e,n={};return r=>{for(const i in r)if(!xm(r[i],n[i])){e=t(r),n=r;break}return e}}(pm)),this.opts={...Tm,...t},this.onTileLoad=t=>{var e,n;null===(e=(n=this.opts).onTileLoad)||void 0===e||e.call(n,t),this.opts.maxCacheByteSize&&(this._cacheByteSize+=t.byteLength,this._resizeCache())},this._requestScheduler=new Pp({maxRequests:t.maxRequests,throttleRequests:Boolean(t.maxRequests&&t.maxRequests>0)}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._zRange=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new Rn,this._modelMatrixInverse=new Rn,this.setOptions(t)}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return null!==this._selectedTiles&&this._selectedTiles.every((t=>t.isLoaded))}get needsReload(){return null!==this._selectedTiles&&this._selectedTiles.some((t=>t.needsReload))}setOptions(t){Object.assign(this.opts,t),Number.isFinite(t.maxZoom)&&(this._maxZoom=Math.floor(t.maxZoom)),Number.isFinite(t.minZoom)&&(this._minZoom=Math.ceil(t.minZoom))}finalize(){for(const t of this._cache.values())t.isLoading&&t.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const t of this._cache.keys()){const e=this._cache.get(t);this._selectedTiles&&this._selectedTiles.includes(e)?e.setNeedsReload():this._cache.delete(t)}}update(t){let{zRange:e,modelMatrix:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{zRange:null,modelMatrix:null};const r=n?new Rn(n):new Rn,i=!r.equals(this._modelMatrix);if(this._viewport&&t.equals(this._viewport)&&Fe(this._zRange,e)&&!i)this.needsReload&&(this._selectedTiles=this._selectedTiles.map((t=>this._getTile(t.index,!0))));else{i&&(this._modelMatrixInverse=r.clone().invert(),this._modelMatrix=r),this._viewport=t,this._zRange=e;const n=this.getTileIndices({viewport:t,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:e,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=n.map((t=>this._getTile(t,!0))),this._dirty&&this._rebuildTree()}const o=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),o&&this._frameNumber++,this._frameNumber}isTileVisible(t,e){if(!t.isVisible)return!1;if(e&&this._viewport){const n=this._getCullBounds({viewport:this._viewport,z:this._zRange,cullRect:e}),{bbox:r}=t;for(const[t,e,i,o]of n){let n;if("west"in r)n=r.west<i&&r.east>t&&r.south<o&&r.north>e;else{const s=Math.min(r.top,r.bottom),a=Math.max(r.top,r.bottom);n=r.left<i&&r.right>t&&s<o&&a>e}if(n)return!0}return!1}return!0}getTileIndices(t){let{viewport:e,maxZoom:n,minZoom:r,zRange:i,modelMatrix:o,modelMatrixInverse:s}=t;const{tileSize:a,extent:l,zoomOffset:c}=this.opts;return wm({viewport:e,maxZoom:n,minZoom:r,zRange:i,tileSize:a,extent:l,modelMatrix:o,modelMatrixInverse:s,zoomOffset:c})}getTileId(t){return"".concat(t.x,"-").concat(t.y,"-").concat(t.z)}getTileZoom(t){return t.z}getTileMetadata(t){const{tileSize:e}=this.opts;return{bbox:bm(this._viewport,t.x,t.y,t.z,e)}}getParentIndex(t){return{x:Math.floor(t.x/2),y:Math.floor(t.y/2),z:t.z-1}}updateTileStates(){const t=this.opts.refinementStrategy||Am,e=new Array(this._cache.size);let n=0;for(const r of this._cache.values())e[n++]=r.isVisible,r.isSelected=!1,r.isVisible=!1;for(const r of this._selectedTiles)r.isSelected=!0,r.isVisible=!0;("function"===typeof t?t:Em[t])(Array.from(this._cache.values())),n=0;for(const r of this._cache.values())if(e[n++]!==r.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:t=0}=this.opts,e=[];let n=0;for(const r of this._cache.values())r.isLoading&&(n++,r.isSelected||r.isVisible||e.push(r));for(;t>0&&n>t&&e.length>0;){e.shift().abort(),n--}}_rebuildTree(){const{_cache:t}=this;for(const e of t.values())e.parent=null,e.children&&(e.children.length=0);for(const e of t.values()){const t=this._getNearestAncestor(e);e.parent=t,null!==t&&void 0!==t&&t.children&&t.children.push(e)}}_resizeCache(){const{_cache:t,opts:e}=this,n=e.maxCacheSize||(e.maxCacheByteSize?1/0:5*this.selectedTiles.length),r=e.maxCacheByteSize||1/0;if(t.size>n||this._cacheByteSize>r){for(const[s,a]of t){var i,o;if(!a.isVisible&&!a.isSelected)this._cacheByteSize-=e.maxCacheByteSize?a.byteLength:0,t.delete(s),null===(i=(o=this.opts).onTileUnload)||void 0===i||i.call(o,a);if(t.size<=n&&this._cacheByteSize<=r)break}this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort(((t,e)=>t.zoom-e.zoom)),this._dirty=!1)}_getTile(t,e){const n=this.getTileId(t);let r=this._cache.get(n),i=!1;return!r&&e?(r=new Cp(t),Object.assign(r,this.getTileMetadata(r.index)),Object.assign(r,{id:n,zoom:this.getTileZoom(r.index)}),i=!0,this._cache.set(n,r),this._dirty=!0):r&&r.needsReload&&(i=!0),r&&i&&r.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),r}_getNearestAncestor(t){const{_minZoom:e=0}=this;let n=t.index;for(;this.getTileZoom(n)>e;){n=this.getParentIndex(n);const t=this._getTile(n);if(t)return t}return null}},data:{type:"data",value:[]},dataComparator:dm.equal,renderSubLayers:{type:"function",value:t=>new Ep(t)},getTileData:{type:"function",optional:!0,value:null},onViewportLoad:{type:"function",optional:!0,value:null},onTileLoad:{type:"function",value:t=>{}},onTileUnload:{type:"function",value:t=>{}},onTileError:{type:"function",value:t=>console.error(t)},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:Am,zRange:null,maxRequests:6,zoomOffset:0};class Mm extends _h{constructor(){super(...arguments),s(this,"state",void 0)}initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var t,e;null===(t=this.state)||void 0===t||null===(e=t.tileset)||void 0===e||e.finalize()}get isLoaded(){var t,e,n;return Boolean(null===(t=this.state)||void 0===t||null===(e=t.tileset)||void 0===e||null===(n=e.selectedTiles)||void 0===n?void 0:n.every((t=>t.isLoaded&&t.layers&&t.layers.every((t=>t.isLoaded)))))}shouldUpdateState(t){let{changeFlags:e}=t;return e.somethingChanged}updateState(t){let{changeFlags:e}=t,{tileset:n}=this.state;const r=e.propsOrDataChanged||e.updateTriggersChanged,i=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getTileData);n?r&&(n.setOptions(this._getTilesetOptions()),i?n.reloadAll():n.tiles.forEach((t=>{t.layers=null}))):(n=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:n})),this._updateTileset()}_getTilesetOptions(){const{tileSize:t,maxCacheSize:e,maxCacheByteSize:n,refinementStrategy:r,extent:i,maxZoom:o,minZoom:s,maxRequests:a,zoomOffset:l}=this.props;return{maxCacheSize:e,maxCacheByteSize:n,maxZoom:o,minZoom:s,tileSize:t,refinementStrategy:r,extent:i,maxRequests:a,zoomOffset:l,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const t=this.state.tileset,{zRange:e,modelMatrix:n}=this.props,r=t.update(this.context.viewport,{zRange:e,modelMatrix:n}),{isLoaded:i}=t,o=this.state.isLoaded!==i,s=this.state.frameNumber!==r;i&&(o||s)&&this._onViewportLoad(),s&&this.setState({frameNumber:r}),this.state.isLoaded=i}_onViewportLoad(){const{tileset:t}=this.state,{onViewportLoad:e}=this.props;e&&e(t.selectedTiles)}_onTileLoad(t){this.props.onTileLoad(t),t.layers=null,this.setNeedsUpdate()}_onTileError(t,e){this.props.onTileError(t),e.layers=null,this.setNeedsUpdate()}_onTileUnload(t){this.props.onTileUnload(t)}getTileData(t){const{data:e,getTileData:n,fetch:r}=this.props,{signal:i}=t;return t.url="string"===typeof e||Array.isArray(e)?fm(e,t):null,n?n(t):r&&t.url?r(t.url,{propName:"data",layer:this,signal:i}):null}renderSubLayers(t){return this.props.renderSubLayers(t)}getSubLayerPropsByTile(t){return null}getPickingInfo(t){let{info:e,sourceLayer:n}=t;const r=n.props.tile;return e.picked&&(e.tile=r),e.sourceTile=r,e}_updateAutoHighlight(t){const e=t.sourceTile;if(e&&e.layers)for(const n of e.layers)n.updateAutoHighlight(t)}renderLayers(){return this.state.tileset.tiles.map((t=>{const e=this.getSubLayerPropsByTile(t);if(t.isLoaded||t.content)if(t.layers)e&&t.layers[0]&&Object.keys(e).some((n=>t.layers[0].props[n]!==e[n]))&&(t.layers=t.layers.map((t=>t.clone(e))));else{const n=this.renderSubLayers({...this.props,...this.getSubLayerProps({id:t.id,updateTriggers:this.props.updateTriggers}),data:t.content,_offset:0,tile:t});t.layers=Y(n,Boolean).map((n=>n.clone({tile:t,...e})))}else;return t.layers}))}filterSubLayer(t){let{layer:e,cullRect:n}=t;const{tile:r}=e.props;return this.state.tileset.isTileVisible(r,n)}}s(Mm,"defaultProps",Im),s(Mm,"layerName","TileLayer");const km=(new Rn).lookAt({eye:[0,0,1]});function Om(t){let{width:e,height:n,near:r,far:i,padding:o}=t,s=-e/2,a=e/2,l=-n/2,c=n/2;if(o){const{left:t=0,right:r=0,top:i=0,bottom:u=0}=o,d=Le((t+e-r)/2,0,e)-e/2,h=Le((i+n-u)/2,0,n)-n/2;s-=d,a-=d,l+=h,c+=h}return(new Rn).ortho({left:s,right:a,bottom:l,top:c,near:r,far:i})}class Lm extends br{constructor(t){const{width:e,height:n,near:r=.1,far:i=1e3,zoom:o=0,target:s=[0,0,0],padding:a=null,flipY:l=!0}=t,c=Array.isArray(o)?o[0]:o,u=Array.isArray(o)?o[1]:o,d=Math.min(c,u),h=Math.pow(2,d);let f;if(c!==u){const t=Math.pow(2,c),e=Math.pow(2,u);f={unitsPerMeter:[t/h,e/h,1],metersPerUnit:[h/t,h/e,1]}}super({...t,longitude:void 0,position:s,viewMatrix:km.clone().scale([h,h*(l?-1:1),h]),projectionMatrix:Om({width:e||1,height:n||1,padding:a,near:r,far:i}),zoom:d,distanceScales:f})}projectFlat(t){let[e,n]=t;const{unitsPerMeter:r}=this.distanceScales;return[e*r[0],n*r[1]]}unprojectFlat(t){let[e,n]=t;const{metersPerUnit:r}=this.distanceScales;return[e*r[0],n*r[1]]}panByPosition(t,e){const n=ar(e,this.pixelUnprojectionMatrix),r=wn([],this.projectFlat(t),xn([],n)),i=wn([],this.center,r);return{target:this.unprojectFlat(i)}}}class Rm extends el{constructor(t){const{width:e,height:n,rotationX:r=0,rotationOrbit:i=0,target:o=[0,0,0],zoom:a=0,minRotationX:l=-90,maxRotationX:c=90,minZoom:u=-1/0,maxZoom:d=1/0,startPanPosition:h,startRotatePos:f,startRotationX:p,startRotationOrbit:g,startZoomPosition:m,startZoom:y}=t;super({width:e,height:n,rotationX:r,rotationOrbit:i,target:o,zoom:a,minRotationX:l,maxRotationX:c,minZoom:u,maxZoom:d},{startPanPosition:h,startRotatePos:f,startRotationX:p,startRotationOrbit:g,startZoomPosition:m,startZoom:y}),s(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart(t){let{pos:e}=t;return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan(t){let{pos:e,startPosition:n}=t;const r=this.getState().startPanPosition||n;if(!r)return this;const i=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(i)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart(t){let{pos:e}=t;return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate(t){let{pos:e,deltaAngleX:n=0,deltaAngleY:r=0}=t;const{startRotatePos:i,startRotationX:o,startRotationOrbit:s}=this.getState(),{width:a,height:l}=this.getViewportProps();if(!i||void 0===o||void 0===s)return this;let c;if(e){let t=(e[0]-i[0])/a;(o<-90||o>90)&&(t*=-1),c={rotationX:o+180*((e[1]-i[1])/l),rotationOrbit:s+180*t}}else c={rotationX:o+r,rotationOrbit:s+n};return this._getUpdatedState(c)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(t){const e=t.getViewportProps(),n={...this.getViewportProps()},{rotationOrbit:r}=n;return Math.abs(r-e.rotationOrbit)>180&&(n.rotationOrbit=r<0?r+360:r-360),n}zoomStart(t){let{pos:e}=t;return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom(t){let{pos:e,startPos:n,scale:r}=t,{startZoom:i,startZoomPosition:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;const s=this._calculateNewZoom({scale:r,startZoom:i}),a=this.makeViewport({...this.getViewportProps(),zoom:s});return this._getUpdatedState({zoom:s,...a.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})}zoomOut(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})}moveLeft(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._panFromCenter([-t,0])}moveRight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._panFromCenter([t,0])}moveUp(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._panFromCenter([0,-t])}moveDown(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._panFromCenter([0,t])}rotateLeft(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-t})}rotateRight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+t})}rotateUp(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-t})}rotateDown(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+t})}_unproject(t){const e=this.makeViewport(this.getViewportProps());return t&&e.unproject(t)}_calculateNewZoom(t){let{scale:e,startZoom:n}=t;const{maxZoom:r,minZoom:i}=this.getViewportProps();void 0===n&&(n=this.getViewportProps().zoom);return Le(n+Math.log2(e),i,r)}_panFromCenter(t){const{width:e,height:n,target:r}=this.getViewportProps();return this.pan({startPosition:r,pos:[e/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}applyConstraints(t){const{maxZoom:e,minZoom:n,zoom:r,maxRotationX:i,minRotationX:o,rotationOrbit:s}=t;return t.zoom=Array.isArray(r)?[Le(r[0],n,e),Le(r[1],n,e)]:Le(r,n,e),t.rotationX=Le(t.rotationX,o,i),(s<-180||s>180)&&(t.rotationOrbit=function(t,e){const n=t%e;return n<0?e+n:n}(s+180,360)-180),t}}class Fm extends Rm{constructor(t){super(t),s(this,"zoomAxis",void 0),this.zoomAxis=t.zoomAxis||"all"}_calculateNewZoom(t){let{scale:e,startZoom:n}=t;const{maxZoom:r,minZoom:i}=this.getViewportProps();void 0===n&&(n=this.getViewportProps().zoom);let o=Math.log2(e);if(Array.isArray(n)){let[t,e]=n;switch(this.zoomAxis){case"X":t=Le(t+o,i,r);break;case"Y":e=Le(e+o,i,r);break;default:let n=Math.min(t+o,e+o);n<i&&(o+=i-n),n=Math.max(t+o,e+o),n>r&&(o+=r-n),t+=o,e+=o}return[t,e]}return Le(n+o,i,r)}}class Bm extends tl{constructor(){super(...arguments),s(this,"ControllerState",Fm),s(this,"transition",{transitionDuration:300,transitionInterpolator:new Ga(["target","zoom"])}),s(this,"dragMode","pan")}_onPanRotate(){return!1}}class Nm extends Oa{get ViewportType(){return Lm}get ControllerType(){return Bm}}s(Nm,"displayName","OrthographicView");const zm=9728,Dm=10240,jm=10241;var Um=n(8168),Vm=n(8587);function Wm(t){var e,n,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Wm(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}const Gm=function(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Wm(t))&&(r&&(r+=" "),r+=e);return r};function Hm(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};return Object.keys(t).forEach((i=>{r[i]=t[i].reduce(((t,r)=>{if(r){const i=e(r);""!==i&&t.push(i),n&&n[r]&&t.push(n[r])}return t}),[]).join(" ")})),r}let qm=0;const Ym=e["useId".toString()];function Xm(e){if(void 0!==Ym){const t=Ym();return null!=e?e:t}return function(e){const[n,r]=t.useState(e),i=e||n;return t.useEffect((()=>{null==n&&(qm+=1,r("mui-".concat(qm)))}),[n]),i}(e)}var Zm=n(8052),Km=n(6632),$m=n(3216),Qm=n(7758),Jm=n(8812),ty=n(8280);var ey=n(7266);const ny={black:"#000",white:"#fff"},ry={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},iy={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},oy={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},sy={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},ay={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},ly={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},cy={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},uy=["mode","contrastThreshold","tonalOffset"],dy={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:ny.white,default:ny.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},hy={text:{primary:ny.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:ny.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function fy(t,e,n,r){const i=r.light||r,o=r.dark||1.5*r;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:"light"===e?t.light=(0,ey.a)(t.main,i):"dark"===e&&(t.dark=(0,ey.e$)(t.main,o)))}function py(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,i=(0,Vm.A)(t,uy),o=t.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ay[200],light:ay[50],dark:ay[400]}:{main:ay[700],light:ay[400],dark:ay[800]}}(e),s=t.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:iy[200],light:iy[50],dark:iy[400]}:{main:iy[500],light:iy[300],dark:iy[700]}}(e),a=t.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:oy[500],light:oy[300],dark:oy[700]}:{main:oy[700],light:oy[400],dark:oy[800]}}(e),l=t.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ly[400],light:ly[300],dark:ly[700]}:{main:ly[700],light:ly[500],dark:ly[900]}}(e),c=t.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:cy[400],light:cy[300],dark:cy[700]}:{main:cy[800],light:cy[500],dark:cy[900]}}(e),u=t.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:sy[400],light:sy[300],dark:sy[700]}:{main:"#ed6c02",light:sy[500],dark:sy[900]}}(e);function d(t){return(0,ey.eM)(t,hy.text.primary)>=n?hy.text.primary:dy.text.primary}const h=t=>{let{color:e,name:n,mainShade:i=500,lightShade:o=300,darkShade:s=700}=t;if(e=(0,Um.A)({},e),!e.main&&e[i]&&(e.main=e[i]),!e.hasOwnProperty("main"))throw new Error((0,Km.A)(11,n?" (".concat(n,")"):"",i));if("string"!==typeof e.main)throw new Error((0,Km.A)(12,n?" (".concat(n,")"):"",JSON.stringify(e.main)));return fy(e,"light",o,r),fy(e,"dark",s,r),e.contrastText||(e.contrastText=d(e.main)),e},f={dark:hy,light:dy};return(0,$m.A)((0,Um.A)({common:(0,Um.A)({},ny),mode:e,primary:h({color:o,name:"primary"}),secondary:h({color:s,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:a,name:"error"}),warning:h({color:u,name:"warning"}),info:h({color:l,name:"info"}),success:h({color:c,name:"success"}),grey:ry,contrastThreshold:n,getContrastText:d,augmentColor:h,tonalOffset:r},f[e]),i)}const gy=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const my={textTransform:"uppercase"},yy='"Roboto", "Helvetica", "Arial", sans-serif';function vy(t,e){const n="function"===typeof e?e(t):e,{fontFamily:r=yy,fontSize:i=14,fontWeightLight:o=300,fontWeightRegular:s=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:d}=n,h=(0,Vm.A)(n,gy);const f=i/14,p=d||(t=>"".concat(t/c*f,"rem")),g=(t,e,n,i,o)=>{return(0,Um.A)({fontFamily:r,fontWeight:t,fontSize:p(e),lineHeight:n},r===yy?{letterSpacing:"".concat((s=i/e,Math.round(1e5*s)/1e5),"em")}:{},o,u);var s},m={h1:g(o,96,1.167,-1.5),h2:g(o,60,1.2,-.5),h3:g(s,48,1.167,0),h4:g(s,34,1.235,.25),h5:g(s,24,1.334,0),h6:g(a,20,1.6,.15),subtitle1:g(s,16,1.75,.15),subtitle2:g(a,14,1.57,.1),body1:g(s,16,1.5,.15),body2:g(s,14,1.43,.15),button:g(a,14,1.75,.4,my),caption:g(s,12,1.66,.4),overline:g(s,12,2.66,1,my),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,$m.A)((0,Um.A)({htmlFontSize:c,pxToRem:p,fontFamily:r,fontSize:i,fontWeightLight:o,fontWeightRegular:s,fontWeightMedium:a,fontWeightBold:l},m),h,{clone:!1})}function by(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const _y=["none",by(0,2,1,-1,0,1,1,0,0,1,3,0),by(0,3,1,-2,0,2,2,0,0,1,5,0),by(0,3,3,-2,0,3,4,0,0,1,8,0),by(0,2,4,-1,0,4,5,0,0,1,10,0),by(0,3,5,-1,0,5,8,0,0,1,14,0),by(0,3,5,-1,0,6,10,0,0,1,18,0),by(0,4,5,-2,0,7,10,1,0,2,16,1),by(0,5,5,-3,0,8,10,1,0,3,14,2),by(0,5,6,-3,0,9,12,1,0,3,16,2),by(0,6,6,-3,0,10,14,1,0,4,18,3),by(0,6,7,-4,0,11,15,1,0,4,20,3),by(0,7,8,-4,0,12,17,2,0,5,22,4),by(0,7,8,-4,0,13,19,2,0,5,24,4),by(0,7,9,-4,0,14,21,2,0,5,26,4),by(0,8,9,-5,0,15,22,2,0,6,28,5),by(0,8,10,-5,0,16,24,2,0,6,30,5),by(0,8,11,-5,0,17,26,2,0,6,32,5),by(0,9,11,-5,0,18,28,2,0,7,34,6),by(0,9,12,-6,0,19,29,2,0,7,36,6),by(0,10,13,-6,0,20,31,3,0,8,38,7),by(0,10,13,-6,0,21,33,3,0,8,40,7),by(0,10,14,-6,0,22,35,3,0,8,42,7),by(0,11,14,-7,0,23,36,3,0,9,44,8),by(0,11,15,-7,0,24,38,3,0,9,46,8)],wy=["duration","easing","delay"],xy={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Sy={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Ay(t){return"".concat(Math.round(t),"ms")}function Ey(t){if(!t)return 0;const e=t/36;return Math.round(10*(4+15*e**.25+e/5))}function Ty(t){const e=(0,Um.A)({},xy,t.easing),n=(0,Um.A)({},Sy,t.duration);return(0,Um.A)({getAutoHeightDuration:Ey,create:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:i=n.standard,easing:o=e.easeInOut,delay:s=0}=r;(0,Vm.A)(r,wy);return(Array.isArray(t)?t:[t]).map((t=>"".concat(t," ").concat("string"===typeof i?i:Ay(i)," ").concat(o," ").concat("string"===typeof s?s:Ay(s)))).join(",")}},t,{easing:e,duration:n})}const Py={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Cy=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Iy(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:e={},palette:n={},transitions:r={},typography:i={}}=t,o=(0,Vm.A)(t,Cy);if(t.vars)throw new Error((0,Km.A)(18));const s=py(n),a=(0,ty.A)(t);let l=(0,$m.A)(a,{mixins:(c=a.breakpoints,u=e,(0,Um.A)({toolbar:{minHeight:56,[c.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[c.up("sm")]:{minHeight:64}}},u)),palette:s,shadows:_y.slice(),typography:vy(s,i),transitions:Ty(r),zIndex:(0,Um.A)({},Py)});var c,u;l=(0,$m.A)(l,o);for(var d=arguments.length,h=new Array(d>1?d-1:0),f=1;f<d;f++)h[f-1]=arguments[f];return l=h.reduce(((t,e)=>(0,$m.A)(t,e)),l),l.unstable_sxConfig=(0,Um.A)({},Qm.A,null==o?void 0:o.unstable_sxConfig),l.unstable_sx=function(t){return(0,Jm.A)({sx:t,theme:this})},l}const My=Iy,ky=My(),Oy="$$material",Ly=t=>(0,Zm.MC)(t)&&"classes"!==t,Ry=Zm.MC,Fy=(0,Zm.Ay)({themeId:Oy,defaultTheme:ky,rootShouldForwardProp:Ly});function By(t,e){const n=(0,Um.A)({},e);return Object.keys(t).forEach((r=>{if(r.toString().match(/^(components|slots)$/))n[r]=(0,Um.A)({},t[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=t[r]||{},o=e[r];n[r]={},o&&Object.keys(o)?i&&Object.keys(i)?(n[r]=(0,Um.A)({},o),Object.keys(i).forEach((t=>{n[r][t]=By(i[t],o[t])}))):n[r]=o:n[r]=i}else void 0===n[r]&&(n[r]=t[r])})),n}function Ny(t){const{theme:e,name:n,props:r}=t;return e&&e.components&&e.components[n]&&e.components[n].defaultProps?By(e.components[n].defaultProps,r):r}var zy=n(5756);const Dy=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const n=t.useContext(zy.T);return n&&(r=n,0!==Object.keys(r).length)?n:e;var r},jy=(0,ty.A)();const Uy=function(){return Dy(arguments.length>0&&void 0!==arguments[0]?arguments[0]:jy)};function Vy(t){let{props:e,name:n}=t;return function(t){let{props:e,name:n,defaultTheme:r,themeId:i}=t,o=Uy(r);return i&&(o=o[i]||o),Ny({theme:o,name:n,props:e})}({props:e,name:n,defaultTheme:ky,themeId:Oy})}function Wy(t,e){"function"===typeof t?t(e):t&&(t.current=e)}function Gy(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.useMemo((()=>n.every((t=>null==t))?null:t=>{n.forEach((e=>{Wy(e,t)}))}),n)}function Hy(t){return t&&t.ownerDocument||document}function qy(t){return Hy(t).defaultView||window}const Yy="undefined"!==typeof window?t.useLayoutEffect:t.useEffect;function Xy(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(e),e=setTimeout((()=>{t.apply(this,i)}),n)}return r.clear=()=>{clearTimeout(e)},r}var Zy=n(579);const Ky=["onChange","maxRows","minRows","style","value"];function $y(t){return parseInt(t,10)||0}const Qy={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};const Jy=t.forwardRef((function(e,n){const{onChange:r,maxRows:i,minRows:o=1,style:s,value:a}=e,l=(0,Vm.A)(e,Ky),{current:c}=t.useRef(null!=a),u=t.useRef(null),d=Gy(n,u),h=t.useRef(null),f=t.useCallback((()=>{const t=u.current,n=qy(t).getComputedStyle(t);if("0px"===n.width)return{outerHeightStyle:0,overflowing:!1};const r=h.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");const s=n.boxSizing,a=$y(n.paddingBottom)+$y(n.paddingTop),l=$y(n.borderBottomWidth)+$y(n.borderTopWidth),c=r.scrollHeight;r.value="x";const d=r.scrollHeight;let f=c;o&&(f=Math.max(Number(o)*d,f)),i&&(f=Math.min(Number(i)*d,f)),f=Math.max(f,d);return{outerHeightStyle:f+("border-box"===s?a+l:0),overflowing:Math.abs(f-c)<=1}}),[i,o,e.placeholder]),p=t.useCallback((()=>{const t=f();if(void 0===(e=t)||null===e||0===Object.keys(e).length||0===e.outerHeightStyle&&!e.overflowing)return;var e;const n=u.current;n.style.height="".concat(t.outerHeightStyle,"px"),n.style.overflow=t.overflowing?"hidden":""}),[f]);Yy((()=>{const t=()=>{p()};let e;const n=Xy(t),r=u.current,i=qy(r);let o;return i.addEventListener("resize",n),"undefined"!==typeof ResizeObserver&&(o=new ResizeObserver(t),o.observe(r)),()=>{n.clear(),cancelAnimationFrame(e),i.removeEventListener("resize",n),o&&o.disconnect()}}),[f,p]),Yy((()=>{p()}));return(0,Zy.jsxs)(t.Fragment,{children:[(0,Zy.jsx)("textarea",(0,Um.A)({value:a,onChange:t=>{c||p(),r&&r(t)},ref:d,rows:o},l)),(0,Zy.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:h,tabIndex:-1,style:(0,Um.A)({},Qy,s,{paddingTop:0,paddingBottom:0})})]})}));function tv(t){return"string"===typeof t}function ev(t){let{props:e,states:n,muiFormControl:r}=t;return n.reduce(((t,n)=>(t[n]=e[n],r&&"undefined"===typeof e[n]&&(t[n]=r[n]),t)),{})}const nv=t.createContext(void 0);function rv(){return t.useContext(nv)}const iv=n(410).A,ov=Gy,sv=Yy;var av=n(869);const lv=function(t){let{styles:e,themeId:n,defaultTheme:r={}}=t;const i=Uy(r),o="function"===typeof e?e(n&&i[n]||i):e;return(0,Zy.jsx)(av.A,{styles:o})};const cv=function(t){return(0,Zy.jsx)(lv,(0,Um.A)({},t,{defaultTheme:ky,themeId:Oy}))};function uv(t){return null!=t&&!(Array.isArray(t)&&0===t.length)}function dv(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&(uv(t.value)&&""!==t.value||e&&uv(t.defaultValue)&&""!==t.defaultValue)}const hv=t=>t,fv=(()=>{let t=hv;return{configure(e){t=e},generate:e=>t(e),reset(){t=hv}}})(),pv={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function gv(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r=pv[e];return r?"".concat(n,"-").concat(r):"".concat(fv.generate(t),"-").concat(e)}function mv(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r={};return e.forEach((e=>{r[e]=gv(t,e,n)})),r}function yv(t){return gv("MuiInputBase",t)}const vv=mv("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),bv=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],_v=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,"small"===n.size&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e["color".concat(iv(n.color))],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},wv=(t,e)=>{const{ownerState:n}=t;return[e.input,"small"===n.size&&e.inputSizeSmall,n.multiline&&e.inputMultiline,"search"===n.type&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},xv=Fy("div",{name:"MuiInputBase",slot:"Root",overridesResolver:_v})((t=>{let{theme:e,ownerState:n}=t;return(0,Um.A)({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",["&.".concat(vv.disabled)]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},n.multiline&&(0,Um.A)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),Sv=Fy("input",{name:"MuiInputBase",slot:"Input",overridesResolver:wv})((t=>{let{theme:e,ownerState:n}=t;const r="light"===e.palette.mode,i=(0,Um.A)({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),o={opacity:"0 !important"},s=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5};return(0,Um.A)({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},["label[data-shrink=false] + .".concat(vv.formControl," &")]:{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},["&.".concat(vv.disabled)]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===n.size&&{paddingTop:1},n.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===n.type&&{MozAppearance:"textfield"})})),Av=(0,Zy.jsx)(cv,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Ev=t.forwardRef((function(e,n){var r;const i=Vy({props:e,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:s,autoFocus:a,className:l,components:c={},componentsProps:u={},defaultValue:d,disabled:h,disableInjectingGlobalStyles:f,endAdornment:p,fullWidth:g=!1,id:m,inputComponent:y="input",inputProps:v={},inputRef:b,maxRows:_,minRows:w,multiline:x=!1,name:S,onBlur:A,onChange:E,onClick:T,onFocus:P,onKeyDown:C,onKeyUp:I,placeholder:M,readOnly:k,renderSuffix:O,rows:L,slotProps:R={},slots:F={},startAdornment:B,type:N="text",value:z}=i,D=(0,Vm.A)(i,bv),j=null!=v.value?v.value:z,{current:U}=t.useRef(null!=j),V=t.useRef(),W=t.useCallback((t=>{0}),[]),G=ov(V,b,v.ref,W),[H,q]=t.useState(!1),Y=rv();const X=ev({props:i,muiFormControl:Y,states:["color","disabled","error","hiddenLabel","size","required","filled"]});X.focused=Y?Y.focused:H,t.useEffect((()=>{!Y&&h&&H&&(q(!1),A&&A())}),[Y,h,H,A]);const Z=Y&&Y.onFilled,K=Y&&Y.onEmpty,$=t.useCallback((t=>{dv(t)?Z&&Z():K&&K()}),[Z,K]);sv((()=>{U&&$({value:j})}),[j,$,U]);t.useEffect((()=>{$(V.current)}),[]);let Q=y,J=v;x&&"input"===Q&&(J=L?(0,Um.A)({type:void 0,minRows:L,maxRows:L},J):(0,Um.A)({type:void 0,maxRows:_,minRows:w},J),Q=Jy);t.useEffect((()=>{Y&&Y.setAdornedStart(Boolean(B))}),[Y,B]);const tt=(0,Um.A)({},i,{color:X.color||"primary",disabled:X.disabled,endAdornment:p,error:X.error,focused:X.focused,formControl:Y,fullWidth:g,hiddenLabel:X.hiddenLabel,multiline:x,size:X.size,startAdornment:B,type:N}),et=(t=>{const{classes:e,color:n,disabled:r,error:i,endAdornment:o,focused:s,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:h,startAdornment:f,type:p}=t;return Hm({root:["root","color".concat(iv(n)),r&&"disabled",i&&"error",l&&"fullWidth",s&&"focused",a&&"formControl",h&&"medium"!==h&&"size".concat(iv(h)),u&&"multiline",f&&"adornedStart",o&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled","search"===p&&"inputTypeSearch",u&&"inputMultiline","small"===h&&"inputSizeSmall",c&&"inputHiddenLabel",f&&"inputAdornedStart",o&&"inputAdornedEnd",d&&"readOnly"]},yv,e)})(tt),nt=F.root||c.Root||xv,rt=R.root||u.root||{},it=F.input||c.Input||Sv;return J=(0,Um.A)({},J,null!=(r=R.input)?r:u.input),(0,Zy.jsxs)(t.Fragment,{children:[!f&&Av,(0,Zy.jsxs)(nt,(0,Um.A)({},rt,!tv(nt)&&{ownerState:(0,Um.A)({},tt,rt.ownerState)},{ref:n,onClick:t=>{V.current&&t.currentTarget===t.target&&V.current.focus(),T&&T(t)}},D,{className:Gm(et.root,rt.className,l,k&&"MuiInputBase-readOnly"),children:[B,(0,Zy.jsx)(nv.Provider,{value:null,children:(0,Zy.jsx)(it,(0,Um.A)({ownerState:tt,"aria-invalid":X.error,"aria-describedby":o,autoComplete:s,autoFocus:a,defaultValue:d,disabled:X.disabled,id:m,onAnimationStart:t=>{$("mui-auto-fill-cancel"===t.animationName?V.current:{value:"x"})},name:S,placeholder:M,readOnly:k,required:X.required,rows:L,value:j,onKeyDown:C,onKeyUp:I,type:N},J,!tv(it)&&{as:Q,ownerState:(0,Um.A)({},tt,J.ownerState)},{ref:G,className:Gm(et.input,J.className,k&&"MuiInputBase-readOnly"),onBlur:t=>{A&&A(t),v.onBlur&&v.onBlur(t),Y&&Y.onBlur?Y.onBlur(t):q(!1)},onChange:function(t){if(!U){const e=t.target||V.current;if(null==e)throw new Error((0,Km.A)(1));$({value:e.value})}for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];v.onChange&&v.onChange(t,...n),E&&E(t,...n)},onFocus:t=>{X.disabled?t.stopPropagation():(P&&P(t),v.onFocus&&v.onFocus(t),Y&&Y.onFocus?Y.onFocus(t):q(!0))}}))}),p,O?O((0,Um.A)({},X,{startAdornment:B})):null]}))]})})),Tv=Ev;function Pv(t){return gv("MuiInput",t)}const Cv=(0,Um.A)({},vv,mv("MuiInput",["root","underline","input"])),Iv=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],Mv=Fy(xv,{shouldForwardProp:t=>Ly(t)||"classes"===t,name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[..._v(t,e),!n.disableUnderline&&e.underline]}})((t=>{let{theme:e,ownerState:n}=t;let r="light"===e.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(r="rgba(".concat(e.vars.palette.common.onBackgroundChannel," / ").concat(e.vars.opacity.inputUnderline,")")),(0,Um.A)({position:"relative"},n.formControl&&{"label + &":{marginTop:16}},!n.disableUnderline&&{"&::after":{borderBottom:"2px solid ".concat((e.vars||e).palette[n.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(Cv.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(Cv.error)]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(r),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(Cv.disabled,", .").concat(Cv.error,"):before")]:{borderBottom:"2px solid ".concat((e.vars||e).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(r)}},["&.".concat(Cv.disabled,":before")]:{borderBottomStyle:"dotted"}})})),kv=Fy(Sv,{name:"MuiInput",slot:"Input",overridesResolver:wv})({}),Ov=t.forwardRef((function(t,e){var n,r,i,o;const s=Vy({props:t,name:"MuiInput"}),{disableUnderline:a,components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:d="input",multiline:h=!1,slotProps:f,slots:p={},type:g="text"}=s,m=(0,Vm.A)(s,Iv),y=(t=>{const{classes:e,disableUnderline:n}=t,r=Hm({root:["root",!n&&"underline"],input:["input"]},Pv,e);return(0,Um.A)({},e,r)})(s),v={root:{ownerState:{disableUnderline:a}}},b=(null!=f?f:c)?(0,$m.A)(null!=f?f:c,v):v,_=null!=(n=null!=(r=p.root)?r:l.Root)?n:Mv,w=null!=(i=null!=(o=p.input)?o:l.Input)?i:kv;return(0,Zy.jsx)(Tv,(0,Um.A)({slots:{root:_,input:w},slotProps:b,fullWidth:u,inputComponent:d,multiline:h,ref:e,type:g},m,{classes:y}))}));Ov.muiName="Input";const Lv=Ov;function Rv(t){return gv("MuiFilledInput",t)}const Fv=(0,Um.A)({},vv,mv("MuiFilledInput",["root","underline","input"])),Bv=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],Nv=Fy(xv,{shouldForwardProp:t=>Ly(t)||"classes"===t,name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[..._v(t,e),!n.disableUnderline&&e.underline]}})((t=>{let{theme:e,ownerState:n}=t;var r;const i="light"===e.palette.mode,o=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=i?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",a=i?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",l=i?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,Um.A)({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:a,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s}},["&.".concat(Fv.focused)]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s},["&.".concat(Fv.disabled)]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:l}},!n.disableUnderline&&{"&::after":{borderBottom:"2px solid ".concat(null==(r=(e.vars||e).palette[n.color||"primary"])?void 0:r.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(Fv.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(Fv.error)]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(e.vars?"rgba(".concat(e.vars.palette.common.onBackgroundChannel," / ").concat(e.vars.opacity.inputUnderline,")"):o),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(Fv.disabled,", .").concat(Fv.error,"):before")]:{borderBottom:"1px solid ".concat((e.vars||e).palette.text.primary)},["&.".concat(Fv.disabled,":before")]:{borderBottomStyle:"dotted"}},n.startAdornment&&{paddingLeft:12},n.endAdornment&&{paddingRight:12},n.multiline&&(0,Um.A)({padding:"25px 12px 8px"},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9}))})),zv=Fy(Sv,{name:"MuiFilledInput",slot:"Input",overridesResolver:wv})((t=>{let{theme:e,ownerState:n}=t;return(0,Um.A)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})})),Dv=t.forwardRef((function(t,e){var n,r,i,o;const s=Vy({props:t,name:"MuiFilledInput"}),{components:a={},componentsProps:l,fullWidth:c=!1,inputComponent:u="input",multiline:d=!1,slotProps:h,slots:f={},type:p="text"}=s,g=(0,Vm.A)(s,Bv),m=(0,Um.A)({},s,{fullWidth:c,inputComponent:u,multiline:d,type:p}),y=(t=>{const{classes:e,disableUnderline:n}=t,r=Hm({root:["root",!n&&"underline"],input:["input"]},Rv,e);return(0,Um.A)({},e,r)})(s),v={root:{ownerState:m},input:{ownerState:m}},b=(null!=h?h:l)?(0,$m.A)(v,null!=h?h:l):v,_=null!=(n=null!=(r=f.root)?r:a.Root)?n:Nv,w=null!=(i=null!=(o=f.input)?o:a.Input)?i:zv;return(0,Zy.jsx)(Tv,(0,Um.A)({slots:{root:_,input:w},componentsProps:b,fullWidth:c,inputComponent:u,multiline:d,ref:e,type:p},g,{classes:y}))}));Dv.muiName="Input";const jv=Dv;var Uv;const Vv=["children","classes","className","label","notched"],Wv=Fy("fieldset",{shouldForwardProp:Ly})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Gv=Fy("legend",{shouldForwardProp:Ly})((t=>{let{ownerState:e,theme:n}=t;return(0,Um.A)({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},e.withLabel&&(0,Um.A)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));function Hv(t){return gv("MuiOutlinedInput",t)}const qv=(0,Um.A)({},vv,mv("MuiOutlinedInput",["root","notchedOutline","input"])),Yv=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],Xv=Fy(xv,{shouldForwardProp:t=>Ly(t)||"classes"===t,name:"MuiOutlinedInput",slot:"Root",overridesResolver:_v})((t=>{let{theme:e,ownerState:n}=t;const r="light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,Um.A)({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,["&:hover .".concat(qv.notchedOutline)]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{["&:hover .".concat(qv.notchedOutline)]:{borderColor:e.vars?"rgba(".concat(e.vars.palette.common.onBackgroundChannel," / 0.23)"):r}},["&.".concat(qv.focused," .").concat(qv.notchedOutline)]:{borderColor:(e.vars||e).palette[n.color].main,borderWidth:2},["&.".concat(qv.error," .").concat(qv.notchedOutline)]:{borderColor:(e.vars||e).palette.error.main},["&.".concat(qv.disabled," .").concat(qv.notchedOutline)]:{borderColor:(e.vars||e).palette.action.disabled}},n.startAdornment&&{paddingLeft:14},n.endAdornment&&{paddingRight:14},n.multiline&&(0,Um.A)({padding:"16.5px 14px"},"small"===n.size&&{padding:"8.5px 14px"}))})),Zv=Fy((function(t){const{className:e,label:n,notched:r}=t,i=(0,Vm.A)(t,Vv),o=null!=n&&""!==n,s=(0,Um.A)({},t,{notched:r,withLabel:o});return(0,Zy.jsx)(Wv,(0,Um.A)({"aria-hidden":!0,className:e,ownerState:s},i,{children:(0,Zy.jsx)(Gv,{ownerState:s,children:o?(0,Zy.jsx)("span",{children:n}):Uv||(Uv=(0,Zy.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(t,e)=>e.notchedOutline})((t=>{let{theme:e}=t;const n="light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?"rgba(".concat(e.vars.palette.common.onBackgroundChannel," / 0.23)"):n}})),Kv=Fy(Sv,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:wv})((t=>{let{theme:e,ownerState:n}=t;return(0,Um.A)({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),$v=t.forwardRef((function(e,n){var r,i,o,s,a;const l=Vy({props:e,name:"MuiOutlinedInput"}),{components:c={},fullWidth:u=!1,inputComponent:d="input",label:h,multiline:f=!1,notched:p,slots:g={},type:m="text"}=l,y=(0,Vm.A)(l,Yv),v=(t=>{const{classes:e}=t,n=Hm({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Hv,e);return(0,Um.A)({},e,n)})(l),b=rv(),_=ev({props:l,muiFormControl:b,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),w=(0,Um.A)({},l,{color:_.color||"primary",disabled:_.disabled,error:_.error,focused:_.focused,formControl:b,fullWidth:u,hiddenLabel:_.hiddenLabel,multiline:f,size:_.size,type:m}),x=null!=(r=null!=(i=g.root)?i:c.Root)?r:Xv,S=null!=(o=null!=(s=g.input)?s:c.Input)?o:Kv;return(0,Zy.jsx)(Tv,(0,Um.A)({slots:{root:x,input:S},renderSuffix:e=>(0,Zy.jsx)(Zv,{ownerState:w,className:v.notchedOutline,label:null!=h&&""!==h&&_.required?a||(a=(0,Zy.jsxs)(t.Fragment,{children:[h,"\u2009","*"]})):h,notched:"undefined"!==typeof p?p:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:u,inputComponent:d,multiline:f,ref:n,type:m},y,{classes:(0,Um.A)({},v,{notchedOutline:null})}))}));$v.muiName="Input";const Qv=$v;function Jv(t){return gv("MuiFormLabel",t)}const tb=mv("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),eb=["children","className","color","component","disabled","error","filled","focused","required"],nb=Fy("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(t,e)=>{let{ownerState:n}=t;return(0,Um.A)({},e.root,"secondary"===n.color&&e.colorSecondary,n.filled&&e.filled)}})((t=>{let{theme:e,ownerState:n}=t;return(0,Um.A)({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",["&.".concat(tb.focused)]:{color:(e.vars||e).palette[n.color].main},["&.".concat(tb.disabled)]:{color:(e.vars||e).palette.text.disabled},["&.".concat(tb.error)]:{color:(e.vars||e).palette.error.main}})})),rb=Fy("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})((t=>{let{theme:e}=t;return{["&.".concat(tb.error)]:{color:(e.vars||e).palette.error.main}}})),ib=t.forwardRef((function(t,e){const n=Vy({props:t,name:"MuiFormLabel"}),{children:r,className:i,component:o="label"}=n,s=(0,Vm.A)(n,eb),a=ev({props:n,muiFormControl:rv(),states:["color","required","focused","disabled","error","filled"]}),l=(0,Um.A)({},n,{color:a.color||"primary",component:o,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),c=(t=>{const{classes:e,color:n,focused:r,disabled:i,error:o,filled:s,required:a}=t;return Hm({root:["root","color".concat(iv(n)),i&&"disabled",o&&"error",s&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",o&&"error"]},Jv,e)})(l);return(0,Zy.jsxs)(nb,(0,Um.A)({as:o,ownerState:l,className:Gm(c.root,i),ref:e},s,{children:[r,a.required&&(0,Zy.jsxs)(rb,{ownerState:l,"aria-hidden":!0,className:c.asterisk,children:["\u2009","*"]})]}))})),ob=ib;function sb(t){return gv("MuiInputLabel",t)}mv("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const ab=["disableAnimation","margin","shrink","variant","className"],lb=Fy(ob,{shouldForwardProp:t=>Ly(t)||"classes"===t,name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{["& .".concat(tb.asterisk)]:e.asterisk},e.root,n.formControl&&e.formControl,"small"===n.size&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})((t=>{let{theme:e,ownerState:n}=t;return(0,Um.A)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},"filled"===n.variant&&(0,Um.A)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&(0,Um.A)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&(0,Um.A)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))})),cb=t.forwardRef((function(t,e){const n=Vy({name:"MuiInputLabel",props:t}),{disableAnimation:r=!1,shrink:i,className:o}=n,s=(0,Vm.A)(n,ab),a=rv();let l=i;"undefined"===typeof l&&a&&(l=a.filled||a.focused||a.adornedStart);const c=ev({props:n,muiFormControl:a,states:["size","variant","required","focused"]}),u=(0,Um.A)({},n,{disableAnimation:r,formControl:a,shrink:l,size:c.size,variant:c.variant,required:c.required,focused:c.focused}),d=(t=>{const{classes:e,formControl:n,size:r,shrink:i,disableAnimation:o,variant:s,required:a}=t,l=Hm({root:["root",n&&"formControl",!o&&"animated",i&&"shrink",r&&"normal"!==r&&"size".concat(iv(r)),s],asterisk:[a&&"asterisk"]},sb,e);return(0,Um.A)({},e,l)})(u);return(0,Zy.jsx)(lb,(0,Um.A)({"data-shrink":l,ownerState:u,ref:e,className:Gm(d.root,o)},s,{classes:d}))}));const ub=function(e,n){var r,i;return t.isValidElement(e)&&-1!==n.indexOf(null!=(r=e.type.muiName)?r:null==(i=e.type)||null==(i=i._payload)||null==(i=i.value)?void 0:i.muiName)};function db(t){return gv("MuiFormControl",t)}mv("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const hb=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],fb=Fy("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(t,e)=>{let{ownerState:n}=t;return(0,Um.A)({},e.root,e["margin".concat(iv(n.margin))],n.fullWidth&&e.fullWidth)}})((t=>{let{ownerState:e}=t;return(0,Um.A)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===e.margin&&{marginTop:16,marginBottom:8},"dense"===e.margin&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})})),pb=t.forwardRef((function(e,n){const r=Vy({props:e,name:"MuiFormControl"}),{children:i,className:o,color:s="primary",component:a="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:d=!1,hiddenLabel:h=!1,margin:f="none",required:p=!1,size:g="medium",variant:m="outlined"}=r,y=(0,Vm.A)(r,hb),v=(0,Um.A)({},r,{color:s,component:a,disabled:l,error:c,fullWidth:d,hiddenLabel:h,margin:f,required:p,size:g,variant:m}),b=(t=>{const{classes:e,margin:n,fullWidth:r}=t;return Hm({root:["root","none"!==n&&"margin".concat(iv(n)),r&&"fullWidth"]},db,e)})(v),[_,w]=t.useState((()=>{let e=!1;return i&&t.Children.forEach(i,(t=>{if(!ub(t,["Input","Select"]))return;const n=ub(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)})),e})),[x,S]=t.useState((()=>{let e=!1;return i&&t.Children.forEach(i,(t=>{ub(t,["Input","Select"])&&(dv(t.props,!0)||dv(t.props.inputProps,!0))&&(e=!0)})),e})),[A,E]=t.useState(!1);l&&A&&E(!1);const T=void 0===u||l?A:u;let P;const C=t.useMemo((()=>({adornedStart:_,setAdornedStart:w,color:s,disabled:l,error:c,filled:x,focused:T,fullWidth:d,hiddenLabel:h,size:g,onBlur:()=>{E(!1)},onEmpty:()=>{S(!1)},onFilled:()=>{S(!0)},onFocus:()=>{E(!0)},registerEffect:P,required:p,variant:m})),[_,s,l,c,x,T,d,h,P,p,g,m]);return(0,Zy.jsx)(nv.Provider,{value:C,children:(0,Zy.jsx)(fb,(0,Um.A)({as:a,ownerState:v,className:Gm(b.root,o),ref:n},y,{children:i}))})})),gb=pb;function mb(t){return gv("MuiFormHelperText",t)}const yb=mv("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var vb;const bb=["children","className","component","disabled","error","filled","focused","margin","required","variant"],_b=Fy("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e["size".concat(iv(n.size))],n.contained&&e.contained,n.filled&&e.filled]}})((t=>{let{theme:e,ownerState:n}=t;return(0,Um.A)({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,["&.".concat(yb.disabled)]:{color:(e.vars||e).palette.text.disabled},["&.".concat(yb.error)]:{color:(e.vars||e).palette.error.main}},"small"===n.size&&{marginTop:4},n.contained&&{marginLeft:14,marginRight:14})})),wb=t.forwardRef((function(t,e){const n=Vy({props:t,name:"MuiFormHelperText"}),{children:r,className:i,component:o="p"}=n,s=(0,Vm.A)(n,bb),a=ev({props:n,muiFormControl:rv(),states:["variant","size","disabled","error","filled","focused","required"]}),l=(0,Um.A)({},n,{component:o,contained:"filled"===a.variant||"outlined"===a.variant,variant:a.variant,size:a.size,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),c=(t=>{const{classes:e,contained:n,size:r,disabled:i,error:o,filled:s,focused:a,required:l}=t;return Hm({root:["root",i&&"disabled",o&&"error",r&&"size".concat(iv(r)),n&&"contained",a&&"focused",s&&"filled",l&&"required"]},mb,e)})(l);return(0,Zy.jsx)(_b,(0,Um.A)({as:o,ownerState:l,className:Gm(c.root,i),ref:e},s,{children:" "===r?vb||(vb=(0,Zy.jsx)("span",{className:"notranslate",children:"\u200b"})):r}))})),xb=wb;n(2086);const Sb=Hy;function Ab(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===t)return{};const n={};return Object.keys(t).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof t[n]&&!e.includes(n))).forEach((e=>{n[e]=t[e]})),n}function Eb(t){if(void 0===t)return{};const e={};return Object.keys(t).filter((e=>!(e.match(/^on[A-Z]/)&&"function"===typeof t[e]))).forEach((n=>{e[n]=t[n]})),e}const Tb=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function Pb(t){var e;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:o=!1}=t,s=(0,Vm.A)(t,Tb),a=o?{}:function(t,e,n){return"function"===typeof t?t(e,n):t}(r,i),{props:l,internalRef:c}=function(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=t;if(!e){const t=Gm(null==n?void 0:n.className,o,null==i?void 0:i.className,null==r?void 0:r.className),e=(0,Um.A)({},null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),s=(0,Um.A)({},n,i,r);return t.length>0&&(s.className=t),Object.keys(e).length>0&&(s.style=e),{props:s,internalRef:void 0}}const s=Ab((0,Um.A)({},i,r)),a=Eb(r),l=Eb(i),c=e(s),u=Gm(null==c?void 0:c.className,null==n?void 0:n.className,o,null==i?void 0:i.className,null==r?void 0:r.className),d=(0,Um.A)({},null==c?void 0:c.style,null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),h=(0,Um.A)({},c,n,l,a);return u.length>0&&(h.className=u),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:c.ref}}((0,Um.A)({},s,{externalSlotProps:a})),u=Gy(c,null==a?void 0:a.ref,null==(e=t.additionalProps)?void 0:e.ref),d=function(t,e,n){return void 0===t||tv(t)?e:(0,Um.A)({},e,{ownerState:(0,Um.A)({},e.ownerState,n)})}(n,(0,Um.A)({},l,{ref:u}),i);return d}const Cb=t.createContext({});function Ib(t){return gv("MuiList",t)}mv("MuiList",["root","padding","dense","subheader"]);const Mb=["children","className","component","dense","disablePadding","subheader"],kb=Fy("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})((t=>{let{ownerState:e}=t;return(0,Um.A)({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})})),Ob=t.forwardRef((function(e,n){const r=Vy({props:e,name:"MuiList"}),{children:i,className:o,component:s="ul",dense:a=!1,disablePadding:l=!1,subheader:c}=r,u=(0,Vm.A)(r,Mb),d=t.useMemo((()=>({dense:a})),[a]),h=(0,Um.A)({},r,{component:s,dense:a,disablePadding:l}),f=(t=>{const{classes:e,disablePadding:n,dense:r,subheader:i}=t;return Hm({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},Ib,e)})(h);return(0,Zy.jsx)(Cb.Provider,{value:d,children:(0,Zy.jsxs)(kb,(0,Um.A)({as:s,className:Gm(f.root,o),ref:n,ownerState:h},u,{children:[c,i]}))})}));function Lb(t){const e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}const Rb=Lb,Fb=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Bb(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function Nb(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function zb(t,e){if(void 0===e)return!0;let n=t.innerText;return void 0===n&&(n=t.textContent),n=n.trim().toLowerCase(),0!==n.length&&(e.repeating?n[0]===e.keys[0]:0===n.indexOf(e.keys.join("")))}function Db(t,e,n,r,i,o){let s=!1,a=i(t,e,!!e&&n);for(;a;){if(a===t.firstChild){if(s)return!1;s=!0}const e=!r&&(a.disabled||"true"===a.getAttribute("aria-disabled"));if(a.hasAttribute("tabindex")&&zb(a,o)&&!e)return a.focus(),!0;a=i(t,a,n)}return!1}const jb=t.forwardRef((function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:o=!1,children:s,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:d="selectedMenu"}=e,h=(0,Vm.A)(e,Fb),f=t.useRef(null),p=t.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});sv((()=>{i&&f.current.focus()}),[i]),t.useImperativeHandle(r,(()=>({adjustStyleForScrollbar:(t,e)=>{const n=!f.current.style.width;if(t.clientHeight<f.current.clientHeight&&n){const n="".concat(Rb(Sb(t)),"px");f.current.style["rtl"===e.direction?"paddingLeft":"paddingRight"]=n,f.current.style.width="calc(100% + ".concat(n,")")}return f.current}})),[]);const g=ov(f,n);let m=-1;t.Children.forEach(s,((e,n)=>{t.isValidElement(e)?(e.props.disabled||("selectedMenu"===d&&e.props.selected||-1===m)&&(m=n),m===n&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(m+=1,m>=s.length&&(m=-1))):m===n&&(m+=1,m>=s.length&&(m=-1))}));const y=t.Children.map(s,((e,n)=>{if(n===m){const n={};return o&&(n.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===d&&(n.tabIndex=0),t.cloneElement(e,n)}return e}));return(0,Zy.jsx)(Ob,(0,Um.A)({role:"menu",ref:g,className:a,onKeyDown:t=>{const e=f.current,n=t.key,r=Sb(e).activeElement;if("ArrowDown"===n)t.preventDefault(),Db(e,r,c,l,Bb);else if("ArrowUp"===n)t.preventDefault(),Db(e,r,c,l,Nb);else if("Home"===n)t.preventDefault(),Db(e,null,c,l,Bb);else if("End"===n)t.preventDefault(),Db(e,null,c,l,Nb);else if(1===n.length){const i=p.current,o=n.toLowerCase(),s=performance.now();i.keys.length>0&&(s-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=s,i.keys.push(o);const a=r&&!i.repeating&&zb(r,i);i.previousKeyMatched&&(a||Db(e,r,!1,l,Bb,i))?t.preventDefault():i.previousKeyMatched=!1}u&&u(t)},tabIndex:i?0:-1},h,{children:y}))})),Ub=Xy,Vb=qy,Wb={};const Gb=[];class Hb{constructor(){this.currentId=null,this.clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new Hb}start(t,e){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,e()}),t)}}function qb(){const e=function(e,n){const r=t.useRef(Wb);return r.current===Wb&&(r.current=e(n)),r}(Hb.create).current;var n;return n=e.disposeEffect,t.useEffect(n,Gb),e}function Yb(t,e){return Yb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yb(t,e)}function Xb(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Yb(t,e)}const Zb=!1,Kb=t.createContext(null);var $b="unmounted",Qb="exited",Jb="entering",t_="entered",e_="exiting",n_=function(e){function n(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=Qb,r.appearStatus=Jb):i=t_:i=t.unmountOnExit||t.mountOnEnter?$b:Qb,r.state={status:i},r.nextCallback=null,r}Xb(n,e),n.getDerivedStateFromProps=function(t,e){return t.in&&e.status===$b?{status:Qb}:null};var i=n.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==Jb&&n!==t_&&(e=Jb):n!==Jb&&n!==t_||(e=e_)}this.updateStatus(!1,e)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var t,e,n,r=this.props.timeout;return t=e=n=r,null!=r&&"number"!==typeof r&&(t=r.exit,e=r.enter,n=void 0!==r.appear?r.appear:e),{exit:t,enter:e,appear:n}},i.updateStatus=function(t,e){if(void 0===t&&(t=!1),null!==e)if(this.cancelNextCallback(),e===Jb){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:r.findDOMNode(this);n&&function(t){t.scrollTop}(n)}this.performEnter(t)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Qb&&this.setState({status:$b})},i.performEnter=function(t){var e=this,n=this.props.enter,i=this.context?this.context.isMounting:t,o=this.props.nodeRef?[i]:[r.findDOMNode(this),i],s=o[0],a=o[1],l=this.getTimeouts(),c=i?l.appear:l.enter;!t&&!n||Zb?this.safeSetState({status:t_},(function(){e.props.onEntered(s)})):(this.props.onEnter(s,a),this.safeSetState({status:Jb},(function(){e.props.onEntering(s,a),e.onTransitionEnd(c,(function(){e.safeSetState({status:t_},(function(){e.props.onEntered(s,a)}))}))})))},i.performExit=function(){var t=this,e=this.props.exit,n=this.getTimeouts(),i=this.props.nodeRef?void 0:r.findDOMNode(this);e&&!Zb?(this.props.onExit(i),this.safeSetState({status:e_},(function(){t.props.onExiting(i),t.onTransitionEnd(n.exit,(function(){t.safeSetState({status:Qb},(function(){t.props.onExited(i)}))}))}))):this.safeSetState({status:Qb},(function(){t.props.onExited(i)}))},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},i.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,e.nextCallback=null,t(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},i.onTransitionEnd=function(t,e){this.setNextCallback(e);var n=this.props.nodeRef?this.props.nodeRef.current:r.findDOMNode(this),i=null==t&&!this.props.addEndListener;if(n&&!i){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],s=o[0],a=o[1];this.props.addEndListener(s,a)}null!=t&&setTimeout(this.nextCallback,t)}else setTimeout(this.nextCallback,0)},i.render=function(){var e=this.state.status;if(e===$b)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,(0,Vm.A)(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(Kb.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},n}(t.Component);function r_(){}n_.contextType=Kb,n_.propTypes={},n_.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:r_,onEntering:r_,onEntered:r_,onExit:r_,onExiting:r_,onExited:r_},n_.UNMOUNTED=$b,n_.EXITED=Qb,n_.ENTERING=Jb,n_.ENTERED=t_,n_.EXITING=e_;const i_=n_;function o_(){const t=Uy(ky);return t[Oy]||t}const s_=t=>t.scrollTop;function a_(t,e){var n,r;const{timeout:i,easing:o,style:s={}}=t;return{duration:null!=(n=s.transitionDuration)?n:"number"===typeof i?i:i[e.mode]||0,easing:null!=(r=s.transitionTimingFunction)?r:"object"===typeof o?o[e.mode]:o,delay:s.transitionDelay}}const l_=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function c_(t){return"scale(".concat(t,", ").concat(t**2,")")}const u_={entering:{opacity:1,transform:c_(1)},entered:{opacity:1,transform:"none"}},d_="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),h_=t.forwardRef((function(e,n){const{addEndListener:r,appear:i=!0,children:o,easing:s,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:d,onExited:h,onExiting:f,style:p,timeout:g="auto",TransitionComponent:m=i_}=e,y=(0,Vm.A)(e,l_),v=qb(),b=t.useRef(),_=o_(),w=t.useRef(null),x=ov(w,o.ref,n),S=t=>e=>{if(t){const n=w.current;void 0===e?t(n):t(n,e)}},A=S(u),E=S(((t,e)=>{s_(t);const{duration:n,delay:r,easing:i}=a_({style:p,timeout:g,easing:s},{mode:"enter"});let o;"auto"===g?(o=_.transitions.getAutoHeightDuration(t.clientHeight),b.current=o):o=n,t.style.transition=[_.transitions.create("opacity",{duration:o,delay:r}),_.transitions.create("transform",{duration:d_?o:.666*o,delay:r,easing:i})].join(","),l&&l(t,e)})),T=S(c),P=S(f),C=S((t=>{const{duration:e,delay:n,easing:r}=a_({style:p,timeout:g,easing:s},{mode:"exit"});let i;"auto"===g?(i=_.transitions.getAutoHeightDuration(t.clientHeight),b.current=i):i=e,t.style.transition=[_.transitions.create("opacity",{duration:i,delay:n}),_.transitions.create("transform",{duration:d_?i:.666*i,delay:d_?n:n||.333*i,easing:r})].join(","),t.style.opacity=0,t.style.transform=c_(.75),d&&d(t)})),I=S(h);return(0,Zy.jsx)(m,(0,Um.A)({appear:i,in:a,nodeRef:w,onEnter:E,onEntered:T,onEntering:A,onExit:C,onExited:I,onExiting:P,addEndListener:t=>{"auto"===g&&v.start(b.current||0,t),r&&r(w.current,t)},timeout:"auto"===g?null:g},y,{children:(e,n)=>t.cloneElement(o,(0,Um.A)({style:(0,Um.A)({opacity:0,transform:c_(.75),visibility:"exited"!==e||a?void 0:"hidden"},u_[e],p,o.props.style),ref:x},n))}))}));h_.muiSupportAuto=!0;const f_=h_;const p_=function(e){const n=t.useRef(e);return Yy((()=>{n.current=e})),t.useRef((function(){return(0,n.current)(...arguments)})).current};function g_(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(((t,e)=>null==e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r),e.apply(this,r)}),(()=>{}))}function m_(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function y_(t){return parseInt(qy(t).getComputedStyle(t).paddingRight,10)||0}function v_(t,e,n,r,i){const o=[e,n,...r];[].forEach.call(t.children,(t=>{const e=-1===o.indexOf(t),n=!function(t){const e=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(t.tagName),n="INPUT"===t.tagName&&"hidden"===t.getAttribute("type");return e||n}(t);e&&n&&m_(t,i)}))}function b_(t,e){let n=-1;return t.some(((t,r)=>!!e(t)&&(n=r,!0))),n}function __(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(function(t){const e=Hy(t);return e.body===t?qy(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}(r)){const t=Lb(Hy(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(y_(r)+t,"px");const e=Hy(r).querySelectorAll(".mui-fixed");[].forEach.call(e,(e=>{n.push({value:e.style.paddingRight,property:"padding-right",el:e}),e.style.paddingRight="".concat(y_(e)+t,"px")}))}let t;if(r.parentNode instanceof DocumentFragment)t=Hy(r).body;else{const e=r.parentElement,n=qy(r);t="HTML"===(null==e?void 0:e.nodeName)&&"scroll"===n.getComputedStyle(e).overflowY?e:r}n.push({value:t.style.overflow,property:"overflow",el:t},{value:t.style.overflowX,property:"overflow-x",el:t},{value:t.style.overflowY,property:"overflow-y",el:t}),t.style.overflow="hidden"}return()=>{n.forEach((t=>{let{value:e,el:n,property:r}=t;e?n.style.setProperty(r,e):n.style.removeProperty(r)}))}}const w_=new class{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,e){let n=this.modals.indexOf(t);if(-1!==n)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&m_(t.modalRef,!1);const r=function(t){const e=[];return[].forEach.call(t.children,(t=>{"true"===t.getAttribute("aria-hidden")&&e.push(t)})),e}(e);v_(e,t.mount,t.modalRef,r,!0);const i=b_(this.containers,(t=>t.container===e));return-1!==i?(this.containers[i].modals.push(t),n):(this.containers.push({modals:[t],container:e,restore:null,hiddenSiblings:r}),n)}mount(t,e){const n=b_(this.containers,(e=>-1!==e.modals.indexOf(t))),r=this.containers[n];r.restore||(r.restore=__(r,e))}remove(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(t);if(-1===n)return n;const r=b_(this.containers,(e=>-1!==e.modals.indexOf(t))),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(t),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),t.modalRef&&m_(t.modalRef,e),v_(i.container,t.mount,t.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{const t=i.modals[i.modals.length-1];t.modalRef&&m_(t.modalRef,!1)}return n}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}};function x_(e){const{container:n,disableEscapeKeyDown:r=!1,disableScrollLock:i=!1,manager:o=w_,closeAfterTransition:s=!1,onTransitionEnter:a,onTransitionExited:l,children:c,onClose:u,open:d,rootRef:h}=e,f=t.useRef({}),p=t.useRef(null),g=t.useRef(null),m=Gy(g,h),[y,v]=t.useState(!d),b=function(t){return!!t&&t.props.hasOwnProperty("in")}(c);let _=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(_=!1);const w=()=>(f.current.modalRef=g.current,f.current.mount=p.current,f.current),x=()=>{o.mount(w(),{disableScrollLock:i}),g.current&&(g.current.scrollTop=0)},S=p_((()=>{const t=function(t){return"function"===typeof t?t():t}(n)||Hy(p.current).body;o.add(w(),t),g.current&&x()})),A=t.useCallback((()=>o.isTopModal(w())),[o]),E=p_((t=>{p.current=t,t&&(d&&A()?x():g.current&&m_(g.current,_))})),T=t.useCallback((()=>{o.remove(w(),_)}),[_,o]);t.useEffect((()=>()=>{T()}),[T]),t.useEffect((()=>{d?S():b&&s||T()}),[d,T,b,s,S]);const P=t=>e=>{var n;null==(n=t.onKeyDown)||n.call(t,e),"Escape"===e.key&&229!==e.which&&A()&&(r||(e.stopPropagation(),u&&u(e,"escapeKeyDown")))},C=t=>e=>{var n;null==(n=t.onClick)||n.call(t,e),e.target===e.currentTarget&&u&&u(e,"backdropClick")};return{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=Ab(e);delete n.onTransitionEnter,delete n.onTransitionExited;const r=(0,Um.A)({},n,t);return(0,Um.A)({role:"presentation"},r,{onKeyDown:P(r),ref:m})},getBackdropProps:function(){const t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,Um.A)({"aria-hidden":!0},t,{onClick:C(t),open:d})},getTransitionProps:()=>({onEnter:g_((()=>{v(!1),a&&a()}),null==c?void 0:c.props.onEnter),onExited:g_((()=>{v(!0),l&&l(),s&&T()}),null==c?void 0:c.props.onExited)}),rootRef:m,portalRef:E,isTopModal:A,exited:y,hasTransition:b}}const S_=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function A_(t){const e=[],n=[];return Array.from(t.querySelectorAll(S_)).forEach(((t,r)=>{const i=function(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?"true"===t.contentEditable||("AUDIO"===t.nodeName||"VIDEO"===t.nodeName||"DETAILS"===t.nodeName)&&null===t.getAttribute("tabindex")?0:t.tabIndex:e}(t);-1!==i&&function(t){return!(t.disabled||"INPUT"===t.tagName&&"hidden"===t.type||function(t){if("INPUT"!==t.tagName||"radio"!==t.type)return!1;if(!t.name)return!1;const e=e=>t.ownerDocument.querySelector('input[type="radio"]'.concat(e));let n=e('[name="'.concat(t.name,'"]:checked'));return n||(n=e('[name="'.concat(t.name,'"]'))),n!==t}(t))}(t)&&(0===i?e.push(t):n.push({documentOrder:r,tabIndex:i,node:t}))})),n.sort(((t,e)=>t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex)).map((t=>t.node)).concat(e)}function E_(){return!0}function T_(e){const{children:n,disableAutoFocus:r=!1,disableEnforceFocus:i=!1,disableRestoreFocus:o=!1,getTabbable:s=A_,isEnabled:a=E_,open:l}=e,c=t.useRef(!1),u=t.useRef(null),d=t.useRef(null),h=t.useRef(null),f=t.useRef(null),p=t.useRef(!1),g=t.useRef(null),m=Gy(n.ref,g),y=t.useRef(null);t.useEffect((()=>{l&&g.current&&(p.current=!r)}),[r,l]),t.useEffect((()=>{if(!l||!g.current)return;const t=Hy(g.current);return g.current.contains(t.activeElement)||(g.current.hasAttribute("tabIndex")||g.current.setAttribute("tabIndex","-1"),p.current&&g.current.focus()),()=>{o||(h.current&&h.current.focus&&(c.current=!0,h.current.focus()),h.current=null)}}),[l]),t.useEffect((()=>{if(!l||!g.current)return;const t=Hy(g.current),e=e=>{y.current=e,!i&&a()&&"Tab"===e.key&&t.activeElement===g.current&&e.shiftKey&&(c.current=!0,d.current&&d.current.focus())},n=()=>{const e=g.current;if(null===e)return;if(!t.hasFocus()||!a()||c.current)return void(c.current=!1);if(e.contains(t.activeElement))return;if(i&&t.activeElement!==u.current&&t.activeElement!==d.current)return;if(t.activeElement!==f.current)f.current=null;else if(null!==f.current)return;if(!p.current)return;let n=[];if(t.activeElement!==u.current&&t.activeElement!==d.current||(n=s(g.current)),n.length>0){var r,o;const t=Boolean((null==(r=y.current)?void 0:r.shiftKey)&&"Tab"===(null==(o=y.current)?void 0:o.key)),e=n[0],i=n[n.length-1];"string"!==typeof e&&"string"!==typeof i&&(t?i.focus():e.focus())}else e.focus()};t.addEventListener("focusin",n),t.addEventListener("keydown",e,!0);const r=setInterval((()=>{t.activeElement&&"BODY"===t.activeElement.tagName&&n()}),50);return()=>{clearInterval(r),t.removeEventListener("focusin",n),t.removeEventListener("keydown",e,!0)}}),[r,i,o,a,l,s]);const v=t=>{null===h.current&&(h.current=t.relatedTarget),p.current=!0};return(0,Zy.jsxs)(t.Fragment,{children:[(0,Zy.jsx)("div",{tabIndex:l?0:-1,onFocus:v,ref:u,"data-testid":"sentinelStart"}),t.cloneElement(n,{ref:m,onFocus:t=>{null===h.current&&(h.current=t.relatedTarget),p.current=!0,f.current=t.target;const e=n.props.onFocus;e&&e(t)}}),(0,Zy.jsx)("div",{tabIndex:l?0:-1,onFocus:v,ref:d,"data-testid":"sentinelEnd"})]})}const P_=t.forwardRef((function(e,n){const{children:i,container:o,disablePortal:s=!1}=e,[a,l]=t.useState(null),c=Gy(t.isValidElement(i)?i.ref:null,n);if(Yy((()=>{s||l(function(t){return"function"===typeof t?t():t}(o)||document.body)}),[o,s]),Yy((()=>{if(a&&!s)return Wy(n,a),()=>{Wy(n,null)}}),[n,a,s]),s){if(t.isValidElement(i)){const e={ref:c};return t.cloneElement(i,e)}return(0,Zy.jsx)(t.Fragment,{children:i})}return(0,Zy.jsx)(t.Fragment,{children:a?r.createPortal(i,a):a})}));const C_=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],I_={entering:{opacity:1},entered:{opacity:1}},M_=t.forwardRef((function(e,n){const r=o_(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:s=!0,children:a,easing:l,in:c,onEnter:u,onEntered:d,onEntering:h,onExit:f,onExited:p,onExiting:g,style:m,timeout:y=i,TransitionComponent:v=i_}=e,b=(0,Vm.A)(e,C_),_=t.useRef(null),w=ov(_,a.ref,n),x=t=>e=>{if(t){const n=_.current;void 0===e?t(n):t(n,e)}},S=x(h),A=x(((t,e)=>{s_(t);const n=a_({style:m,timeout:y,easing:l},{mode:"enter"});t.style.webkitTransition=r.transitions.create("opacity",n),t.style.transition=r.transitions.create("opacity",n),u&&u(t,e)})),E=x(d),T=x(g),P=x((t=>{const e=a_({style:m,timeout:y,easing:l},{mode:"exit"});t.style.webkitTransition=r.transitions.create("opacity",e),t.style.transition=r.transitions.create("opacity",e),f&&f(t)})),C=x(p);return(0,Zy.jsx)(v,(0,Um.A)({appear:s,in:c,nodeRef:_,onEnter:A,onEntered:E,onEntering:S,onExit:P,onExited:C,onExiting:T,addEndListener:t=>{o&&o(_.current,t)},timeout:y},b,{children:(e,n)=>t.cloneElement(a,(0,Um.A)({style:(0,Um.A)({opacity:0,visibility:"exited"!==e||c?void 0:"hidden"},I_[e],m,a.props.style),ref:w},n))}))})),k_=M_;function O_(t){return gv("MuiBackdrop",t)}mv("MuiBackdrop",["root","invisible"]);const L_=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],R_=Fy("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})((t=>{let{ownerState:e}=t;return(0,Um.A)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})})),F_=t.forwardRef((function(t,e){var n,r,i;const o=Vy({props:t,name:"MuiBackdrop"}),{children:s,className:a,component:l="div",components:c={},componentsProps:u={},invisible:d=!1,open:h,slotProps:f={},slots:p={},TransitionComponent:g=k_,transitionDuration:m}=o,y=(0,Vm.A)(o,L_),v=(0,Um.A)({},o,{component:l,invisible:d}),b=(t=>{const{classes:e,invisible:n}=t;return Hm({root:["root",n&&"invisible"]},O_,e)})(v),_=null!=(n=f.root)?n:u.root;return(0,Zy.jsx)(g,(0,Um.A)({in:h,timeout:m},y,{children:(0,Zy.jsx)(R_,(0,Um.A)({"aria-hidden":!0},_,{as:null!=(r=null!=(i=p.root)?i:c.Root)?r:l,className:Gm(b.root,a,null==_?void 0:_.className),ownerState:(0,Um.A)({},v,null==_?void 0:_.ownerState),classes:b,ref:e,children:s}))}))}));function B_(t){return gv("MuiModal",t)}mv("MuiModal",["root","hidden","backdrop"]);const N_=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],z_=Fy("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})((t=>{let{theme:e,ownerState:n}=t;return(0,Um.A)({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),D_=Fy(F_,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),j_=t.forwardRef((function(e,n){var r,i,o,s,a,l;const c=Vy({name:"MuiModal",props:e}),{BackdropComponent:u=D_,BackdropProps:d,className:h,closeAfterTransition:f=!1,children:p,container:g,component:m,components:y={},componentsProps:v={},disableAutoFocus:b=!1,disableEnforceFocus:_=!1,disableEscapeKeyDown:w=!1,disablePortal:x=!1,disableRestoreFocus:S=!1,disableScrollLock:A=!1,hideBackdrop:E=!1,keepMounted:T=!1,onBackdropClick:P,open:C,slotProps:I,slots:M}=c,k=(0,Vm.A)(c,N_),O=(0,Um.A)({},c,{closeAfterTransition:f,disableAutoFocus:b,disableEnforceFocus:_,disableEscapeKeyDown:w,disablePortal:x,disableRestoreFocus:S,disableScrollLock:A,hideBackdrop:E,keepMounted:T}),{getRootProps:L,getBackdropProps:R,getTransitionProps:F,portalRef:B,isTopModal:N,exited:z,hasTransition:D}=x_((0,Um.A)({},O,{rootRef:n})),j=(0,Um.A)({},O,{exited:z}),U=(t=>{const{open:e,exited:n,classes:r}=t;return Hm({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},B_,r)})(j),V={};if(void 0===p.props.tabIndex&&(V.tabIndex="-1"),D){const{onEnter:t,onExited:e}=F();V.onEnter=t,V.onExited=e}const W=null!=(r=null!=(i=null==M?void 0:M.root)?i:y.Root)?r:z_,G=null!=(o=null!=(s=null==M?void 0:M.backdrop)?s:y.Backdrop)?o:u,H=null!=(a=null==I?void 0:I.root)?a:v.root,q=null!=(l=null==I?void 0:I.backdrop)?l:v.backdrop,Y=Pb({elementType:W,externalSlotProps:H,externalForwardedProps:k,getSlotProps:L,additionalProps:{ref:n,as:m},ownerState:j,className:Gm(h,null==H?void 0:H.className,null==U?void 0:U.root,!j.open&&j.exited&&(null==U?void 0:U.hidden))}),X=Pb({elementType:G,externalSlotProps:q,additionalProps:d,getSlotProps:t=>R((0,Um.A)({},t,{onClick:e=>{P&&P(e),null!=t&&t.onClick&&t.onClick(e)}})),className:Gm(null==q?void 0:q.className,null==d?void 0:d.className,null==U?void 0:U.backdrop),ownerState:j});return T||C||D&&!z?(0,Zy.jsx)(P_,{ref:B,container:g,disablePortal:x,children:(0,Zy.jsxs)(W,(0,Um.A)({},Y,{children:[!E&&u?(0,Zy.jsx)(G,(0,Um.A)({},X)):null,(0,Zy.jsx)(T_,{disableEnforceFocus:_,disableAutoFocus:b,disableRestoreFocus:S,isEnabled:N,open:C,children:t.cloneElement(p,V)})]}))}):null})),U_=j_,V_=t=>{let e;return e=t<1?5.11916*t**2:4.5*Math.log(t+1)+2,(e/100).toFixed(2)};function W_(t){return gv("MuiPaper",t)}mv("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const G_=["className","component","elevation","square","variant"],H_=Fy("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,"elevation"===n.variant&&e["elevation".concat(n.elevation)]]}})((t=>{let{theme:e,ownerState:n}=t;var r;return(0,Um.A)({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!n.square&&{borderRadius:e.shape.borderRadius},"outlined"===n.variant&&{border:"1px solid ".concat((e.vars||e).palette.divider)},"elevation"===n.variant&&(0,Um.A)({boxShadow:(e.vars||e).shadows[n.elevation]},!e.vars&&"dark"===e.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,ey.X4)("#fff",V_(n.elevation)),", ").concat((0,ey.X4)("#fff",V_(n.elevation)),")")},e.vars&&{backgroundImage:null==(r=e.vars.overlays)?void 0:r[n.elevation]}))})),q_=t.forwardRef((function(t,e){const n=Vy({props:t,name:"MuiPaper"}),{className:r,component:i="div",elevation:o=1,square:s=!1,variant:a="elevation"}=n,l=(0,Vm.A)(n,G_),c=(0,Um.A)({},n,{component:i,elevation:o,square:s,variant:a}),u=(t=>{const{square:e,elevation:n,variant:r,classes:i}=t;return Hm({root:["root",r,!e&&"rounded","elevation"===r&&"elevation".concat(n)]},W_,i)})(c);return(0,Zy.jsx)(H_,(0,Um.A)({as:i,ownerState:c,className:Gm(u.root,r),ref:e},l))}));function Y_(t){return gv("MuiPopover",t)}mv("MuiPopover",["root","paper"]);const X_=["onEntering"],Z_=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],K_=["slotProps"];function $_(t,e){let n=0;return"number"===typeof e?n=e:"center"===e?n=t.height/2:"bottom"===e&&(n=t.height),n}function Q_(t,e){let n=0;return"number"===typeof e?n=e:"center"===e?n=t.width/2:"right"===e&&(n=t.width),n}function J_(t){return[t.horizontal,t.vertical].map((t=>"number"===typeof t?"".concat(t,"px"):t)).join(" ")}function tw(t){return"function"===typeof t?t():t}const ew=Fy(U_,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),nw=Fy(q_,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),rw=t.forwardRef((function(e,n){var r,i,o;const s=Vy({props:e,name:"MuiPopover"}),{action:a,anchorEl:l,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:d="anchorEl",children:h,className:f,container:p,elevation:g=8,marginThreshold:m=16,open:y,PaperProps:v={},slots:b,slotProps:_,transformOrigin:w={vertical:"top",horizontal:"left"},TransitionComponent:x=f_,transitionDuration:S="auto",TransitionProps:{onEntering:A}={},disableScrollLock:E=!1}=s,T=(0,Vm.A)(s.TransitionProps,X_),P=(0,Vm.A)(s,Z_),C=null!=(r=null==_?void 0:_.paper)?r:v,I=t.useRef(),M=ov(I,C.ref),k=(0,Um.A)({},s,{anchorOrigin:c,anchorReference:d,elevation:g,marginThreshold:m,externalPaperSlotProps:C,transformOrigin:w,TransitionComponent:x,transitionDuration:S,TransitionProps:T}),O=(t=>{const{classes:e}=t;return Hm({root:["root"],paper:["paper"]},Y_,e)})(k),L=t.useCallback((()=>{if("anchorPosition"===d)return u;const t=tw(l),e=(t&&1===t.nodeType?t:Sb(I.current).body).getBoundingClientRect();return{top:e.top+$_(e,c.vertical),left:e.left+Q_(e,c.horizontal)}}),[l,c.horizontal,c.vertical,u,d]),R=t.useCallback((t=>({vertical:$_(t,w.vertical),horizontal:Q_(t,w.horizontal)})),[w.horizontal,w.vertical]),F=t.useCallback((t=>{const e={width:t.offsetWidth,height:t.offsetHeight},n=R(e);if("none"===d)return{top:null,left:null,transformOrigin:J_(n)};const r=L();let i=r.top-n.vertical,o=r.left-n.horizontal;const s=i+e.height,a=o+e.width,c=Vb(tw(l)),u=c.innerHeight-m,h=c.innerWidth-m;if(null!==m&&i<m){const t=i-m;i-=t,n.vertical+=t}else if(null!==m&&s>u){const t=s-u;i-=t,n.vertical+=t}if(null!==m&&o<m){const t=o-m;o-=t,n.horizontal+=t}else if(a>h){const t=a-h;o-=t,n.horizontal+=t}return{top:"".concat(Math.round(i),"px"),left:"".concat(Math.round(o),"px"),transformOrigin:J_(n)}}),[l,d,L,R,m]),[B,N]=t.useState(y),z=t.useCallback((()=>{const t=I.current;if(!t)return;const e=F(t);null!==e.top&&(t.style.top=e.top),null!==e.left&&(t.style.left=e.left),t.style.transformOrigin=e.transformOrigin,N(!0)}),[F]);t.useEffect((()=>(E&&window.addEventListener("scroll",z),()=>window.removeEventListener("scroll",z))),[l,E,z]);t.useEffect((()=>{y&&z()})),t.useImperativeHandle(a,(()=>y?{updatePosition:()=>{z()}}:null),[y,z]),t.useEffect((()=>{if(!y)return;const t=Ub((()=>{z()})),e=Vb(l);return e.addEventListener("resize",t),()=>{t.clear(),e.removeEventListener("resize",t)}}),[l,y,z]);let D=S;"auto"!==S||x.muiSupportAuto||(D=void 0);const j=p||(l?Sb(tw(l)).body:void 0),U=null!=(i=null==b?void 0:b.root)?i:ew,V=null!=(o=null==b?void 0:b.paper)?o:nw,W=Pb({elementType:V,externalSlotProps:(0,Um.A)({},C,{style:B?C.style:(0,Um.A)({},C.style,{opacity:0})}),additionalProps:{elevation:g,ref:M},ownerState:k,className:Gm(O.paper,null==C?void 0:C.className)}),G=Pb({elementType:U,externalSlotProps:(null==_?void 0:_.root)||{},externalForwardedProps:P,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:j,open:y},ownerState:k,className:Gm(O.root,f)}),{slotProps:H}=G,q=(0,Vm.A)(G,K_);return(0,Zy.jsx)(U,(0,Um.A)({},q,!tv(U)&&{slotProps:H,disableScrollLock:E},{children:(0,Zy.jsx)(x,(0,Um.A)({appear:!0,in:y,onEntering:(t,e)=>{A&&A(t,e),z()},onExited:()=>{N(!1)},timeout:D},T,{children:(0,Zy.jsx)(V,(0,Um.A)({},W,{children:h}))}))}))}));function iw(t){return gv("MuiMenu",t)}mv("MuiMenu",["root","paper","list"]);const ow=["onEntering"],sw=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],aw={vertical:"top",horizontal:"right"},lw={vertical:"top",horizontal:"left"},cw=Fy(rw,{shouldForwardProp:t=>Ly(t)||"classes"===t,name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),uw=Fy(nw,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),dw=Fy(jb,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),hw=t.forwardRef((function(e,n){var r,i;const o=Vy({props:e,name:"MuiMenu"}),{autoFocus:s=!0,children:a,className:l,disableAutoFocusItem:c=!1,MenuListProps:u={},onClose:d,open:h,PaperProps:f={},PopoverClasses:p,transitionDuration:g="auto",TransitionProps:{onEntering:m}={},variant:y="selectedMenu",slots:v={},slotProps:b={}}=o,_=(0,Vm.A)(o.TransitionProps,ow),w=(0,Vm.A)(o,sw),x=o_(),S="rtl"===x.direction,A=(0,Um.A)({},o,{autoFocus:s,disableAutoFocusItem:c,MenuListProps:u,onEntering:m,PaperProps:f,transitionDuration:g,TransitionProps:_,variant:y}),E=(t=>{const{classes:e}=t;return Hm({root:["root"],paper:["paper"],list:["list"]},iw,e)})(A),T=s&&!c&&h,P=t.useRef(null);let C=-1;t.Children.map(a,((e,n)=>{t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===y&&e.props.selected||-1===C)&&(C=n))}));const I=null!=(r=v.paper)?r:uw,M=null!=(i=b.paper)?i:f,k=Pb({elementType:v.root,externalSlotProps:b.root,ownerState:A,className:[E.root,l]}),O=Pb({elementType:I,externalSlotProps:M,ownerState:A,className:E.paper});return(0,Zy.jsx)(cw,(0,Um.A)({onClose:d,anchorOrigin:{vertical:"bottom",horizontal:S?"right":"left"},transformOrigin:S?aw:lw,slots:{paper:I,root:v.root},slotProps:{root:k,paper:O},open:h,ref:n,transitionDuration:g,TransitionProps:(0,Um.A)({onEntering:(t,e)=>{P.current&&P.current.adjustStyleForScrollbar(t,x),m&&m(t,e)}},_),ownerState:A},w,{classes:p,children:(0,Zy.jsx)(dw,(0,Um.A)({onKeyDown:t=>{"Tab"===t.key&&(t.preventDefault(),d&&d(t,"tabKeyDown"))},actions:P,autoFocus:s&&(-1===C||c),autoFocusItem:T,variant:y},u,{className:Gm(E.list,u.className),children:a}))}))}));function fw(t){return gv("MuiNativeSelect",t)}const pw=mv("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),gw=["className","disabled","error","IconComponent","inputRef","variant"],mw=t=>{let{ownerState:e,theme:n}=t;return(0,Um.A)({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,Um.A)({},n.vars?{backgroundColor:"rgba(".concat(n.vars.palette.common.onBackgroundChannel," / 0.05)")}:{backgroundColor:"light"===n.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},["&.".concat(pw.disabled)]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===e.variant&&{"&&&":{paddingRight:32}},"outlined"===e.variant&&{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}})},yw=Fy("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Ly,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{["&.".concat(pw.multiple)]:e.multiple}]}})(mw),vw=t=>{let{ownerState:e,theme:n}=t;return(0,Um.A)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,["&.".concat(pw.disabled)]:{color:(n.vars||n).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},"filled"===e.variant&&{right:7},"outlined"===e.variant&&{right:7})},bw=Fy("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e["icon".concat(iv(n.variant))],n.open&&e.iconOpen]}})(vw),_w=t.forwardRef((function(e,n){const{className:r,disabled:i,error:o,IconComponent:s,inputRef:a,variant:l="standard"}=e,c=(0,Vm.A)(e,gw),u=(0,Um.A)({},e,{disabled:i,variant:l,error:o}),d=(t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:o,error:s}=t;return Hm({select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon","icon".concat(iv(n)),o&&"iconOpen",r&&"disabled"]},fw,e)})(u);return(0,Zy.jsxs)(t.Fragment,{children:[(0,Zy.jsx)(yw,(0,Um.A)({ownerState:u,className:Gm(d.select,r),disabled:i,ref:a||n},c)),e.multiple?null:(0,Zy.jsx)(bw,{as:s,ownerState:u,className:d.icon})]})})),ww=_w;const xw=function(e){let{controlled:n,default:r,name:i,state:o="value"}=e;const{current:s}=t.useRef(void 0!==n),[a,l]=t.useState(r);return[s?n:a,t.useCallback((t=>{s||l(t)}),[])]};function Sw(t){return gv("MuiSelect",t)}const Aw=mv("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var Ew;const Tw=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],Pw=Fy("div",{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{["&.".concat(Aw.select)]:e.select},{["&.".concat(Aw.select)]:e[n.variant]},{["&.".concat(Aw.error)]:e.error},{["&.".concat(Aw.multiple)]:e.multiple}]}})(mw,{["&.".concat(Aw.select)]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Cw=Fy("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e["icon".concat(iv(n.variant))],n.open&&e.iconOpen]}})(vw),Iw=Fy("input",{shouldForwardProp:t=>Ry(t)&&"classes"!==t,name:"MuiSelect",slot:"NativeInput",overridesResolver:(t,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Mw(t,e){return"object"===typeof e&&null!==e?t===e:String(t)===String(e)}function kw(t){return null==t||"string"===typeof t&&!t.trim()}const Ow=t.forwardRef((function(e,n){var r;const{"aria-describedby":i,"aria-label":o,autoFocus:s,autoWidth:a,children:l,className:c,defaultOpen:u,defaultValue:d,disabled:h,displayEmpty:f,error:p=!1,IconComponent:g,inputRef:m,labelId:y,MenuProps:v={},multiple:b,name:_,onBlur:w,onChange:x,onClose:S,onFocus:A,onOpen:E,open:T,readOnly:P,renderValue:C,SelectDisplayProps:I={},tabIndex:M,value:k,variant:O="standard"}=e,L=(0,Vm.A)(e,Tw),[R,F]=xw({controlled:k,default:d,name:"Select"}),[B,N]=xw({controlled:T,default:u,name:"Select"}),z=t.useRef(null),D=t.useRef(null),[j,U]=t.useState(null),{current:V}=t.useRef(null!=T),[W,G]=t.useState(),H=ov(n,m),q=t.useCallback((t=>{D.current=t,t&&U(t)}),[]),Y=null==j?void 0:j.parentNode;t.useImperativeHandle(H,(()=>({focus:()=>{D.current.focus()},node:z.current,value:R})),[R]),t.useEffect((()=>{u&&B&&j&&!V&&(G(a?null:Y.clientWidth),D.current.focus())}),[j,a]),t.useEffect((()=>{s&&D.current.focus()}),[s]),t.useEffect((()=>{if(!y)return;const t=Sb(D.current).getElementById(y);if(t){const e=()=>{getSelection().isCollapsed&&D.current.focus()};return t.addEventListener("click",e),()=>{t.removeEventListener("click",e)}}}),[y]);const X=(t,e)=>{t?E&&E(e):S&&S(e),V||(G(a?null:Y.clientWidth),N(t))},Z=t.Children.toArray(l),K=t=>e=>{let n;if(e.currentTarget.hasAttribute("tabindex")){if(b){n=Array.isArray(R)?R.slice():[];const e=R.indexOf(t.props.value);-1===e?n.push(t.props.value):n.splice(e,1)}else n=t.props.value;if(t.props.onClick&&t.props.onClick(e),R!==n&&(F(n),x)){const r=e.nativeEvent||e,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:n,name:_}}),x(i,t)}b||X(!1,e)}},$=null!==j&&B;let Q,J;delete L["aria-invalid"];const tt=[];let et=!1,nt=!1;(dv({value:R})||f)&&(C?Q=C(R):et=!0);const rt=Z.map((e=>{if(!t.isValidElement(e))return null;let n;if(b){if(!Array.isArray(R))throw new Error((0,Km.A)(2));n=R.some((t=>Mw(t,e.props.value))),n&&et&&tt.push(e.props.children)}else n=Mw(R,e.props.value),n&&et&&(J=e.props.children);return n&&(nt=!0),t.cloneElement(e,{"aria-selected":n?"true":"false",onClick:K(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:n,value:void 0,"data-value":e.props.value})}));et&&(Q=b?0===tt.length?null:tt.reduce(((t,e,n)=>(t.push(e),n<tt.length-1&&t.push(", "),t)),[]):J);let it,ot=W;!a&&V&&j&&(ot=Y.clientWidth),it="undefined"!==typeof M?M:h?null:0;const st=I.id||(_?"mui-component-select-".concat(_):void 0),at=(0,Um.A)({},e,{variant:O,value:R,open:$,error:p}),lt=(t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:o,error:s}=t;return Hm({select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon","icon".concat(iv(n)),o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]},Sw,e)})(at),ct=(0,Um.A)({},v.PaperProps,null==(r=v.slotProps)?void 0:r.paper),ut=Xm();return(0,Zy.jsxs)(t.Fragment,{children:[(0,Zy.jsx)(Pw,(0,Um.A)({ref:q,tabIndex:it,role:"combobox","aria-controls":ut,"aria-disabled":h?"true":void 0,"aria-expanded":$?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[y,st].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:t=>{if(!P){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(t.key)&&(t.preventDefault(),X(!0,t))}},onMouseDown:h||P?null:t=>{0===t.button&&(t.preventDefault(),D.current.focus(),X(!0,t))},onBlur:t=>{!$&&w&&(Object.defineProperty(t,"target",{writable:!0,value:{value:R,name:_}}),w(t))},onFocus:A},I,{ownerState:at,className:Gm(I.className,lt.select,c),id:st,children:kw(Q)?Ew||(Ew=(0,Zy.jsx)("span",{className:"notranslate",children:"\u200b"})):Q})),(0,Zy.jsx)(Iw,(0,Um.A)({"aria-invalid":p,value:Array.isArray(R)?R.join(","):R,name:_,ref:z,"aria-hidden":!0,onChange:t=>{const e=Z.find((e=>e.props.value===t.target.value));void 0!==e&&(F(e.props.value),x&&x(t,e))},tabIndex:-1,disabled:h,className:lt.nativeInput,autoFocus:s,ownerState:at},L)),(0,Zy.jsx)(Cw,{as:g,className:lt.icon,ownerState:at}),(0,Zy.jsx)(hw,(0,Um.A)({id:"menu-".concat(_||""),anchorEl:Y,open:$,onClose:t=>{X(!1,t)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},v,{MenuListProps:(0,Um.A)({"aria-labelledby":y,role:"listbox","aria-multiselectable":b?"true":void 0,disableListWrap:!0,id:ut},v.MenuListProps),slotProps:(0,Um.A)({},v.slotProps,{paper:(0,Um.A)({},ct,{style:(0,Um.A)({minWidth:ot},null!=ct?ct.style:null)})}),children:rt}))]})})),Lw=Ow;function Rw(t){return gv("MuiSvgIcon",t)}mv("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Fw=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Bw=Fy("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,"inherit"!==n.color&&e["color".concat(iv(n.color))],e["fontSize".concat(iv(n.fontSize))]]}})((t=>{let{theme:e,ownerState:n}=t;var r,i,o,s,a,l,c,u,d,h,f,p,g;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(r=e.transitions)||null==(i=r.create)?void 0:i.call(r,"fill",{duration:null==(o=e.transitions)||null==(o=o.duration)?void 0:o.shorter}),fontSize:{inherit:"inherit",small:(null==(s=e.typography)||null==(a=s.pxToRem)?void 0:a.call(s,20))||"1.25rem",medium:(null==(l=e.typography)||null==(c=l.pxToRem)?void 0:c.call(l,24))||"1.5rem",large:(null==(u=e.typography)||null==(d=u.pxToRem)?void 0:d.call(u,35))||"2.1875rem"}[n.fontSize],color:null!=(h=null==(f=(e.vars||e).palette)||null==(f=f[n.color])?void 0:f.main)?h:{action:null==(p=(e.vars||e).palette)||null==(p=p.action)?void 0:p.active,disabled:null==(g=(e.vars||e).palette)||null==(g=g.action)?void 0:g.disabled,inherit:void 0}[n.color]}})),Nw=t.forwardRef((function(e,n){const r=Vy({props:e,name:"MuiSvgIcon"}),{children:i,className:o,color:s="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:d,viewBox:h="0 0 24 24"}=r,f=(0,Vm.A)(r,Fw),p=t.isValidElement(i)&&"svg"===i.type,g=(0,Um.A)({},r,{color:s,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:h,hasSvgAsChild:p}),m={};u||(m.viewBox=h);const y=(t=>{const{color:e,fontSize:n,classes:r}=t;return Hm({root:["root","inherit"!==e&&"color".concat(iv(e)),"fontSize".concat(iv(n))]},Rw,r)})(g);return(0,Zy.jsxs)(Bw,(0,Um.A)({as:a,className:Gm(y.root,o),focusable:"false",color:c,"aria-hidden":!d||void 0,role:d?"img":void 0,ref:n},m,f,p&&i.props,{ownerState:g,children:[p?i.props.children:i,d?(0,Zy.jsx)("title",{children:d}):null]}))}));Nw.muiName="SvgIcon";const zw=Nw;const Dw=function(e,n){function r(t,r){return(0,Zy.jsx)(zw,(0,Um.A)({"data-testid":"".concat(n,"Icon"),ref:r},t,{children:e}))}return r.muiName=zw.muiName,t.memo(t.forwardRef(r))}((0,Zy.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),jw=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Uw=["root"],Vw={name:"MuiSelect",overridesResolver:(t,e)=>e.root,shouldForwardProp:t=>Ly(t)&&"variant"!==t,slot:"Root"},Ww=Fy(Lv,Vw)(""),Gw=Fy(Qv,Vw)(""),Hw=Fy(jv,Vw)(""),qw=t.forwardRef((function(e,n){const r=Vy({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:o,classes:s={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=Dw,id:d,input:h,inputProps:f,label:p,labelId:g,MenuProps:m,multiple:y=!1,native:v=!1,onClose:b,onOpen:_,open:w,renderValue:x,SelectDisplayProps:S,variant:A="outlined"}=r,E=(0,Vm.A)(r,jw),T=v?ww:Lw,P=ev({props:r,muiFormControl:rv(),states:["variant","error"]}),C=P.variant||A,I=(0,Um.A)({},r,{variant:C,classes:s}),M=(t=>{const{classes:e}=t;return e})(I),k=(0,Vm.A)(M,Uw),O=h||{standard:(0,Zy.jsx)(Ww,{ownerState:I}),outlined:(0,Zy.jsx)(Gw,{label:p,ownerState:I}),filled:(0,Zy.jsx)(Hw,{ownerState:I})}[C],L=ov(n,O.ref);return(0,Zy.jsx)(t.Fragment,{children:t.cloneElement(O,(0,Um.A)({inputComponent:T,inputProps:(0,Um.A)({children:o,error:P.error,IconComponent:u,variant:C,type:void 0,multiple:y},v?{id:d}:{autoWidth:i,defaultOpen:l,displayEmpty:c,labelId:g,MenuProps:m,onClose:b,onOpen:_,open:w,renderValue:x,SelectDisplayProps:(0,Um.A)({id:d},S)},f,{classes:f?(0,$m.A)(k,f.classes):k},h?h.props.inputProps:{})},(y&&v||c)&&"outlined"===C?{notched:!0}:{},{ref:L,className:Gm(O.props.className,a,M.root)},!h&&{variant:C},E))})}));qw.muiName="Select";const Yw=qw;function Xw(t){return gv("MuiTextField",t)}mv("MuiTextField",["root"]);const Zw=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],Kw={standard:Lv,filled:jv,outlined:Qv},$w=Fy(gb,{name:"MuiTextField",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Qw=t.forwardRef((function(t,e){const n=Vy({props:t,name:"MuiTextField"}),{autoComplete:r,autoFocus:i=!1,children:o,className:s,color:a="primary",defaultValue:l,disabled:c=!1,error:u=!1,FormHelperTextProps:d,fullWidth:h=!1,helperText:f,id:p,InputLabelProps:g,inputProps:m,InputProps:y,inputRef:v,label:b,maxRows:_,minRows:w,multiline:x=!1,name:S,onBlur:A,onChange:E,onFocus:T,placeholder:P,required:C=!1,rows:I,select:M=!1,SelectProps:k,type:O,value:L,variant:R="outlined"}=n,F=(0,Vm.A)(n,Zw),B=(0,Um.A)({},n,{autoFocus:i,color:a,disabled:c,error:u,fullWidth:h,multiline:x,required:C,select:M,variant:R}),N=(t=>{const{classes:e}=t;return Hm({root:["root"]},Xw,e)})(B);const z={};"outlined"===R&&(g&&"undefined"!==typeof g.shrink&&(z.notched=g.shrink),z.label=b),M&&(k&&k.native||(z.id=void 0),z["aria-describedby"]=void 0);const D=Xm(p),j=f&&D?"".concat(D,"-helper-text"):void 0,U=b&&D?"".concat(D,"-label"):void 0,V=Kw[R],W=(0,Zy.jsx)(V,(0,Um.A)({"aria-describedby":j,autoComplete:r,autoFocus:i,defaultValue:l,fullWidth:h,multiline:x,name:S,rows:I,maxRows:_,minRows:w,type:O,value:L,id:D,inputRef:v,onBlur:A,onChange:E,onFocus:T,placeholder:P,inputProps:m},z,y));return(0,Zy.jsxs)($w,(0,Um.A)({className:Gm(N.root,s),disabled:c,error:u,fullWidth:h,ref:e,required:C,color:a,variant:R,ownerState:B},F,{children:[null!=b&&""!==b&&(0,Zy.jsx)(cb,(0,Um.A)({htmlFor:D,id:U},g,{children:b})),M?(0,Zy.jsx)(Yw,(0,Um.A)({"aria-describedby":j,id:D,labelId:U,value:L,input:W},k,{children:o})):W,f&&(0,Zy.jsx)(xb,(0,Um.A)({id:j},d,{children:f}))]}))})),Jw=Qw,tx=p_;let ex=!0,nx=!1;const rx=new Hb,ix={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function ox(t){t.metaKey||t.altKey||t.ctrlKey||(ex=!0)}function sx(){ex=!1}function ax(){"hidden"===this.visibilityState&&nx&&(ex=!0)}function lx(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch(n){}return ex||function(t){const{type:e,tagName:n}=t;return!("INPUT"!==n||!ix[e]||t.readOnly)||"TEXTAREA"===n&&!t.readOnly||!!t.isContentEditable}(e)}const cx=function(){const e=t.useCallback((t=>{var e;null!=t&&((e=t.ownerDocument).addEventListener("keydown",ox,!0),e.addEventListener("mousedown",sx,!0),e.addEventListener("pointerdown",sx,!0),e.addEventListener("touchstart",sx,!0),e.addEventListener("visibilitychange",ax,!0))}),[]),n=t.useRef(!1);return{isFocusVisibleRef:n,onFocus:function(t){return!!lx(t)&&(n.current=!0,!0)},onBlur:function(){return!!n.current&&(nx=!0,rx.start(100,(()=>{nx=!1})),n.current=!1,!0)},ref:e}};function ux(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function dx(e,n){var r=Object.create(null);return e&&t.Children.map(e,(function(t){return t})).forEach((function(e){r[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),r}function hx(t,e,n){return null!=n[e]?n[e]:t.props[e]}function fx(e,n,r){var i=dx(e.children),o=function(t,e){function n(n){return n in e?e[n]:t[n]}t=t||{},e=e||{};var r,i=Object.create(null),o=[];for(var s in t)s in e?o.length&&(i[s]=o,o=[]):o.push(s);var a={};for(var l in e){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];a[i[l][r]]=n(c)}a[l]=n(l)}for(r=0;r<o.length;r++)a[o[r]]=n(o[r]);return a}(n,i);return Object.keys(o).forEach((function(s){var a=o[s];if((0,t.isValidElement)(a)){var l=s in n,c=s in i,u=n[s],d=(0,t.isValidElement)(u)&&!u.props.in;!c||l&&!d?c||!l||d?c&&l&&(0,t.isValidElement)(u)&&(o[s]=(0,t.cloneElement)(a,{onExited:r.bind(null,a),in:u.props.in,exit:hx(a,"exit",e),enter:hx(a,"enter",e)})):o[s]=(0,t.cloneElement)(a,{in:!1}):o[s]=(0,t.cloneElement)(a,{onExited:r.bind(null,a),in:!0,exit:hx(a,"exit",e),enter:hx(a,"enter",e)})}})),o}var px=Object.values||function(t){return Object.keys(t).map((function(e){return t[e]}))},gx=function(e){function n(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}Xb(n,e);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,n){var r,i,o=n.children,s=n.handleExited;return{children:n.firstRender?(r=e,i=s,dx(r.children,(function(e){return(0,t.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:hx(e,"appear",r),enter:hx(e,"enter",r),exit:hx(e,"exit",r)})}))):fx(e,o,s),firstRender:!1}},r.handleExited=function(t,e){var n=dx(this.props.children);t.key in n||(t.props.onExited&&t.props.onExited(e),this.mounted&&this.setState((function(e){var n=(0,Um.A)({},e.children);return delete n[t.key],{children:n}})))},r.render=function(){var e=this.props,n=e.component,r=e.childFactory,i=(0,Vm.A)(e,["component","childFactory"]),o=this.state.contextValue,s=px(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?t.createElement(Kb.Provider,{value:o},s):t.createElement(Kb.Provider,{value:o},t.createElement(n,i,s))},n}(t.Component);gx.propTypes={},gx.defaultProps={component:"div",childFactory:function(t){return t}};const mx=gx;var yx=n(3290);const vx=function(e){const{className:n,classes:r,pulsate:i=!1,rippleX:o,rippleY:s,rippleSize:a,in:l,onExited:c,timeout:u}=e,[d,h]=t.useState(!1),f=Gm(n,r.ripple,r.rippleVisible,i&&r.ripplePulsate),p={width:a,height:a,top:-a/2+s,left:-a/2+o},g=Gm(r.child,d&&r.childLeaving,i&&r.childPulsate);return l||d||h(!0),t.useEffect((()=>{if(!l&&null!=c){const t=setTimeout(c,u);return()=>{clearTimeout(t)}}}),[c,l,u]),(0,Zy.jsx)("span",{className:f,style:p,children:(0,Zy.jsx)("span",{className:g})})};const bx=mv("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var _x,wx,xx,Sx;const Ax=["center","classes","className"];let Ex,Tx,Px,Cx;const Ix=(0,yx.i7)(Ex||(Ex=_x||(_x=ux(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),Mx=(0,yx.i7)(Tx||(Tx=wx||(wx=ux(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),kx=(0,yx.i7)(Px||(Px=xx||(xx=ux(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),Ox=Fy("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Lx=Fy(vx,{name:"MuiTouchRipple",slot:"Ripple"})(Cx||(Cx=Sx||(Sx=ux(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),bx.rippleVisible,Ix,550,(t=>{let{theme:e}=t;return e.transitions.easing.easeInOut}),bx.ripplePulsate,(t=>{let{theme:e}=t;return e.transitions.duration.shorter}),bx.child,bx.childLeaving,Mx,550,(t=>{let{theme:e}=t;return e.transitions.easing.easeInOut}),bx.childPulsate,kx,(t=>{let{theme:e}=t;return e.transitions.easing.easeInOut})),Rx=t.forwardRef((function(e,n){const r=Vy({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:s}=r,a=(0,Vm.A)(r,Ax),[l,c]=t.useState([]),u=t.useRef(0),d=t.useRef(null);t.useEffect((()=>{d.current&&(d.current(),d.current=null)}),[l]);const h=t.useRef(!1),f=qb(),p=t.useRef(null),g=t.useRef(null),m=t.useCallback((t=>{const{pulsate:e,rippleX:n,rippleY:r,rippleSize:i,cb:s}=t;c((t=>[...t,(0,Zy.jsx)(Lx,{classes:{ripple:Gm(o.ripple,bx.ripple),rippleVisible:Gm(o.rippleVisible,bx.rippleVisible),ripplePulsate:Gm(o.ripplePulsate,bx.ripplePulsate),child:Gm(o.child,bx.child),childLeaving:Gm(o.childLeaving,bx.childLeaving),childPulsate:Gm(o.childPulsate,bx.childPulsate)},timeout:550,pulsate:e,rippleX:n,rippleY:r,rippleSize:i},u.current)])),u.current+=1,d.current=s}),[o]),y=t.useCallback((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:r=!1,center:o=i||e.pulsate,fakeElement:s=!1}=e;if("mousedown"===(null==t?void 0:t.type)&&h.current)return void(h.current=!1);"touchstart"===(null==t?void 0:t.type)&&(h.current=!0);const a=s?null:g.current,l=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,d;if(o||void 0===t||0===t.clientX&&0===t.clientY||!t.clientX&&!t.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:e,clientY:n}=t.touches&&t.touches.length>0?t.touches[0]:t;c=Math.round(e-l.left),u=Math.round(n-l.top)}if(o)d=Math.sqrt((2*l.width**2+l.height**2)/3),d%2===0&&(d+=1);else{const t=2*Math.max(Math.abs((a?a.clientWidth:0)-c),c)+2,e=2*Math.max(Math.abs((a?a.clientHeight:0)-u),u)+2;d=Math.sqrt(t**2+e**2)}null!=t&&t.touches?null===p.current&&(p.current=()=>{m({pulsate:r,rippleX:c,rippleY:u,rippleSize:d,cb:n})},f.start(80,(()=>{p.current&&(p.current(),p.current=null)}))):m({pulsate:r,rippleX:c,rippleY:u,rippleSize:d,cb:n})}),[i,m,f]),v=t.useCallback((()=>{y({},{pulsate:!0})}),[y]),b=t.useCallback(((t,e)=>{if(f.clear(),"touchend"===(null==t?void 0:t.type)&&p.current)return p.current(),p.current=null,void f.start(0,(()=>{b(t,e)}));p.current=null,c((t=>t.length>0?t.slice(1):t)),d.current=e}),[f]);return t.useImperativeHandle(n,(()=>({pulsate:v,start:y,stop:b})),[v,y,b]),(0,Zy.jsx)(Ox,(0,Um.A)({className:Gm(bx.root,o.root,s),ref:g},a,{children:(0,Zy.jsx)(mx,{component:null,exit:!0,children:l})}))}));function Fx(t){return gv("MuiButtonBase",t)}const Bx=mv("MuiButtonBase",["root","disabled","focusVisible"]),Nx=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],zx=Fy("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(Bx.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Dx=t.forwardRef((function(e,n){const r=Vy({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:s,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:h=!1,LinkComponent:f="a",onBlur:p,onClick:g,onContextMenu:m,onDragLeave:y,onFocus:v,onFocusVisible:b,onKeyDown:_,onKeyUp:w,onMouseDown:x,onMouseLeave:S,onMouseUp:A,onTouchEnd:E,onTouchMove:T,onTouchStart:P,tabIndex:C=0,TouchRippleProps:I,touchRippleRef:M,type:k}=r,O=(0,Vm.A)(r,Nx),L=t.useRef(null),R=t.useRef(null),F=ov(R,M),{isFocusVisibleRef:B,onFocus:N,onBlur:z,ref:D}=cx(),[j,U]=t.useState(!1);c&&j&&U(!1),t.useImperativeHandle(i,(()=>({focusVisible:()=>{U(!0),L.current.focus()}})),[]);const[V,W]=t.useState(!1);t.useEffect((()=>{W(!0)}),[]);const G=V&&!u&&!c;function H(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;return tx((r=>{e&&e(r);return!n&&R.current&&R.current[t](r),!0}))}t.useEffect((()=>{j&&h&&!u&&V&&R.current.pulsate()}),[u,h,j,V]);const q=H("start",x),Y=H("stop",m),X=H("stop",y),Z=H("stop",A),K=H("stop",(t=>{j&&t.preventDefault(),S&&S(t)})),$=H("start",P),Q=H("stop",E),J=H("stop",T),tt=H("stop",(t=>{z(t),!1===B.current&&U(!1),p&&p(t)}),!1),et=tx((t=>{L.current||(L.current=t.currentTarget),N(t),!0===B.current&&(U(!0),b&&b(t)),v&&v(t)})),nt=()=>{const t=L.current;return l&&"button"!==l&&!("A"===t.tagName&&t.href)},rt=t.useRef(!1),it=tx((t=>{h&&!rt.current&&j&&R.current&&" "===t.key&&(rt.current=!0,R.current.stop(t,(()=>{R.current.start(t)}))),t.target===t.currentTarget&&nt()&&" "===t.key&&t.preventDefault(),_&&_(t),t.target===t.currentTarget&&nt()&&"Enter"===t.key&&!c&&(t.preventDefault(),g&&g(t))})),ot=tx((t=>{h&&" "===t.key&&R.current&&j&&!t.defaultPrevented&&(rt.current=!1,R.current.stop(t,(()=>{R.current.pulsate(t)}))),w&&w(t),g&&t.target===t.currentTarget&&nt()&&" "===t.key&&!t.defaultPrevented&&g(t)}));let st=l;"button"===st&&(O.href||O.to)&&(st=f);const at={};"button"===st?(at.type=void 0===k?"button":k,at.disabled=c):(O.href||O.to||(at.role="button"),c&&(at["aria-disabled"]=c));const lt=ov(n,D,L);const ct=(0,Um.A)({},r,{centerRipple:o,component:l,disabled:c,disableRipple:u,disableTouchRipple:d,focusRipple:h,tabIndex:C,focusVisible:j}),ut=(t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,o=Hm({root:["root",e&&"disabled",n&&"focusVisible"]},Fx,i);return n&&r&&(o.root+=" ".concat(r)),o})(ct);return(0,Zy.jsxs)(zx,(0,Um.A)({as:st,className:Gm(ut.root,a),ownerState:ct,onBlur:tt,onClick:g,onContextMenu:Y,onFocus:et,onKeyDown:it,onKeyUp:ot,onMouseDown:q,onMouseLeave:K,onMouseUp:Z,onDragLeave:X,onTouchEnd:Q,onTouchMove:J,onTouchStart:$,ref:lt,tabIndex:c?-1:C,type:k},at,O,{children:[s,G?(0,Zy.jsx)(Rx,(0,Um.A)({ref:F,center:o},I)):null]}))})),jx=Dx;function Ux(t){return gv("MuiListItem",t)}const Vx=mv("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);const Wx=mv("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function Gx(t){return gv("MuiListItemSecondaryAction",t)}mv("MuiListItemSecondaryAction",["root","disableGutters"]);const Hx=["className"],qx=Fy("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.disableGutters&&e.disableGutters]}})((t=>{let{ownerState:e}=t;return(0,Um.A)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})})),Yx=t.forwardRef((function(e,n){const r=Vy({props:e,name:"MuiListItemSecondaryAction"}),{className:i}=r,o=(0,Vm.A)(r,Hx),s=t.useContext(Cb),a=(0,Um.A)({},r,{disableGutters:s.disableGutters}),l=(t=>{const{disableGutters:e,classes:n}=t;return Hm({root:["root",e&&"disableGutters"]},Gx,n)})(a);return(0,Zy.jsx)(qx,(0,Um.A)({className:Gm(l.root,i),ownerState:a,ref:n},o))}));Yx.muiName="ListItemSecondaryAction";const Xx=Yx,Zx=["className"],Kx=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],$x=Fy("div",{name:"MuiListItem",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,"flex-start"===n.alignItems&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters,!n.disablePadding&&e.padding,n.button&&e.button,n.hasSecondaryAction&&e.secondaryAction]}})((t=>{let{theme:e,ownerState:n}=t;return(0,Um.A)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!n.disablePadding&&(0,Um.A)({paddingTop:8,paddingBottom:8},n.dense&&{paddingTop:4,paddingBottom:4},!n.disableGutters&&{paddingLeft:16,paddingRight:16},!!n.secondaryAction&&{paddingRight:48}),!!n.secondaryAction&&{["& > .".concat(Wx.root)]:{paddingRight:48}},{["&.".concat(Vx.focusVisible)]:{backgroundColor:(e.vars||e).palette.action.focus},["&.".concat(Vx.selected)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.selectedOpacity,")"):(0,ey.X4)(e.palette.primary.main,e.palette.action.selectedOpacity),["&.".concat(Vx.focusVisible)]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.focusOpacity,"))"):(0,ey.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},["&.".concat(Vx.disabled)]:{opacity:(e.vars||e).palette.action.disabledOpacity}},"flex-start"===n.alignItems&&{alignItems:"flex-start"},n.divider&&{borderBottom:"1px solid ".concat((e.vars||e).palette.divider),backgroundClip:"padding-box"},n.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(Vx.selected,":hover")]:{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / calc(").concat(e.vars.palette.action.selectedOpacity," + ").concat(e.vars.palette.action.hoverOpacity,"))"):(0,ey.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.primary.mainChannel," / ").concat(e.vars.palette.action.selectedOpacity,")"):(0,ey.X4)(e.palette.primary.main,e.palette.action.selectedOpacity)}}},n.hasSecondaryAction&&{paddingRight:48})})),Qx=Fy("li",{name:"MuiListItem",slot:"Container",overridesResolver:(t,e)=>e.container})({position:"relative"}),Jx=t.forwardRef((function(e,n){const r=Vy({props:e,name:"MuiListItem"}),{alignItems:i="center",autoFocus:o=!1,button:s=!1,children:a,className:l,component:c,components:u={},componentsProps:d={},ContainerComponent:h="li",ContainerProps:{className:f}={},dense:p=!1,disabled:g=!1,disableGutters:m=!1,disablePadding:y=!1,divider:v=!1,focusVisibleClassName:b,secondaryAction:_,selected:w=!1,slotProps:x={},slots:S={}}=r,A=(0,Vm.A)(r.ContainerProps,Zx),E=(0,Vm.A)(r,Kx),T=t.useContext(Cb),P=t.useMemo((()=>({dense:p||T.dense||!1,alignItems:i,disableGutters:m})),[i,T.dense,p,m]),C=t.useRef(null);sv((()=>{o&&C.current&&C.current.focus()}),[o]);const I=t.Children.toArray(a),M=I.length&&ub(I[I.length-1],["ListItemSecondaryAction"]),k=(0,Um.A)({},r,{alignItems:i,autoFocus:o,button:s,dense:P.dense,disabled:g,disableGutters:m,disablePadding:y,divider:v,hasSecondaryAction:M,selected:w}),O=(t=>{const{alignItems:e,button:n,classes:r,dense:i,disabled:o,disableGutters:s,disablePadding:a,divider:l,hasSecondaryAction:c,selected:u}=t;return Hm({root:["root",i&&"dense",!s&&"gutters",!a&&"padding",l&&"divider",o&&"disabled",n&&"button","flex-start"===e&&"alignItemsFlexStart",c&&"secondaryAction",u&&"selected"],container:["container"]},Ux,r)})(k),L=ov(C,n),R=S.root||u.Root||$x,F=x.root||d.root||{},B=(0,Um.A)({className:Gm(O.root,F.className,l),disabled:g},E);let N=c||"li";return s&&(B.component=c||"div",B.focusVisibleClassName=Gm(Vx.focusVisible,b),N=jx),M?(N=B.component||c?N:"div","li"===h&&("li"===N?N="div":"li"===B.component&&(B.component="div")),(0,Zy.jsx)(Cb.Provider,{value:P,children:(0,Zy.jsxs)(Qx,(0,Um.A)({as:h,className:Gm(O.container,f),ref:L,ownerState:k},A,{children:[(0,Zy.jsx)(R,(0,Um.A)({},F,!tv(R)&&{as:N,ownerState:(0,Um.A)({},k,F.ownerState)},B,{children:I})),I.pop()]}))})):(0,Zy.jsx)(Cb.Provider,{value:P,children:(0,Zy.jsxs)(R,(0,Um.A)({},F,{as:N,ref:L},!tv(R)&&{ownerState:(0,Um.A)({},k,F.ownerState)},B,{children:[I,_&&(0,Zy.jsx)(Xx,{children:_})]}))})})),tS=Jx;const eS=t.createContext(null);function nS(){return t.useContext(eS)}const rS="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";const iS=function(e){const{children:n,theme:r}=e,i=nS(),o=t.useMemo((()=>{const t=null===i?r:function(t,e){if("function"===typeof e)return e(t);return(0,Um.A)({},t,e)}(i,r);return null!=t&&(t[rS]=null!==i),t}),[r,i]);return(0,Zy.jsx)(eS.Provider,{value:o,children:n})},oS={};function sS(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.useMemo((()=>{const t=e&&n[e]||n;if("function"===typeof r){const o=r(t),s=e?(0,Um.A)({},n,{[e]:o}):o;return i?()=>s:s}return e?(0,Um.A)({},n,{[e]:r}):(0,Um.A)({},n,r)}),[e,n,r,i])}const aS=function(t){const{children:e,theme:n,themeId:r}=t,i=Dy(oS),o=nS()||oS,s=sS(r,i,n),a=sS(r,o,n,!0);return(0,Zy.jsx)(iS,{theme:a,children:(0,Zy.jsx)(zy.T.Provider,{value:s,children:e})})},lS=["theme"];function cS(t){let{theme:e}=t,n=(0,Vm.A)(t,lS);const r=e[Oy];return(0,Zy.jsx)(aS,(0,Um.A)({},n,{themeId:r?Oy:void 0,theme:r||e}))}var uS,dS,hS,fS,pS,gS,mS,yS,vS,bS=n(219),_S=n.n(bS),wS=n(6904);!function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"}(uS||(uS={})),function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}(dS||(dS={})),function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(hS||(hS={})),function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}(fS||(fS={})),function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}(pS||(pS={})),function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(gS||(gS={})),function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}(mS||(mS={})),function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}(yS||(yS={})),function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"}(vS||(vS={}));const[xS,SS]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},"undefined"!==typeof BigInt?[BigInt,!0]:[e,!1]})(),[AS,ES]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};return"undefined"!==typeof BigInt64Array?[BigInt64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),[TS,PS]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};return"undefined"!==typeof BigUint64Array?[BigUint64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),CS=t=>"number"===typeof t,IS=t=>"boolean"===typeof t,MS=t=>"function"===typeof t,kS=t=>null!=t&&Object(t)===t,OS=t=>kS(t)&&MS(t.then),LS=t=>kS(t)&&MS(t[Symbol.iterator]),RS=t=>kS(t)&&MS(t[Symbol.asyncIterator]),FS=t=>kS(t)&&kS(t.schema),BS=t=>kS(t)&&"done"in t&&"value"in t,NS=t=>kS(t)&&MS(t.stat)&&CS(t.fd),zS=t=>kS(t)&&jS(t.body),DS=t=>"_getDOMStream"in t&&"_getNodeStream"in t,jS=t=>kS(t)&&MS(t.cancel)&&MS(t.getReader)&&!DS(t),US=t=>kS(t)&&MS(t.read)&&MS(t.pipe)&&IS(t.readable)&&!DS(t),VS=t=>kS(t)&&MS(t.clear)&&MS(t.bytes)&&MS(t.position)&&MS(t.setPosition)&&MS(t.capacity)&&MS(t.getBufferIdentifier)&&MS(t.createLong);function WS(t){if(null===t)return"null";if(undefined===t)return"undefined";switch(typeof t){case"number":case"bigint":return"".concat(t);case"string":return'"'.concat(t,'"')}return"function"===typeof t[Symbol.toPrimitive]?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?"[".concat(t instanceof AS||t instanceof TS?[...t].map((t=>WS(t))):t,"]"):ArrayBuffer.isView(t)?"[".concat(t,"]"):JSON.stringify(t,((t,e)=>"bigint"===typeof e?"".concat(e):e))}function GS(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))}Object.create;function HS(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qS(t){return this instanceof qS?(this.v=t,this):new qS(t)}function YS(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||a(t,e)}))})}function a(t,e){try{!function(t){t.value instanceof qS?Promise.resolve(t.value.v).then(l,c):u(o[0][2],t)}(i[t](e))}catch(n){u(o[0][3],n)}}function l(t){a("next",t)}function c(t){a("throw",t)}function u(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function XS(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:qS(t[r](e)),done:!1}:i?i(e):e}:i}}function ZS(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=HS(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,i,(e=t[n](e)).done,e.value)}))}}}Object.create;"function"===typeof SuppressedError&&SuppressedError;const KS=new TextDecoder("utf-8"),$S=t=>KS.decode(t),QS=new TextEncoder,JS=t=>QS.encode(t),tA="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function eA(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.byteLength;const i=t.byteLength,o=new Uint8Array(t.buffer,t.byteOffset,i),s=new Uint8Array(e.buffer,e.byteOffset,Math.min(r,i));return o.set(s,n),t}function nA(t,e){const n=function(t){const e=t[0]?[t[0]]:[];let n,r,i,o;for(let s,a,l=0,c=0,u=t.length;++l<u;)s=e[c],a=t[l],!s||!a||s.buffer!==a.buffer||a.byteOffset<s.byteOffset?a&&(e[++c]=a):(({byteOffset:n,byteLength:i}=s),({byteOffset:r,byteLength:o}=a),n+i<r||r+o<n?a&&(e[++c]=a):e[c]=new Uint8Array(s.buffer,n,r-n+o));return e}(t),r=n.reduce(((t,e)=>t+e.byteLength),0);let i,o,s,a=0,l=-1;const c=Math.min(e||Number.POSITIVE_INFINITY,r);for(const u=n.length;++l<u;){if(i=n[l],o=i.subarray(0,Math.min(i.length,c-a)),c<=a+o.length){o.length<i.length?n[l]=i.subarray(o.length):o.length===i.length&&l++,s?eA(s,o,a):s=o;break}eA(s||(s=new Uint8Array(c)),o,a),a+=o.length}return[s||new Uint8Array(0),n.slice(l),r-(s?s.byteLength:0)]}function rA(t,e){let n=BS(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?("string"===typeof n&&(n=JS(n)),n instanceof ArrayBuffer||n instanceof tA?new t(n):VS(n)?rA(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0)}const iA=t=>rA(Int32Array,t),oA=t=>rA(Uint8Array,t),sA=t=>(t.next(),t);function*aA(t,e){const n=function*(t){yield t},r="string"===typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof tA?n(e):LS(e)?e:n(e);return yield*sA(function*(e){let n=null;do{n=e.next(yield rA(t,n))}while(!n.done)}(r[Symbol.iterator]())),new t}function lA(t,e){return YS(this,arguments,(function*(){if(OS(e))return yield qS(yield qS(yield*XS(ZS(lA(t,yield qS(e))))));const n=function(t){return YS(this,arguments,(function*(){yield yield qS(yield qS(t))}))},r="string"===typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof tA?n(e):LS(e)?function(t){return YS(this,arguments,(function*(){yield qS(yield*XS(ZS(sA(function*(t){let e=null;do{e=t.next(yield null===e||void 0===e?void 0:e.value)}while(!e.done)}(t[Symbol.iterator]())))))}))}(e):RS(e)?e:n(e);return yield qS(yield*XS(ZS(sA(function(e){return YS(this,arguments,(function*(){let n=null;do{n=yield qS(e.next(yield yield qS(rA(t,n))))}while(!n.done)}))}(r[Symbol.asyncIterator]()))))),yield qS(new t)}))}function cA(t,e,n){if(0!==t){n=n.slice(0,e+1);for(let r=-1;++r<=e;)n[r]+=t}return n}const uA=Symbol.for("isArrowBigNum");function dA(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return 0===n.length?Object.setPrototypeOf(rA(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...n),this.constructor.prototype)}function hA(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return dA.apply(this,e)}function fA(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return dA.apply(this,e)}function pA(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return dA.apply(this,e)}function gA(t){const{buffer:e,byteOffset:n,length:r,signed:i}=t,o=new TS(e,n,r),s=i&&o[o.length-1]&BigInt(1)<<BigInt(63);let a=s?BigInt(1):BigInt(0),l=BigInt(0);if(s){for(const t of o)a+=~t*(BigInt(1)<<BigInt(32)*l++);a*=BigInt(-1)}else for(const c of o)a+=c*(BigInt(1)<<BigInt(32)*l++);return a}let mA,yA;function vA(t){let e="";const n=new Uint32Array(2);let r=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let o=-1;const s=r.length-1;do{for(n[0]=r[o=0];o<s;)r[o++]=n[1]=n[0]/10,n[0]=(n[0]-10*n[1]<<16)+r[o];r[o]=n[1]=n[0]/10,n[0]=n[0]-10*n[1],e="".concat(n[0]).concat(e)}while(i[0]||i[1]||i[2]||i[3]);return null!==e&&void 0!==e?e:"0"}dA.prototype[uA]=!0,dA.prototype.toJSON=function(){return'"'.concat(mA(this),'"')},dA.prototype.valueOf=function(){return gA(this)},dA.prototype.toString=function(){return mA(this)},dA.prototype[Symbol.toPrimitive]=function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default"){case"number":return gA(this);case"string":return mA(this);case"default":return yA(this)}return mA(this)},Object.setPrototypeOf(hA.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(fA.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(pA.prototype,Object.create(Uint32Array.prototype)),Object.assign(hA.prototype,dA.prototype,{constructor:hA,signed:!0,TypedArray:Int32Array,BigIntArray:AS}),Object.assign(fA.prototype,dA.prototype,{constructor:fA,signed:!1,TypedArray:Uint32Array,BigIntArray:TS}),Object.assign(pA.prototype,dA.prototype,{constructor:pA,signed:!0,TypedArray:Uint32Array,BigIntArray:TS}),SS?(yA=t=>8===t.byteLength?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:vA(t),mA=t=>8===t.byteLength?"".concat(new t.BigIntArray(t.buffer,t.byteOffset,1)[0]):vA(t)):(mA=vA,yA=mA);class bA{static new(t,e){switch(e){case!0:return new hA(t);case!1:return new fA(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case AS:return new hA(t)}return 16===t.byteLength?new pA(t):new fA(t)}static signed(t){return new hA(t)}static unsigned(t){return new fA(t)}static decimal(t){return new pA(t)}constructor(t,e){return bA.new(t,e)}}var _A,wA,xA,SA,AA,EA,TA,PA,CA,IA,MA,kA,OA,LA,RA,FA,BA,NA,zA,DA;class jA{static isNull(t){return(null===t||void 0===t?void 0:t.typeId)===yS.Null}static isInt(t){return(null===t||void 0===t?void 0:t.typeId)===yS.Int}static isFloat(t){return(null===t||void 0===t?void 0:t.typeId)===yS.Float}static isBinary(t){return(null===t||void 0===t?void 0:t.typeId)===yS.Binary}static isUtf8(t){return(null===t||void 0===t?void 0:t.typeId)===yS.Utf8}static isBool(t){return(null===t||void 0===t?void 0:t.typeId)===yS.Bool}static isDecimal(t){return(null===t||void 0===t?void 0:t.typeId)===yS.Decimal}static isDate(t){return(null===t||void 0===t?void 0:t.typeId)===yS.Date}static isTime(t){return(null===t||void 0===t?void 0:t.typeId)===yS.Time}static isTimestamp(t){return(null===t||void 0===t?void 0:t.typeId)===yS.Timestamp}static isInterval(t){return(null===t||void 0===t?void 0:t.typeId)===yS.Interval}static isList(t){return(null===t||void 0===t?void 0:t.typeId)===yS.List}static isStruct(t){return(null===t||void 0===t?void 0:t.typeId)===yS.Struct}static isUnion(t){return(null===t||void 0===t?void 0:t.typeId)===yS.Union}static isFixedSizeBinary(t){return(null===t||void 0===t?void 0:t.typeId)===yS.FixedSizeBinary}static isFixedSizeList(t){return(null===t||void 0===t?void 0:t.typeId)===yS.FixedSizeList}static isMap(t){return(null===t||void 0===t?void 0:t.typeId)===yS.Map}static isDictionary(t){return(null===t||void 0===t?void 0:t.typeId)===yS.Dictionary}static isDenseUnion(t){return jA.isUnion(t)&&t.mode===dS.Dense}static isSparseUnion(t){return jA.isUnion(t)&&t.mode===dS.Sparse}get typeId(){return yS.NONE}}_A=Symbol.toStringTag,jA[_A]=((DA=jA.prototype).children=null,DA.ArrayType=Array,DA[Symbol.toStringTag]="DataType");class UA extends jA{toString(){return"Null"}get typeId(){return yS.Null}}wA=Symbol.toStringTag,UA[wA]=(t=>t[Symbol.toStringTag]="Null")(UA.prototype);class VA extends jA{constructor(t,e){super(),this.isSigned=t,this.bitWidth=e}get typeId(){return yS.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?AS:TS}throw new Error("Unrecognized ".concat(this[Symbol.toStringTag]," type"))}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}xA=Symbol.toStringTag,VA[xA]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(VA.prototype);class WA extends VA{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(class extends VA{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(class extends VA{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(WA.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(class extends VA{constructor(){super(!0,64)}get ArrayType(){return AS}}.prototype,"ArrayType",{value:AS}),Object.defineProperty(class extends VA{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(class extends VA{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(class extends VA{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(class extends VA{constructor(){super(!1,64)}get ArrayType(){return TS}}.prototype,"ArrayType",{value:TS});class GA extends jA{constructor(t){super(),this.precision=t}get typeId(){return yS.Float}get ArrayType(){switch(this.precision){case hS.HALF:return Uint16Array;case hS.SINGLE:return Float32Array;case hS.DOUBLE:return Float64Array}throw new Error("Unrecognized ".concat(this[Symbol.toStringTag]," type"))}toString(){return"Float".concat(this.precision<<5||16)}}SA=Symbol.toStringTag,GA[SA]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(GA.prototype);Object.defineProperty(class extends GA{constructor(){super(hS.HALF)}}.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(class extends GA{constructor(){super(hS.SINGLE)}}.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(class extends GA{constructor(){super(hS.DOUBLE)}}.prototype,"ArrayType",{value:Float64Array});class HA extends jA{constructor(){super()}get typeId(){return yS.Binary}toString(){return"Binary"}}AA=Symbol.toStringTag,HA[AA]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(HA.prototype);class qA extends jA{constructor(){super()}get typeId(){return yS.Utf8}toString(){return"Utf8"}}EA=Symbol.toStringTag,qA[EA]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(qA.prototype);class YA extends jA{constructor(){super()}get typeId(){return yS.Bool}toString(){return"Bool"}}TA=Symbol.toStringTag,YA[TA]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(YA.prototype);class XA extends jA{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;super(),this.scale=t,this.precision=e,this.bitWidth=n}get typeId(){return yS.Decimal}toString(){return"Decimal[".concat(this.precision,"e").concat(this.scale>0?"+":"").concat(this.scale,"]")}}PA=Symbol.toStringTag,XA[PA]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(XA.prototype);class ZA extends jA{constructor(t){super(),this.unit=t}get typeId(){return yS.Date}toString(){return"Date".concat(32*(this.unit+1),"<").concat(fS[this.unit],">")}}CA=Symbol.toStringTag,ZA[CA]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(ZA.prototype);class KA extends jA{constructor(t,e){super(),this.unit=t,this.bitWidth=e}get typeId(){return yS.Time}toString(){return"Time".concat(this.bitWidth,"<").concat(pS[this.unit],">")}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return AS}throw new Error("Unrecognized ".concat(this[Symbol.toStringTag]," type"))}}IA=Symbol.toStringTag,KA[IA]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(KA.prototype);class $A extends jA{constructor(t,e){super(),this.unit=t,this.timezone=e}get typeId(){return yS.Timestamp}toString(){return"Timestamp<".concat(pS[this.unit]).concat(this.timezone?", ".concat(this.timezone):"",">")}}MA=Symbol.toStringTag,$A[MA]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))($A.prototype);class QA extends jA{constructor(t){super(),this.unit=t}get typeId(){return yS.Interval}toString(){return"Interval<".concat(gS[this.unit],">")}}kA=Symbol.toStringTag,QA[kA]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(QA.prototype);class JA extends jA{constructor(t){super(),this.children=[t]}get typeId(){return yS.List}toString(){return"List<".concat(this.valueType,">")}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}OA=Symbol.toStringTag,JA[OA]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(JA.prototype);class tE extends jA{constructor(t){super(),this.children=t}get typeId(){return yS.Struct}toString(){return"Struct<{".concat(this.children.map((t=>"".concat(t.name,":").concat(t.type))).join(", "),"}>")}}LA=Symbol.toStringTag,tE[LA]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(tE.prototype);class eE extends jA{constructor(t,e,n){super(),this.mode=t,this.children=n,this.typeIds=e=Int32Array.from(e),this.typeIdToChildIndex=e.reduce(((t,e,n)=>(t[e]=n)&&t||t),Object.create(null))}get typeId(){return yS.Union}toString(){return"".concat(this[Symbol.toStringTag],"<").concat(this.children.map((t=>"".concat(t.type))).join(" | "),">")}}RA=Symbol.toStringTag,eE[RA]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(eE.prototype);class nE extends jA{constructor(t){super(),this.byteWidth=t}get typeId(){return yS.FixedSizeBinary}toString(){return"FixedSizeBinary[".concat(this.byteWidth,"]")}}FA=Symbol.toStringTag,nE[FA]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(nE.prototype);class rE extends jA{constructor(t,e){super(),this.listSize=t,this.children=[e]}get typeId(){return yS.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}BA=Symbol.toStringTag,rE[BA]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(rE.prototype);class iE extends jA{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.children=[t],this.keysSorted=e}get typeId(){return yS.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return"Map<{".concat(this.children[0].type.children.map((t=>"".concat(t.name,":").concat(t.type))).join(", "),"}>")}}NA=Symbol.toStringTag,iE[NA]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(iE.prototype);const oE=(sE=-1,()=>++sE);var sE;class aE extends jA{constructor(t,e,n,r){super(),this.indices=e,this.dictionary=t,this.isOrdered=r||!1,this.id=null==n?oE():"number"===typeof n?n:n.low}get typeId(){return yS.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return"Dictionary<".concat(this.indices,", ").concat(this.dictionary,">")}}function lE(t){const e=t;switch(t.typeId){case yS.Decimal:return t.bitWidth/32;case yS.Timestamp:return 2;case yS.Date:case yS.Interval:return 1+e.unit;case yS.FixedSizeList:return e.listSize;case yS.FixedSizeBinary:return e.byteWidth;default:return 1}}zA=Symbol.toStringTag,aE[zA]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(aE.prototype);class cE{visitMany(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.map(((t,e)=>this.visit(t,...n.map((t=>t[e])))))}visit(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(t){return function(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("number"===typeof e)return uE(t,e,n);if("string"===typeof e&&e in yS)return uE(t,yS[e],n);if(e&&e instanceof jA)return uE(t,dE(e),n);if((null===e||void 0===e?void 0:e.type)&&e.type instanceof jA)return uE(t,dE(e.type),n);return uE(t,yS.NONE,n)}(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}getVisitFnByTypeId(t){return uE(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}visitNull(t){return null}visitBool(t){return null}visitInt(t){return null}visitFloat(t){return null}visitUtf8(t){return null}visitBinary(t){return null}visitFixedSizeBinary(t){return null}visitDate(t){return null}visitTimestamp(t){return null}visitTime(t){return null}visitDecimal(t){return null}visitList(t){return null}visitStruct(t){return null}visitUnion(t){return null}visitDictionary(t){return null}visitInterval(t){return null}visitFixedSizeList(t){return null}visitMap(t){return null}}function uE(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=null;switch(e){case yS.Null:r=t.visitNull;break;case yS.Bool:r=t.visitBool;break;case yS.Int:r=t.visitInt;break;case yS.Int8:r=t.visitInt8||t.visitInt;break;case yS.Int16:r=t.visitInt16||t.visitInt;break;case yS.Int32:r=t.visitInt32||t.visitInt;break;case yS.Int64:r=t.visitInt64||t.visitInt;break;case yS.Uint8:r=t.visitUint8||t.visitInt;break;case yS.Uint16:r=t.visitUint16||t.visitInt;break;case yS.Uint32:r=t.visitUint32||t.visitInt;break;case yS.Uint64:r=t.visitUint64||t.visitInt;break;case yS.Float:r=t.visitFloat;break;case yS.Float16:r=t.visitFloat16||t.visitFloat;break;case yS.Float32:r=t.visitFloat32||t.visitFloat;break;case yS.Float64:r=t.visitFloat64||t.visitFloat;break;case yS.Utf8:r=t.visitUtf8;break;case yS.Binary:r=t.visitBinary;break;case yS.FixedSizeBinary:r=t.visitFixedSizeBinary;break;case yS.Date:r=t.visitDate;break;case yS.DateDay:r=t.visitDateDay||t.visitDate;break;case yS.DateMillisecond:r=t.visitDateMillisecond||t.visitDate;break;case yS.Timestamp:r=t.visitTimestamp;break;case yS.TimestampSecond:r=t.visitTimestampSecond||t.visitTimestamp;break;case yS.TimestampMillisecond:r=t.visitTimestampMillisecond||t.visitTimestamp;break;case yS.TimestampMicrosecond:r=t.visitTimestampMicrosecond||t.visitTimestamp;break;case yS.TimestampNanosecond:r=t.visitTimestampNanosecond||t.visitTimestamp;break;case yS.Time:r=t.visitTime;break;case yS.TimeSecond:r=t.visitTimeSecond||t.visitTime;break;case yS.TimeMillisecond:r=t.visitTimeMillisecond||t.visitTime;break;case yS.TimeMicrosecond:r=t.visitTimeMicrosecond||t.visitTime;break;case yS.TimeNanosecond:r=t.visitTimeNanosecond||t.visitTime;break;case yS.Decimal:r=t.visitDecimal;break;case yS.List:r=t.visitList;break;case yS.Struct:r=t.visitStruct;break;case yS.Union:r=t.visitUnion;break;case yS.DenseUnion:r=t.visitDenseUnion||t.visitUnion;break;case yS.SparseUnion:r=t.visitSparseUnion||t.visitUnion;break;case yS.Dictionary:r=t.visitDictionary;break;case yS.Interval:r=t.visitInterval;break;case yS.IntervalDayTime:r=t.visitIntervalDayTime||t.visitInterval;break;case yS.IntervalYearMonth:r=t.visitIntervalYearMonth||t.visitInterval;break;case yS.FixedSizeList:r=t.visitFixedSizeList;break;case yS.Map:r=t.visitMap}if("function"===typeof r)return r;if(!n)return()=>null;throw new Error("Unrecognized type '".concat(yS[e],"'"))}function dE(t){switch(t.typeId){case yS.Null:return yS.Null;case yS.Int:{const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?yS.Int8:yS.Uint8;case 16:return n?yS.Int16:yS.Uint16;case 32:return n?yS.Int32:yS.Uint32;case 64:return n?yS.Int64:yS.Uint64}return yS.Int}case yS.Float:switch(t.precision){case hS.HALF:return yS.Float16;case hS.SINGLE:return yS.Float32;case hS.DOUBLE:return yS.Float64}return yS.Float;case yS.Binary:return yS.Binary;case yS.Utf8:return yS.Utf8;case yS.Bool:return yS.Bool;case yS.Decimal:return yS.Decimal;case yS.Time:switch(t.unit){case pS.SECOND:return yS.TimeSecond;case pS.MILLISECOND:return yS.TimeMillisecond;case pS.MICROSECOND:return yS.TimeMicrosecond;case pS.NANOSECOND:return yS.TimeNanosecond}return yS.Time;case yS.Timestamp:switch(t.unit){case pS.SECOND:return yS.TimestampSecond;case pS.MILLISECOND:return yS.TimestampMillisecond;case pS.MICROSECOND:return yS.TimestampMicrosecond;case pS.NANOSECOND:return yS.TimestampNanosecond}return yS.Timestamp;case yS.Date:switch(t.unit){case fS.DAY:return yS.DateDay;case fS.MILLISECOND:return yS.DateMillisecond}return yS.Date;case yS.Interval:switch(t.unit){case gS.DAY_TIME:return yS.IntervalDayTime;case gS.YEAR_MONTH:return yS.IntervalYearMonth}return yS.Interval;case yS.Map:return yS.Map;case yS.List:return yS.List;case yS.Struct:return yS.Struct;case yS.Union:switch(t.mode){case dS.Dense:return yS.DenseUnion;case dS.Sparse:return yS.SparseUnion}return yS.Union;case yS.FixedSizeBinary:return yS.FixedSizeBinary;case yS.FixedSizeList:return yS.FixedSizeList;case yS.Dictionary:return yS.Dictionary}throw new Error("Unrecognized type '".concat(yS[t.typeId],"'"))}cE.prototype.visitInt8=null,cE.prototype.visitInt16=null,cE.prototype.visitInt32=null,cE.prototype.visitInt64=null,cE.prototype.visitUint8=null,cE.prototype.visitUint16=null,cE.prototype.visitUint32=null,cE.prototype.visitUint64=null,cE.prototype.visitFloat16=null,cE.prototype.visitFloat32=null,cE.prototype.visitFloat64=null,cE.prototype.visitDateDay=null,cE.prototype.visitDateMillisecond=null,cE.prototype.visitTimestampSecond=null,cE.prototype.visitTimestampMillisecond=null,cE.prototype.visitTimestampMicrosecond=null,cE.prototype.visitTimestampNanosecond=null,cE.prototype.visitTimeSecond=null,cE.prototype.visitTimeMillisecond=null,cE.prototype.visitTimeMicrosecond=null,cE.prototype.visitTimeNanosecond=null,cE.prototype.visitDenseUnion=null,cE.prototype.visitSparseUnion=null,cE.prototype.visitIntervalDayTime=null,cE.prototype.visitIntervalYearMonth=null;const hE=new Float64Array(1),fE=new Uint32Array(hE.buffer);function pE(t){const e=(31744&t)>>10,n=(1023&t)/1024,r=Math.pow(-1,(32768&t)>>15);switch(e){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,e-15)*(1+n)}class gE extends cE{}function mE(t){return(e,n,r)=>{if(e.setValid(n,null!=r))return t(e,n,r)}}const yE=(t,e,n)=>{t[e]=Math.trunc(n%4294967296),t[e+1]=Math.trunc(n/4294967296)},vE=(t,e,n,r)=>{if(n+1<e.length){const{[n]:i,[n+1]:o}=e;t.set(r.subarray(0,o-i),i)}},bE=(t,e,n)=>{let{values:r}=t;r[e]=n},_E=(t,e,n)=>{let{values:r}=t;r[e]=n},wE=(t,e,n)=>{let{values:r}=t;r[e]=function(t){if(t!==t)return 32256;hE[0]=t;const e=(2147483648&fE[1])>>16&65535;let n=2146435072&fE[1],r=0;return n>=1089470464?fE[0]>0?n=31744:(n=(2080374784&n)>>16,r=(1048575&fE[1])>>10):n<=1056964608?(r=1048576+(1048575&fE[1]),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=512+(1048575&fE[1])>>10),e|n|65535&r}(n)},xE=(t,e,n)=>{let{values:r}=t;((t,e,n)=>{t[e]=Math.trunc(n/864e5)})(r,e,n.valueOf())},SE=(t,e,n)=>{let{values:r}=t;yE(r,2*e,n.valueOf())},AE=(t,e,n)=>{let{values:r}=t;return yE(r,2*e,n/1e3)},EE=(t,e,n)=>{let{values:r}=t;return yE(r,2*e,n)},TE=(t,e,n)=>{let{values:r}=t;return((t,e,n)=>{t[e]=Math.trunc(1e3*n%4294967296),t[e+1]=Math.trunc(1e3*n/4294967296)})(r,2*e,n)},PE=(t,e,n)=>{let{values:r}=t;return((t,e,n)=>{t[e]=Math.trunc(1e6*n%4294967296),t[e+1]=Math.trunc(1e6*n/4294967296)})(r,2*e,n)},CE=(t,e,n)=>{let{values:r}=t;r[e]=n},IE=(t,e,n)=>{let{values:r}=t;r[e]=n},ME=(t,e,n)=>{let{values:r}=t;r[e]=n},kE=(t,e,n)=>{let{values:r}=t;r[e]=n},OE=(t,e,n)=>{const r=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[r];BE.visit(i,t.valueOffsets[e],n)},LE=(t,e,n)=>{const r=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[r];BE.visit(i,e,n)},RE=(t,e,n)=>{let{values:r}=t;r.set(n.subarray(0,2),2*e)},FE=(t,e,n)=>{let{values:r}=t;r[e]=12*n[0]+n[1]%12};gE.prototype.visitBool=mE(((t,e,n)=>{let{offset:r,values:i}=t;const o=r+e;n?i[o>>3]|=1<<o%8:i[o>>3]&=~(1<<o%8)})),gE.prototype.visitInt=mE(bE),gE.prototype.visitInt8=mE(bE),gE.prototype.visitInt16=mE(bE),gE.prototype.visitInt32=mE(bE),gE.prototype.visitInt64=mE(bE),gE.prototype.visitUint8=mE(bE),gE.prototype.visitUint16=mE(bE),gE.prototype.visitUint32=mE(bE),gE.prototype.visitUint64=mE(bE),gE.prototype.visitFloat=mE(((t,e,n)=>{switch(t.type.precision){case hS.HALF:return wE(t,e,n);case hS.SINGLE:case hS.DOUBLE:return _E(t,e,n)}})),gE.prototype.visitFloat16=mE(wE),gE.prototype.visitFloat32=mE(_E),gE.prototype.visitFloat64=mE(_E),gE.prototype.visitUtf8=mE(((t,e,n)=>{let{values:r,valueOffsets:i}=t;vE(r,i,e,JS(n))})),gE.prototype.visitBinary=mE(((t,e,n)=>{let{values:r,valueOffsets:i}=t;return vE(r,i,e,n)})),gE.prototype.visitFixedSizeBinary=mE(((t,e,n)=>{let{stride:r,values:i}=t;i.set(n.subarray(0,r),r*e)})),gE.prototype.visitDate=mE(((t,e,n)=>{t.type.unit===fS.DAY?xE(t,e,n):SE(t,e,n)})),gE.prototype.visitDateDay=mE(xE),gE.prototype.visitDateMillisecond=mE(SE),gE.prototype.visitTimestamp=mE(((t,e,n)=>{switch(t.type.unit){case pS.SECOND:return AE(t,e,n);case pS.MILLISECOND:return EE(t,e,n);case pS.MICROSECOND:return TE(t,e,n);case pS.NANOSECOND:return PE(t,e,n)}})),gE.prototype.visitTimestampSecond=mE(AE),gE.prototype.visitTimestampMillisecond=mE(EE),gE.prototype.visitTimestampMicrosecond=mE(TE),gE.prototype.visitTimestampNanosecond=mE(PE),gE.prototype.visitTime=mE(((t,e,n)=>{switch(t.type.unit){case pS.SECOND:return CE(t,e,n);case pS.MILLISECOND:return IE(t,e,n);case pS.MICROSECOND:return ME(t,e,n);case pS.NANOSECOND:return kE(t,e,n)}})),gE.prototype.visitTimeSecond=mE(CE),gE.prototype.visitTimeMillisecond=mE(IE),gE.prototype.visitTimeMicrosecond=mE(ME),gE.prototype.visitTimeNanosecond=mE(kE),gE.prototype.visitDecimal=mE(((t,e,n)=>{let{values:r,stride:i}=t;r.set(n.subarray(0,i),i*e)})),gE.prototype.visitList=mE(((t,e,n)=>{const r=t.children[0],i=t.valueOffsets,o=BE.getVisitFn(r);if(Array.isArray(n))for(let s=-1,a=i[e],l=i[e+1];a<l;)o(r,a++,n[++s]);else for(let s=-1,a=i[e],l=i[e+1];a<l;)o(r,a++,n.get(++s))})),gE.prototype.visitStruct=mE(((t,e,n)=>{const r=t.type.children.map((t=>BE.getVisitFn(t.type))),i=n instanceof Map?(o=e,s=n,(t,e,n,r)=>e&&t(e,o,s.get(n.name))):n instanceof JT?((t,e)=>(n,r,i,o)=>r&&n(r,t,e.get(o)))(e,n):Array.isArray(n)?((t,e)=>(n,r,i,o)=>r&&n(r,t,e[o]))(e,n):((t,e)=>(n,r,i,o)=>r&&n(r,t,e[i.name]))(e,n);var o,s;t.type.children.forEach(((e,n)=>i(r[n],t.children[n],e,n)))})),gE.prototype.visitUnion=mE(((t,e,n)=>{t.type.mode===dS.Dense?OE(t,e,n):LE(t,e,n)})),gE.prototype.visitDenseUnion=mE(OE),gE.prototype.visitSparseUnion=mE(LE),gE.prototype.visitDictionary=mE(((t,e,n)=>{var r;null===(r=t.dictionary)||void 0===r||r.set(t.values[e],n)})),gE.prototype.visitInterval=mE(((t,e,n)=>{t.type.unit===gS.DAY_TIME?RE(t,e,n):FE(t,e,n)})),gE.prototype.visitIntervalDayTime=mE(RE),gE.prototype.visitIntervalYearMonth=mE(FE),gE.prototype.visitFixedSizeList=mE(((t,e,n)=>{const{stride:r}=t,i=t.children[0],o=BE.getVisitFn(i);if(Array.isArray(n))for(let s=-1,a=e*r;++s<r;)o(i,a+s,n[s]);else for(let s=-1,a=e*r;++s<r;)o(i,a+s,n.get(s))})),gE.prototype.visitMap=mE(((t,e,n)=>{const r=t.children[0],{valueOffsets:i}=t,o=BE.getVisitFn(r);let{[e]:s,[e+1]:a}=i;const l=n instanceof Map?n.entries():Object.entries(n);for(const c of l)if(o(r,s,c),++s>=a)break}));const BE=new gE,NE=Symbol.for("parent"),zE=Symbol.for("rowIndex");class DE{constructor(t,e){return this[NE]=t,this[zE]=e,new Proxy(this,new UE)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[zE],e=this[NE],n=e.type.children,r={};for(let i=-1,o=n.length;++i<o;)r[n[i].name]=cT.visit(e.children[i],t);return r}toString(){return"{".concat([...this].map((t=>{let[e,n]=t;return"".concat(WS(e),": ").concat(WS(n))})).join(", "),"}")}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new jE(this[NE],this[zE])}}class jE{constructor(t,e){this.childIndex=0,this.children=t.children,this.rowIndex=e,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,cT.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(DE.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[NE]:{writable:!0,enumerable:!1,configurable:!1,value:null},[zE]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class UE{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[NE].type.children.map((t=>t.name))}has(t,e){return-1!==t[NE].type.children.findIndex((t=>t.name===e))}getOwnPropertyDescriptor(t,e){if(-1!==t[NE].type.children.findIndex((t=>t.name===e)))return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const n=t[NE].type.children.findIndex((t=>t.name===e));if(-1!==n){const r=cT.visit(t[NE].children[n],t[zE]);return Reflect.set(t,e,r),r}}set(t,e,n){const r=t[NE].type.children.findIndex((t=>t.name===e));return-1!==r?(BE.visit(t[NE].children[r],t[zE],n),Reflect.set(t,e,n)):!(!Reflect.has(t,e)&&"symbol"!==typeof e)&&Reflect.set(t,e,n)}}class VE extends cE{}function WE(t){return(e,n)=>e.getValid(n)?t(e,n):null}const GE=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),HE=t=>new Date(t),qE=(t,e,n)=>{if(n+1>=e.length)return null;const r=e[n],i=e[n+1];return t.subarray(r,i)},YE=(t,e)=>{let{values:n}=t;return((t,e)=>HE(((t,e)=>864e5*t[e])(t,e)))(n,e)},XE=(t,e)=>{let{values:n}=t;return((t,e)=>HE(GE(t,e)))(n,2*e)},ZE=(t,e)=>{let{stride:n,values:r}=t;return r[n*e]},KE=(t,e)=>{let{values:n}=t;return n[e]},$E=(t,e)=>{let{values:n}=t;return 1e3*GE(n,2*e)},QE=(t,e)=>{let{values:n}=t;return GE(n,2*e)},JE=(t,e)=>{let{values:n}=t;return((t,e)=>t[e+1]/1e3*4294967296+(t[e]>>>0)/1e3)(n,2*e)},tT=(t,e)=>{let{values:n}=t;return((t,e)=>t[e+1]/1e6*4294967296+(t[e]>>>0)/1e6)(n,2*e)},eT=(t,e)=>{let{values:n}=t;return n[e]},nT=(t,e)=>{let{values:n}=t;return n[e]},rT=(t,e)=>{let{values:n}=t;return n[e]},iT=(t,e)=>{let{values:n}=t;return n[e]},oT=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[n];return cT.visit(r,t.valueOffsets[e])},sT=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[n];return cT.visit(r,e)},aT=(t,e)=>{let{values:n}=t;return n.subarray(2*e,2*(e+1))},lT=(t,e)=>{let{values:n}=t;const r=n[e],i=new Int32Array(2);return i[0]=Math.trunc(r/12),i[1]=Math.trunc(r%12),i};VE.prototype.visitNull=WE(((t,e)=>null)),VE.prototype.visitBool=WE(((t,e)=>{let{offset:n,values:r}=t;const i=n+e;return 0!==(r[i>>3]&1<<i%8)})),VE.prototype.visitInt=WE(((t,e)=>{let{values:n}=t;return n[e]})),VE.prototype.visitInt8=WE(ZE),VE.prototype.visitInt16=WE(ZE),VE.prototype.visitInt32=WE(ZE),VE.prototype.visitInt64=WE(KE),VE.prototype.visitUint8=WE(ZE),VE.prototype.visitUint16=WE(ZE),VE.prototype.visitUint32=WE(ZE),VE.prototype.visitUint64=WE(KE),VE.prototype.visitFloat=WE(((t,e)=>{let{type:n,values:r}=t;return n.precision!==hS.HALF?r[e]:pE(r[e])})),VE.prototype.visitFloat16=WE(((t,e)=>{let{stride:n,values:r}=t;return pE(r[n*e])})),VE.prototype.visitFloat32=WE(ZE),VE.prototype.visitFloat64=WE(ZE),VE.prototype.visitUtf8=WE(((t,e)=>{let{values:n,valueOffsets:r}=t;const i=qE(n,r,e);return null!==i?$S(i):null})),VE.prototype.visitBinary=WE(((t,e)=>{let{values:n,valueOffsets:r}=t;return qE(n,r,e)})),VE.prototype.visitFixedSizeBinary=WE(((t,e)=>{let{stride:n,values:r}=t;return r.subarray(n*e,n*(e+1))})),VE.prototype.visitDate=WE(((t,e)=>t.type.unit===fS.DAY?YE(t,e):XE(t,e))),VE.prototype.visitDateDay=WE(YE),VE.prototype.visitDateMillisecond=WE(XE),VE.prototype.visitTimestamp=WE(((t,e)=>{switch(t.type.unit){case pS.SECOND:return $E(t,e);case pS.MILLISECOND:return QE(t,e);case pS.MICROSECOND:return JE(t,e);case pS.NANOSECOND:return tT(t,e)}})),VE.prototype.visitTimestampSecond=WE($E),VE.prototype.visitTimestampMillisecond=WE(QE),VE.prototype.visitTimestampMicrosecond=WE(JE),VE.prototype.visitTimestampNanosecond=WE(tT),VE.prototype.visitTime=WE(((t,e)=>{switch(t.type.unit){case pS.SECOND:return eT(t,e);case pS.MILLISECOND:return nT(t,e);case pS.MICROSECOND:return rT(t,e);case pS.NANOSECOND:return iT(t,e)}})),VE.prototype.visitTimeSecond=WE(eT),VE.prototype.visitTimeMillisecond=WE(nT),VE.prototype.visitTimeMicrosecond=WE(rT),VE.prototype.visitTimeNanosecond=WE(iT),VE.prototype.visitDecimal=WE(((t,e)=>{let{values:n,stride:r}=t;return bA.decimal(n.subarray(r*e,r*(e+1)))})),VE.prototype.visitList=WE(((t,e)=>{const{valueOffsets:n,stride:r,children:i}=t,{[e*r]:o,[e*r+1]:s}=n,a=i[0].slice(o,s-o);return new JT([a])})),VE.prototype.visitStruct=WE(((t,e)=>new DE(t,e))),VE.prototype.visitUnion=WE(((t,e)=>t.type.mode===dS.Dense?oT(t,e):sT(t,e))),VE.prototype.visitDenseUnion=WE(oT),VE.prototype.visitSparseUnion=WE(sT),VE.prototype.visitDictionary=WE(((t,e)=>{var n;return null===(n=t.dictionary)||void 0===n?void 0:n.get(t.values[e])})),VE.prototype.visitInterval=WE(((t,e)=>t.type.unit===gS.DAY_TIME?aT(t,e):lT(t,e))),VE.prototype.visitIntervalDayTime=WE(aT),VE.prototype.visitIntervalYearMonth=WE(lT),VE.prototype.visitFixedSizeList=WE(((t,e)=>{const{stride:n,children:r}=t,i=r[0].slice(e*n,n);return new JT([i])})),VE.prototype.visitMap=WE(((t,e)=>{const{valueOffsets:n,children:r}=t,{[e]:i,[e+1]:o}=n,s=r[0];return new hT(s.slice(i,o-i))}));const cT=new VE,uT=Symbol.for("keys"),dT=Symbol.for("vals");class hT{constructor(t){return this[uT]=new JT([t.children[0]]).memoize(),this[dT]=t.children[1],new Proxy(this,new pT)}[Symbol.iterator](){return new fT(this[uT],this[dT])}get size(){return this[uT].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[uT],e=this[dT],n={};for(let r=-1,i=t.length;++r<i;)n[t.get(r)]=cT.visit(e,r);return n}toString(){return"{".concat([...this].map((t=>{let[e,n]=t;return"".concat(WS(e),": ").concat(WS(n))})).join(", "),"}")}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class fT{constructor(t,e){this.keys=t,this.vals=e,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),cT.visit(this.vals,t)]})}}class pT{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[uT].toArray().map(String)}has(t,e){return t[uT].includes(e)}getOwnPropertyDescriptor(t,e){if(-1!==t[uT].indexOf(e))return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const n=t[uT].indexOf(e);if(-1!==n){const r=cT.visit(Reflect.get(t,dT),n);return Reflect.set(t,e,r),r}}set(t,e,n){const r=t[uT].indexOf(e);return-1!==r?(BE.visit(Reflect.get(t,dT),r,n),Reflect.set(t,e,n)):!!Reflect.has(t,e)&&Reflect.set(t,e,n)}}let gT;function mT(t,e,n,r){const{length:i=0}=t;let o="number"!==typeof e?0:e,s="number"!==typeof n?i:n;return o<0&&(o=(o%i+i)%i),s<0&&(s=(s%i+i)%i),s<o&&(gT=o,o=s,s=gT),s>i&&(s=i),r?r(t,o,s):[o,s]}Object.defineProperties(hT.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[uT]:{writable:!0,enumerable:!1,configurable:!1,value:null},[dT]:{writable:!0,enumerable:!1,configurable:!1,value:null}});const yT=t=>t!==t;function vT(t){if("object"!==typeof t||null===t)return yT(t)?yT:e=>e===t;if(t instanceof Date){const e=t.valueOf();return t=>t instanceof Date&&t.valueOf()===e}return ArrayBuffer.isView(t)?e=>!!e&&function(t,e){let n=0;const r=t.length;if(r!==e.length)return!1;if(r>0)do{if(t[n]!==e[n])return!1}while(++n<r);return!0}(t,e):t instanceof Map?function(t){let e=-1;const n=[];for(const r of t.values())n[++e]=vT(r);return bT(n)}(t):Array.isArray(t)?function(t){const e=[];for(let n=-1,r=t.length;++n<r;)e[n]=vT(t[n]);return bT(e)}(t):t instanceof JT?function(t){const e=[];for(let n=-1,r=t.length;++n<r;)e[n]=vT(t.get(n));return bT(e)}(t):function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Object.keys(t);if(!e&&0===n.length)return()=>!1;const r=[];for(let i=-1,o=n.length;++i<o;)r[i]=vT(t[n[i]]);return bT(r,n)}(t,!0)}function bT(t,e){return n=>{if(!n||"object"!==typeof n)return!1;switch(n.constructor){case Array:return function(t,e){const n=t.length;if(e.length!==n)return!1;for(let r=-1;++r<n;)if(!t[r](e[r]))return!1;return!0}(t,n);case Map:return _T(t,n,n.keys());case hT:case DE:case Object:case void 0:return _T(t,n,e||Object.keys(n))}return n instanceof JT&&function(t,e){const n=t.length;if(e.length!==n)return!1;for(let r=-1;++r<n;)if(!t[r](e.get(r)))return!1;return!0}(t,n)}}function _T(t,e,n){const r=n[Symbol.iterator](),i=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),o=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let s=0;const a=t.length;let l=o.next(),c=r.next(),u=i.next();for(;s<a&&!c.done&&!u.done&&!l.done&&(c.value===u.value&&t[s](l.value));++s,c=r.next(),u=i.next(),l=o.next());return!!(s===a&&c.done&&u.done&&l.done)||(r.return&&r.return(),i.return&&i.return(),o.return&&o.return(),!1)}class wT{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;this.numChunks=t,this.getChunkIterator=e,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function xT(t){return t.reduce(((t,e)=>t+e.nullCount),0)}function ST(t){return t.reduce(((t,e,n)=>(t[n+1]=t[n]+e.length,t)),new Uint32Array(t.length+1))}function AT(t,e,n,r){const i=[];for(let o=-1,s=t.length;++o<s;){const s=t[o],a=e[o],{length:l}=s;if(a>=r)break;if(n>=a+l)continue;if(a>=n&&a+l<=r){i.push(s);continue}const c=Math.max(0,n-a),u=Math.min(r-a,l);i.push(s.slice(c,u-c))}return 0===i.length&&i.push(t[0].slice(0,0)),i}function ET(t,e,n,r){let i=0,o=0,s=e.length-1;do{if(i>=s-1)return n<e[s]?r(t,i,n-e[i]):null;o=i+Math.trunc(.5*(s-i)),n<e[o]?s=o:i=o}while(i<s)}function TT(t,e){return t.getValid(e)}function PT(t){function e(e,n,r){return t(e[n],r)}return function(t){return ET(this.data,this._offsets,t,e)}}function CT(t){let e;function n(n,r,i){return t(n[r],i,e)}return function(t,r){const i=this.data;e=r;const o=ET(i,this._offsets,t,n);return e=void 0,o}}function IT(t){let e;function n(n,r,i){let o=i,s=0,a=0;for(let l=r-1,c=n.length;++l<c;){const r=n[l];if(~(s=t(r,e,o)))return a+s;o=0,a+=r.length}return-1}return function(t,r){e=t;const i=this.data,o="number"!==typeof r?n(i,0,0):ET(i,this._offsets,r,n);return e=void 0,o}}function MT(t,e,n,r){return 0!==(n&1<<r)}function kT(t,e,n,r){return(n&1<<r)>>r}function OT(t,e,n){const r=n.byteLength+7&-8;if(t>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(t%8===0?n.subarray(t>>3):LT(new RT(n,t,e,null,MT)).subarray(0,r)),i}return n}function LT(t){const e=[];let n=0,r=0,i=0;for(const s of t)s&&(i|=1<<r),8===++r&&(e[n++]=i,i=r=0);(0===n||r>0)&&(e[n++]=i);const o=new Uint8Array(e.length+7&-8);return o.set(e),o}class RT{constructor(t,e,n,r,i){this.bytes=t,this.length=n,this.context=r,this.get=i,this.bit=e%8,this.byteIndex=e>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(8===this.bit&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function FT(t,e,n){if(n-e<=0)return 0;if(n-e<8){let r=0;for(const i of new RT(t,e,n-e,t,kT))r+=i;return r}const r=n>>3<<3,i=e+(e%8===0?0:8-e%8);return FT(t,e,i)+FT(t,r,n)+function(t,e,n){let r=0,i=Math.trunc(e);const o=new DataView(t.buffer,t.byteOffset,t.byteLength),s=void 0===n?t.byteLength:i+n;for(;s-i>=4;)r+=BT(o.getUint32(i)),i+=4;for(;s-i>=2;)r+=BT(o.getUint16(i)),i+=2;for(;s-i>=1;)r+=BT(o.getUint8(i)),i+=1;return r}(t,i>>3,r-i>>3)}function BT(t){let e=Math.trunc(t);return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24}class NT extends cE{}function zT(t,e,n){if(void 0===e)return-1;if(null===e)return function(t,e){const{nullBitmap:n}=t;if(!n||t.nullCount<=0)return-1;let r=0;for(const i of new RT(n,t.offset+(e||0),t.length,n,MT)){if(!i)return r;++r}return-1}(t,n);const r=cT.getVisitFn(t),i=vT(e);for(let o=(n||0)-1,s=t.length;++o<s;)if(i(r(t,o)))return o;return-1}function DT(t,e,n){const r=cT.getVisitFn(t),i=vT(e);for(let o=(n||0)-1,s=t.length;++o<s;)if(i(r(t,o)))return o;return-1}NT.prototype.visitNull=function(t,e){return null===e&&t.length>0?0:-1},NT.prototype.visitBool=zT,NT.prototype.visitInt=zT,NT.prototype.visitInt8=zT,NT.prototype.visitInt16=zT,NT.prototype.visitInt32=zT,NT.prototype.visitInt64=zT,NT.prototype.visitUint8=zT,NT.prototype.visitUint16=zT,NT.prototype.visitUint32=zT,NT.prototype.visitUint64=zT,NT.prototype.visitFloat=zT,NT.prototype.visitFloat16=zT,NT.prototype.visitFloat32=zT,NT.prototype.visitFloat64=zT,NT.prototype.visitUtf8=zT,NT.prototype.visitBinary=zT,NT.prototype.visitFixedSizeBinary=zT,NT.prototype.visitDate=zT,NT.prototype.visitDateDay=zT,NT.prototype.visitDateMillisecond=zT,NT.prototype.visitTimestamp=zT,NT.prototype.visitTimestampSecond=zT,NT.prototype.visitTimestampMillisecond=zT,NT.prototype.visitTimestampMicrosecond=zT,NT.prototype.visitTimestampNanosecond=zT,NT.prototype.visitTime=zT,NT.prototype.visitTimeSecond=zT,NT.prototype.visitTimeMillisecond=zT,NT.prototype.visitTimeMicrosecond=zT,NT.prototype.visitTimeNanosecond=zT,NT.prototype.visitDecimal=zT,NT.prototype.visitList=zT,NT.prototype.visitStruct=zT,NT.prototype.visitUnion=zT,NT.prototype.visitDenseUnion=DT,NT.prototype.visitSparseUnion=DT,NT.prototype.visitDictionary=zT,NT.prototype.visitInterval=zT,NT.prototype.visitIntervalDayTime=zT,NT.prototype.visitIntervalYearMonth=zT,NT.prototype.visitFixedSizeList=zT,NT.prototype.visitMap=zT;const jT=new NT;class UT extends cE{}function VT(t){const{type:e}=t;if(0===t.nullCount&&1===t.stride&&(e.typeId===yS.Timestamp||e instanceof VA&&64!==e.bitWidth||e instanceof KA&&64!==e.bitWidth||e instanceof GA&&e.precision!==hS.HALF))return new wT(t.data.length,(e=>{const n=t.data[e];return n.values.subarray(0,n.length)[Symbol.iterator]()}));let n=0;return new wT(t.data.length,(e=>{const r=t.data[e].length,i=t.slice(n,n+r);return n+=r,new WT(i)}))}class WT{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}UT.prototype.visitNull=VT,UT.prototype.visitBool=VT,UT.prototype.visitInt=VT,UT.prototype.visitInt8=VT,UT.prototype.visitInt16=VT,UT.prototype.visitInt32=VT,UT.prototype.visitInt64=VT,UT.prototype.visitUint8=VT,UT.prototype.visitUint16=VT,UT.prototype.visitUint32=VT,UT.prototype.visitUint64=VT,UT.prototype.visitFloat=VT,UT.prototype.visitFloat16=VT,UT.prototype.visitFloat32=VT,UT.prototype.visitFloat64=VT,UT.prototype.visitUtf8=VT,UT.prototype.visitBinary=VT,UT.prototype.visitFixedSizeBinary=VT,UT.prototype.visitDate=VT,UT.prototype.visitDateDay=VT,UT.prototype.visitDateMillisecond=VT,UT.prototype.visitTimestamp=VT,UT.prototype.visitTimestampSecond=VT,UT.prototype.visitTimestampMillisecond=VT,UT.prototype.visitTimestampMicrosecond=VT,UT.prototype.visitTimestampNanosecond=VT,UT.prototype.visitTime=VT,UT.prototype.visitTimeSecond=VT,UT.prototype.visitTimeMillisecond=VT,UT.prototype.visitTimeMicrosecond=VT,UT.prototype.visitTimeNanosecond=VT,UT.prototype.visitDecimal=VT,UT.prototype.visitList=VT,UT.prototype.visitStruct=VT,UT.prototype.visitUnion=VT,UT.prototype.visitDenseUnion=VT,UT.prototype.visitSparseUnion=VT,UT.prototype.visitDictionary=VT,UT.prototype.visitInterval=VT,UT.prototype.visitIntervalDayTime=VT,UT.prototype.visitIntervalYearMonth=VT,UT.prototype.visitFixedSizeList=VT,UT.prototype.visitMap=VT;const GT=new UT,HT=(t,e)=>t+e;class qT extends cE{visitNull(t,e){return 0}visitInt(t,e){return t.type.bitWidth/8}visitFloat(t,e){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,e){return 1/8}visitDecimal(t,e){return t.type.bitWidth/8}visitDate(t,e){return 4*(t.type.unit+1)}visitTime(t,e){return t.type.bitWidth/8}visitTimestamp(t,e){return t.type.unit===pS.SECOND?4:8}visitInterval(t,e){return 4*(t.type.unit+1)}visitStruct(t,e){return t.children.reduce(((t,n)=>t+ZT.visit(n,e)),0)}visitFixedSizeBinary(t,e){return t.type.byteWidth}visitMap(t,e){return 8+t.children.reduce(((t,n)=>t+ZT.visit(n,e)),0)}visitDictionary(t,e){var n;return t.type.indices.bitWidth/8+((null===(n=t.dictionary)||void 0===n?void 0:n.getByteLength(t.values[e]))||0)}}const YT=(t,e)=>{let{type:n,children:r,typeIds:i,valueOffsets:o}=t;const s=n.typeIdToChildIndex[i[e]];return 8+ZT.visit(r[s],o[e])},XT=(t,e)=>{let{children:n}=t;return 4+ZT.visitMany(n,n.map((()=>e))).reduce(HT,0)};qT.prototype.visitUtf8=(t,e)=>{let{valueOffsets:n}=t;return n[e+1]-n[e]+8},qT.prototype.visitBinary=(t,e)=>{let{valueOffsets:n}=t;return n[e+1]-n[e]+8},qT.prototype.visitList=(t,e)=>{let{valueOffsets:n,stride:r,children:i}=t;const o=i[0],{[e*r]:s}=n,{[e*r+1]:a}=n,l=ZT.getVisitFn(o.type),c=o.slice(s,a-s);let u=8;for(let d=-1,h=a-s;++d<h;)u+=l(c,d);return u},qT.prototype.visitFixedSizeList=(t,e)=>{let{stride:n,children:r}=t;const i=r[0],o=i.slice(e*n,n),s=ZT.getVisitFn(i.type);let a=0;for(let l=-1,c=o.length;++l<c;)a+=s(o,l);return a},qT.prototype.visitUnion=(t,e)=>t.type.mode===dS.Dense?YT(t,e):XT(t,e),qT.prototype.visitDenseUnion=YT,qT.prototype.visitSparseUnion=XT;const ZT=new qT;var KT;const $T={},QT={};class JT{constructor(t){var e,n,r;const i=t[0]instanceof JT?t.flatMap((t=>t.data)):t;if(0===i.length||i.some((t=>!(t instanceof eP))))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=null===(e=i[0])||void 0===e?void 0:e.type;switch(i.length){case 0:this._offsets=[0];break;case 1:{const{get:t,set:e,indexOf:n,byteLength:r}=$T[o.typeId],s=i[0];this.isValid=t=>TT(s,t),this.get=e=>t(s,e),this.set=(t,n)=>e(s,t,n),this.indexOf=t=>n(s,t),this.getByteLength=t=>r(s,t),this._offsets=[0,s.length];break}default:Object.setPrototypeOf(this,QT[o.typeId]),this._offsets=ST(i)}this.data=i,this.type=o,this.stride=lE(o),this.numChildren=null!==(r=null===(n=o.children)||void 0===n?void 0:n.length)&&void 0!==r?r:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return-1===this._byteLength&&(this._byteLength=this.data.reduce(((t,e)=>t+e.byteLength),0)),this._byteLength}get nullCount(){return-1===this._nullCount&&(this._nullCount=xT(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return"".concat(this.VectorName,"<").concat(this.type[Symbol.toStringTag],">")}get VectorName(){return"".concat(yS[this.type.typeId],"Vector")}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}includes(t,e){return this.indexOf(t,e)>0}getByteLength(t){return 0}[Symbol.iterator](){return GT.visit(this)}concat(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new JT(this.data.concat(e.flatMap((t=>t.data)).flat(Number.POSITIVE_INFINITY)))}slice(t,e){return new JT(mT(this,t,e,((t,e,n)=>{let{data:r,_offsets:i}=t;return AT(r,i,e,n)})))}toJSON(){return[...this]}toArray(){const{type:t,data:e,length:n,stride:r,ArrayType:i}=this;switch(t.typeId){case yS.Int:case yS.Float:case yS.Decimal:case yS.Time:case yS.Timestamp:switch(e.length){case 0:return new i;case 1:return e[0].values.subarray(0,n*r);default:return e.reduce(((t,e)=>{let{values:n,length:i}=e;return t.array.set(n.subarray(0,i*r),t.offset),t.offset+=i*r,t}),{array:new i(n*r),offset:0}).array}}return[...this]}toString(){return"[".concat([...this].join(","),"]")}getChild(t){var e;return this.getChildAt(null===(e=this.type.children)||void 0===e?void 0:e.findIndex((e=>e.name===t)))}getChildAt(t){return t>-1&&t<this.numChildren?new JT(this.data.map((e=>{let{children:n}=e;return n[t]}))):null}get isMemoized(){return!!jA.isDictionary(this.type)&&this.data[0].dictionary.isMemoized}memoize(){if(jA.isDictionary(this.type)){const t=new tP(this.data[0].dictionary),e=this.data.map((e=>{const n=e.clone();return n.dictionary=t,n}));return new JT(e)}return new tP(this)}unmemoize(){if(jA.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),e=this.data.map((e=>{const n=e.clone();return n.dictionary=t,n}));return new JT(e)}return this}}KT=Symbol.toStringTag,JT[KT]=(t=>{t.type=jA.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._nullCount=-1,t._byteLength=-1,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(yS).map((t=>yS[t])).filter((t=>"number"===typeof t&&t!==yS.NONE));for(const n of e){const e=cT.getVisitFnByTypeId(n),r=BE.getVisitFnByTypeId(n),i=jT.getVisitFnByTypeId(n),o=ZT.getVisitFnByTypeId(n);$T[n]={get:e,set:r,indexOf:i,byteLength:o},QT[n]=Object.create(t,{isValid:{value:PT(TT)},get:{value:PT(cT.getVisitFnByTypeId(n))},set:{value:CT(BE.getVisitFnByTypeId(n))},indexOf:{value:IT(jT.getVisitFnByTypeId(n))},getByteLength:{value:PT(ZT.getVisitFnByTypeId(n))}})}return"Vector"})(JT.prototype);class tP extends JT{constructor(t){super(t.data);const e=this.get,n=this.set,r=this.slice,i=new Array(this.length);Object.defineProperty(this,"get",{value(t){const n=i[t];if(void 0!==n)return n;const r=e.call(this,t);return i[t]=r,r}}),Object.defineProperty(this,"set",{value(t,e){n.call(this,t,e),i[t]=e}}),Object.defineProperty(this,"slice",{value:(t,e)=>new tP(r.call(this,t,e))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new JT(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class eP{constructor(t,e,n,r,i){let o,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=arguments.length>6?arguments[6]:void 0;this.type=t,this.children=s,this.dictionary=a,this.offset=Math.floor(Math.max(e||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(r||0,-1)),i instanceof eP?(this.stride=i.stride,this.values=i.values,this.typeIds=i.typeIds,this.nullBitmap=i.nullBitmap,this.valueOffsets=i.valueOffsets):(this.stride=lE(t),i&&((o=i[0])&&(this.valueOffsets=o),(o=i[1])&&(this.values=o),(o=i[2])&&(this.nullBitmap=o),(o=i[3])&&(this.typeIds=o))),this.nullable=0!==this._nullCount&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:e,values:n,nullBitmap:r,typeIds:i}=this;return e&&(t+=e.byteLength),n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),this.children.reduce(((t,e)=>t+e.byteLength),t)}get nullCount(){let t,e=this._nullCount;return e<=-1&&(t=this.nullBitmap)&&(this._nullCount=e=this.length-FT(t,this.offset,this.offset+this.length)),e}getValid(t){if(this.nullable&&this.nullCount>0){const e=this.offset+t;return 0!==(this.nullBitmap[e>>3]&1<<e%8)}return!0}setValid(t,e){if(!this.nullable)return e;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:t}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:t,_nullCount:0})}const{nullBitmap:n,offset:r}=this,i=r+t>>3,o=(r+t)%8,s=n[i]>>o&1;return e?0===s&&(n[i]|=1<<o,this._nullCount=this.nullCount+1):1===s&&(n[i]&=~(1<<o),this._nullCount=this.nullCount-1),e}clone(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.type,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.offset,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.length,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._nullCount,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.children;return new eP(t,e,n,r,i,o,this.dictionary)}slice(t,e){const{stride:n,typeId:r,children:i}=this,o=+(0===this._nullCount)-1,s=16===r?n:1,a=this._sliceBuffers(t,e,n,r);return this.clone(this.type,this.offset+t,e,o,a,0===i.length||this.valueOffsets?i:this._sliceChildren(i,s*t,s*e))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===yS.Null)return this.clone(this.type,0,t,0);const{length:e,nullCount:n}=this,r=new Uint8Array((t+63&-64)>>3).fill(255,0,e>>3);r[e>>3]=(1<<e-(-8&e))-1,n>0&&r.set(OT(this.offset,e,this.nullBitmap),0);const i=this.buffers;return i[vS.VALIDITY]=r,this.clone(this.type,0,t,n+(t-e),i)}_sliceBuffers(t,e,n,r){let i;const{buffers:o}=this;return(i=o[vS.TYPE])&&(o[vS.TYPE]=i.subarray(t,t+e)),(i=o[vS.OFFSET])&&(o[vS.OFFSET]=i.subarray(t,t+e+1))||(i=o[vS.DATA])&&(o[vS.DATA]=6===r?i:i.subarray(n*t,n*(t+e))),o}_sliceChildren(t,e,n){return t.map((t=>t.slice(e,n)))}}eP.prototype.children=Object.freeze([]);class nP extends cE{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{type:e,offset:n=0,length:r=0}=t;return new eP(e,n,r,0)}visitBool(t){const{type:e,offset:n=0}=t,r=oA(t.nullBitmap),i=rA(e.ArrayType,t.data),{length:o=i.length>>3,nullCount:s=(t.nullBitmap?-1:0)}=t;return new eP(e,n,o,s,[void 0,i,r])}visitInt(t){const{type:e,offset:n=0}=t,r=oA(t.nullBitmap),i=rA(e.ArrayType,t.data),{length:o=i.length,nullCount:s=(t.nullBitmap?-1:0)}=t;return new eP(e,n,o,s,[void 0,i,r])}visitFloat(t){const{type:e,offset:n=0}=t,r=oA(t.nullBitmap),i=rA(e.ArrayType,t.data),{length:o=i.length,nullCount:s=(t.nullBitmap?-1:0)}=t;return new eP(e,n,o,s,[void 0,i,r])}visitUtf8(t){const{type:e,offset:n=0}=t,r=oA(t.data),i=oA(t.nullBitmap),o=iA(t.valueOffsets),{length:s=o.length-1,nullCount:a=(t.nullBitmap?-1:0)}=t;return new eP(e,n,s,a,[o,r,i])}visitBinary(t){const{type:e,offset:n=0}=t,r=oA(t.data),i=oA(t.nullBitmap),o=iA(t.valueOffsets),{length:s=o.length-1,nullCount:a=(t.nullBitmap?-1:0)}=t;return new eP(e,n,s,a,[o,r,i])}visitFixedSizeBinary(t){const{type:e,offset:n=0}=t,r=oA(t.nullBitmap),i=rA(e.ArrayType,t.data),{length:o=i.length/lE(e),nullCount:s=(t.nullBitmap?-1:0)}=t;return new eP(e,n,o,s,[void 0,i,r])}visitDate(t){const{type:e,offset:n=0}=t,r=oA(t.nullBitmap),i=rA(e.ArrayType,t.data),{length:o=i.length/lE(e),nullCount:s=(t.nullBitmap?-1:0)}=t;return new eP(e,n,o,s,[void 0,i,r])}visitTimestamp(t){const{type:e,offset:n=0}=t,r=oA(t.nullBitmap),i=rA(e.ArrayType,t.data),{length:o=i.length/lE(e),nullCount:s=(t.nullBitmap?-1:0)}=t;return new eP(e,n,o,s,[void 0,i,r])}visitTime(t){const{type:e,offset:n=0}=t,r=oA(t.nullBitmap),i=rA(e.ArrayType,t.data),{length:o=i.length/lE(e),nullCount:s=(t.nullBitmap?-1:0)}=t;return new eP(e,n,o,s,[void 0,i,r])}visitDecimal(t){const{type:e,offset:n=0}=t,r=oA(t.nullBitmap),i=rA(e.ArrayType,t.data),{length:o=i.length/lE(e),nullCount:s=(t.nullBitmap?-1:0)}=t;return new eP(e,n,o,s,[void 0,i,r])}visitList(t){const{type:e,offset:n=0,child:r}=t,i=oA(t.nullBitmap),o=iA(t.valueOffsets),{length:s=o.length-1,nullCount:a=(t.nullBitmap?-1:0)}=t;return new eP(e,n,s,a,[o,void 0,i],[r])}visitStruct(t){const{type:e,offset:n=0,children:r=[]}=t,i=oA(t.nullBitmap),{length:o=r.reduce(((t,e)=>{let{length:n}=e;return Math.max(t,n)}),0),nullCount:s=(t.nullBitmap?-1:0)}=t;return new eP(e,n,o,s,[void 0,void 0,i],r)}visitUnion(t){const{type:e,offset:n=0,children:r=[]}=t,i=oA(t.nullBitmap),o=rA(e.ArrayType,t.typeIds),{length:s=o.length,nullCount:a=(t.nullBitmap?-1:0)}=t;if(jA.isSparseUnion(e))return new eP(e,n,s,a,[void 0,void 0,i,o],r);const l=iA(t.valueOffsets);return new eP(e,n,s,a,[l,void 0,i,o],r)}visitDictionary(t){const{type:e,offset:n=0}=t,r=oA(t.nullBitmap),i=rA(e.indices.ArrayType,t.data),{dictionary:o=new JT([(new nP).visit({type:e.dictionary})])}=t,{length:s=i.length,nullCount:a=(t.nullBitmap?-1:0)}=t;return new eP(e,n,s,a,[void 0,i,r],[],o)}visitInterval(t){const{type:e,offset:n=0}=t,r=oA(t.nullBitmap),i=rA(e.ArrayType,t.data),{length:o=i.length/lE(e),nullCount:s=(t.nullBitmap?-1:0)}=t;return new eP(e,n,o,s,[void 0,i,r])}visitFixedSizeList(t){const{type:e,offset:n=0,child:r=(new nP).visit({type:e.valueType})}=t,i=oA(t.nullBitmap),{length:o=r.length/lE(e),nullCount:s=(t.nullBitmap?-1:0)}=t;return new eP(e,n,o,s,[void 0,void 0,i],[r])}visitMap(t){const{type:e,offset:n=0,child:r=(new nP).visit({type:e.childType})}=t,i=oA(t.nullBitmap),o=iA(t.valueOffsets),{length:s=o.length-1,nullCount:a=(t.nullBitmap?-1:0)}=t;return new eP(e,n,s,a,[o,void 0,i],[r])}}function rP(t){return(new nP).visit(t)}class iP{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;this.fields=t||[],this.metadata=e||new Map,n||(n=aP(t)),this.dictionaries=n}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map((t=>t.name))}toString(){return"Schema<{ ".concat(this.fields.map(((t,e)=>"".concat(e,": ").concat(t))).join(", ")," }>")}select(t){const e=new Set(t),n=this.fields.filter((t=>e.has(t.name)));return new iP(n,this.metadata)}selectAt(t){const e=t.map((t=>this.fields[t])).filter(Boolean);return new iP(e,this.metadata)}assign(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e[0]instanceof iP?e[0]:Array.isArray(e[0])?new iP(e[0]):new iP(e),i=[...this.fields],o=sP(sP(new Map,this.metadata),r.metadata),s=r.fields.filter((t=>{const e=i.findIndex((e=>e.name===t.name));return!~e||(i[e]=t.clone({metadata:sP(sP(new Map,i[e].metadata),t.metadata)}))&&!1})),a=aP(s,new Map);return new iP([...i,...s],o,new Map([...this.dictionaries,...a]))}}iP.prototype.fields=null,iP.prototype.metadata=null,iP.prototype.dictionaries=null;class oP{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;this.name=t,this.type=e,this.nullable=n,this.metadata=r||new Map}static new(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];let[r,i,o,s]=e;return e[0]&&"object"===typeof e[0]&&(({name:r}=e[0]),void 0===i&&(i=e[0].type),void 0===o&&(o=e[0].nullable),void 0===s&&(s=e[0].metadata)),new oP("".concat(r),i,o,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return"".concat(this.name,": ").concat(this.type)}clone(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];let[r,i,o,s]=e;return e[0]&&"object"===typeof e[0]?({name:r=this.name,type:i=this.type,nullable:o=this.nullable,metadata:s=this.metadata}=e[0]):[r=this.name,i=this.type,o=this.nullable,s=this.metadata]=e,oP.new(r,i,o,s)}}function sP(t,e){return new Map([...t||new Map,...e||new Map])}function aP(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;for(let n=-1,r=t.length;++n<r;){const r=t[n].type;if(jA.isDictionary(r))if(e.has(r.id)){if(e.get(r.id)!==r.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else e.set(r.id,r.dictionary);r.children&&r.children.length>0&&aP(r.children,e)}return e}oP.prototype.type=null,oP.prototype.name=null,oP.prototype.nullable=null,oP.prototype.metadata=null;class lP extends cE{compareSchemas(t,e){return t===e||e instanceof t.constructor&&this.compareManyFields(t.fields,e.fields)}compareManyFields(t,e){return t===e||Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every(((t,n)=>this.compareFields(t,e[n])))}compareFields(t,e){return t===e||e instanceof t.constructor&&t.name===e.name&&t.nullable===e.nullable&&this.visit(t.type,e.type)}}function cP(t,e){return e instanceof t.constructor}function uP(t,e){return t===e||cP(t,e)}function dP(t,e){return t===e||cP(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function hP(t,e){return t===e||cP(t,e)&&t.precision===e.precision}function fP(t,e){return t===e||cP(t,e)&&t.unit===e.unit}function pP(t,e){return t===e||cP(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function gP(t,e){return t===e||cP(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function mP(t,e){return t===e||cP(t,e)&&t.mode===e.mode&&t.typeIds.every(((t,n)=>t===e.typeIds[n]))&&vP.compareManyFields(t.children,e.children)}function yP(t,e){return t===e||cP(t,e)&&t.unit===e.unit}lP.prototype.visitNull=uP,lP.prototype.visitBool=uP,lP.prototype.visitInt=dP,lP.prototype.visitInt8=dP,lP.prototype.visitInt16=dP,lP.prototype.visitInt32=dP,lP.prototype.visitInt64=dP,lP.prototype.visitUint8=dP,lP.prototype.visitUint16=dP,lP.prototype.visitUint32=dP,lP.prototype.visitUint64=dP,lP.prototype.visitFloat=hP,lP.prototype.visitFloat16=hP,lP.prototype.visitFloat32=hP,lP.prototype.visitFloat64=hP,lP.prototype.visitUtf8=uP,lP.prototype.visitBinary=uP,lP.prototype.visitFixedSizeBinary=function(t,e){return t===e||cP(t,e)&&t.byteWidth===e.byteWidth},lP.prototype.visitDate=fP,lP.prototype.visitDateDay=fP,lP.prototype.visitDateMillisecond=fP,lP.prototype.visitTimestamp=pP,lP.prototype.visitTimestampSecond=pP,lP.prototype.visitTimestampMillisecond=pP,lP.prototype.visitTimestampMicrosecond=pP,lP.prototype.visitTimestampNanosecond=pP,lP.prototype.visitTime=gP,lP.prototype.visitTimeSecond=gP,lP.prototype.visitTimeMillisecond=gP,lP.prototype.visitTimeMicrosecond=gP,lP.prototype.visitTimeNanosecond=gP,lP.prototype.visitDecimal=uP,lP.prototype.visitList=function(t,e){return t===e||cP(t,e)&&t.children.length===e.children.length&&vP.compareManyFields(t.children,e.children)},lP.prototype.visitStruct=function(t,e){return t===e||cP(t,e)&&t.children.length===e.children.length&&vP.compareManyFields(t.children,e.children)},lP.prototype.visitUnion=mP,lP.prototype.visitDenseUnion=mP,lP.prototype.visitSparseUnion=mP,lP.prototype.visitDictionary=function(t,e){return t===e||cP(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&vP.visit(t.indices,e.indices)&&vP.visit(t.dictionary,e.dictionary)},lP.prototype.visitInterval=yP,lP.prototype.visitIntervalDayTime=yP,lP.prototype.visitIntervalYearMonth=yP,lP.prototype.visitFixedSizeList=function(t,e){return t===e||cP(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&vP.compareManyFields(t.children,e.children)},lP.prototype.visitMap=function(t,e){return t===e||cP(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&vP.compareManyFields(t.children,e.children)};const vP=new lP;function bP(t,e){return vP.compareSchemas(t,e)}var _P,wP;class xP{constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];switch(e.length){case 2:if([this.schema]=e,!(this.schema instanceof iP))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=rP({nullCount:0,type:new tE(this.schema.fields),children:this.schema.fields.map((t=>rP({type:t.type,nullCount:0})))})]=e,!(this.data instanceof eP))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=SP(this.schema,this.data.children);break;case 1:{const[t]=e,{fields:n,children:r,length:i}=Object.keys(t).reduce(((e,n,r)=>(e.children[r]=t[n],e.length=Math.max(e.length,t[n].length),e.fields[r]=oP.new({name:n,type:t[n].type,nullable:!0}),e)),{length:0,fields:new Array,children:new Array}),o=new iP(n),s=rP({type:new tE(n),length:i,children:r,nullCount:0});[this.schema,this.data]=SP(o,s.children,i);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=AP(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return cT.visit(this.data,t)}set(t,e){return BE.visit(this.data,t,e)}indexOf(t,e){return jT.visit(this.data,t,e)}getByteLength(t){return ZT.visit(this.data,t)}[Symbol.iterator](){return GT.visit(new JT([this.data]))}toArray(){return[...this]}concat(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new CP(this.schema,[this,...e])}slice(t,e){const[n]=new JT([this.data]).slice(t,e).data;return new xP(this.schema,n)}getChild(t){var e;return this.getChildAt(null===(e=this.schema.fields)||void 0===e?void 0:e.findIndex((e=>e.name===t)))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new JT([this.data.children[t]]):null}setChild(t,e){var n;return this.setChildAt(null===(n=this.schema.fields)||void 0===n?void 0:n.findIndex((e=>e.name===t)),e)}setChildAt(t,e){let n=this.schema,r=this.data;if(t>-1&&t<this.numCols){e||(e=new JT([rP({type:new UA,length:this.numRows})]));const i=n.fields.slice(),o=r.children.slice(),s=i[t].clone({type:e.type});[i[t],o[t]]=[s,e.data[0]],n=new iP(i,new Map(this.schema.metadata)),r=rP({type:new tE(i),children:o})}return new xP(n,r)}select(t){const e=this.schema.select(t),n=new tE(e.fields),r=[];for(const i of t){const t=this.schema.fields.findIndex((t=>t.name===i));~t&&(r[t]=this.data.children[t])}return new xP(e,rP({type:n,length:this.numRows,children:r}))}selectAt(t){const e=this.schema.selectAt(t),n=t.map((t=>this.data.children[t])).filter(Boolean),r=rP({type:new tE(e.fields),length:this.numRows,children:n});return new xP(e,r)}}function SP(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.reduce(((t,e)=>Math.max(t,e.length)),0);var r;const i=[...t.fields],o=[...e],s=(n+63&-64)>>3;for(const[a,l]of t.fields.entries()){const t=e[a];t&&t.length===n||(i[a]=l.clone({nullable:!0}),o[a]=null!==(r=null===t||void 0===t?void 0:t._changeLengthAndBackfillNullBitmap(n))&&void 0!==r?r:rP({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(s)}))}return[t.assign(i),rP({type:new tE(i),length:n,children:o})]}function AP(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map;for(let r=-1,i=t.length;++r<i;){const i=t[r].type,o=e[r];if(jA.isDictionary(i))if(n.has(i.id)){if(n.get(i.id)!==o.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else o.dictionary&&n.set(i.id,o.dictionary);i.children&&i.children.length>0&&AP(i.children,o.children,n)}return n}_P=Symbol.toStringTag,xP[_P]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(xP.prototype);class EP extends xP{constructor(t){const e=t.fields.map((t=>rP({type:t.type})));super(t,rP({type:new tE(t.fields),nullCount:0,children:e}))}}function TP(t,e){return function(t,e){const n=[...t.fields],r=[],i={numBatches:e.reduce(((t,e)=>Math.max(t,e.length)),0)};let o=0,s=0,a=-1;const l=e.length;let c,u=[];for(;i.numBatches-- >0;){for(s=Number.POSITIVE_INFINITY,a=-1;++a<l;)u[a]=c=e[a].shift(),s=Math.min(s,c?c.length:s);Number.isFinite(s)&&(u=PP(n,s,u,e,i),s>0&&(r[o++]=rP({type:new tE(n),length:s,nullCount:0,children:u.slice()})))}return[t=t.assign(n),r.map((e=>new xP(t,e)))]}(t,e.map((t=>t.data.concat())))}function PP(t,e,n,r,i){var o;const s=(e+63&-64)>>3;for(let a=-1,l=r.length;++a<l;){const l=n[a],c=null===l||void 0===l?void 0:l.length;if(c>=e)c===e?n[a]=l:(n[a]=l.slice(0,e),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(e,c-e))));else{const r=t[a];t[a]=r.clone({nullable:!0}),n[a]=null!==(o=null===l||void 0===l?void 0:l._changeLengthAndBackfillNullBitmap(e))&&void 0!==o?o:rP({type:r.type,length:e,nullCount:e,nullBitmap:new Uint8Array(s)})}}return n}class CP{constructor(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(0===r.length)return this.batches=[],this.schema=new iP([]),this._offsets=[0],this;let o,s;r[0]instanceof iP&&(o=r.shift()),r[r.length-1]instanceof Uint32Array&&(s=r.pop());const a=t=>{if(t){if(t instanceof xP)return[t];if(t instanceof CP)return t.batches;if(t instanceof eP){if(t.type instanceof tE)return[new xP(new iP(t.type.children),t)]}else{if(Array.isArray(t))return t.flatMap((t=>a(t)));if("function"===typeof t[Symbol.iterator])return[...t].flatMap((t=>a(t)));if("object"===typeof t){const e=Object.keys(t),n=e.map((e=>new JT([t[e]]))),r=new iP(e.map(((t,e)=>new oP(String(t),n[e].type)))),[,i]=TP(r,n);return 0===i.length?[new xP(t)]:i}}}return[]},l=r.flatMap((t=>a(t)));if(o=null!==(e=null!==o&&void 0!==o?o:null===(t=l[0])||void 0===t?void 0:t.schema)&&void 0!==e?e:new iP([]),!(o instanceof iP))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const c of l){if(!(c instanceof xP))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!bP(o,c.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=o,this.batches=l,this._offsets=null!==s&&void 0!==s?s:ST(this.data)}get data(){return this.batches.map((t=>{let{data:e}=t;return e}))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce(((t,e)=>t+e.length),0)}get nullCount(){return-1===this._nullCount&&(this._nullCount=xT(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?GT.visit(new JT(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return"[\n  ".concat(this.toArray().join(",\n  "),"\n]")}concat(){const t=this.schema;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const i=this.data.concat(n.flatMap((t=>{let{data:e}=t;return e})));return new CP(t,i.map((e=>new xP(t,e))))}slice(t,e){const n=this.schema;[t,e]=mT({length:this.numRows},t,e);const r=AT(this.data,this._offsets,t,e);return new CP(n,r.map((t=>new xP(n,t))))}getChild(t){return this.getChildAt(this.schema.fields.findIndex((e=>e.name===t)))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const e=this.data.map((e=>e.children[t]));if(0===e.length){const{type:n}=this.schema.fields[t],r=rP({type:n,length:0,nullCount:0});e.push(r._changeLengthAndBackfillNullBitmap(this.numRows))}return new JT(e)}return null}setChild(t,e){var n;return this.setChildAt(null===(n=this.schema.fields)||void 0===n?void 0:n.findIndex((e=>e.name===t)),e)}setChildAt(t,e){let n=this.schema,r=[...this.batches];if(t>-1&&t<this.numCols){e||(e=new JT([rP({type:new UA,length:this.numRows})]));const i=n.fields.slice(),o=i[t].clone({type:e.type}),s=this.schema.fields.map(((t,e)=>this.getChildAt(e)));[i[t],s[t]]=[o,e],[n,r]=TP(n,s)}return new CP(n,r)}select(t){const e=this.schema.fields.reduce(((t,e,n)=>t.set(e.name,n)),new Map);return this.selectAt(t.map((t=>e.get(t))).filter((t=>t>-1)))}selectAt(t){const e=this.schema.selectAt(t),n=this.batches.map((e=>e.selectAt(t)));return new CP(e,n)}assign(t){const e=this.schema.fields,[n,r]=t.schema.fields.reduce(((t,n,r)=>{const[i,o]=t,s=e.findIndex((t=>t.name===n.name));return~s?o[s]=r:i.push(r),t}),[[],[]]),i=this.schema.assign(t.schema),o=[...e.map(((t,e)=>[e,r[e]])).map((e=>{let[n,r]=e;return void 0===r?this.getChildAt(n):t.getChildAt(r)})),...n.map((e=>t.getChildAt(e)))].filter(Boolean);return new CP(...TP(i,o))}}wP=Symbol.toStringTag,CP[wP]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=PT(TT),t.get=PT(cT.getVisitFn(yS.Struct)),t.set=CT(BE.getVisitFn(yS.Struct)),t.indexOf=IT(jT.getVisitFn(yS.Struct)),t.getByteLength=PT(ZT.getVisitFn(yS.Struct)),"Table"))(CP.prototype);class IP{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,e,n,r){return t.prep(8,24),t.writeInt64(r),t.pad(4),t.writeInt32(n),t.writeInt64(e),t.offset()}}const MP=new Int32Array(2),kP=new Float32Array(MP.buffer),OP=new Float64Array(MP.buffer),LP=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];class RP{constructor(t,e){this.low=0|t,this.high=0|e}static create(t,e){return 0==t&&0==e?RP.ZERO:new RP(t,e)}toFloat64(){return(this.low>>>0)+4294967296*this.high}equals(t){return this.low==t.low&&this.high==t.high}}var FP,BP,NP,zP,DP;RP.ZERO=new RP(0,0),function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(FP||(FP={}));class jP{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new jP(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new RP(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new RP(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return MP[0]=this.readInt32(t),kP[0]}readFloat64(t){return MP[LP?0:1]=this.readInt32(t),MP[LP?1:0]=this.readInt32(t+4),OP[0]}writeInt8(t,e){this.bytes_[t]=e}writeUint8(t,e){this.bytes_[t]=e}writeInt16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeUint16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeInt32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeUint32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeInt64(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)}writeUint64(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)}writeFloat32(t,e){kP[0]=e,this.writeInt32(t,MP[0])}writeFloat64(t,e){OP[0]=e,this.writeInt32(t,MP[LP?0:1]),this.writeInt32(t+4,MP[LP?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}__offset(t,e){const n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0}__union(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}__string(t,e){t+=this.readInt32(t);const n=this.readInt32(t);let r="",i=0;if(t+=4,e===FP.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;i<n;){let e;const n=this.readUint8(t+i++);if(n<192)e=n;else{const r=this.readUint8(t+i++);if(n<224)e=(31&n)<<6|63&r;else{const o=this.readUint8(t+i++);if(n<240)e=(15&n)<<12|(63&r)<<6|63&o;else{e=(7&n)<<18|(63&r)<<12|(63&o)<<6|63&this.readUint8(t+i++)}}}e<65536?r+=String.fromCharCode(e):(e-=65536,r+=String.fromCharCode(55296+(e>>10),56320+(1023&e)))}return r}__union_with_string(t,e){return"string"===typeof t?this.__string(e):this.__union(t,e)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+4}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}createLong(t,e){return RP.create(t,e)}createScalarList(t,e){const n=[];for(let r=0;r<e;++r)null!==t(r)&&n.push(t(r));return n}createObjList(t,e){const n=[];for(let r=0;r<e;++r){const e=t(r);null!==e&&n.push(e.unpack())}return n}}class UP{constructor(t){let e;this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,e=t||1024,this.bb=jP.allocate(e),this.space=e}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,e){t>this.minalign&&(this.minalign=t);const n=1+~(this.bb.capacity()-this.space+e)&t-1;for(;this.space<n+t+e;){const t=this.bb.capacity();this.bb=UP.growByteBuffer(this.bb),this.space+=this.bb.capacity()-t}this.pad(n)}pad(t){for(let e=0;e<t;e++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))}addFieldInt16(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))}addFieldInt32(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))}addFieldInt64(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))}addFieldFloat32(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))}addFieldFloat64(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))}addFieldOffset(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))}addFieldStruct(t,e,n){e!=n&&(this.nested(e),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){null!==this.vtable&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const n=e<<1,r=jP.allocate(n);return r.setPosition(n-e),r.bytes().set(t.bytes(),n-e),r}addOffset(t){this.prep(4,0),this.writeInt32(this.offset()-t+4)}startObject(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(let e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let e=this.vtable_in_use-1;for(;e>=0&&0==this.vtable[e];e--);const n=e+1;for(;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);const r=2*(n+2);this.addInt16(r);let i=0;const o=this.space;t:for(e=0;e<this.vtables.length;e++){const t=this.bb.capacity()-this.vtables[e];if(r==this.bb.readInt16(t)){for(let e=2;e<r;e+=2)if(this.bb.readInt16(o+e)!=this.bb.readInt16(t+e))continue t;i=this.vtables[e];break}}return i?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,i-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,e,n){const r=n?4:0;if(e){const t=e;if(this.prep(this.minalign,8+r),4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let e=3;e>=0;e--)this.writeInt8(t.charCodeAt(e))}this.prep(this.minalign,4+r),this.addOffset(t),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,e){this.finish(t,e,!0)}requiredField(t,e){const n=this.bb.capacity()-t,r=n-this.bb.readInt32(n);if(!(0!=this.bb.readInt16(r+e)))throw new Error("FlatBuffers: field "+e+" must be set")}startVector(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(4,t*e),this.prep(n,t*e)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const e=this.createString(t);return this.string_maps.set(t,e),e}createString(t){if(!t)return 0;let e;if(t instanceof Uint8Array)e=t;else{e=[];let n=0;for(;n<t.length;){let r;const i=t.charCodeAt(n++);if(i<55296||i>=56320)r=i;else{r=(i<<10)+t.charCodeAt(n++)+-56613888}r<128?e.push(r):(r<2048?e.push(r>>6&31|192):(r<65536?e.push(r>>12&15|224):e.push(r>>18&7|240,r>>12&63|128),e.push(r>>6&63|128)),e.push(63&r|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(let n=0,r=this.space,i=this.bb.bytes();n<e.length;n++)i[r++]=e[n];return this.endVector()}createLong(t,e){return RP.create(t,e)}createObjectOffset(t){return null===t?0:"string"===typeof t?this.createString(t):t.pack(this)}createObjectOffsetList(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n];if(null===r)throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");e.push(this.createObjectOffset(r))}return e}createStructOffsetList(t,e){return e(this,t.length),this.createObjectOffsetList(t),this.endVector()}}class VP{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKeyValue(t,e){return(e||new VP).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,e){return t.setPosition(t.position()+4),(e||new VP).__init(t.readInt32(t.position())+t.position(),t)}key(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,e,n){return VP.startKeyValue(t),VP.addKey(t,e),VP.addValue(t,n),VP.endKeyValue(t)}}!function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"}(BP||(BP={})),function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"}(NP||(NP={})),function(t){t[t.DenseArray=0]="DenseArray"}(zP||(zP={}));class WP{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInt(t,e){return(e||new WP).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,e){return t.setPosition(t.position()+4),(e||new WP).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startInt(t){t.startObject(2)}static addBitWidth(t,e){t.addFieldInt32(0,e,0)}static addIsSigned(t,e){t.addFieldInt8(1,+e,0)}static endInt(t){return t.endObject()}static createInt(t,e,n){return WP.startInt(t),WP.addBitWidth(t,e),WP.addIsSigned(t,n),WP.endInt(t)}}class GP{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryEncoding(t,e){return(e||new GP).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,e){return t.setPosition(t.position()+4),(e||new GP).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new WP).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):zP.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addIndexType(t,e){t.addFieldOffset(1,e,0)}static addIsOrdered(t,e){t.addFieldInt8(2,+e,0)}static addDictionaryKind(t,e){t.addFieldInt16(3,e,zP.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"}(DP||(DP={}));class HP{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsField(t,e){return(e||new HP).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,e){return t.setPosition(t.position()+4),(e||new HP).__init(t.readInt32(t.position())+t.position(),t)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):DP.NONE}type(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__union(t,this.bb_pos+e):null}dictionary(t){const e=this.bb.__offset(this.bb_pos,12);return e?(t||new GP).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}children(t,e){const n=this.bb.__offset(this.bb_pos,14);return n?(e||new HP).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,16);return n?(e||new VP).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,e){t.addFieldOffset(0,e,0)}static addNullable(t,e){t.addFieldInt8(1,+e,0)}static addTypeType(t,e){t.addFieldInt8(2,e,DP.NONE)}static addType(t,e){t.addFieldOffset(3,e,0)}static addDictionary(t,e){t.addFieldOffset(4,e,0)}static addChildren(t,e){t.addFieldOffset(5,e,0)}static createChildrenVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startChildrenVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(6,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endField(t){return t.endObject()}}class qP{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSchema(t,e){return(e||new qP).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,e){return t.setPosition(t.position()+4),(e||new qP).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):NP.Little}fields(t,e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new HP).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new VP).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,e){t.addFieldInt16(0,e,NP.Little)}static addFields(t,e){t.addFieldOffset(1,e,0)}static createFieldsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startFieldsVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(2,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static addFeatures(t,e){t.addFieldOffset(3,e,0)}static createFeaturesVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startFeaturesVector(t,e){t.startVector(8,e,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,e){t.finish(e)}static finishSizePrefixedSchemaBuffer(t,e){t.finish(e,void 0,!0)}static createSchema(t,e,n,r,i){return qP.startSchema(t),qP.addEndianness(t,e),qP.addFields(t,n),qP.addCustomMetadata(t,r),qP.addFeatures(t,i),qP.endSchema(t)}}class YP{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFooter(t,e){return(e||new YP).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,e){return t.setPosition(t.position()+4),(e||new YP).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):BP.V1}schema(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new qP).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}dictionaries(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new IP).__init(this.bb.__vector(this.bb_pos+n)+24*t,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new IP).__init(this.bb.__vector(this.bb_pos+n)+24*t,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new VP).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,BP.V1)}static addSchema(t,e){t.addFieldOffset(1,e,0)}static addDictionaries(t,e){t.addFieldOffset(2,e,0)}static startDictionariesVector(t,e){t.startVector(24,e,8)}static addRecordBatches(t,e){t.addFieldOffset(3,e,0)}static startRecordBatchesVector(t,e){t.startVector(24,e,8)}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,e){t.finish(e)}static finishSizePrefixedFooterBuffer(t,e){t.finish(e,void 0,!0)}}var XP=RP,ZP=UP,KP=jP;class $P{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uS.V4,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.schema=t,this.version=e,n&&(this._recordBatches=n),r&&(this._dictionaryBatches=r)}static decode(t){t=new KP(oA(t));const e=YP.getRootAsFooter(t),n=iP.decode(e.schema());return new QP(n,e)}static encode(t){const e=new ZP,n=iP.encode(e,t.schema);YP.startRecordBatchesVector(e,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())JP.encode(e,o);const r=e.endVector();YP.startDictionariesVector(e,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())JP.encode(e,o);const i=e.endVector();return YP.startFooter(e),YP.addSchema(e,n),YP.addVersion(e,uS.V4),YP.addRecordBatches(e,r),YP.addDictionaries(e,i),YP.finishFooterBuffer(e,YP.endFooter(e)),e.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,e=-1,n=this.numRecordBatches;++e<n;)(t=this.getRecordBatch(e))&&(yield t)}*dictionaryBatches(){for(let t,e=-1,n=this.numDictionaries;++e<n;)(t=this.getDictionaryBatch(e))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class QP extends $P{constructor(t,e){super(t,e.version()),this._footer=e}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const e=this._footer.recordBatches(t);if(e)return JP.decode(e)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const e=this._footer.dictionaries(t);if(e)return JP.decode(e)}return null}}class JP{constructor(t,e,n){this.metaDataLength=t,this.offset="number"===typeof n?n:n.low,this.bodyLength="number"===typeof e?e:e.low}static decode(t){return new JP(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,e){const{metaDataLength:n}=e,r=new XP(e.offset,0),i=new XP(e.bodyLength,0);return IP.createBlock(t,r,n,i)}}const tC={fromIterable:t=>eC(function*(t){let e,n,r,i,o=!1,s=[],a=0;function l(){return"peek"===r?nA(s,i)[0]:([n,s,a]=nA(s,i),n)}({cmd:r,size:i}=yield null);const c=(u=t,aA(Uint8Array,u))[Symbol.iterator]();var u;try{do{if(({done:e,value:n}=Number.isNaN(i-a)?c.next():c.next(i-a)),!e&&n.byteLength>0&&(s.push(n),a+=n.byteLength),e||i<=a)do{({cmd:r,size:i}=yield l())}while(i<a)}while(!e)}catch(d){(o=!0)&&"function"===typeof c.throw&&c.throw(d)}finally{!1===o&&"function"===typeof c.return&&c.return(null)}return null}(t)),fromAsyncIterable:t=>eC(function(t){return YS(this,arguments,(function*(){let e,n,r,i,o=!1,s=[],a=0;function l(){return"peek"===r?nA(s,i)[0]:([n,s,a]=nA(s,i),n)}({cmd:r,size:i}=yield yield qS(null));const c=(u=t,lA(Uint8Array,u))[Symbol.asyncIterator]();var u;try{do{if(({done:e,value:n}=Number.isNaN(i-a)?yield qS(c.next()):yield qS(c.next(i-a))),!e&&n.byteLength>0&&(s.push(n),a+=n.byteLength),e||i<=a)do{({cmd:r,size:i}=yield yield qS(l()))}while(i<a)}while(!e)}catch(d){(o=!0)&&"function"===typeof c.throw&&(yield qS(c.throw(d)))}finally{!1===o&&"function"===typeof c.return&&(yield qS(c.return(new Uint8Array(0))))}return yield qS(null)}))}(t)),fromDOMStream:t=>eC(function(t){return YS(this,arguments,(function*(){let e,n,r,i=!1,o=!1,s=[],a=0;function l(){return"peek"===n?nA(s,r)[0]:([e,s,a]=nA(s,r),e)}({cmd:n,size:r}=yield yield qS(null));const c=new nC(t);try{do{if(({done:i,value:e}=Number.isNaN(r-a)?yield qS(c.read()):yield qS(c.read(r-a))),!i&&e.byteLength>0&&(s.push(oA(e)),a+=e.byteLength),i||r<=a)do{({cmd:n,size:r}=yield yield qS(l()))}while(r<a)}while(!i)}catch(u){(o=!0)&&(yield qS(c.cancel(u)))}finally{!1===o?yield qS(c.cancel()):t.locked&&c.releaseLock()}return yield qS(null)}))}(t)),fromNodeStream:t=>eC(function(t){return YS(this,arguments,(function*(){const e=[];let n,r,i,o="error",s=!1,a=null,l=0,c=[];function u(){return"peek"===n?nA(c,r)[0]:([i,c,l]=nA(c,r),i)}if(({cmd:n,size:r}=yield yield qS(null)),t.isTTY)return yield yield qS(new Uint8Array(0)),yield qS(null);try{e[0]=rC(t,"end"),e[1]=rC(t,"error");do{if(e[2]=rC(t,"readable"),[o,a]=yield qS(Promise.race(e.map((t=>t[2])))),"error"===o)break;if((s="end"===o)||(Number.isFinite(r-l)?(i=oA(t.read(r-l)),i.byteLength<r-l&&(i=oA(t.read()))):i=oA(t.read()),i.byteLength>0&&(c.push(i),l+=i.byteLength)),s||r<=l)do{({cmd:n,size:r}=yield yield qS(u()))}while(r<l)}while(!s)}finally{yield qS(d(e,"error"===o?a:null))}return yield qS(null);function d(e,n){return i=c=null,new Promise(((r,i)=>{for(const[n,s]of e)t.off(n,s);try{const e=t.destroy;e&&e.call(t,n),n=void 0}catch(o){n=o||n}finally{null!=n?i(n):r()}}))}}))}(t)),toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}},eC=t=>(t.next(),t);class nC{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch((()=>{}))}get closed(){return this.reader?this.reader.closed.catch((()=>{})):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return GS(this,void 0,void 0,(function*(){const{reader:e,source:n}=this;e&&(yield e.cancel(t).catch((()=>{}))),n&&n.locked&&this.releaseLock()}))}read(t){return GS(this,void 0,void 0,(function*(){if(0===t)return{done:null==this.reader,value:new Uint8Array(0)};const e=yield this.reader.read();return!e.done&&(e.value=oA(e)),e}))}}const rC=(t,e)=>{const n=t=>r([e,t]);let r;return[e,n,new Promise((i=>(r=i)&&t.once(e,n)))]};const iC=Object.freeze({done:!0,value:void 0});class oC{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class sC{tee(){return this._getDOMStream().tee()}pipe(t,e){return this._getNodeStream().pipe(t,e)}pipeTo(t,e){return this._getDOMStream().pipeTo(t,e)}pipeThrough(t,e){return this._getDOMStream().pipeThrough(t,e)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class aC extends sC{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}get closed(){return this._closedPromise}cancel(t){return GS(this,void 0,void 0,(function*(){yield this.return(t)}))}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(iC);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return tC.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return tC.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return GS(this,void 0,void 0,(function*(){return yield this.abort(t),iC}))}return(t){return GS(this,void 0,void 0,(function*(){return yield this.close(),iC}))}read(t){return GS(this,void 0,void 0,(function*(){return(yield this.next(t,"read")).value}))}peek(t){return GS(this,void 0,void 0,(function*(){return(yield this.next(t,"peek")).value}))}next(){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise(((t,e)=>{this.resolvers.push({resolve:t,reject:e})})):Promise.resolve(iC)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class lC extends aC{write(t){if((t=oA(t)).byteLength>0)return super.write(t)}toString(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?$S(this.toUint8Array(!0)):this.toUint8Array(!1).then($S)}toUint8Array(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?nA(this._values)[0]:(()=>GS(this,void 0,void 0,(function*(){var t,e;const n=[];let r=0;try{for(var i,o=ZS(this);!(i=yield o.next()).done;){const t=i.value;n.push(t),r+=t.byteLength}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=o.return)&&(yield e.call(o))}finally{if(t)throw t.error}}return nA(n,r)[0]})))()}}class cC{constructor(t){t&&(this.source=new dC(tC.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class uC{constructor(t){t instanceof uC?this.source=t.source:t instanceof lC?this.source=new hC(tC.fromAsyncIterable(t)):US(t)?this.source=new hC(tC.fromNodeStream(t)):jS(t)?this.source=new hC(tC.fromDOMStream(t)):zS(t)?this.source=new hC(tC.fromDOMStream(t.body)):LS(t)?this.source=new hC(tC.fromIterable(t)):(OS(t)||RS(t))&&(this.source=new hC(tC.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class dC{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"read";return this.source.next({cmd:e,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||iC)}return(t){return Object.create(this.source.return&&this.source.return(t)||iC)}}class hC{constructor(t){this.source=t,this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}cancel(t){return GS(this,void 0,void 0,(function*(){yield this.return(t)}))}get closed(){return this._closedPromise}read(t){return GS(this,void 0,void 0,(function*(){return(yield this.next(t,"read")).value}))}peek(t){return GS(this,void 0,void 0,(function*(){return(yield this.next(t,"peek")).value}))}next(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"read";return GS(this,void 0,void 0,(function*(){return yield this.source.next({cmd:e,size:t})}))}throw(t){return GS(this,void 0,void 0,(function*(){const e=this.source.throw&&(yield this.source.throw(t))||iC;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}))}return(t){return GS(this,void 0,void 0,(function*(){const e=this.source.return&&(yield this.source.return(t))||iC;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}))}}class fC extends cC{constructor(t,e){super(),this.position=0,this.buffer=oA(t),this.size="undefined"===typeof e?this.buffer.byteLength:e}readInt32(t){const{buffer:e,byteOffset:n}=this.readAt(t,4);return new DataView(e,n).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:e,size:n,position:r}=this;return e&&r<n?("number"!==typeof t&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(n,r+Math.min(n-r,t)),e.subarray(r,this.position)):null}readAt(t,e){const n=this.buffer,r=Math.min(this.size,t+e);return n?n.subarray(t,r):new Uint8Array(e)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class pC extends uC{constructor(t,e){super(),this.position=0,this._handle=t,"number"===typeof e?this.size=e:this._pending=(()=>GS(this,void 0,void 0,(function*(){this.size=(yield t.stat()).size,delete this._pending})))()}readInt32(t){return GS(this,void 0,void 0,(function*(){const{buffer:e,byteOffset:n}=yield this.readAt(t,4);return new DataView(e,n).getInt32(0,!0)}))}seek(t){return GS(this,void 0,void 0,(function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size}))}read(t){return GS(this,void 0,void 0,(function*(){this._pending&&(yield this._pending);const{_handle:e,size:n,position:r}=this;if(e&&r<n){"number"!==typeof t&&(t=Number.POSITIVE_INFINITY);let i=r,o=0,s=0;const a=Math.min(n,i+Math.min(n-i,t)),l=new Uint8Array(Math.max(0,(this.position=a)-i));for(;(i+=s)<a&&(o+=s)<l.byteLength;)({bytesRead:s}=yield e.read(l,o,l.byteLength-o,i));return l}return null}))}readAt(t,e){return GS(this,void 0,void 0,(function*(){this._pending&&(yield this._pending);const{_handle:n,size:r}=this;if(n&&t+e<r){const i=Math.min(r,t+e),o=new Uint8Array(i-t);return(yield n.read(o,0,e,t)).buffer}return new Uint8Array(e)}))}close(){return GS(this,void 0,void 0,(function*(){const t=this._handle;this._handle=null,t&&(yield t.close())}))}throw(t){return GS(this,void 0,void 0,(function*(){return yield this.close(),{done:!0,value:t}}))}return(t){return GS(this,void 0,void 0,(function*(){return yield this.close(),{done:!0,value:t}}))}}function gC(t){return t<0&&(t=4294967295+t+1),"0x".concat(t.toString(16))}const mC=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class yC{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const e=new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]),n=new Uint32Array([t.buffer[1]>>>16,65535&t.buffer[1],t.buffer[0]>>>16,65535&t.buffer[0]]);let r=e[3]*n[3];this.buffer[0]=65535&r;let i=r>>>16;return r=e[2]*n[3],i+=r,r=e[3]*n[2]>>>0,i+=r,this.buffer[0]+=i<<16,this.buffer[1]=i>>>0<r?65536:0,this.buffer[1]+=i>>>16,this.buffer[1]+=e[1]*n[3]+e[2]*n[2]+e[3]*n[1],this.buffer[1]+=e[0]*n[3]+e[1]*n[2]+e[2]*n[1]+e[3]*n[0]<<16,this}_plus(t){const e=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],e<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=e}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return"".concat(gC(this.buffer[1])," ").concat(gC(this.buffer[0]))}}class vC extends yC{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return vC.fromString("string"===typeof t?t:t.toString(),e)}static fromNumber(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return vC.fromString(t.toString(),e)}static fromString(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);const n=t.length,r=new vC(e);for(let i=0;i<n;){const e=8<n-i?8:n-i,o=new vC(new Uint32Array([Number.parseInt(t.slice(i,i+e),10),0])),s=new vC(new Uint32Array([mC[e],0]));r.times(s),r.plus(o),i+=e}return r}static convertArray(t){const e=new Uint32Array(2*t.length);for(let n=-1,r=t.length;++n<r;)vC.from(t[n],new Uint32Array(e.buffer,e.byteOffset+2*n*4,2));return e}static multiply(t,e){return new vC(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new vC(new Uint32Array(t.buffer)).plus(e)}}class bC extends yC{negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const e=this.buffer[1]|0,n=t.buffer[1]|0;return e<n||e===n&&this.buffer[0]<t.buffer[0]}static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return bC.fromString("string"===typeof t?t:t.toString(),e)}static fromNumber(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return bC.fromString(t.toString(),e)}static fromString(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);const n=t.startsWith("-"),r=t.length,i=new bC(e);for(let o=n?1:0;o<r;){const e=8<r-o?8:r-o,n=new bC(new Uint32Array([Number.parseInt(t.slice(o,o+e),10),0])),s=new bC(new Uint32Array([mC[e],0]));i.times(s),i.plus(n),o+=e}return n?i.negate():i}static convertArray(t){const e=new Uint32Array(2*t.length);for(let n=-1,r=t.length;++n<r;)bC.from(t[n],new Uint32Array(e.buffer,e.byteOffset+2*n*4,2));return e}static multiply(t,e){return new bC(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new bC(new Uint32Array(t.buffer)).plus(e)}}class _C{constructor(t){this.buffer=t}high(){return new bC(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new bC(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this}times(t){const e=new vC(new Uint32Array([this.buffer[3],0])),n=new vC(new Uint32Array([this.buffer[2],0])),r=new vC(new Uint32Array([this.buffer[1],0])),i=new vC(new Uint32Array([this.buffer[0],0])),o=new vC(new Uint32Array([t.buffer[3],0])),s=new vC(new Uint32Array([t.buffer[2],0])),a=new vC(new Uint32Array([t.buffer[1],0])),l=new vC(new Uint32Array([t.buffer[0],0]));let c=vC.multiply(i,l);this.buffer[0]=c.low();const u=new vC(new Uint32Array([c.high(),0]));c=vC.multiply(r,l),u.plus(c),c=vC.multiply(i,a),u.plus(c),this.buffer[1]=u.low(),this.buffer[3]=u.lessThan(c)?1:0,this.buffer[2]=u.high();return new vC(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(vC.multiply(n,l)).plus(vC.multiply(r,a)).plus(vC.multiply(i,s)),this.buffer[3]+=vC.multiply(e,l).plus(vC.multiply(n,a)).plus(vC.multiply(r,s)).plus(vC.multiply(i,o)).low(),this}plus(t){const e=new Uint32Array(4);return e[3]=this.buffer[3]+t.buffer[3]>>>0,e[2]=this.buffer[2]+t.buffer[2]>>>0,e[1]=this.buffer[1]+t.buffer[1]>>>0,e[0]=this.buffer[0]+t.buffer[0]>>>0,e[0]<this.buffer[0]>>>0&&++e[1],e[1]<this.buffer[1]>>>0&&++e[2],e[2]<this.buffer[2]>>>0&&++e[3],this.buffer[3]=e[3],this.buffer[2]=e[2],this.buffer[1]=e[1],this.buffer[0]=e[0],this}hex(){return"".concat(gC(this.buffer[3])," ").concat(gC(this.buffer[2])," ").concat(gC(this.buffer[1])," ").concat(gC(this.buffer[0]))}static multiply(t,e){return new _C(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new _C(new Uint32Array(t.buffer)).plus(e)}static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(4);return _C.fromString("string"===typeof t?t:t.toString(),e)}static fromNumber(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(4);return _C.fromString(t.toString(),e)}static fromString(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(4);const n=t.startsWith("-"),r=t.length,i=new _C(e);for(let o=n?1:0;o<r;){const e=8<r-o?8:r-o,n=new _C(new Uint32Array([Number.parseInt(t.slice(o,o+e),10),0,0,0])),s=new _C(new Uint32Array([mC[e],0,0,0]));i.times(s),i.plus(n),o+=e}return n?i.negate():i}static convertArray(t){const e=new Uint32Array(4*t.length);for(let n=-1,r=t.length;++n<r;)_C.from(t[n],new Uint32Array(e.buffer,e.byteOffset+16*n,4));return e}}class wC extends cE{constructor(t,e,n,r){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=e,this.buffers=n,this.dictionaries=r}visit(t){return super.visit(t instanceof oP?t.type:t)}visitNull(t){let{length:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return rP({type:t,length:e})}visitBool(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return rP({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitInt(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return rP({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitFloat(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return rP({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitUtf8(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return rP({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return rP({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return rP({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDate(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return rP({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitTimestamp(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return rP({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitTime(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return rP({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDecimal(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return rP({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitList(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return rP({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return rP({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===dS.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return rP({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return rP({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return rP({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return rP({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitFixedSizeList(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return rP({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),child:this.visit(t.children[0])})}visitMap(t){let{length:e,nullCount:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return rP({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.nextBufferRange();return e>0&&this.readData(t,n)||new Uint8Array(0)}readOffsets(t,e){return this.readData(t,e)}readTypeIds(t,e){return this.readData(t,e)}readData(t){let{length:e,offset:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();return this.bytes.subarray(n,n+e)}readDictionary(t){return this.dictionaries.get(t.id)}}class xC extends wC{constructor(t,e,n,r){super(new Uint8Array(0),e,n,r),this.sources=t}readNullBitmap(t,e){let{offset:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.nextBufferRange();return e<=0?new Uint8Array(0):LT(this.sources[n])}readOffsets(t){let{offset:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();return rA(Uint8Array,rA(Int32Array,this.sources[e]))}readTypeIds(t){let{offset:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();return rA(Uint8Array,rA(t.ArrayType,this.sources[e]))}readData(t){let{offset:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();const{sources:n}=this;return jA.isTimestamp(t)||(jA.isInt(t)||jA.isTime(t))&&64===t.bitWidth||jA.isDate(t)&&t.unit===fS.MILLISECOND?rA(Uint8Array,bC.convertArray(n[e])):jA.isDecimal(t)?rA(Uint8Array,_C.convertArray(n[e])):jA.isBinary(t)||jA.isFixedSizeBinary(t)?function(t){const e=t.join(""),n=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2)n[r>>1]=Number.parseInt(e.slice(r,r+2),16);return n}(n[e]):jA.isBool(t)?LT(n[e]):jA.isUtf8(t)?JS(n[e].join("")):rA(Uint8Array,rA(t.ArrayType,n[e].map((t=>+t))))}}var SC,AC,EC,TC,PC,CC,IC,MC;!function(t){t[t.BUFFER=0]="BUFFER"}(SC||(SC={})),function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"}(AC||(AC={}));class kC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBodyCompression(t,e){return(e||new kC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,e){return t.setPosition(t.position()+4),(e||new kC).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):AC.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):SC.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,e){t.addFieldInt8(0,e,AC.LZ4_FRAME)}static addMethod(t,e){t.addFieldInt8(1,e,SC.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,e,n){return kC.startBodyCompression(t),kC.addCodec(t,e),kC.addMethod(t,n),kC.endBodyCompression(t)}}class OC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()}}class LC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()}}class RC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRecordBatch(t,e){return(e||new RC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,e){return t.setPosition(t.position()+4),(e||new RC).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new LC).__init(this.bb.__vector(this.bb_pos+n)+16*t,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new OC).__init(this.bb.__vector(this.bb_pos+n)+16*t,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const e=this.bb.__offset(this.bb_pos,10);return e?(t||new kC).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addNodes(t,e){t.addFieldOffset(1,e,0)}static startNodesVector(t,e){t.startVector(16,e,8)}static addBuffers(t,e){t.addFieldOffset(2,e,0)}static startBuffersVector(t,e){t.startVector(16,e,8)}static addCompression(t,e){t.addFieldOffset(3,e,0)}static endRecordBatch(t){return t.endObject()}}class FC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryBatch(t,e){return(e||new FC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,e){return t.setPosition(t.position()+4),(e||new FC).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new RC).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startDictionaryBatch(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addData(t,e){t.addFieldOffset(1,e,0)}static addIsDelta(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryBatch(t){return t.endObject()}}!function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(EC||(EC={}));class BC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFloatingPoint(t,e){return(e||new BC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,e){return t.setPosition(t.position()+4),(e||new BC).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):EC.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,e){t.addFieldInt16(0,e,EC.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,e){return BC.startFloatingPoint(t),BC.addPrecision(t,e),BC.endFloatingPoint(t)}}class NC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDecimal(t,e){return(e||new NC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,e){return t.setPosition(t.position()+4),(e||new NC).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,e){t.addFieldInt32(0,e,0)}static addScale(t,e){t.addFieldInt32(1,e,0)}static addBitWidth(t,e){t.addFieldInt32(2,e,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,e,n,r){return NC.startDecimal(t),NC.addPrecision(t,e),NC.addScale(t,n),NC.addBitWidth(t,r),NC.endDecimal(t)}}!function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}(TC||(TC={}));class zC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDate(t,e){return(e||new zC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,e){return t.setPosition(t.position()+4),(e||new zC).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):TC.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,TC.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,e){return zC.startDate(t),zC.addUnit(t,e),zC.endDate(t)}}!function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}(PC||(PC={}));class DC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTime(t,e){return(e||new DC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,e){return t.setPosition(t.position()+4),(e||new DC).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):PC.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,PC.MILLISECOND)}static addBitWidth(t,e){t.addFieldInt32(1,e,32)}static endTime(t){return t.endObject()}static createTime(t,e,n){return DC.startTime(t),DC.addUnit(t,e),DC.addBitWidth(t,n),DC.endTime(t)}}class jC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTimestamp(t,e){return(e||new jC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,e){return t.setPosition(t.position()+4),(e||new jC).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):PC.SECOND}timezone(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,PC.SECOND)}static addTimezone(t,e){t.addFieldOffset(1,e,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,e,n){return jC.startTimestamp(t),jC.addUnit(t,e),jC.addTimezone(t,n),jC.endTimestamp(t)}}!function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(CC||(CC={}));class UC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInterval(t,e){return(e||new UC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,e){return t.setPosition(t.position()+4),(e||new UC).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):CC.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,CC.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,e){return UC.startInterval(t),UC.addUnit(t,e),UC.endInterval(t)}}!function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}(IC||(IC={}));class VC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUnion(t,e){return(e||new VC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,e){return t.setPosition(t.position()+4),(e||new VC).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):IC.Sparse}typeIds(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,e){t.addFieldInt16(0,e,IC.Sparse)}static addTypeIds(t,e){t.addFieldOffset(1,e,0)}static createTypeIdsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}static startTypeIdsVector(t,e){t.startVector(4,e,4)}static endUnion(t){return t.endObject()}static createUnion(t,e,n){return VC.startUnion(t),VC.addMode(t,e),VC.addTypeIds(t,n),VC.endUnion(t)}}class WC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeBinary(t,e){return(e||new WC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,e){return t.setPosition(t.position()+4),(e||new WC).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,e){return WC.startFixedSizeBinary(t),WC.addByteWidth(t,e),WC.endFixedSizeBinary(t)}}class GC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeList(t,e){return(e||new GC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,e){return t.setPosition(t.position()+4),(e||new GC).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,e){return GC.startFixedSizeList(t),GC.addListSize(t,e),GC.endFixedSizeList(t)}}class HC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMap(t,e){return(e||new HC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,e){return t.setPosition(t.position()+4),(e||new HC).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startMap(t){t.startObject(1)}static addKeysSorted(t,e){t.addFieldInt8(0,+e,0)}static endMap(t){return t.endObject()}static createMap(t,e){return HC.startMap(t),HC.addKeysSorted(t,e),HC.endMap(t)}}!function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}(MC||(MC={}));class qC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMessage(t,e){return(e||new qC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,e){return t.setPosition(t.position()+4),(e||new qC).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):BP.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):MC.NONE}header(t){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new VP).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,BP.V1)}static addHeaderType(t,e){t.addFieldInt8(1,e,MC.NONE)}static addHeader(t,e){t.addFieldOffset(2,e,0)}static addBodyLength(t,e){t.addFieldInt64(3,e,t.createLong(0,0))}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,e){t.finish(e)}static finishSizePrefixedMessageBuffer(t,e){t.finish(e,void 0,!0)}static createMessage(t,e,n,r,i,o){return qC.startMessage(t),qC.addVersion(t,e),qC.addHeaderType(t,n),qC.addHeader(t,r),qC.addBodyLength(t,i),qC.addCustomMetadata(t,o),qC.endMessage(t)}}class YC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNull(t,e){return(e||new YC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,e){return t.setPosition(t.position()+4),(e||new YC).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return YC.startNull(t),YC.endNull(t)}}class XC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBinary(t,e){return(e||new XC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,e){return t.setPosition(t.position()+4),(e||new XC).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return XC.startBinary(t),XC.endBinary(t)}}class ZC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBool(t,e){return(e||new ZC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,e){return t.setPosition(t.position()+4),(e||new ZC).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return ZC.startBool(t),ZC.endBool(t)}}class KC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUtf8(t,e){return(e||new KC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,e){return t.setPosition(t.position()+4),(e||new KC).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return KC.startUtf8(t),KC.endUtf8(t)}}class $C{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsList(t,e){return(e||new $C).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,e){return t.setPosition(t.position()+4),(e||new $C).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return $C.startList(t),$C.endList(t)}}class QC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsStruct_(t,e){return(e||new QC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,e){return t.setPosition(t.position()+4),(e||new QC).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return QC.startStruct_(t),QC.endStruct_(t)}}var JC=RP;const tI=new class extends cE{visit(t,e){return null==t||null==e?void 0:super.visit(t,e)}visitNull(t,e){return YC.startNull(e),YC.endNull(e)}visitInt(t,e){return WP.startInt(e),WP.addBitWidth(e,t.bitWidth),WP.addIsSigned(e,t.isSigned),WP.endInt(e)}visitFloat(t,e){return BC.startFloatingPoint(e),BC.addPrecision(e,t.precision),BC.endFloatingPoint(e)}visitBinary(t,e){return XC.startBinary(e),XC.endBinary(e)}visitBool(t,e){return ZC.startBool(e),ZC.endBool(e)}visitUtf8(t,e){return KC.startUtf8(e),KC.endUtf8(e)}visitDecimal(t,e){return NC.startDecimal(e),NC.addScale(e,t.scale),NC.addPrecision(e,t.precision),NC.addBitWidth(e,t.bitWidth),NC.endDecimal(e)}visitDate(t,e){return zC.startDate(e),zC.addUnit(e,t.unit),zC.endDate(e)}visitTime(t,e){return DC.startTime(e),DC.addUnit(e,t.unit),DC.addBitWidth(e,t.bitWidth),DC.endTime(e)}visitTimestamp(t,e){const n=t.timezone&&e.createString(t.timezone)||void 0;return jC.startTimestamp(e),jC.addUnit(e,t.unit),void 0!==n&&jC.addTimezone(e,n),jC.endTimestamp(e)}visitInterval(t,e){return UC.startInterval(e),UC.addUnit(e,t.unit),UC.endInterval(e)}visitList(t,e){return $C.startList(e),$C.endList(e)}visitStruct(t,e){return QC.startStruct_(e),QC.endStruct_(e)}visitUnion(t,e){VC.startTypeIdsVector(e,t.typeIds.length);const n=VC.createTypeIdsVector(e,t.typeIds);return VC.startUnion(e),VC.addMode(e,t.mode),VC.addTypeIds(e,n),VC.endUnion(e)}visitDictionary(t,e){const n=this.visit(t.indices,e);return GP.startDictionaryEncoding(e),GP.addId(e,new JC(t.id,0)),GP.addIsOrdered(e,t.isOrdered),void 0!==n&&GP.addIndexType(e,n),GP.endDictionaryEncoding(e)}visitFixedSizeBinary(t,e){return WC.startFixedSizeBinary(e),WC.addByteWidth(e,t.byteWidth),WC.endFixedSizeBinary(e)}visitFixedSizeList(t,e){return GC.startFixedSizeList(e),GC.addListSize(e,t.listSize),GC.endFixedSizeList(e)}visitMap(t,e){return HC.startMap(e),HC.addKeysSorted(e,t.keysSorted),HC.endMap(e)}};function eI(t){return new hI(t.count,rI(t.columns),iI(t.columns))}function nI(t,e){return(t.children||[]).filter(Boolean).map((t=>oP.fromJSON(t,e)))}function rI(t){return(t||[]).reduce(((t,e)=>{return[...t,new gI(e.count,(n=e.VALIDITY,(n||[]).reduce(((t,e)=>t+ +(0===e)),0))),...rI(e.children)];var n}),[])}function iI(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(let n=-1,r=(t||[]).length;++n<r;){const r=t[n];r.VALIDITY&&e.push(new pI(e.length,r.VALIDITY.length)),r.TYPE&&e.push(new pI(e.length,r.TYPE.length)),r.OFFSET&&e.push(new pI(e.length,r.OFFSET.length)),r.DATA&&e.push(new pI(e.length,r.DATA.length)),e=iI(r.children,e)}return e}function oI(t){return new Map(Object.entries(t||{}))}function sI(t){return new VA(t.isSigned,t.bitWidth)}function aI(t,e){const n=t.type.name;switch(n){case"NONE":case"null":return new UA;case"binary":return new HA;case"utf8":return new qA;case"bool":return new YA;case"list":return new JA((e||[])[0]);case"struct":case"struct_":return new tE(e||[])}switch(n){case"int":{const e=t.type;return new VA(e.isSigned,e.bitWidth)}case"floatingpoint":{const e=t.type;return new GA(hS[e.precision])}case"decimal":{const e=t.type;return new XA(e.scale,e.precision,e.bitWidth)}case"date":{const e=t.type;return new ZA(fS[e.unit])}case"time":{const e=t.type;return new KA(pS[e.unit],e.bitWidth)}case"timestamp":{const e=t.type;return new $A(pS[e.unit],e.timezone)}case"interval":{const e=t.type;return new QA(gS[e.unit])}case"union":{const n=t.type;return new eE(dS[n.mode],n.typeIds||[],e||[])}case"fixedsizebinary":{const e=t.type;return new nE(e.byteWidth)}case"fixedsizelist":{const n=t.type;return new rE(n.listSize,(e||[])[0])}case"map":{const n=t.type;return new iE((e||[])[0],n.keysSorted)}}throw new Error('Unrecognized type: "'.concat(n,'"'))}var lI=RP,cI=UP,uI=jP;class dI{constructor(t,e,n,r){this._version=e,this._headerType=n,this.body=new Uint8Array(0),r&&(this._createHeader=()=>r),this._bodyLength="number"===typeof t?t:t.low}static fromJSON(t,e){const n=new dI(0,uS.V4,e);return n._createHeader=function(t,e){return()=>{switch(e){case mS.Schema:return iP.fromJSON(t);case mS.RecordBatch:return hI.fromJSON(t);case mS.DictionaryBatch:return fI.fromJSON(t)}throw new Error("Unrecognized Message type: { name: ".concat(mS[e],", type: ").concat(e," }"))}}(t,e),n}static decode(t){t=new uI(oA(t));const e=qC.getRootAsMessage(t),n=e.bodyLength(),r=e.version(),i=e.headerType(),o=new dI(n,r,i);return o._createHeader=function(t,e){return()=>{switch(e){case mS.Schema:return iP.decode(t.header(new qP));case mS.RecordBatch:return hI.decode(t.header(new RC),t.version());case mS.DictionaryBatch:return fI.decode(t.header(new FC),t.version())}throw new Error("Unrecognized Message type: { name: ".concat(mS[e],", type: ").concat(e," }"))}}(e,i),o}static encode(t){const e=new cI;let n=-1;return t.isSchema()?n=iP.encode(e,t.header()):t.isRecordBatch()?n=hI.encode(e,t.header()):t.isDictionaryBatch()&&(n=fI.encode(e,t.header())),qC.startMessage(e),qC.addVersion(e,uS.V4),qC.addHeader(e,n),qC.addHeaderType(e,t.headerType),qC.addBodyLength(e,new lI(t.bodyLength,0)),qC.finishMessageBuffer(e,qC.endMessage(e)),e.asUint8Array()}static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t instanceof iP)return new dI(0,uS.V4,mS.Schema,t);if(t instanceof hI)return new dI(e,uS.V4,mS.RecordBatch,t);if(t instanceof fI)return new dI(e,uS.V4,mS.DictionaryBatch,t);throw new Error("Unrecognized Message header: ".concat(t))}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===mS.Schema}isRecordBatch(){return this.headerType===mS.RecordBatch}isDictionaryBatch(){return this.headerType===mS.DictionaryBatch}}class hI{constructor(t,e,n){this._nodes=e,this._buffers=n,this._length="number"===typeof t?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class fI{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._data=t,this._isDelta=n,this._id="number"===typeof e?e:e.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class pI{constructor(t,e){this.offset="number"===typeof t?t:t.low,this.length="number"===typeof e?e:e.low}}class gI{constructor(t,e){this.length="number"===typeof t?t:t.low,this.nullCount="number"===typeof e?e:e.low}}function mI(t,e){const n=[];for(let r,i=-1,o=-1,s=t.childrenLength();++i<s;)(r=t.children(i))&&(n[++o]=oP.decode(r,e));return n}function yI(t){const e=new Map;if(t)for(let n,r,i=-1,o=Math.trunc(t.customMetadataLength());++i<o;)(n=t.customMetadata(i))&&null!=(r=n.key())&&e.set(r,n.value());return e}function vI(t){return new VA(t.isSigned(),t.bitWidth())}function bI(t,e){const n=t.typeType();switch(n){case DP.NONE:case DP.Null:return new UA;case DP.Binary:return new HA;case DP.Utf8:return new qA;case DP.Bool:return new YA;case DP.List:return new JA((e||[])[0]);case DP.Struct_:return new tE(e||[])}switch(n){case DP.Int:{const e=t.type(new WP);return new VA(e.isSigned(),e.bitWidth())}case DP.FloatingPoint:{const e=t.type(new BC);return new GA(e.precision())}case DP.Decimal:{const e=t.type(new NC);return new XA(e.scale(),e.precision(),e.bitWidth())}case DP.Date:{const e=t.type(new zC);return new ZA(e.unit())}case DP.Time:{const e=t.type(new DC);return new KA(e.unit(),e.bitWidth())}case DP.Timestamp:{const e=t.type(new jC);return new $A(e.unit(),e.timezone())}case DP.Interval:{const e=t.type(new UC);return new QA(e.unit())}case DP.Union:{const n=t.type(new VC);return new eE(n.mode(),n.typeIdsArray()||[],e||[])}case DP.FixedSizeBinary:{const e=t.type(new WC);return new nE(e.byteWidth())}case DP.FixedSizeList:{const n=t.type(new GC);return new rE(n.listSize(),(e||[])[0])}case DP.Map:{const n=t.type(new HC);return new iE((e||[])[0],n.keysSorted())}}throw new Error('Unrecognized type: "'.concat(DP[n],'" (').concat(n,")"))}oP.encode=function(t,e){let n=-1,r=-1,i=-1;const o=e.type;let s=e.typeId;jA.isDictionary(o)?(s=o.dictionary.typeId,i=tI.visit(o,t),r=tI.visit(o.dictionary,t)):r=tI.visit(o,t);const a=(o.children||[]).map((e=>oP.encode(t,e))),l=HP.createChildrenVector(t,a),c=e.metadata&&e.metadata.size>0?HP.createCustomMetadataVector(t,[...e.metadata].map((e=>{let[n,r]=e;const i=t.createString("".concat(n)),o=t.createString("".concat(r));return VP.startKeyValue(t),VP.addKey(t,i),VP.addValue(t,o),VP.endKeyValue(t)}))):-1;e.name&&(n=t.createString(e.name));HP.startField(t),HP.addType(t,r),HP.addTypeType(t,s),HP.addChildren(t,l),HP.addNullable(t,!!e.nullable),-1!==n&&HP.addName(t,n);-1!==i&&HP.addDictionary(t,i);-1!==c&&HP.addCustomMetadata(t,c);return HP.endField(t)},oP.decode=function(t,e){let n,r,i,o,s,a;e&&(a=t.dictionary())?e.has(n=a.id().low)?(o=(o=a.indexType())?vI(o):new WA,s=new aE(e.get(n),o,n,a.isOrdered()),r=new oP(t.name(),s,t.nullable(),yI(t))):(o=(o=a.indexType())?vI(o):new WA,e.set(n,i=bI(t,mI(t,e))),s=new aE(i,o,n,a.isOrdered()),r=new oP(t.name(),s,t.nullable(),yI(t))):(i=bI(t,mI(t,e)),r=new oP(t.name(),i,t.nullable(),yI(t)));return r||null},oP.fromJSON=function(t,e){let n,r,i,o,s,a;return e&&(o=t.dictionary)?e.has(n=o.id)?(r=(r=o.indexType)?sI(r):new WA,a=new aE(e.get(n),r,n,o.isOrdered),i=new oP(t.name,a,t.nullable,oI(t.customMetadata))):(r=(r=o.indexType)?sI(r):new WA,e.set(n,s=aI(t,nI(t,e))),a=new aE(s,r,n,o.isOrdered),i=new oP(t.name,a,t.nullable,oI(t.customMetadata))):(s=aI(t,nI(t,e)),i=new oP(t.name,s,t.nullable,oI(t.customMetadata))),i||null},iP.encode=function(t,e){const n=e.fields.map((e=>oP.encode(t,e)));qP.startFieldsVector(t,n.length);const r=qP.createFieldsVector(t,n),i=e.metadata&&e.metadata.size>0?qP.createCustomMetadataVector(t,[...e.metadata].map((e=>{let[n,r]=e;const i=t.createString("".concat(n)),o=t.createString("".concat(r));return VP.startKeyValue(t),VP.addKey(t,i),VP.addValue(t,o),VP.endKeyValue(t)}))):-1;qP.startSchema(t),qP.addFields(t,r),qP.addEndianness(t,_I?NP.Little:NP.Big),-1!==i&&qP.addCustomMetadata(t,i);return qP.endSchema(t)},iP.decode=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;const n=function(t,e){const n=[];for(let r,i=-1,o=-1,s=t.fieldsLength();++i<s;)(r=t.fields(i))&&(n[++o]=oP.decode(r,e));return n}(t,e);return new iP(n,yI(t),e)},iP.fromJSON=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;return new iP(function(t,e){return(t.fields||[]).filter(Boolean).map((t=>oP.fromJSON(t,e)))}(t,e),oI(t.customMetadata),e)},hI.encode=function(t,e){const n=e.nodes||[],r=e.buffers||[];RC.startNodesVector(t,n.length);for(const s of n.slice().reverse())gI.encode(t,s);const i=t.endVector();RC.startBuffersVector(t,r.length);for(const s of r.slice().reverse())pI.encode(t,s);const o=t.endVector();return RC.startRecordBatch(t),RC.addLength(t,new lI(e.length,0)),RC.addNodes(t,i),RC.addBuffers(t,o),RC.endRecordBatch(t)},hI.decode=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uS.V4;if(null!==t.compression())throw new Error("Record batch compression not implemented");return new hI(t.length(),function(t){const e=[];for(let n,r=-1,i=-1,o=t.nodesLength();++r<o;)(n=t.nodes(r))&&(e[++i]=gI.decode(n));return e}(t),function(t,e){const n=[];for(let r,i=-1,o=-1,s=t.buffersLength();++i<s;)(r=t.buffers(i))&&(e<uS.V4&&(r.bb_pos+=8*(i+1)),n[++o]=pI.decode(r));return n}(t,e))},hI.fromJSON=eI,fI.encode=function(t,e){const n=hI.encode(t,e.data);return FC.startDictionaryBatch(t),FC.addId(t,new lI(e.id,0)),FC.addIsDelta(t,e.isDelta),FC.addData(t,n),FC.endDictionaryBatch(t)},fI.decode=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uS.V4;return new fI(hI.decode(t.data(),e),t.id(),t.isDelta())},fI.fromJSON=function(t){return new fI(eI(t.data),t.id,t.isDelta)},gI.encode=function(t,e){return LC.createFieldNode(t,new lI(e.length,0),new lI(e.nullCount,0))},gI.decode=function(t){return new gI(t.length(),t.nullCount())},pI.encode=function(t,e){return OC.createBuffer(t,new lI(e.offset,0),new lI(e.length,0))},pI.decode=function(t){return new pI(t.offset(),t.length())};const _I=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]})(),wI=t=>"Expected ".concat(mS[t]," Message in stream, but was null or length 0."),xI=t=>"Header pointer of flatbuffer-encoded ".concat(mS[t]," Message is null or length 0."),SI=(t,e)=>"Expected to read ".concat(t," metadata bytes, but only read ").concat(e,"."),AI=(t,e)=>"Expected to read ".concat(t," bytes for message body, but only read ").concat(e,".");class EI{constructor(t){this.source=t instanceof cC?t:new cC(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||-1===t.value&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?iC:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(wI(t));return e.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=oA(this.source.read(t));if(e.byteLength<t)throw new Error(AI(t,e.byteLength));return e.byteOffset%8===0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}readSchema(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=mS.Schema,n=this.readMessage(e),r=null===n||void 0===n?void 0:n.header();if(t&&!r)throw new Error(xI(e));return r}readMetadataLength(){const t=this.source.read(CI),e=t&&new jP(t),n=(null===e||void 0===e?void 0:e.readInt32(0))||0;return{done:0===n,value:n}}readMetadata(t){const e=this.source.read(t);if(!e)return iC;if(e.byteLength<t)throw new Error(SI(t,e.byteLength));return{done:!1,value:dI.decode(e)}}}class TI{constructor(t,e){this.source=t instanceof uC?t:NS(t)?new pC(t,e):new uC(t)}[Symbol.asyncIterator](){return this}next(){return GS(this,void 0,void 0,(function*(){let t;return(t=yield this.readMetadataLength()).done||-1===t.value&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?iC:t}))}throw(t){return GS(this,void 0,void 0,(function*(){return yield this.source.throw(t)}))}return(t){return GS(this,void 0,void 0,(function*(){return yield this.source.return(t)}))}readMessage(t){return GS(this,void 0,void 0,(function*(){let e;if((e=yield this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(wI(t));return e.value}))}readMessageBody(t){return GS(this,void 0,void 0,(function*(){if(t<=0)return new Uint8Array(0);const e=oA(yield this.source.read(t));if(e.byteLength<t)throw new Error(AI(t,e.byteLength));return e.byteOffset%8===0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}))}readSchema(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return GS(this,void 0,void 0,(function*(){const e=mS.Schema,n=yield this.readMessage(e),r=null===n||void 0===n?void 0:n.header();if(t&&!r)throw new Error(xI(e));return r}))}readMetadataLength(){return GS(this,void 0,void 0,(function*(){const t=yield this.source.read(CI),e=t&&new jP(t),n=(null===e||void 0===e?void 0:e.readInt32(0))||0;return{done:0===n,value:n}}))}readMetadata(t){return GS(this,void 0,void 0,(function*(){const e=yield this.source.read(t);if(!e)return iC;if(e.byteLength<t)throw new Error(SI(t,e.byteLength));return{done:!1,value:dI.decode(e)}}))}}class PI extends EI{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof oC?t:new oC(t)}next(){const{_json:t}=this;if(!this._schema){this._schema=!0;return{done:!1,value:dI.fromJSON(t.schema,mS.Schema)}}if(this._dictionaryIndex<t.dictionaries.length){const e=t.dictionaries[this._dictionaryIndex++];this._body=e.data.columns;return{done:!1,value:dI.fromJSON(e,mS.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const e=t.batches[this._batchIndex++];this._body=e.columns;return{done:!1,value:dI.fromJSON(e,mS.RecordBatch)}}return this._body=[],iC}readMessageBody(t){return function t(e){return(e||[]).reduce(((e,n)=>[...e,...n.VALIDITY&&[n.VALIDITY]||[],...n.TYPE&&[n.TYPE]||[],...n.OFFSET&&[n.OFFSET]||[],...n.DATA&&[n.DATA]||[],...t(n.children)]),[])}(this._body)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(wI(t));return e.value}readSchema(){const t=mS.Schema,e=this.readMessage(t),n=null===e||void 0===e?void 0:e.header();if(!e||!n)throw new Error(xI(t));return n}}const CI=4,II="ARROW1",MI=new Uint8Array(6);for(let n=0;n<6;n+=1)MI[n]=II.codePointAt(n);function kI(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=-1,r=MI.length;++n<r;)if(MI[n]!==t[e+n])return!1;return!0}const OI=MI.length,LI=OI+CI,RI=2*OI+CI;class FI extends sC{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const e=this._impl.open(t);return OS(e)?e.then((()=>this)):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return tC.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return tC.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof FI?t:FS(t)?function(t){return new BI(new HI(t))}(t):NS(t)?function(t){return GS(this,void 0,void 0,(function*(){const{size:e}=yield t.stat(),n=new pC(t,e);return e>=RI&&kI(yield n.readAt(0,OI+7&-8))?new DI(new GI(n)):new NI(new VI(n))}))}(t):OS(t)?(()=>GS(this,void 0,void 0,(function*(){return yield FI.from(yield t)})))():zS(t)||jS(t)||US(t)||RS(t)?function(t){return GS(this,void 0,void 0,(function*(){const e=yield t.peek(OI+7&-8);return e&&e.byteLength>=4?kI(e)?new zI(new WI(yield t.read())):new NI(new VI(t)):new NI(new VI(function(){return YS(this,arguments,(function*(){}))}()))}))}(new uC(t)):function(t){const e=t.peek(OI+7&-8);return e&&e.byteLength>=4?kI(e)?new zI(new WI(t.read())):new BI(new UI(t)):new BI(new UI(function*(){}()))}(new cC(t))}static readAll(t){return t instanceof FI?t.isSync()?YI(t):XI(t):FS(t)||ArrayBuffer.isView(t)||LS(t)||BS(t)?YI(t):XI(t)}}class BI extends FI{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return YS(this,arguments,(function*(){yield qS(yield*XS(ZS(this[Symbol.iterator]())))}))}}class NI extends FI{constructor(t){super(t),this._impl=t}readAll(){var t,e;return GS(this,void 0,void 0,(function*(){const n=new Array;try{for(var r,i=ZS(this);!(r=yield i.next()).done;){const t=r.value;n.push(t)}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=i.return)&&(yield e.call(i))}finally{if(t)throw t.error}}return n}))}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class zI extends BI{constructor(t){super(t),this._impl=t}}class DI extends NI{constructor(t){super(t),this._impl=t}}class jI{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,e){const n=this._loadVectors(t,e,this.schema.fields),r=rP({type:new tE(this.schema.fields),length:t.length,children:n});return new xP(this.schema,r)}_loadDictionaryBatch(t,e){const{id:n,isDelta:r}=t,{dictionaries:i,schema:o}=this,s=i.get(n);if(r||!s){const i=o.dictionaries.get(n),a=this._loadVectors(t.data,e,[i]);return(s&&r?s.concat(new JT(a)):new JT(a)).memoize()}return s.memoize()}_loadVectors(t,e,n){return new wC(e,t.nodes,t.buffers,this.dictionaries).visitMany(n)}}class UI extends jI{constructor(t,e){super(e),this._reader=FS(t)?new PI(this._handle=t):new EI(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=qI(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):iC}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):iC}next(){if(this.closed)return iC;let t;const{_reader:e}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const n=t.header(),r=e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,r)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const n=t.header(),r=e.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(n,r);this.dictionaries.set(n.id,i)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new EP(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class VI extends jI{constructor(t,e){super(e),this._reader=new TI(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return GS(this,void 0,void 0,(function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}))}open(t){return GS(this,void 0,void 0,(function*(){return this.closed||(this.autoDestroy=qI(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this}))}throw(t){return GS(this,void 0,void 0,(function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):iC}))}return(t){return GS(this,void 0,void 0,(function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):iC}))}next(){return GS(this,void 0,void 0,(function*(){if(this.closed)return iC;let t;const{_reader:e}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const n=t.header(),r=yield e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,r)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const n=t.header(),r=yield e.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(n,r);this.dictionaries.set(n.id,i)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new EP(this.schema)}):yield this.return()}))}_readNextMessageAndValidate(t){return GS(this,void 0,void 0,(function*(){return yield this._reader.readMessage(t)}))}}class WI extends UI{constructor(t,e){super(t instanceof fC?t:new fC(t),e)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var e;if(this.closed)return null;this._footer||this.open();const n=null===(e=this._footer)||void 0===e?void 0:e.getRecordBatch(t);if(n&&this._handle.seek(n.offset)){const t=this._reader.readMessage(mS.RecordBatch);if(null===t||void 0===t?void 0:t.isRecordBatch()){const e=t.header(),n=this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,n)}}return null}_readDictionaryBatch(t){var e;const n=null===(e=this._footer)||void 0===e?void 0:e.getDictionaryBatch(t);if(n&&this._handle.seek(n.offset)){const t=this._reader.readMessage(mS.DictionaryBatch);if(null===t||void 0===t?void 0:t.isDictionaryBatch()){const e=t.header(),n=this._reader.readMessageBody(t.bodyLength),r=this._loadDictionaryBatch(e,n);this.dictionaries.set(e.id,r)}}}_readFooter(){const{_handle:t}=this,e=t.size-LI,n=t.readInt32(e),r=t.readAt(e-n,n);return $P.decode(r)}_readNextMessageAndValidate(t){var e;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=null===(e=this._footer)||void 0===e?void 0:e.getRecordBatch(this._recordBatchIndex);if(n&&this._handle.seek(n.offset))return this._reader.readMessage(t)}return null}}class GI extends VI{constructor(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];const i="number"!==typeof n[0]?n.shift():void 0,o=n[0]instanceof Map?n.shift():void 0;super(t instanceof pC?t:new pC(t,i),o)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(t){const e=Object.create(null,{open:{get:()=>super.open}});return GS(this,void 0,void 0,(function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield e.open.call(this,t)}))}readRecordBatch(t){var e;return GS(this,void 0,void 0,(function*(){if(this.closed)return null;this._footer||(yield this.open());const n=null===(e=this._footer)||void 0===e?void 0:e.getRecordBatch(t);if(n&&(yield this._handle.seek(n.offset))){const t=yield this._reader.readMessage(mS.RecordBatch);if(null===t||void 0===t?void 0:t.isRecordBatch()){const e=t.header(),n=yield this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,n)}}return null}))}_readDictionaryBatch(t){var e;return GS(this,void 0,void 0,(function*(){const n=null===(e=this._footer)||void 0===e?void 0:e.getDictionaryBatch(t);if(n&&(yield this._handle.seek(n.offset))){const t=yield this._reader.readMessage(mS.DictionaryBatch);if(null===t||void 0===t?void 0:t.isDictionaryBatch()){const e=t.header(),n=yield this._reader.readMessageBody(t.bodyLength),r=this._loadDictionaryBatch(e,n);this.dictionaries.set(e.id,r)}}}))}_readFooter(){return GS(this,void 0,void 0,(function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const e=t.size-LI,n=yield t.readInt32(e),r=yield t.readAt(e-n,n);return $P.decode(r)}))}_readNextMessageAndValidate(t){return GS(this,void 0,void 0,(function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer.getRecordBatch(this._recordBatchIndex);if(e&&(yield this._handle.seek(e.offset)))return yield this._reader.readMessage(t)}return null}))}}class HI extends UI{constructor(t,e){super(t,e)}_loadVectors(t,e,n){return new xC(e,t.nodes,t.buffers,this.dictionaries).visitMany(n)}}function qI(t,e){return e&&"boolean"===typeof e.autoDestroy?e.autoDestroy:t.autoDestroy}function*YI(t){const e=FI.from(t);try{if(!e.open({autoDestroy:!1}).closed)do{yield e}while(!e.reset().open().closed)}finally{e.cancel()}}function XI(t){return YS(this,arguments,(function*(){const e=yield qS(FI.from(t));try{if(!(yield qS(e.open({autoDestroy:!1}))).closed)do{yield yield qS(e)}while(!(yield qS(e.reset().open())).closed)}finally{yield qS(e.cancel())}}))}class ZI extends cE{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(){const t=e=>e.flatMap((e=>Array.isArray(e)?t(e):e instanceof xP?e.data.children:e.data)),e=new ZI;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.visitMany(t(r)),e}visit(t){if(t instanceof JT)return this.visitMany(t.data),this;const{type:e}=t;if(!jA.isDictionary(e)){const{length:n,nullCount:r}=t;if(n>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");jA.isNull(e)||KI.call(this,r<=0?new Uint8Array(0):OT(t.offset,n,t.nullBitmap)),this.nodes.push(new gI(n,r))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function KI(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new pI(this._byteLength,e)),this._byteLength+=e,this}function $I(t){return KI.call(this,t.values.subarray(0,t.length*t.stride))}function QI(t){const{length:e,values:n,valueOffsets:r}=t,i=r[0],o=r[e],s=Math.min(o-i,n.byteLength-i);return KI.call(this,cA(-r[0],e,r)),KI.call(this,n.subarray(i,i+s)),this}function JI(t){const{length:e,valueOffsets:n}=t;return n&&KI.call(this,cA(n[0],e,n)),this.visit(t.children[0])}function tM(t){return this.visitMany(t.type.children.map(((e,n)=>t.children[n])).filter(Boolean))[0]}ZI.prototype.visitBool=function(t){let e;return t.nullCount>=t.length?KI.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?KI.call(this,OT(t.offset,t.length,e)):KI.call(this,LT(t.values))},ZI.prototype.visitInt=$I,ZI.prototype.visitFloat=$I,ZI.prototype.visitUtf8=QI,ZI.prototype.visitBinary=QI,ZI.prototype.visitFixedSizeBinary=$I,ZI.prototype.visitDate=$I,ZI.prototype.visitTimestamp=$I,ZI.prototype.visitTime=$I,ZI.prototype.visitDecimal=$I,ZI.prototype.visitList=JI,ZI.prototype.visitStruct=tM,ZI.prototype.visitUnion=function(t){const{type:e,length:n,typeIds:r,valueOffsets:i}=t;if(KI.call(this,r),e.mode===dS.Sparse)return tM.call(this,t);if(e.mode===dS.Dense){if(t.offset<=0)return KI.call(this,i),tM.call(this,t);{const o=r.reduce(((t,e)=>Math.max(t,e)),r[0]),s=new Int32Array(o+1),a=new Int32Array(o+1).fill(-1),l=new Int32Array(n),c=cA(-i[0],n,i);for(let t,e,i=-1;++i<n;)-1===(e=a[t=r[i]])&&(e=a[t]=c[t]),l[i]=c[i]-e,++s[t];KI.call(this,l);for(let r,i=-1,u=e.children.length;++i<u;)if(r=t.children[i]){const t=e.typeIds[i],o=Math.min(n,s[t]);this.visit(r.slice(a[t],o))}}}return this},ZI.prototype.visitInterval=$I,ZI.prototype.visitFixedSizeList=JI,ZI.prototype.visitMap=JI;class eM extends sC{constructor(t){super(),this._position=0,this._started=!1,this._sink=new lC,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,kS(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy="boolean"!==typeof t.autoDestroy||t.autoDestroy,this._writeLegacyIpcFormat="boolean"===typeof t.writeLegacyIpcFormat&&t.writeLegacyIpcFormat}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}toString(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sink.toString(t)}toUint8Array(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sink.toUint8Array(t)}writeAll(t){return OS(t)?t.then((t=>this.writeAll(t))):RS(t)?oM(this,t):iM(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._sink,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var n;return t===this._sink||t instanceof lC?this._sink=t:(this._sink=new lC,t&&(kS(n=t)&&MS(n.abort)&&MS(n.getWriter)&&!DS(n))?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&(t=>kS(t)&&MS(t.end)&&MS(t.write)&&IS(t.writable)&&!DS(t))(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,e&&bP(e,this._schema)||(null==e?(this._position=0,this._schema=null):(this._started=!0,this._schema=e,this._writeSchema(e))),this}write(t){let e=null;if(!this._sink)throw new Error("RecordBatchWriter is closed");if(null==t)return this.finish()&&void 0;if(t instanceof CP&&!(e=t.schema))return this.finish()&&void 0;if(t instanceof xP&&!(e=t.schema))return this.finish()&&void 0;if(e&&!bP(e,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,e)}t instanceof xP?t instanceof EP||this._writeRecordBatch(t):t instanceof CP?this.writeAll(t.batches):LS(t)&&this.writeAll(t)}_writeMessage(t){const e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-1,n=dI.encode(t),r=n.byteLength,i=this._writeLegacyIpcFormat?4:8,o=r+i+e&~e,s=o-r-i;return t.headerType===mS.RecordBatch?this._recordBatchBlocks.push(new JP(o,t.bodyLength,this._position)):t.headerType===mS.DictionaryBatch&&this._dictionaryBlocks.push(new JP(o,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(o-i)),r>0&&this._write(n),this._writePadding(s)}_write(t){if(this._started){const e=oA(t);e&&e.byteLength>0&&(this._sink.write(e),this._position+=e.byteLength)}return this}_writeSchema(t){return this._writeMessage(dI.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(MI)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:e,nodes:n,bufferRegions:r,buffers:i}=ZI.assemble(t),o=new hI(t.numRows,n,r),s=dI.from(o,e);return this._writeDictionaries(t)._writeMessage(s)._writeBodyBuffers(i)}_writeDictionaryBatch(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._dictionaryDeltaOffsets.set(e,t.length+(this._dictionaryDeltaOffsets.get(e)||0));const{byteLength:r,nodes:i,bufferRegions:o,buffers:s}=ZI.assemble(new JT([t])),a=new hI(t.length,i,o),l=new fI(a,e,n),c=dI.from(l,r);return this._writeMessage(c)._writeBodyBuffers(s)}_writeBodyBuffers(t){let e,n,r;for(let i=-1,o=t.length;++i<o;)(e=t[i])&&(n=e.byteLength)>0&&(this._write(e),(r=(n+7&-8)-n)>0&&this._writePadding(r));return this}_writeDictionaries(t){for(let[e,n]of t.dictionaries){let t=this._dictionaryDeltaOffsets.get(e)||0;if(0===t||(n=null===n||void 0===n?void 0:n.slice(t)).length>0)for(const r of n.data)this._writeDictionaryBatch(r,e,t>0),t+=r.length}return this}}class nM extends eM{static writeAll(t,e){const n=new nM(e);return OS(t)?t.then((t=>n.writeAll(t))):RS(t)?oM(n,t):iM(n,t)}}class rM extends eM{static writeAll(t){const e=new rM;return OS(t)?t.then((t=>e.writeAll(t))):RS(t)?oM(e,t):iM(e,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const e=$P.encode(new $P(t,uS.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(e)._write(Int32Array.of(e.byteLength))._writeMagic()}}function iM(t,e){let n=e;e instanceof CP&&(n=e.batches,t.reset(void 0,e.schema));for(const r of n)t.write(r);return t.finish()}function oM(t,e){var n,r,i,o;return GS(this,void 0,void 0,(function*(){try{for(n=ZS(e);!(r=yield n.next()).done;){const e=r.value;t.write(e)}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}return t.finish()}))}function sM(t){const e=FI.from(t);return OS(e)?e.then((t=>sM(t))):e.isAsync()?e.readAll().then((t=>new CP(t))):new CP(e.readAll())}function aM(t){return("stream"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"stream")?nM:rM).writeAll(t).toUint8Array(!0)}var lM,cM=function(){function t(t,e,n,r){var i=this;this.getCell=function(t,e){var n=t<i.headerRows&&e<i.headerColumns,r=t>=i.headerRows&&e<i.headerColumns,o=t<i.headerRows&&e>=i.headerColumns;if(n){var s=["blank"];return e>0&&s.push("level"+t),{type:"blank",classNames:s.join(" "),content:""}}if(o)return{type:"columns",classNames:(s=["col_heading","level"+t,"col"+(l=e-i.headerColumns)]).join(" "),content:i.getContent(i.columnsTable,l,t)};if(r){s=["row_heading","level"+e,"row"+(a=t-i.headerRows)];return{type:"index",id:"T_".concat(i.uuid,"level").concat(e,"_row").concat(a),classNames:s.join(" "),content:i.getContent(i.indexTable,a,e)}}s=["data","row"+(a=t-i.headerRows),"col"+(l=e-i.headerColumns)];var a,l,c=i.styler?i.getContent(i.styler.displayValuesTable,a,l):i.getContent(i.dataTable,a,l);return{type:"data",id:"T_".concat(i.uuid,"row").concat(a,"_col").concat(l),classNames:s.join(" "),content:c}},this.getContent=function(t,e,n){var r=t.getChildAt(n);return null===r?"":i.getColumnTypeId(t,n)===yS.Timestamp?i.nanosToDate(r.get(e)):r.get(e)},this.dataTable=sM(t),this.indexTable=sM(e),this.columnsTable=sM(n),this.styler=r?{caption:r.caption,displayValuesTable:sM(r.displayValues),styles:r.styles,uuid:r.uuid}:void 0}return Object.defineProperty(t.prototype,"rows",{get:function(){return this.indexTable.numRows+this.columnsTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return this.indexTable.numCols+this.columnsTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headerRows",{get:function(){return this.rows-this.dataRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headerColumns",{get:function(){return this.columns-this.dataColumns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataRows",{get:function(){return this.dataTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataColumns",{get:function(){return this.dataTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uuid",{get:function(){return this.styler&&this.styler.uuid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"caption",{get:function(){return this.styler&&this.styler.caption},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"styles",{get:function(){return this.styler&&this.styler.styles},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"table",{get:function(){return this.dataTable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.indexTable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnTable",{get:function(){return this.columnsTable},enumerable:!1,configurable:!0}),t.prototype.serialize=function(){return{data:aM(this.dataTable),index:aM(this.indexTable),columns:aM(this.columnsTable)}},t.prototype.getColumnTypeId=function(t,e){return t.schema.fields[e].type.typeId},t.prototype.nanosToDate=function(t){return new Date(t/1e6)},t}(),uM=function(){return uM=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},uM.apply(this,arguments)};!function(t){t.COMPONENT_READY="streamlit:componentReady",t.SET_COMPONENT_VALUE="streamlit:setComponentValue",t.SET_FRAME_HEIGHT="streamlit:setFrameHeight"}(lM||(lM={}));var dM=function(){function t(){}return t.API_VERSION=1,t.RENDER_EVENT="streamlit:render",t.events=new EventTarget,t.registeredMessageListener=!1,t.setComponentReady=function(){t.registeredMessageListener||(window.addEventListener("message",t.onMessageEvent),t.registeredMessageListener=!0),t.sendBackMsg(lM.COMPONENT_READY,{apiVersion:t.API_VERSION})},t.setFrameHeight=function(e){void 0===e&&(e=document.body.scrollHeight),e!==t.lastFrameHeight&&(t.lastFrameHeight=e,t.sendBackMsg(lM.SET_FRAME_HEIGHT,{height:e}))},t.setComponentValue=function(e){var n;e instanceof cM?(n="dataframe",e=e.serialize()):!function(t){var e=!1;try{e=t instanceof BigInt64Array||t instanceof BigUint64Array}catch(n){}return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array||e}(e)?e instanceof ArrayBuffer?(n="bytes",e=new Uint8Array(e)):n="json":(n="bytes",e=new Uint8Array(e.buffer)),t.sendBackMsg(lM.SET_COMPONENT_VALUE,{value:e,dataType:n})},t.onMessageEvent=function(e){if(e.data.type===t.RENDER_EVENT)t.onRenderMessage(e.data)},t.onRenderMessage=function(e){var n=e.args;null==n&&(console.error("Got null args in onRenderMessage. This should never happen"),n={});var r=e.dfs&&e.dfs.length>0?t.argsDataframeToObject(e.dfs):{};n=uM(uM({},n),r);var i=Boolean(e.disabled),o=e.theme;o&&hM(o);var s={disabled:i,args:n,theme:o},a=new CustomEvent(t.RENDER_EVENT,{detail:s});t.events.dispatchEvent(a)},t.argsDataframeToObject=function(e){var n=e.map((function(e){var n=e.key,r=e.value;return[n,t.toArrowTable(r)]}));return Object.fromEntries(n)},t.toArrowTable=function(t){var e,n=(e=t.data).data,r=e.index,i=e.columns,o=e.styler;return new cM(n,r,i,o)},t.sendBackMsg=function(t,e){window.parent.postMessage(uM({isStreamlitMessage:!0,type:t},e),"*")},t}(),hM=function(t){var e=document.createElement("style");document.head.appendChild(e),e.innerHTML="\n    :root {\n      --primary-color: ".concat(t.primaryColor,";\n      --background-color: ").concat(t.backgroundColor,";\n      --secondary-background-color: ").concat(t.secondaryBackgroundColor,";\n      --text-color: ").concat(t.textColor,";\n      --font: ").concat(t.font,";\n    }\n\n    body {\n      background-color: var(--background-color);\n      color: var(--text-color);\n    }\n  ")};var fM=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}fM(e,t),e.prototype.componentDidMount=function(){dM.setFrameHeight()},e.prototype.componentDidUpdate=function(){dM.setFrameHeight()}}(wS.PureComponent);const pM=[[0,0,0,0],[228,26,28,150],[55,126,184,150],[77,175,74,150],[152,78,163,150],[255,193,7,150],[166,86,40,150],[247,129,191,150],[153,153,153,150]],gM=function(t){var e=function(e){function n(t){var n=e.call(this,t)||this;return n.componentDidMount=function(){dM.events.addEventListener(dM.RENDER_EVENT,n.onRenderEvent),dM.setComponentReady()},n.componentDidUpdate=function(){null!=n.state.componentError&&dM.setFrameHeight()},n.componentWillUnmount=function(){dM.events.removeEventListener(dM.RENDER_EVENT,n.onRenderEvent)},n.onRenderEvent=function(t){n.setState({renderData:t.detail})},n.state={renderData:void 0,componentError:void 0},n}return fM(n,e),n.prototype.render=function(){return null!=this.state.componentError?wS.createElement("div",null,wS.createElement("h1",null,"Component Error"),wS.createElement("span",null,this.state.componentError.message)):null==this.state.renderData?null:wS.createElement(t,{width:window.innerWidth,disabled:this.state.renderData.disabled,args:this.state.renderData.args,theme:this.state.renderData.theme})},n.getDerivedStateFromError=function(t){return{componentError:t}},n}(wS.PureComponent);return _S()(e,t)}((e=>{(0,t.useEffect)((()=>dM.setFrameHeight()));const{config:n}=e.args,r=n.tileSize/2**(1+n.maxZoom),[i,o]=(0,t.useState)(0),[s,a]=(0,t.useState)([]),[l,c]=(0,t.useState)({}),[u,d]=(0,t.useState)(null),[h,f]=(0,t.useState)(!1),[p,g]=(0,t.useState)([null,null]),m=null!==p[0];(0,t.useEffect)((()=>{c(n.f2label),a(n.classes)}),[]);const y=function(t,e,n){const r=new Uint8Array(t.nrow*t.ncol*4);return Object.entries(e).forEach((e=>{let[i,o]=e;const[s,a]=t.f2coord[i],l=s*t.ncol+a,c=n.indexOf(o);-1!==c&&(r[4*l+0]=pM[c][0],r[4*l+1]=pM[c][1],r[4*l+2]=pM[c][2],r[4*l+3]=pM[c][3])})),r}(n,l,s),v={main:{target:[n.ncol*r/2,n.nrow*r/2,0],zoom:n.minZoom+2}},b=new Mm({id:"tile-layer-".concat(n.name),data:n.tiles[0],minZoom:n.minZoom,maxZoom:n.maxZoom,tileSize:n.tileSize,coordinateSystem:dr.CARTESIAN,coordinateOrigin:[0,0,0],extent:[0,0,n.ncol*r,n.nrow*r],onTileError:()=>{},renderSubLayers:t=>{const{bbox:{left:e,bottom:n,right:r,top:i}}=t.tile;return new vh(t,{data:null,image:t.data,bounds:[e,n,r,i],textureParameters:{[jm]:zm,[Dm]:zm}})}});(0,t.useEffect)((()=>{const t=async t=>{parseInt(t.key)<s.length?d((e=>s[parseInt(t.key)])):"`"===t.key?(dM.setComponentValue([l,s]),f(!1)):d((t=>null))},e=async t=>{d((t=>null)),g([null,null])};return document.addEventListener("keydown",t),document.addEventListener("keyup",e),()=>{document.removeEventListener("keydown",t),document.removeEventListener("keyup",e)}}),[i,s,l]);const _=new vh({id:"ann_layer",image:{width:n.ncol,height:n.nrow,data:y},textureParameters:{[jm]:zm,[Dm]:zm},updateTriggers:{image:[l]},extent:[0,0,n.ncol*r,n.nrow*r],bounds:[0,0,n.ncol*r,n.nrow*r],pickable:!0,onClick:t=>{null!==u&&g(m?[null,null]:t.bitmap.pixel)},onHover:t=>{let{bitmap:e}=t;if(e){if(null===u)return;const[t,v]=e.pixel;if(m){for(var r=Math.min(p[0],t),s=Math.max(p[0],t),a=Math.min(p[1],v),d=Math.max(p[1],v),h={...l},g=r;g<=s;g++)for(var y=a;y<=d;y++){const t=y*e.size.width+g;n.fnames[t]&&(h[n.fnames[t]]=u)}c(h)}else{const r=v*e.size.width+t;n.fnames[r]&&c({...l,[n.fnames[r]]:u})}o(i+1),f(!0)}}}),w=new Nm({id:"main",controller:{keyboard:{moveSpeed:100}},x:"0%",y:"0%",width:"100%",height:"100%"}),x=My({palette:{mode:"dark"}});return(0,Zy.jsxs)(Zy.Fragment,{children:[(0,Zy.jsxs)("div",{id:"left_pane",className:"split left",children:[(0,Zy.jsxs)(cS,{theme:x,children:[(0,Zy.jsx)(Jw,{id:"class-input",label:"Add Classes...",variant:"standard",onKeyDown:t=>{if("Enter"===t.key){var e;if(""===t.target.value)return;return-1!==s.indexOf(t.target.value)?void alert("Alert: ".concat(t.target.value," already exists")):9===s.length?void alert("Alert: You've hit the maximum of 9 classes!"):(t.preventDefault(),a([...s,t.target.value]),t.target.value="",null===(e=document.getElementById("class-input"))||void 0===e||e.blur(),void f(!0))}}}),(0,Zy.jsx)(Ob,{children:s.map((t=>{if(null===t)return null;let e={};if(t==u){const n=pM[s.indexOf(t)];e.color="white",e.backgroundColor="rgba(".concat(n[0],",").concat(n[1],",").concat(n[2],",").concat(n[3],")")}return(0,Zy.jsxs)(tS,{style:e,children:[" ",t," "]},t)}))})]}),h?(0,Zy.jsxs)(Zy.Fragment,{children:[" ",(0,Zy.jsx)("div",{style:{position:"absolute",bottom:"25px",color:"red"},children:" UNSAVED - Press ` to save "})," "]}):(0,Zy.jsx)(Zy.Fragment,{}),m?(0,Zy.jsxs)(Zy.Fragment,{children:[" ",(0,Zy.jsx)("div",{style:{paddingLeft:"10px",color:"blue"},children:" RECTANGULAR SELECT - Release # key to exit "})," "]}):(0,Zy.jsx)(Zy.Fragment,{})]}),(0,Zy.jsx)("div",{id:"right_pane",className:"split right",children:(0,Zy.jsx)("div",{children:(0,Zy.jsx)(sh,{views:[w],layers:[b,_],initialViewState:v,getCursor:()=>"crosshair"})})})]})}));r.render((0,Zy.jsx)(gM,{}),document.getElementById("app"))})()})();
//# sourceMappingURL=main.02b08a7b.js.map